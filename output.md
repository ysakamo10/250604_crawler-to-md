# URL: https://docs.dify.ai/ja-jp/community/contribution

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

コミュニティ

貢献者になる

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




コミュニティ

# 貢献者になる

Copy page

Difyに貢献したいと思っていることには素晴らしいと思います。私たちはあなたの貢献を心待ちにしております。スタッフも資金も限られた新興企業として、私たちはLLMアプリケーションの構築と管理のための最も直感的なワークフローを設計するという野心的な目標を持っています。そのため、コミュニティからのあらゆるサポートは貴重です。

我々の現状を考えると、柔軟かつ迅速に更新する必要がありますが、貢献者がスムーズに貢献できるようにしたいとも考えています。そのために、この貢献ガイドを作成しました。このガイドは、あなたがコードベースに慣れ、貢献者としての活動を迅速に開始できるようにすることを目的としています。

このガイドは、Dify自体と同様に、常に改善されています。時折プロジェクトの実態よりも遅れることがあるかもしれませんが、ご理解と改善のためのフィードバックを心から歓迎します。

ライセンスに関しては、時間を取って短い[ライセンスと貢献者協定](https://github.com/langgenius/dify/blob/main/LICENSE)を読んでください。また、コミュニティは[行動規範](https://github.com/langgenius/.github/blob/main/CODE_OF_CONDUCT)にも従います。

## 

​

始める前に

[既存のイシューを探す](https://github.com/langgenius/dify/issues?q=is:issue+is:closed)か、新しいイシューを[作成する](https://github.com/langgenius/dify/issues/new/choose)ことができます。イシューは次の2つのカテゴリに分かれます：

### 

​

機能リクエスト：

  * 新しい機能リクエストを行う場合は、提案する機能の目的を説明し、できるだけ詳細なコンテキストを提供してください。[@perzeusss](https://github.com/perzeuss)が作成した優れた[機能リクエスト助手](https://udify.app/chat/MK2kVSnw1gakVwMX)を使ってドラフトを作成することもできます。ぜひ試してみてください。

  * 既存のイシューから選びたい場合は、その下にコメントを残して意思を示してください。




関連するチームメンバーが関与します。うまくいけば、彼らがコーディングを開始することを承認します。それまでは、変更が提案される可能性があるため、作業を開始しないでください。

提案された機能が属する領域に応じて、異なるチームメンバーと連携する必要があります。以下は、各チームメンバーが現在取り組んでいる分野の概要です：

Member| Scope  
---|---  
[@yeuoly](https://github.com/Yeuoly)| Architecting Agents  
[@jyong](https://github.com/JohnJyong)| RAG pipeline design  
[@GarfieldDai](https://github.com/GarfieldDai)| Building workflow orchestrations  
[@iamjoel](https://github.com/iamjoel) & [@zxhlyh](https://github.com/zxhlyh)| Making our frontend a breeze to use  
[@guchenhe](https://github.com/guchenhe) & [@crazywoola](https://github.com/crazywoola)| Developer experience, points of contact for anything  
[@takatost](https://github.com/takatost)| Overall product direction and architecture  
  
優先順位の判定ルール：

Feature Type| Priority  
---|---  
High-Priority Features as being labeled by a team member| High Priority  
Popular feature requests from our [community feedback board](https://github.com/langgenius/dify/discussions/categories/ideas)| Medium Priority  
Non-core features and minor enhancements| Low Priority  
Valuable but not immediate| Future-Feature  
  
### 

​

その他（例えばバグ報告、パフォーマンス向上、タイポ修正）：

  * すぐにコーディングを開始してください。

優先順位の判定ルール：

Issue Type| Priority  
---|---  
Bugs in core functions (cannot login, applications not working, security loopholes)| Critical  
Non-critical bugs, performance boosts| Medium Priority  
Minor fixes (typos, confusing but working UI)| Low Priority  



## 

​

インストール

以下はDifyを開発用に設定する手順です：

### 

​

1\. リポジトリをフォークする

### 

​

2\. リポジトリをクローンする

ターミナルからフォークしたリポジトリをクローンします：
    
    
    git clone git@github.com:<github_username>/dify.git

### 

​

3\. 依存関係を確認する

Difyは以下のツールとライブラリに依存しています：

  * [Docker](https://www.docker.com/)
  * [Docker Compose](https://docs.docker.com/compose/install/)
  * [Node.js v18.x (LTS)](http://nodejs.org)
  * [npm](https://www.npmjs.com/) バージョン 8.x.x もしくは [Yarn](https://yarnpkg.com/)
  * [Python](https://www.python.org/) バージョン 3.10.x



### 

​

4\. インストール

Difyはバックエンドとフロントエンドで構成されています。`cd api/`を使ってバックエンドディレクトリに移動し、次は[バックエンドREADME](https://github.com/langgenius/dify/blob/main/api/README)に従ってインストールして下さい。別のターミナルで`cd web/`を使ってフロントエンドディレクトリに移動し、そして[フロントエンドREADME](https://github.com/langgenius/dify/blob/main/web/README)に従ってインストールして下さい。

一般的な問題とトラブルシューティングの手順については[インストールFAQ](/ja-jp/learn-more/faq/install-faq)を参照してください。

### 

​

5\. ブラウザでDifyにアクセスする

設定を確認するため、ブラウザを開き<http://localhost:3000>（デフォルトまたはカスタムURLとポート）にアクセスします。これでDifyが動作しているはずです。

## 

​

開発

モデルを追加提供する場合は、[このガイド](https://github.com/langgenius/dify/blob/main/api/core/model_runtime/README)を参照してください。

エージェントやワークフローにツールを追加提供する場合は、[このガイド](https://github.com/langgenius/dify/blob/main/api/core/tools/README)を参照してください。

注意点：新しいツールを提供したい場合は、必ずツールの YAML 説明ページに連絡先を残し、ドキュメント[Dify-docs](https://github.com/langgenius/dify-docs-mintlify) のコードリポジトリに対応するPRを提出してください。

貢献する部分を迅速に理解できるように、以下にDifyのバックエンドとフロントエンドの簡単な注釈付きアウトラインを示します：

### 

​

バックエンド

DifyのバックエンドはPythonで書かれており、[Flask](https://flask.palletsprojects.com/en/3.0.x/)フレームワークを使用しています。[SQLAlchemy](https://www.sqlalchemy.org/)をORMとして使用し、[Celery](https://docs.celeryq.dev/en/stable/getting-started/introduction.html)をタスクキューとして使用しています。認証ロジックはFlask-loginで処理されます。
    
    
    [api/]
    ├── constants             // コードベース全体で使用される定数設定。
    ├── controllers           // APIルート定義とリクエスト処理ロジック。           
    ├── core                  // コアアプリケーションオーケストレーション、モデル統合、ツール。
    ├── docker                // Dockerおよびコンテナ化関連の設定。
    ├── events                // イベント処理と処理
    ├── extensions            // サードパーティフレームワーク/プラットフォームとの拡張機能。
    ├── fields                // シリアライズ/マーシャリングのためのフィールド定義。
    ├── libs                  // 再利用可能なライブラリとヘルパー。
    ├── migrations            // データベース移行のためのスクリプト。
    ├── models                // データベースモデルとスキーマ定義。
    ├── services              // ビジネスロジックを指定。
    ├── storage               // 秘密鍵保管。      
    ├── tasks                 // 非同期タスクとバックグラウンドジョブの処理。
    └── tests

### 

​

フロントエンド

このWebサイトは[Next.js](https://nextjs.org/)テンプレートを使用しており、スタイリングには[Tailwind CSS](https://tailwindcss.com/)を使用しています。[React-i18next](https://react.i18next.com/)を国際化に使用しています。
    
    
    [web/]
    ├── app                   // レイアウト、ページ、およびコンポーネント
    │   ├── (commonLayout)    // アプリ全体で使用される共通レイアウト
    │   ├── (shareLayout)     // トークン固有のセッション間で共有されるレイアウト 
    │   ├── activate          // アクティベートページ
    │   ├── components        // ページとレイアウトで共有されるコンポーネント
    │   ├── install           // インストールページ
    │   ├── signin            // サインインページ
    │   └── styles            // グローバルに共有されるスタイル
    ├── assets                // 静的アセット
    ├── bin                   // ビルドステップで実行されるスクリプト
    ├── config                // 調整可能な設定とオプション 
    ├── context               // アプリの異なる部分で使用される共有コンテキスト
    ├── dictionaries          // 言語固有の翻訳ファイル 
    ├── docker                // コンテナ設定
    ├── hooks                 // 再利用可能なフック
    ├── i18n                  // 国際化設定
    ├── models                // データモデルとAPIレスポンスの形状を記述
    ├── public                // ファビコンなどのメタアセット
    ├── service               // APIアクションの形状を指定
    ├── test                  
    ├── types                 // 関数パラメータと戻り値の記述
    └── utils                 // 共有ユーティリティ関数

## 

​

PRを提出する

最後に、私たちのリポジトリにプルリクエスト（PR）を提出する時が来ました。重要な機能の場合、最初に `deploy/dev` ブランチにマージしてテストを行い、その後 `main` ブランチにマージします。マージコンフリクトが発生した場合や、プルリクエストの提出方法が分からない場合は、[GitHubのプルリクエストチュートリアル](https://docs.github.com/en/pull-requests/collaborating-with-pull-requests)を参照してください。

これで完了です！あなたのPRがマージされると、あなたは私たちの[README](https://github.com/langgenius/dify/blob/main/README_JA)に貢献者として掲載されます。

## 

​

ヘルプを求める

貢献の過程で困難に直面したり質問がある場合は、関連するGitHubのイシューで質問を提出するか、私たちの[Discord](https://discord.com/invite/8Tpq4AcN9c)に参加して迅速なコミュニケーションを行ってください。

* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/community/contribution.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20ibut&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/community%2Fcontribution.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[支援を求める](/ja-jp/community/support)[ドキュメントへの貢献](/ja-jp/community/docs-contribution)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * 始める前に
  * 機能リクエスト：
  * その他（例えばバグ報告、パフォーマンス向上、タイポ修正）：
  * インストール
  * 1\. リポジトリをフォークする
  * 2\. リポジトリをクローンする
  * 3\. 依存関係を確認する
  * 4\. インストール
  * 5\. ブラウザでDifyにアクセスする
  * 開発
  * バックエンド
  * フロントエンド
  * PRを提出する
  * ヘルプを求める



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/community/docs-contribution

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

コミュニティ

ドキュメントへの貢献

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




コミュニティ

# ドキュメントへの貢献

Copy page

Dify のヘルプドキュメントは、[オープンソースプロジェクト](https://github.com/langgenius/dify-docs)として運営されています。どのような形式の貢献も歓迎します。ドキュメントに問題を見つけた場合や、自分で内容を追加したい場合には、GitHub 上で issue を提出するか、もしくは直接 pull request を作成してください。我々は迅速に対応いたします。

## 

​

貢献の方法

ドキュメントの問題は次の2つのカテゴリーに分けられます：

  * コンテンツ修正
  * コンテンツ追加
  * ベストプラクティス



### 

​

コンテンツの誤り

ドキュメントを読んでいる際に内容の誤りを見つけたり、一部を修正したい場合は、文書ページの右側にある目次内の **“Github に編集”** ボタンをクリックしてください。これにより、GitHub のオンラインエディターを使用してファイルを修正できます。その後、修正内容を簡潔に説明した pull request を作成してください。タイトルは `Fix: Update xxx` の形式を使用してください。リクエストを受け取った後、レビューを行い、問題がなければ修正をマージします。

もちろん、[Issues ページ](https://github.com/langgenius/dify-docs/issues)にドキュメントのリンクを貼り付け、修正が必要な内容を簡単に説明していただくことも可能です。フィードバックを受け取った後、迅速に対応いたします。

### 

​

コンテンツの欠落

新しいドキュメントをコードリポジトリに追加したい場合は、以下の手順に従ってください：

  1. リポジトリをフォークする



リポジトリを GitHub アカウントにフォークし、リポジトリをローカルにクローンします:
    
    
    git clone https://github.com/<your-github-account>/dify-docs.git

注: GitHub のオンラインコードエディターを使用して、新しい md ファイルを適切なディレクトリに直接送信することもできます。

  2. 関連するドキュメントディレクトリを見つけてファイルを追加する



たとえば、サードパーティツールの使用方法に関するドキュメントを追加したい場合は、`/guides/tools/tool-configuration/` ディレクトリに新しい md ファイルを追加してください。

  3. pull request を提出する



pull request を提供する時、`Docs: add xxx` のタイトルで説明欄に書いて、文章内容を簡単に記載してください。request を受け取った後、review を行い、問題がなければ merge します。

## 

​

ベストプラクティス

Difyで構築した革新的なアプリケーション事例の共有を大歓迎します！コミュニティメンバーが皆様の実践経験を理解・再現しやすくするため、以下の構成でのコンテンツ作成をお勧めします：
    
    
    1. プロジェクト概要
       - アプリケーションの活用シーンと解決課題
       - コア機能と特徴
       - デモンストレーションと成果
    
    2. システム設計・処理フロー
    
    3. 事前準備（必要な場合）
       - 必要リソース一覧
       - ツールと依存関係
    
    4. Dify実装手順（参考）
       - アプリケーション作成と基本設定
       - ワークフロー構築の詳細
       - 主要ノード設定解説
    
    5. FAQ

> 説明用のスクリーンショットを追加される場合は、オンライン画像ホスティングサービスのリンクをご利用ください。

皆様の貴重なナレッジシェアが、Difyコミュニティの発展を支えます！

## 

​

ヘルプを受ける

貢献の過程で困難に直面したり、疑問がある場合は、関連する GitHub の issue に質問を投稿するか、[Discord](https://discord.com/invite/8Tpq4AcN9c) に参加して迅速にコミュニケーションを取ることができます。

* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/community/docs-contribution.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20contribut&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/community%2Fdocs-contribution.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[貢献者になる](/ja-jp/community/contribution)[はじめに](/ja-jp/plugins/introduction)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * 貢献の方法
  * コンテンツの誤り
  * コンテンツの欠落
  * ベストプラクティス
  * ヘルプを受ける



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/community/support

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

コミュニティ

支援を求める

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




コミュニティ

# 支援を求める

Copy page

このドキュメントを読んでも製品の使用に関して疑問や提案がある場合は、以下の方法で支援を求めることができます。私たちのチームとコミュニティは、できる限りのサポートを提供いたします。

### 

​

コミュニティサポート

Difyのアカウント情報やその他の情報をコミュニティに投稿しないでください。また、サポートスタッフもアカウント情報を要求することはありません。

  * [GitHub](https://github.com/langgenius/dify) 上でイシューを提出
  * [Discord](https://discord.gg/8Tpq4AcN9c)コミュニティに参加



### 

​

お問い合わせ

製品サポート以外のその他の事柄に適用されます。

  * [hello@dify.ai](mailto:hello@dify.ai) へメールを送信



* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/community/support.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/community%2Fsupport.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[チャットストリームエージェントを使用した Twitter アカウントの分析方法](/ja-jp/workshop/intermediate/twitter-chatflow)[貢献者になる](/ja-jp/community/contribution)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * コミュニティサポート
  * お問い合わせ



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/development/backend/sandbox/README

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

バックエンド

DifySandbox

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

    * [DifySandbox](/ja-jp/development/backend/sandbox/README)
    * [貢献](/ja-jp/development/backend/sandbox/contribution)
  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




バックエンド

# DifySandbox

Copy page

### 

​

はじめに

`DifySandbox（ディファイサンドボックス）`は、PythonやNode.jsなど複数のプログラミング言語に対応した、軽量・高速・安全なコード実行環境です。Dify Workflowの様々な要素（コードノード、テンプレート変換ノード、LLMノードのJinja2構文、ツールノードのコードインタプリターなど）の基盤となる実行環境として機能します。DifySandboxは、ユーザーが提供したコードを実行しつつ、システム全体のセキュリティを確保します。

### 

​

特徴

  * **複数言語対応** ：DifySandboxはSeccompというシステムレベルのソリューションをベースに構築され、複数のプログラミング言語をサポートしています。現在はPythonとNode.jsに対応しています。
  * **システムセキュリティ** ：予期せぬセキュリティ侵害を防ぐため、特定のシステムコールのみを許可する許可リストポリシーを採用しています。
  * **ファイルシステムの隔離** ：ユーザーのコードは独立した隔離されたファイルシステム環境で実行されます。
  * **ネットワーク隔離** ：
    * **DockerCompose環境** ：専用のSandboxネットワークとプロキシコンテナを使用してネットワークアクセスを提供します。これにより、内部ネットワークのセキュリティを保ちつつ、柔軟なプロキシ設定が可能になります。
    * **Kubernetes環境** ：Egressポリシーを用いて直接ネットワーク隔離戦略を設定できます。



### 

​

インストール依存関係

DifySandboxプロジェクトをインストールおよび展開する前に、以下の依存関係要件を満たしていることを確認してください：

  1. **システム依存関係**



Linuxディストリビューションに応じて、以下のコマンドを実行して必要なシステムコンポーネントをインストールします：

  * Ubuntu/Debian


    
    
    sudo apt-get update
    sudo apt-get install pkg-config gcc libseccomp-dev git wget

  * CentOS


    
    
    sudo yum install pkgconfig gcc libseccomp-devel git wget

  2. **Go言語環境**



Go開発環境をインストールします（Go 1.20.6以上を推奨）：
    
    
    # Go 1.20.6をインストール
    sudo apt-get install -y golang-1.20.6

インストールを確認します：
    
    
    go version  # インストールされたGoバージョンを表示

  3. **Python環境設定**



**サンドボックス環境の準備**

Python 3.10以上を推奨します。

**事前インストール済み依存関係管理**

DifySandboxには以下のPython依存関係があらかじめ設定されています：

  * `http` \- 基本的なネットワークライブラリ
  * `jinja2` \- LLMプロンプト処理用のテンプレートエンジン
  * `requests` \- HTTPクライアントライブラリ



**カスタム依存関係の追加**

追加のPython依存関係が必要な場合は、以下の手順に従ってください：

  1. プロジェクトのルートディレクトリにある`dependencies/python-requirements.txt`ファイルを見つけます。
  2. 必要なパッケージ名とバージョンをファイルに追加します。権限変更が必要な場合は、[FAQ](https://github.com/langgenius/dify-sandbox/blob/main/FAQ)を参照してください。
  3. DifySandboxを再構築します。



新しい依存関係を追加すると、追加の権限要件が発生する可能性があります。セキュリティへの影響を慎重に評価してください。潜在的なセキュリティリスクを完全に制御できない場合は、権限設定を変更しないことをお勧めします。

### 

​

貢献

`DifySandbox`の開発に参加する方法については、[貢献ガイド](contribution)をご参照ください。

* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/development/backend/sandbox/README.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/development/backend/sandbox%2FREADME.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[よくある質問](/ja-jp/plugins/faq)[貢献](/ja-jp/development/backend/sandbox/contribution)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * はじめに
  * 特徴
  * インストール依存関係
  * 貢献



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/development/backend/sandbox/contribution

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

バックエンド

貢献

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

    * [DifySandbox](/ja-jp/development/backend/sandbox/README)
    * [貢献](/ja-jp/development/backend/sandbox/contribution)
  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




バックエンド

# 貢献

Copy page

### 

​

コード構造

以下のコードファイル構造を参照すると、コードの構成をより理解しやすくなります。
    
    
    [cmd/]
    ├── server                // サーバー起動のエントリーポイント
    ├── lib                   // 共有ライブラリのエントリーポイント
    └── test                  // 一般的なテストスクリプト
    [build/]                  // 各種アーキテクチャとプラットフォーム用のビルドスクリプト
    [internal/]               // 内部パッケージ
    ├── controller            // HTTPリクエストハンドラ
    ├── middleware            // リクエスト処理用ミドルウェア
    ├── server                // サーバーのセットアップと設定
    ├── service               // コントローラー用のサービス提供
    ├── static                // 設定ファイル
    │   ├── nodejs_syscall    // Node.jsシステムコールのホワイトリスト
    │   └── python_syscall    // Pythonシステムコールのホワイトリスト
    ├── types                 // エンティティ
    ├── core                  // 分離と実行のためのコアロジック
    │   ├── lib               // 共有ライブラリ
    │   ├── runner            // コード実行
    │   │   ├── nodejs        // Node.jsランナー
    |   |   └── python        // Pythonランナー
    └── tests                 // CI/CD用のテスト

### 

​

原理

現在、コアロジックには2つの主要なエントリーポイントがあります。1つは`DifySandbox`のHTTPサービスエントリーポイント、もう1つは動的リンクライブラリのエントリーポイントです。Sandboxがコードを実行する際、まず一時的なコードファイルが生成されます。このファイルの冒頭で動的リンクライブラリを呼び出して実行環境（Sandbox）を初期化し、その後にユーザーコードが実行されます。最終的に、ユーザーが提出したコードを直接実行するのではなく、この一時ファイルを実行することで、システムの安全性を確保します。

動的リンクライブラリでは、`Seccomp`（Secure Computing Mode）を使用してシステムコールを制限しています。許可されるシステムコールは`static`ディレクトリの`nodejs_syscall`および`python_syscall`ファイルに定義されており、ARM64とAMD64の両アーキテクチャ向けのシステムコールホワイトリストを提供しています。特別な理由がない限り、これらのファイルを変更しないでください。

### 

​

貢献方法

タイポやバグなどの小さな問題については、直接プルリクエスト（PR）を送信してください。大規模な変更や新機能の提案については、まずイシューを作成し、議論を行ってください。

#### 

​

今後の課題

現在検討中の課題がいくつかあります。興味があれば、以下のタスクに取り組んでいただけます：

  * 新しいプログラミング言語のサポート：
    * 現在、PythonとNodejsをサポートしていますが、他の言語のサポートも検討しています。
    * 新しい言語を追加する際は、ARM64とAMD64の両アーキテクチャに対応し、安全性を確保するためのCIテストを提供する必要があります。
  * Nodejsの依存関係の問題：
    * 現在、Pythonの依存関係のサポートは完了していますが、Nodejsについては`node_modules`の複雑さから、まだ適切な解決策がありません。この課題に取り組んでいただけると助かります。
  * 画像処理：
    * 将来的にマルチモーダルが主流になると予想されるため、Sandboxでの画像処理のサポートは重要です。
    * Pillowなどのライブラリのサポートを追加し、DifyからSandboxに画像を渡して処理できるようにすることを検討しています。
  * 包括的なCIテスト：
    * 現在のCIテストはまだ不十分で、基本的なケースしかカバーしていません。より広範なテストの追加が必要です。
  * マルチモーダルデータの生成：
    * Sandboxを使用して、テキストと画像を組み合わせたデータなど、マルチモーダルデータの生成に挑戦してみてください。



* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/development/backend/sandbox/contribution.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20ibut&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/development/backend/sandbox%2Fcontribution.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[DifySandbox](/ja-jp/development/backend/sandbox/README)[Hugging Faceのオープンソースモデルを統合](/ja-jp/development/models-integration/hugging-face)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * コード構造
  * 原理
  * 貢献方法
  * 今後の課題



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/development/migration/migrate-to-v1

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

移行

コミュニティ版を v1.0.0 にアップグレードする

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行

    * [コミュニティ版を v1.0.0 にアップグレードする](/ja-jp/development/migration/migrate-to-v1)



##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




移行

# コミュニティ版を v1.0.0 にアップグレードする

Copy page

> この記事では、旧コミュニティ版を [v1.0.0](https://github.com/langgenius/dify/releases/tag/1.0.0) にアップグレードする方法を説明します。もし Dify コミュニティ版をまだインストールしていない場合は、[Dify プロジェクト](https://github.com/langgenius/dify)をクローンし、`1.0.0` ブランチに切り替えてください。[ドキュメント](/ja-jp/getting-started/install-self-hosted/docker-compose)を参照してインストールコマンドを実行してください。

コミュニティ版でプラグイン機能を体験するには、バージョンを v1.0.0 にアップグレードする必要があります。この記事では、旧バージョンから `v1.0.0` にアップグレードしてプラグインエコシステム機能を体験する方法を説明します。

## 

​

アップグレード開始

アップグレードは以下の手順で行います：

  1. データのバックアップ
  2. プラグインの移行
  3. メインプロジェクトのアップグレード



### 

​

1\. データのバックアップ

1.1 `cd` コマンドで Dify プロジェクトのパスに移動し、バックアップ用のブランチを作成します。

1.2 次のコマンドを実行して、docker-compose YAML ファイルをバックアップします（オプション）。
    
    
    cd docker
    cp docker-compose.yaml docker-compose.yaml.$(date +%s).bak

1.3 サービスを停止するために以下のコマンドを実行し、Docker ディレクトリでデータバックアップを作成します。
    
    
    docker compose down
    tar -cvf volumes-$(date +%s).tgz volumes

### 

​

2\. バージョンアップ

`v1.0.0` は Docker Compose を使用してデプロイできます。`cd` コマンドで Dify プロジェクトのパスに移動し、以下のコマンドで Dify のバージョンをアップグレードします：
    
    
    git fetch origin
    git checkout 1.0.0 # 1.0.0 ブランチに切り替える
    cd docker
    nano .env # .env.example ファイルと同期するように環境構成ファイルを変更する
    docker compose -f docker-compose.yaml up -d

### 

​

3\. ツールの移行をプラグインに変換

このステップでは、以前のコミュニティ版で使用していたツールやモデルプロバイダを自動的にデータ移行し、新しいバージョンのプラグイン環境にインストールします。

  1. `docker ps` コマンドを実行して、docker-api コンテナの ID を確認します。



例：
    
    
    docker ps
    CONTAINER ID   IMAGE                                       COMMAND                  CREATED       STATUS                 PORTS                                                                                                                             NAMES
    417241cd****   nginx:latest                                "sh -c 'cp /docker-e…"   3 hours ago   Up 3 hours             0.0.0.0:80->80/tcp, :::80->80/tcp, 0.0.0.0:443->443/tcp, :::443->443/tcp                                                          docker-nginx-1
    f84aa773****   langgenius/dify-api:1.0.0                   "/bin/bash /entrypoi…"   3 hours ago   Up 3 hours             5001/tcp                                                                                                                          docker-worker-1
    a3cb19c2****   langgenius/dify-api:1.0.0                   "/bin/bash /entrypoi…"   3 hours ago   Up 3 hours             5001/tcp                                                                                                                          docker-api-1

`docker exec -it a3cb19c2**** bash` コマンドを実行してコンテナのターミナルにアクセスし、以下を実行します：
    
    
    poetry run flask extract-plugins --workers=20

> エラーが発生した場合は、サーバーに `poetry` 環境をインストールしてから実行してください。コマンド実行後、端末に入力待機のプロンプトが表示された場合は「Enter」を押して入力をスキップします。

このコマンドは、現在の環境で使用しているすべてのモデルとツールを抽出します。workers パラメータは並行プロセス数を決定し、必要に応じて調整できます。コマンドが終了すると、結果が保存される `plugins.jsonl` ファイルが生成されます。このファイルには、現在の Dify インスタンス内のすべてのワークスペースのプラグイン情報が含まれます。

インターネット接続が正常で、`https://marketplace.dify.ai` にアクセスできることを確認してください。`docker-api-1` コンテナ内で以下のコマンドを実行します：
    
    
    poetry run flask install-plugins --workers=2

このコマンドは、最新のコミュニティ版に必要なすべてのプラグインをダウンロードしてインストールします。

最後に、プラグインのデータを移行します。このコマンドは `provider name` を更新し、`langgenius/{provider_name}/{provider_name}` を追加します
    
    
    poetry run flask migrate-data-for-plugin

ターミナルに結果が表示されたら、マイグレーションは完了です。
    
    
    Migrate [tool_builtin_providers] data for plugin completed, total: 6
    Migrate data for plugin completed.

## 

​

移行結果の検証

Dify プラットフォームにアクセスし、右上の「プラグイン」ボタンをクリックして、以前使用していたツールが正しくインストールされているか確認します。ランダムにプラグインを使用して、正常に動作するかを検証します。問題がなければ、バージョンアップとデータ移行が完了したことを示しています。

* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/development/migration/migrate-to-v1.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20te-to&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/development/migration%2Fmigrate-to-v1.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[AWS Bedrock からモデルを統合する](/ja-jp/development/models-integration/aws-bedrock-deepseek)[DeepSeek & Dify連携ガイド - 多段階推論を活用したAIアプリケーション構築](/ja-jp/learn-more/use-cases/integrate-deepseek-to-build-an-ai-app)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * アップグレード開始
  * 1\. データのバックアップ
  * 2\. バージョンアップ
  * 3\. ツールの移行をプラグインに変換
  * 移行結果の検証



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/development/models-integration/aws-bedrock-deepseek

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

モデルの統合

AWS Bedrock からモデルを統合する

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

    * [Hugging Faceのオープンソースモデルを統合](/ja-jp/development/models-integration/hugging-face)
    * [Replicateのオープンソースモデルを統合](/ja-jp/development/models-integration/replicate)
    * [Xinferenceでデプロイしたローカルモデルを統合](/ja-jp/development/models-integration/xinference)
    * [OpenLLMでデプロイしたローカルモデルを統合](/ja-jp/development/models-integration/openllm)
    * [LocalAIでデプロイしたローカルモデルを統合](/ja-jp/development/models-integration/localai)
    * [Ollamaでデプロイしたローカルモデルを統合](/ja-jp/development/models-integration/ollama)
    * [LiteLLM Proxyを使用してモデルを統合する](/ja-jp/development/models-integration/litellm)
    * [GPUStackによってデプロイされたローカルモデルの統合](/ja-jp/development/models-integration/gpustack)
    * [AWS Bedrock からモデルを統合する](/ja-jp/development/models-integration/aws-bedrock-deepseek)
  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




モデルの統合

# AWS Bedrock からモデルを統合する

Copy page

## 

​

概要

[AWS Bedrock マーケットプレイス](https://aws.amazon.com/bedrock/marketplace/) は、大規模な言語モデル (LLMs) をデプロイするための総合的なプラットフォームです。開発者は、このプラットフォームを活用して、100 を超える新興の基盤モデル (FMs) を無断配布で検出、テスト、デプロイすることができます。

本文は、DeepSeek モデルのデプロイを例として、Bedrock Marketplace プラットフォーム上でモデルをデプロイし、Dify プラットフォームに統合する方法を説明します。これにより、DeepSeek モデルを基盤とした AI アプリケーションの迅速な構築をサポートします。

## 

​

前提条件

  * [Bedrock](https://aws.amazon.com/bedrock/) にアクセスできる AWS アカウント。
  * [Dify.AI アカウント](https://cloud.dify.ai/)。



## 

​

デプロイ手順

### 

​

1\. DeepSeek モデルをデプロイする

#### 

​

1.1 モデルの検索と選択

  1. **Bedrock マーケットプレイス** に移動し、**DeepSeek** を検索します。
  2. 要求に基づいて **DeepSeek** モデルを選択します。



#### 

​

1.2 デプロイの開始

  1. **モデル詳細** ページに移動し、**デプロイ** をクリックします。
  2. デプロイ設定を構成するための指示に従います。



**注意:** モデルバージョンは異なるコンピューティング構成を必要とします。これはコストに影響します。

#### 

​

1.3 エンドポイントの取得

デプロイが完了したら、**Marketplace Deployments** ページに移動し、自動生成された **Endpoint** を確認します。このエンドポイントは、**SageMaker エンドポイント** に相当し、Dify プラットフォームに接続するために使用されます。

### 

​

2\. DeepSeek を Dify プラットフォームに接続する

#### 

​

2.1 構成設定にアクセスする

  1. Dify 管理パネルにログインし、**設定** ページに移動します。
  2. **モデルプロバイダー** ページで、**Amazon SageMaker** を選択します。



#### 

​

2.2 SageMaker 設定の構成

**モデルを追加** をクリックし、以下の情報を入力します:

  * **モデルタイプ:** モデルタイプとして **LLM** を選択します。
  * **モデル名:** モデルにカスタム名を指定します。
  * **SageMaker エンドポイント:** Bedrock マーケットプレイスから取得したエンドポイントを入力します。



### 

​

3\. モデルのテスト

  1. Dify を開き、**新しいアプリを作成** を選択します。
  2. **チャットフロー** または **ワークフロー** を選択します。
  3. LLM ノードを追加します。
  4. モデルの応答を確認します (以下のスクリーンショット参照)。



**注意:** 追加のテストとして、**チャットボット** アプリケーションを作成することもできます。

## 

​

FAQ

### 

​

1\. **デプロイ後にエンドポイント パラメータが表示されない**

コンピューティング インスタンスが正しく構成され、AWS のパーミッションが適切に設定されていることを確認します。如果問題が解決しない場合は、モデルを再デプロイするか、AWS カスタマー サポートに連絡してください。

* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/development/models-integration/aws-bedrock-deepseek.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20edrock-deeps&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/development/models-integration%2Faws-bedrock-deepseek.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[GPUStackによってデプロイされたローカルモデルの統合](/ja-jp/development/models-integration/gpustack)[コミュニティ版を v1.0.0 にアップグレードする](/ja-jp/development/migration/migrate-to-v1)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * 概要
  * 前提条件
  * デプロイ手順
  * 1\. DeepSeek モデルをデプロイする
  * 1.1 モデルの検索と選択
  * 1.2 デプロイの開始
  * 1.3 エンドポイントの取得
  * 2\. DeepSeek を Dify プラットフォームに接続する
  * 2.1 構成設定にアクセスする
  * 2.2 SageMaker 設定の構成
  * 3\. モデルのテスト
  * FAQ
  * 1\. デプロイ後にエンドポイント パラメータが表示されない



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/development/models-integration/gpustack

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

モデルの統合

GPUStackによってデプロイされたローカルモデルの統合

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

    * [Hugging Faceのオープンソースモデルを統合](/ja-jp/development/models-integration/hugging-face)
    * [Replicateのオープンソースモデルを統合](/ja-jp/development/models-integration/replicate)
    * [Xinferenceでデプロイしたローカルモデルを統合](/ja-jp/development/models-integration/xinference)
    * [OpenLLMでデプロイしたローカルモデルを統合](/ja-jp/development/models-integration/openllm)
    * [LocalAIでデプロイしたローカルモデルを統合](/ja-jp/development/models-integration/localai)
    * [Ollamaでデプロイしたローカルモデルを統合](/ja-jp/development/models-integration/ollama)
    * [LiteLLM Proxyを使用してモデルを統合する](/ja-jp/development/models-integration/litellm)
    * [GPUStackによってデプロイされたローカルモデルの統合](/ja-jp/development/models-integration/gpustack)
    * [AWS Bedrock からモデルを統合する](/ja-jp/development/models-integration/aws-bedrock-deepseek)
  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




モデルの統合

# GPUStackによってデプロイされたローカルモデルの統合

Copy page

[GPUStack](https://github.com/gpustack/gpustack)は、AIモデルを実行するために設計されたオープンソースのGPUクラスターマネージャーです。

Difyは、大規模言語モデルの推論、埋め込み、再順位付け機能をローカル環境で展開するために、GPUStackとの統合を実現しています。

## 

​

GPUStackの展開方法

GPUStackを展開する際は、公式の[ドキュメント](https://docs.gpustack.ai)を参照するか、以下の手順に従って簡単に統合できます。

### 

​

LinuxまたはMacOSでの展開

GPUStackは、systemdやlaunchdベースのシステムにサービスとしてインストールするためのスクリプトを提供しています。この方法でGPUStackをインストールするには、次のコマンドを実行してください：
    
    
    curl -sfL https://get.gpustack.ai | sh -s -

### 

​

Windowsでの展開

管理者としてPowerShellを実行し（PowerShell ISEは使用しないでください）、次のコマンドを実行してGPUStackをインストールします：
    
    
    Invoke-Expression (Invoke-WebRequest -Uri "https://get.gpustack.ai" -UseBasicParsing).Content

その後、表示される指示に従ってGPUStackのUIにアクセスできます。

## 

​

LLMの展開手順

GPUStackにホストされたLLMを使用する方法の例です：

  1. GPUStack UIで「Models」ページに移動し、「Deploy Model」をクリック、次に「Hugging Face」をドロップダウンメニューから選択します。

  2. 左上の検索バーを使って、モデル名「Qwen/Qwen2.5-0.5B-Instruct-GGUF」を検索します。

  3. モデルを展開するために「Save」をクリックします。




## 

​

APIキーの作成方法

  1. 「API Keys」ページに移動し、「New API Key」をクリックします。

  2. 名前を入力し、「Save」をクリックします。

  3. APIキーをコピーし、後で使用するために保存しておきます。




## 

​

DifyとGPUStackの統合手順

  5. `Settings > Model Providers > GPUStack`に移動し、以下の情報を入力します：

     * モデルタイプ：`LLM`

     * モデル名：`qwen2.5-0.5b-instruct`

     * サーバーURL：`http://your-gpustack-server-ip`

     * APIキー：`コピーしたAPIキーを入力`

モデルをアプリケーションで使用するために、「Save」をクリックしてください。




GPUStackに関する詳細情報は、[GitHub Repo](https://github.com/gpustack/gpustack)を参照してください。

* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/development/models-integration/gpustack.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/development/models-integration%2Fgpustack.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[LiteLLM Proxyを使用してモデルを統合する](/ja-jp/development/models-integration/litellm)[AWS Bedrock からモデルを統合する](/ja-jp/development/models-integration/aws-bedrock-deepseek)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * GPUStackの展開方法
  * LinuxまたはMacOSでの展開
  * Windowsでの展開
  * LLMの展開手順
  * APIキーの作成方法
  * DifyとGPUStackの統合手順



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/development/models-integration/hugging-face

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

モデルの統合

Hugging Faceのオープンソースモデルを統合

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

    * [Hugging Faceのオープンソースモデルを統合](/ja-jp/development/models-integration/hugging-face)
    * [Replicateのオープンソースモデルを統合](/ja-jp/development/models-integration/replicate)
    * [Xinferenceでデプロイしたローカルモデルを統合](/ja-jp/development/models-integration/xinference)
    * [OpenLLMでデプロイしたローカルモデルを統合](/ja-jp/development/models-integration/openllm)
    * [LocalAIでデプロイしたローカルモデルを統合](/ja-jp/development/models-integration/localai)
    * [Ollamaでデプロイしたローカルモデルを統合](/ja-jp/development/models-integration/ollama)
    * [LiteLLM Proxyを使用してモデルを統合する](/ja-jp/development/models-integration/litellm)
    * [GPUStackによってデプロイされたローカルモデルの統合](/ja-jp/development/models-integration/gpustack)
    * [AWS Bedrock からモデルを統合する](/ja-jp/development/models-integration/aws-bedrock-deepseek)
  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




モデルの統合

# Hugging Faceのオープンソースモデルを統合

Copy page

Difyはテキスト生成（Text-Generation）と埋め込み（Embeddings）をサポートしており、以下はそれに対応するHugging Faceモデルの種類です：

  * テキスト生成：[text-generation](https://huggingface.co/models?pipeline_tag=text-generation&sort=trending)，[text2text-generation](https://huggingface.co/models?pipeline_tag=text2text-generation&sort=trending)
  * 埋め込み：[feature-extraction](https://huggingface.co/models?pipeline_tag=feature-extraction&sort=trending)



具体的な手順は以下の通りです：

  1. Hugging Faceのアカウントが必要です（[登録はこちら](https://huggingface.co/join)）。
  2. Hugging FaceのAPIキーを設定します（[取得はこちら](https://huggingface.co/settings/tokens)）。
  3. [Hugging Faceのモデル一覧ページ](https://huggingface.co/models)にアクセスし、対応するモデルの種類を選択します。



DifyはHugging Face上のモデルを次の2つの方法で接続できます：

  1. Hosted Inference API。この方法はHugging Face公式がデプロイしたモデルを使用します。料金はかかりませんが、サポートされているモデルは少ないです。
  2. Inference Endpoint。この方法は、Hugging Faceが接続しているAWSなどのリソースを使用してモデルをデプロイします。料金が発生します。



### 

​

Hosted Inference APIのモデルを接続する

#### 

​

1 モデルを選択

モデルの詳細ページの右側にHosted Inference APIのセクションがあるモデルのみがHosted Inference APIをサポートしています。以下の図のように表示されます：

モデルの詳細ページで、モデルの名前を取得できます。

#### 

​

2 Difyで接続モデルを使用する

`設定 > モデルプロバイダー > Hugging Face > モデルタイプ`のエンドポイントタイプでHosted Inference APIを選択します。以下の図のように設定します：

APIトークンは記事の冒頭で設定したAPIキーです。モデル名は前のステップで取得したモデル名を入力します。

### 

​

方法 2: Inference Endpoint

#### 

​

1 デプロイするモデルを選択

モデルの詳細ページの右側にある`Deploy`ボタンの下にInference EndpointsオプションがあるモデルのみがInference Endpointをサポートしています。以下の図のように表示されます：

#### 

​

2 モデルをデプロイ

モデルのデプロイボタンをクリックし、Inference Endpointオプションを選択します。以前にクレジットカードを登録していない場合は、カードの登録が必要です。手順に従って進めてください。カードを登録した後、以下の画面が表示されます：必要に応じて設定を変更し、左下のCreate EndpointボタンをクリックしてInference Endpointを作成します。

モデルがデプロイされると、エンドポイントURLが表示されます。

#### 

​

3 Difyで接続モデルを使用する

`設定 > モデルプロバイダー > Hugging Face > モデルタイプ`のエンドポイントタイプでInference Endpointsを選択します。以下の図のように設定します：

APIトークンは記事の冒頭で設定したAPIキーです。`テキスト生成モデルの名前は任意に設定可能ですが、埋め込みモデルの名前はHugging Faceの名前と一致する必要があります。`エンドポイントURLは前のステップでデプロイしたモデルのエンドポイントURLを入力します。

> 注意点：埋め込みの「ユーザー名 / 組織名」は、Hugging Faceの[Inference Endpoints](https://huggingface.co/docs/inference-endpoints/guides/access)のデプロイ方法に基づいて、「[ユーザー名](https://huggingface.co/settings/account)」または「[組織名](https://ui.endpoints.huggingface.co/)」を入力する必要があります。

* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/development/models-integration/hugging-face.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20ng-f&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/development/models-integration%2Fhugging-face.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[貢献](/ja-jp/development/backend/sandbox/contribution)[Replicateのオープンソースモデルを統合](/ja-jp/development/models-integration/replicate)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * Hosted Inference APIのモデルを接続する
  * 1 モデルを選択
  * 2 Difyで接続モデルを使用する
  * 方法 2: Inference Endpoint
  * 1 デプロイするモデルを選択
  * 2 モデルをデプロイ
  * 3 Difyで接続モデルを使用する



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/development/models-integration/litellm

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

モデルの統合

LiteLLM Proxyを使用してモデルを統合する

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

    * [Hugging Faceのオープンソースモデルを統合](/ja-jp/development/models-integration/hugging-face)
    * [Replicateのオープンソースモデルを統合](/ja-jp/development/models-integration/replicate)
    * [Xinferenceでデプロイしたローカルモデルを統合](/ja-jp/development/models-integration/xinference)
    * [OpenLLMでデプロイしたローカルモデルを統合](/ja-jp/development/models-integration/openllm)
    * [LocalAIでデプロイしたローカルモデルを統合](/ja-jp/development/models-integration/localai)
    * [Ollamaでデプロイしたローカルモデルを統合](/ja-jp/development/models-integration/ollama)
    * [LiteLLM Proxyを使用してモデルを統合する](/ja-jp/development/models-integration/litellm)
    * [GPUStackによってデプロイされたローカルモデルの統合](/ja-jp/development/models-integration/gpustack)
    * [AWS Bedrock からモデルを統合する](/ja-jp/development/models-integration/aws-bedrock-deepseek)
  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




モデルの統合

# LiteLLM Proxyを使用してモデルを統合する

Copy page

[LiteLLM Proxy](https://github.com/BerriAI/litellm)は、以下の機能を提供するプロキシサーバーとなります：

  * OpenAI形式の100以上のLLM（OpenAI、Azure、Vertex、Bedrock）への呼び出し
  * 予算やレート制限の設定、利用状況の追跡には仮想キーを使用します



Difyは、LiteLLM Proxyで利用可能なLLMおよびテキスト埋め込み機能モデルを統合するサポートを提供します。

## 

​

クイック統合

### 

​

ステップ1. LiteLLM Proxyサーバーを起動する

LiteLLMには、すべてのモデルが定義された構成が必要です。このファイルを `litellm_config.yaml` と呼びます。

[LiteLLM構成の設定方法のドキュメント - こちら](https://docs.litellm.ai/docs/proxy/configs)
    
    
    model_list:
      - model_name: gpt-4
        litellm_params:
          model: azure/chatgpt-v-2
          api_base: https://openai-gpt-4-test-v-1.openai.azure.com/
          api_version: "2023-05-15"
          api_key: 
      - model_name: gpt-4
        litellm_params:
          model: azure/gpt-4
          api_key: 
          api_base: https://openai-gpt-4-test-v-2.openai.azure.com/
      - model_name: gpt-4
        litellm_params:
          model: azure/gpt-4
          api_key: 
          api_base: https://openai-gpt-4-test-v-2.openai.azure.com/

### 

​

ステップ2. LiteLLM Proxyを起動する
    
    
    docker run \
        -v $(pwd)/litellm_config.yaml:/app/config.yaml \
        -p 4000:4000 \
        ghcr.io/berriai/litellm:main-latest \
        --config /app/config.yaml --detailed_debug

成功すると、プロキシは `http://localhost:4000` で実行されます。

### 

​

ステップ3. DifyでLiteLLM Proxyを統合する

`設定 > モデルプロバイダー > OpenAI-API互換` で、以下を入力してください：

  * モデル名: `gpt-4`

  * ベースURL: `http://localhost:4000`

LiteLLMサービスにアクセス可能なベースURLを入力します。

  * モデルタイプ: `Chat`

  * モデルコンテキスト長: `4096`

モデルの最大コンテキスト長。不明な場合は、デフォルト値の4096を使用してください。

  * トークンの最大制限: `4096`

モデルによって返されるトークンの最大数。モデルに特定の要件がない場合は、モデルコンテキスト長と一致させることができます。

  * ビジョンのサポート: `Yes`

`gpt4-o`のように画像理解（マルチモーダル）をサポートする場合は、このオプションをチェックしてください。




エラーがないことを確認したら、「保存」をクリックしてアプリケーションでモデルを使用してください。

埋め込みモデルの統合方法はLLMと同様で、モデルタイプをテキスト埋め込みに変更するだけです。

## 

​

詳細情報

LiteLLMに関する詳細情報は、以下を参照してください：

  * [LiteLLM](https://github.com/BerriAI/litellm)
  * [LiteLLM Proxyサーバー](https://docs.litellm.ai/docs/simple_proxy)



* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/development/models-integration/litellm.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/development/models-integration%2Flitellm.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[Ollamaでデプロイしたローカルモデルを統合](/ja-jp/development/models-integration/ollama)[GPUStackによってデプロイされたローカルモデルの統合](/ja-jp/development/models-integration/gpustack)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * クイック統合
  * ステップ1. LiteLLM Proxyサーバーを起動する
  * ステップ2. LiteLLM Proxyを起動する
  * ステップ3. DifyでLiteLLM Proxyを統合する
  * 詳細情報



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/development/models-integration/localai

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

モデルの統合

LocalAIでデプロイしたローカルモデルを統合

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

    * [Hugging Faceのオープンソースモデルを統合](/ja-jp/development/models-integration/hugging-face)
    * [Replicateのオープンソースモデルを統合](/ja-jp/development/models-integration/replicate)
    * [Xinferenceでデプロイしたローカルモデルを統合](/ja-jp/development/models-integration/xinference)
    * [OpenLLMでデプロイしたローカルモデルを統合](/ja-jp/development/models-integration/openllm)
    * [LocalAIでデプロイしたローカルモデルを統合](/ja-jp/development/models-integration/localai)
    * [Ollamaでデプロイしたローカルモデルを統合](/ja-jp/development/models-integration/ollama)
    * [LiteLLM Proxyを使用してモデルを統合する](/ja-jp/development/models-integration/litellm)
    * [GPUStackによってデプロイされたローカルモデルの統合](/ja-jp/development/models-integration/gpustack)
    * [AWS Bedrock からモデルを統合する](/ja-jp/development/models-integration/aws-bedrock-deepseek)
  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




モデルの統合

# LocalAIでデプロイしたローカルモデルを統合

Copy page

[LocalAI](https://github.com/go-skynet/LocalAI) は、RESTFul APIを提供するローカル推論フレームワークで、OpenAI API仕様と互換性があります。これにより、消費者向けハードウェア上で、または個人サーバー上で、GPUを使用せずにLLM（大型言語モデル）や他のモデルを実行することが可能です。 Difyは、LocalAIでデプロイされた大型言語モデルの推論および埋め込み機能をローカルで接続することをサポートしています。

## 

​

LocalAIのデプロイ

### 

​

使用前の注意事項

もしコンテナのIPアドレスを直接使用する必要がある場合、上記の手順がその情報を取得するのに役立ちます。

### 

​

デプロイ開始

公式の[入門ガイド](https://localai.io/basics/getting_started/)を参考にデプロイを行うか、以下の手順で迅速に接続を行うことができます：

（以下の手順は[LocalAI Data query example](https://github.com/go-skynet/LocalAI/blob/master/examples/langchain-chroma/README)から引用しています）

  1. まず、LocalAIのコードリポジトリをクローンし、指定のディレクトリに移動します
         
         $ git clone https://github.com/go-skynet/LocalAI
         $ cd LocalAI/examples/langchain-chroma

  2. サンプルのLLMと埋め込みモデルをダウンロードします
         
         $ wget https://huggingface.co/skeskinen/ggml/resolve/main/all-MiniLM-L6-v2/ggml-model-q4_0.bin -O models/bert
         $ wget https://gpt4all.io/models/ggml-gpt4all-j.bin -O models/ggml-gpt4all-j

ここでは、小型で全プラットフォーム対応の2つのモデルを選んでいます。`ggml-gpt4all-j`がデフォルトのLLMモデルとして、`all-MiniLM-L6-v2`がデフォルトの埋め込みモデルとして使用され、ローカルで迅速にデプロイすることができます。

  3. .envファイルを設定します
         
         $ mv .env.example .env

注意点：`.env`内のTHREADS変数の値が、あなたのマシンのCPUコア数を超えないことを確認してください。

  4. LocalAIを起動します
         
         # docker-composeを使用して起動
         $ docker-compose up -d --build
         
         # ログを追跡し、ビルドが完了するまで待つ
         $ docker logs -f langchain-chroma-api-1
         7:16AM INF Starting LocalAI using 4 threads, with models path: /models
         7:16AM INF LocalAI version: v1.24.1 (9cc8d9086580bd2a96f5c96a6b873242879c70bc)
         
          ┌───────────────────────────────────────────────────┐ 
          │                   Fiber v2.48.0                   │ 
          │               http://127.0.0.1:8080               │ 
          │       (bound on host 0.0.0.0 and port 8080)       │ 
          │                                                   │ 
          │ Handlers ............ 55  Processes ........... 1 │ 
          │ Prefork ....... Disabled  PID ................ 14 │ 
          └───────────────────────────────────────────────────┘

ローカルの`http://127.0.0.1:8080`がLocalAIのAPIリクエストのエンドポイントとして開放されます。

そして、以下の2つのモデルが提供されます：

     * LLMモデル：`ggml-gpt4all-j`

外部アクセス名：`gpt-3.5-turbo`（この名前は`models/gpt-3.5-turbo.yaml`でカスタマイズ可能です）

     * 埋め込みモデル：`all-MiniLM-L6-v2`

外部アクセス名：`text-embedding-ada-002`（この名前は`models/embeddings.yaml`でカスタマイズ可能です）

> DifyをDockerでデプロイする場合、ネットワーク設定に注意し、DifyコンテナがXinferenceのエンドポイントにアクセスできることを確認してください。Difyコンテナ内からはlocalhostにアクセスできないため、ホストのIPアドレスを使用する必要があります。

  5. LocalAI APIサービスがデプロイ完了したら、Difyでモデルを使用します

`設定 > モデル供給者 > LocalAI`に以下を入力します：

モデル1：`ggml-gpt4all-j`

     * モデルタイプ：テキスト生成

     * モデル名：`gpt-3.5-turbo`

     * サーバーURL：<http://127.0.0.1:8080>

Difyがdockerデプロイの場合、ホストのドメイン名：`http://<your-LocalAI-endpoint-domain>:8080`を入力してください。例えば、局域網のIPアドレス：<http://192.168.1.100:8080>

“保存”後、アプリケーション内でこのモデルを使用できます。

モデル2：`all-MiniLM-L6-v2`

     * モデルタイプ：埋め込み

     * モデル名：`text-embedding-ada-002`

     * サーバーURL：<http://127.0.0.1:8080>

> Difyがdockerデプロイの場合、ホストのドメイン名：`http://<your-LocalAI-endpoint-domain>:8080`を入力してください。例えば、局域網のIPアドレス：<http://192.168.1.100:8080>

“保存”後、アプリケーション内でこのモデルを使用できます。




LocalAIに関する詳しい情報については、<https://github.com/go-skynet/LocalAI> を参照してください。

* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/development/models-integration/localai.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/development/models-integration%2Flocalai.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[OpenLLMでデプロイしたローカルモデルを統合](/ja-jp/development/models-integration/openllm)[Ollamaでデプロイしたローカルモデルを統合](/ja-jp/development/models-integration/ollama)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * LocalAIのデプロイ
  * 使用前の注意事項
  * デプロイ開始



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/development/models-integration/ollama

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

モデルの統合

Ollamaでデプロイしたローカルモデルを統合

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

    * [Hugging Faceのオープンソースモデルを統合](/ja-jp/development/models-integration/hugging-face)
    * [Replicateのオープンソースモデルを統合](/ja-jp/development/models-integration/replicate)
    * [Xinferenceでデプロイしたローカルモデルを統合](/ja-jp/development/models-integration/xinference)
    * [OpenLLMでデプロイしたローカルモデルを統合](/ja-jp/development/models-integration/openllm)
    * [LocalAIでデプロイしたローカルモデルを統合](/ja-jp/development/models-integration/localai)
    * [Ollamaでデプロイしたローカルモデルを統合](/ja-jp/development/models-integration/ollama)
    * [LiteLLM Proxyを使用してモデルを統合する](/ja-jp/development/models-integration/litellm)
    * [GPUStackによってデプロイされたローカルモデルの統合](/ja-jp/development/models-integration/gpustack)
    * [AWS Bedrock からモデルを統合する](/ja-jp/development/models-integration/aws-bedrock-deepseek)
  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




モデルの統合

# Ollamaでデプロイしたローカルモデルを統合

Copy page

[Ollama](https://github.com/jmorganca/ollama)は、Llama 2、Mistral、LlavaといったLLMを簡単にデプロイできるように設計された、クロスプラットフォーム対応の推論フレームワーククライアントです（MacOS、Windows、Linuxに対応）。ワンクリックでセットアップできるOllamaを利用すれば、LLMをローカル環境で実行でき、データを手元のマシンに保持することで、データプライバシーとセキュリティを強化できます。

## 

​

簡単な統合

### 

​

Ollamaのダウンロードと起動

  1. Ollamaをダウンロード

<https://ollama.com/download>にアクセスし、お使いのシステムに対応したOllamaクライアントをダウンロードしてください。

  2. Ollamaを実行し、Llama3.2とチャット
         
         ollama run llama3.2

起動が成功すると、Ollamaはローカルポート11434でAPIサービスを開始します。このサービスには、`http://localhost:11434`からアクセスできます。

他のモデルについては、[Ollama Models](https://ollama.com/library)で詳細をご確認ください。

  3. DifyへのOllama統合

Difyの設定画面で、「モデルプロバイダー」>「Ollama」を選択し、以下の情報を入力します。

     * モデル名: `llama3.2`

     * ベースURL: `http://<your-ollama-endpoint-domain>:11434`

OllamaサービスにアクセスできるベースURLを入力してください。パブリックURLを入力してもエラーが発生する場合は、[FAQ](/_sites/docs.dify.ai/ja-jp/development/models-integration/ollama#faq)を参照し、すべてのIPアドレスからOllamaサービスにアクセスできるよう環境変数を変更してください。

DifyをDockerでデプロイしている場合は、ローカルネットワークのIPアドレス（例：`http://192.168.1.100:11434` や `http://host.docker.internal:11434`）を使用してサービスにアクセスすることを推奨します。

ローカルでソースコードをデプロイしている場合は、`http://localhost:11434` を使用してください。

     * モデルタイプ: `Chat`

     * モデルコンテキスト長: `4096`

モデルが一度に処理できる最大コンテキスト長です。不明な場合は、デフォルト値の4096を使用してください。

     * 最大トークン制限: `4096`

モデルが返す最大トークン数です。モデルに特別な要件がない場合は、モデルのコンテキスト長と同じ値に設定できます。

     * Visionのサポート: `はい`

`llava`のように、画像認識（マルチモーダル）をサポートするモデルを使用する場合は、このオプションをオンにしてください。

エラーがないことを確認したら、「保存」をクリックして、アプリでモデルを使用します。

Embeddingモデルの統合もLLMと同様の手順で行いますが、モデルタイプを「Text Embedding」に変更するだけです。

  4. Ollamaモデルの使用

設定が必要なアプリの「プロンプトエンジニアリング」ページを開き、Ollamaプロバイダーの中から`llava`モデルを選択し、モデルパラメーターを設定して使用します。




## 

​

FAQ

### 

​

⚠️ DifyとOllamaをDockerでデプロイしている場合、以下のエラーが発生することがあります。
    
    
    httpconnectionpool(host=127.0.0.1, port=11434): max retries exceeded with url:/cpi/chat (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f8562812c20>: fail to establish a new connection:[Errno 111] Connection refused'))
    
    httpconnectionpool(host=localhost, port=11434): max retries exceeded with url:/cpi/chat (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f8562812c20>: fail to establish a new connection:[Errno 111] Connection refused'))

このエラーは、OllamaサービスがDockerコンテナからアクセスできない場合に発生します。`localhost` は通常、ホストマシンや他のコンテナではなく、コンテナ自体を指します。

この問題を解決するには、Ollamaサービスをネットワークに公開する必要があります。

### 

​

Macでの環境変数の設定

OllamaをmacOSアプリとして実行している場合は、環境変数を `launchctl` を使用して設定する必要があります。

  1. 各環境変数に対して、`launchctl setenv` を実行します。
         
         launchctl setenv OLLAMA_HOST "0.0.0.0"

  2. Ollamaアプリを再起動します。

  3. 上記の手順で解決しない場合は、以下の方法を試してください。

問題はDocker自体にあり、Dockerホストにアクセスするには、`host.docker.internal` に接続する必要があります。したがって、サービス内で `localhost` を `host.docker.internal` に置き換えることで、正常に動作するようになります。
         
         http://host.docker.internal:11434




### 

​

Linuxでの環境変数の設定

Ollamaをsystemdサービスとして実行している場合は、環境変数を `systemctl` を使用して設定する必要があります。

  1. `systemctl edit ollama.service` を実行してsystemdサービスを編集します。これにより、エディターが開きます。

  2. 各環境変数に対して、`[Service]` セクションの下に `Environment` 行を追加します。
         
         [Service]
         Environment="OLLAMA_HOST=0.0.0.0"

  3. 保存してエディターを閉じます。

  4. `systemd` をリロードし、Ollamaを再起動します。
         
         systemctl daemon-reload
         systemctl restart ollama




### 

​

Windowsでの環境変数の設定

Windowsでは、Ollamaはユーザーとシステムの環境変数を継承します。

  1. まず、タスクバーにあるOllamaのアイコンをクリックしてOllamaを終了します。
  2. コントロールパネルからシステム環境変数を編集します。
  3. `OLLAMA_HOST` や `OLLAMA_MODELS` など、ユーザーアカウントの新しい環境変数を作成または編集します。
  4. [OK/適用] をクリックして保存します。
  5. 新しいターミナルウィンドウから `ollama` を実行します。



## 

​

ネットワーク上でOllamaを公開するにはどうすればよいですか？

Ollamaはデフォルトで127.0.0.1のポート11434にバインドされています。`OLLAMA_HOST` 環境変数を使用して、バインドするアドレスを変更してください。

## 

​

詳細情報

Ollamaの詳細については、以下を参照してください。

  * [Ollama](https://github.com/jmorganca/ollama)
  * [Ollama FAQ](https://github.com/ollama/ollama/blob/main/docs/faq)



* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/development/models-integration/ollama.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/development/models-integration%2Follama.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[LocalAIでデプロイしたローカルモデルを統合](/ja-jp/development/models-integration/localai)[LiteLLM Proxyを使用してモデルを統合する](/ja-jp/development/models-integration/litellm)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * 簡単な統合
  * Ollamaのダウンロードと起動
  * FAQ
  * ⚠️ DifyとOllamaをDockerでデプロイしている場合、以下のエラーが発生することがあります。
  * Macでの環境変数の設定
  * Linuxでの環境変数の設定
  * Windowsでの環境変数の設定
  * ネットワーク上でOllamaを公開するにはどうすればよいですか？
  * 詳細情報



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/development/models-integration/openllm

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

モデルの統合

OpenLLMでデプロイしたローカルモデルを統合

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

    * [Hugging Faceのオープンソースモデルを統合](/ja-jp/development/models-integration/hugging-face)
    * [Replicateのオープンソースモデルを統合](/ja-jp/development/models-integration/replicate)
    * [Xinferenceでデプロイしたローカルモデルを統合](/ja-jp/development/models-integration/xinference)
    * [OpenLLMでデプロイしたローカルモデルを統合](/ja-jp/development/models-integration/openllm)
    * [LocalAIでデプロイしたローカルモデルを統合](/ja-jp/development/models-integration/localai)
    * [Ollamaでデプロイしたローカルモデルを統合](/ja-jp/development/models-integration/ollama)
    * [LiteLLM Proxyを使用してモデルを統合する](/ja-jp/development/models-integration/litellm)
    * [GPUStackによってデプロイされたローカルモデルの統合](/ja-jp/development/models-integration/gpustack)
    * [AWS Bedrock からモデルを統合する](/ja-jp/development/models-integration/aws-bedrock-deepseek)
  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




モデルの統合

# OpenLLMでデプロイしたローカルモデルを統合

Copy page

[OpenLLM](https://github.com/bentoml/OpenLLM)を使用すると、任意のオープンソース大規模言語モデルに対して推論を行い、クラウドまたはローカルにデプロイし、強力なAIアプリケーションを構築することができます。 DifyはローカルデプロイされたOpenLLMモデルの推論能力をサポートしています。

## 

​

OpenLLM モデルのデプロイ

### 

​

デプロイの開始

以下の方法でデプロイを開始できます：
    
    
    docker run --rm -it -p 3333:3000 ghcr.io/bentoml/openllm start facebook/opt-1.3b --backend pt

> 注意点：ここで使用されている facebook/opt-1.3b モデルはあくまで例示であり、効果が不十分な場合があります。実際の状況に応じて適切なモデルを選択してください。詳細なモデルについては、[サポートされているモデル一覧](https://github.com/bentoml/OpenLLM#-supported-models)を参照してください。

モデルのデプロイが完了したら、Difyでモデルを接続して使用することができます。

`設定 > モデルプロバイダー > OpenLLM` の中で以下を入力します：

  * モデル名：`facebook/opt-1.3b`
  * サーバー URL：`http://<Machine_IP>:3333` ここで `<Machine_IP>` をあなたのマシンの IP アドレスに置き換えてください。 “保存” を押せば、アプリケーション内でこのモデルを使用することができます。



この説明はあくまで迅速な接続のための例として提供されています。OpenLLMのその他の特性や情報については、[OpenLLM](https://github.com/bentoml/OpenLLM) を参照してください。

* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/development/models-integration/openllm.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/development/models-integration%2Fopenllm.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[Xinferenceでデプロイしたローカルモデルを統合](/ja-jp/development/models-integration/xinference)[LocalAIでデプロイしたローカルモデルを統合](/ja-jp/development/models-integration/localai)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * OpenLLM モデルのデプロイ
  * デプロイの開始



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/development/models-integration/replicate

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

モデルの統合

Replicateのオープンソースモデルを統合

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

    * [Hugging Faceのオープンソースモデルを統合](/ja-jp/development/models-integration/hugging-face)
    * [Replicateのオープンソースモデルを統合](/ja-jp/development/models-integration/replicate)
    * [Xinferenceでデプロイしたローカルモデルを統合](/ja-jp/development/models-integration/xinference)
    * [OpenLLMでデプロイしたローカルモデルを統合](/ja-jp/development/models-integration/openllm)
    * [LocalAIでデプロイしたローカルモデルを統合](/ja-jp/development/models-integration/localai)
    * [Ollamaでデプロイしたローカルモデルを統合](/ja-jp/development/models-integration/ollama)
    * [LiteLLM Proxyを使用してモデルを統合する](/ja-jp/development/models-integration/litellm)
    * [GPUStackによってデプロイされたローカルモデルの統合](/ja-jp/development/models-integration/gpustack)
    * [AWS Bedrock からモデルを統合する](/ja-jp/development/models-integration/aws-bedrock-deepseek)
  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




モデルの統合

# Replicateのオープンソースモデルを統合

Copy page

DifyはReplicate上の[言語モデル](https://replicate.com/collections/language-models)と[埋め込みモデル](https://replicate.com/collections/embedding-models)に接続することができます。言語モデルはDifyの推論モデルに対応し、埋め込みモデルはDifyの埋め込みモデルに対応します。

具体的な手順は以下の通りです：

  1. Replicateのアカウントが必要です（[登録ページ](https://replicate.com/signin?next=/docs)）。
  2. APIキーを取得します（[取得ページ](https://replicate.com/account/api-tokens)）。
  3. モデルを選択します。[言語モデル](https://replicate.com/collections/language-models)と[埋め込みモデル](https://replicate.com/collections/embedding-models)からモデルを選びます。
  4. Difyの`設定 > モデルプロバイダ > Replicate`にてモデルを追加します。



APIキーは第2ステップで設定したAPIキーです。モデル名とモデルバージョンはモデルの詳細ページで見つけることができます：

* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/development/models-integration/replicate.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20c&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/development/models-integration%2Freplicate.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[Hugging Faceのオープンソースモデルを統合](/ja-jp/development/models-integration/hugging-face)[Xinferenceでデプロイしたローカルモデルを統合](/ja-jp/development/models-integration/xinference)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/development/models-integration/xinference

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

モデルの統合

Xinferenceでデプロイしたローカルモデルを統合

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

    * [Hugging Faceのオープンソースモデルを統合](/ja-jp/development/models-integration/hugging-face)
    * [Replicateのオープンソースモデルを統合](/ja-jp/development/models-integration/replicate)
    * [Xinferenceでデプロイしたローカルモデルを統合](/ja-jp/development/models-integration/xinference)
    * [OpenLLMでデプロイしたローカルモデルを統合](/ja-jp/development/models-integration/openllm)
    * [LocalAIでデプロイしたローカルモデルを統合](/ja-jp/development/models-integration/localai)
    * [Ollamaでデプロイしたローカルモデルを統合](/ja-jp/development/models-integration/ollama)
    * [LiteLLM Proxyを使用してモデルを統合する](/ja-jp/development/models-integration/litellm)
    * [GPUStackによってデプロイされたローカルモデルの統合](/ja-jp/development/models-integration/gpustack)
    * [AWS Bedrock からモデルを統合する](/ja-jp/development/models-integration/aws-bedrock-deepseek)
  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




モデルの統合

# Xinferenceでデプロイしたローカルモデルを統合

Copy page

[Xorbits推論](https://github.com/xorbitsai/inference)は、大型言語モデル、音声認識モデル、マルチモーダルモデルにサービスを提供するための強力で汎用的な分散推論フレームワークであり、ノートパソコンでも使用可能です。chatglm、baichuan、whisper、vicuna、orcaなど、GGML互換の多くのモデルをサポートしています。Difyは、ローカルにデプロイされたXinferenceの大型言語モデル推論および埋め込み機能を接続することができます。

## 

​

Xinferenceのデプロイ

### 

​

デプロイの開始

Xinferenceのデプロイ方法は、[ローカルデプロイ](https://github.com/xorbitsai/inference/blob/main/README_zh_CN.md#%E6%9C%AC%E5%9C%B0%E9%83%A8%E7%BD%B2)と[分散デプロイ](https://github.com/xorbitsai/inference/blob/main/README_zh_CN.md#%E5%88%86%E5%B8%83%E5%BC%8F%E9%83%A8%E7%BD%B2)の2つがあります。ここではローカルデプロイを例に説明します。

  1. まず、PyPIを使用してXinferenceをインストールします：
         
         $ pip install "xinference[all]"

  2. ローカルデプロイ方式でXinferenceを起動します：
         
         $ xinference-local
         2023-08-20 19:21:05,265 xinference   10148 INFO     Xinference successfully started. Endpoint: http://127.0.0.1:9997
         2023-08-20 19:21:05,266 xinference.core.supervisor 10148 INFO     Worker 127.0.0.1:37822 has been added successfully
         2023-08-20 19:21:05,267 xinference.deploy.worker 10148 INFO     Xinference worker successfully started.

Xinferenceはデフォルトでローカルにワーカーを起動し、エンドポイントは`http://127.0.0.1:9997`、ポートはデフォルトで`9997`です。デフォルトではローカルホストからのみアクセス可能ですが、`-H 0.0.0.0`を設定することで、外部クライアントからもアクセス可能になります。ホストやポートのさらに詳細な設定方法については、`xinference-local --help`で確認できます。

> Dify Dockerデプロイ方式を使用する場合、ネットワーク設定に注意が必要です。DifyコンテナがXinferenceのエンドポイントにアクセスできるように設定してください。Difyコンテナ内部からローカルホストにはアクセスできないため、ホストマシンのIPアドレスを使用する必要があります。

  3. モデルの作成とデプロイ

`http://127.0.0.1:9997`にアクセスし、デプロイするモデルとその仕様を選択します。以下の図を参照してください：




モデルによっては異なるハードウェアプラットフォームでの互換性が異なるため、[Xinference内蔵モデル](https://inference.readthedocs.io/en/latest/models/builtin/index.html)を確認して、作成するモデルが現在のハードウェアプラットフォームでサポートされているかどうかを確認してください。 4\. モデルUIDの取得

上記ページから対応するモデルのIDを取得します。例：`2c886330-8849-11ee-9518-43b0b8f40bea` 5\. モデルのデプロイ完了後、Difyでのモデル接続

`設定 > モデルプロバイダー > Xinference`に以下を入力します：

  * モデル名称：`vicuna-v1.3`
  * サーバーURL：`http://<Machine_IP>:9997` **あなたのマシンのIPアドレスに置き換えてください**
  * モデルUID：`2c886330-8849-11ee-9518-43b0b8f40bea`



“保存”をクリックすると、アプリケーションでそのモデルを使用できます。

Difyはまた、[Xinference埋め込みモデル](https://github.com/xorbitsai/inference/blob/main/README_zh_CN.md#%E5%86%85%E7%BD%AE%E6%A8%A1%E5%9E%8B)をEmbeddingモデルとして使用することもサポートしています。設定ボックスで`Embeddings`タイプを選択するだけで使用可能です。

Xinferenceの詳細については、[Xorbits推論](https://github.com/xorbitsai/inference/blob/main/README_zh_CN)を参照してください。

* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/development/models-integration/xinference.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20re&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/development/models-integration%2Fxinference.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[Replicateのオープンソースモデルを統合](/ja-jp/development/models-integration/replicate)[OpenLLMでデプロイしたローカルモデルを統合](/ja-jp/development/models-integration/openllm)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * Xinferenceのデプロイ
  * デプロイの開始



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/getting-started/cloud

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

入門

クラウドサービス

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




入門

# クラウドサービス

Copy page

注意：Difyは現在ベータテスト段階にあります。ドキュメントと製品に不一致がある場合は、実際の製品体験をご参照ください。

Difyは誰でも[手軽にご利用いただける](https://cloud.dify.ai/apps)クラウドサービスです。[プランと価格](https://dify.ai/pricing)をご確認の上、お客様の要求に最適なプランをお選びください。

まずは[Sandboxプラン](http://cloud.dify.ai/)からお試しいただけます。クレジットカード不要で200回のOpenAI APIコールを無料で試すことができます。クラウド版のSandboxプランのご利用には、GitHubまたはGoogleアカウント、および有効なOpenAI APIキーが必要です。使用手順は以下の通りです：

  1. [Difyクラウド](https://cloud.dify.ai)にサインアップし、新しいワークスペースを作成するか、既存のワークスペースに参加します。
  2. モデルプロバイダーを設定するか、Dify提供のモデルプロバイダーを使えます。
  3. 以上で、[アプリケーションを作成](../guides/application-orchestrate/creating-an-application)できます！



### 

​

よくある質問

**Q: Difyクラウドを使用する際、私のデータはどのように処理・保存されますか？**

A: Difyクラウドを使用すると、ユーザーデータは米国東部地域にあるAWSサーバーに安全に保存されます。これには、積極的に入力したデータとアプリから生成されたデータの両方が含まれます。私たちはデータのセキュリティと完全性を最優先事項としており、クラウドストレージソリューションにおける最高水準の基準に基づき管理されることを確保しています。

**Q: APIキーや他の機密情報を保護するためにどのような対策がありますか？**

A: Difyでは、APIキーや他の機密情報を保護することの重要性を深く理解しています。これらの情報は保存時に暗号化され、Dify側から閲覧することはできません。アクセスは、正当な所有者であるユーザーご本人のみに限定されます。

**Q: Difyクラウドでのアプリの匿名化について説明していただけますか？**

A: Difyクラウドでは、プライバシーを確保し、暗号化と復号化のオーバーヘッドを減らすためにアプリのデータを匿名化しています。これは、アプリで使用されるデータが特定可能なユーザーアカウントと直接関連付けられないことを意味します。データを匿名化することで、クラウドサービスのパフォーマンスを維持しながらプライバシーを強化しています。

**Q: Difyクラウドから自分のアカウントと関連するすべてのデータを削除するプロセスはどのようになっていますか？**

A: アカウントおよび関連データの削除をご希望の場合、[アカウント設定](https://cloud.dify.ai/account)ページにアクセスするか、画面右上のアバターをクリックして「アカウント」を選択してください。ページ内に「アカウントを削除」ボタンがありますので、クリックして画面の指示に従ってください。当社はお客様のプライバシーとデータに関する権利を尊重しており、ご依頼に基づき、データ保護規制に従って、システムからお客様に関連するすべてのデータを消去いたします。

* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/getting-started/cloud.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/getting-started%2Fcloud.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[モデルプロバイダーリスト](/ja-jp/getting-started/readme/model-providers)[コミュニティ版](/ja-jp/getting-started/install-self-hosted/README)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * よくある質問



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/getting-started/dify-for-education

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

入門

Dify 教育版

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




入門

# Dify 教育版

Copy page

## 

​

はじめに

Dify教育版は、学生、教師、教育機関に手軽で手頃なAI学習・開発ツールを提供し、AI教育をより身近で普及させることを目指しています。

## 

​

メリット

  * **学生の方へ** ：Dify SaaSサブスクリプションサービスをより安い価格で利用でき、より多くの計算リソースを獲得できます。授業の課題、研究プロジェクト、AIアプリケーション開発に役立ちます。

  * **教師の方へ** ：Difyを教育現場でAI教材として活用し、学生たちがAIアプリケーション開発について深く学べるようサポートします。

  * **教育機関・学校の方へ** ：チームでAIリソースを簡単に管理でき、教育効率を高め、教育分野におけるAIの可能性をさらに探求できます。




## 

​

Dify教育版特典

Dify教育版では現在、**無料のDifyプロフェッショナルプラン** を提供しており、毎年一度更新が必要です。

今後も学習や授業をサポートするための教育版専用の特典を継続的に提供していく予定です。ご期待ください。

## 

​

Dify教育認証の申請方法

### 

​

申請資格

Dify教育版認証を申請するには、以下の条件を**すべて** 満たす必要があります：

  1. 18歳以上であること
  2. 現在、学生、教師、または教育機関の職員であること
  3. 教育用メールアドレスでDifyアカウントを登録していること



### 

​

申請手順

  1. **Difyアカウントの作成**



教育版認証を申請する前に、教育用メールアドレスで[Difyアカウントを登録](https://cloud.dify.ai/signin)してください。

  2. **Dify教育版認証の申請**

     1. 教育用メールアドレスで登録したDifyアカウントにログインし、右上のユーザーアイコンをクリックして、ドロップダウンメニューから**設定** を選択します。

     2. 設定ページで、**請求 > 教育版認証を申請**をクリックします。

     3. 学校の正式名称を入力します _（略称は使用しないでください）_ 。

     4. 申請人の身分を選択します。

     5. **利用規約に同意する** にチェックを入れ、**送信** をクリックします。



## 

​

Dify教育認証状況の確認方法

教育認証の申請が成功すると、右上のユーザーアイコンをクリックして、ドロップダウンメニューからサブスクリプション状況を確認できます。サブスクリプション状況が`Edu`と表示されていれば、教育認証が成功しています。

## 

​

Dify教育クーポンの使用方法

### 

​

Dify教育版サブスクリプションの概要

Dify教育認証が完了すると、クーポンが自動的にあなたのアカウントに追加されます。

教育版サブスクリプション特典：**完全無料のプロフェッショナルプラン**

サブスクリプション有効期間：**12ヶ月**

教育版サブスクリプションの制限：

  * 有効期限内に更新する必要があります。**期限が切れると特典が無効になります** 。
  * 教育版認証は**年に一度** 更新申請が必要です。
  * 教育版サブスクリプションは、申請者がワークスペースのオーナーである場合のみ使用できます。



### 

​

教育版サブスクリプションの有効化

  1. 教育版認証完了後、アップグレード画面で年間支払いのProfessionalサブスクリプションを選択し、支払い画面に進みます。



  2. 支払い処理中に、クーポンがあなたのアカウントに自動的に適用されます。クーポンコードを手動で入力する必要はありません。



  3. サブスクリプションが有効化されると、あなたのサブスクリプション状態が`Pro(Edu)`に更新されます。



## 

​

教育情報の更新方法

### 

​

メールアドレスの更新

メールアドレスを変更する必要がある場合は、現在のところ手動対応となっております。[support@dify.ai](mailto:support@dify.ai)までご連絡ください。

### 

​

学校情報の更新

  * **認証完了後に学校情報を変更したい場合** ：教育認証が完了した後に学校情報を変更する必要がある場合は、[support@dify.ai](mailto:support@dify.ai)までご連絡ください。

  * **認証期限切れ後の学校情報変更** ：教育認証の期限が切れた後は、再認証の際に新しい学校情報を入力することができます。




## 

​

Dify教育認証の更新方法

教育認証の期限が切れた場合は、前述の**Dify教育版認証の申請** セクションを参照して、再度申請を行ってください。

## 

​

よくある質問

  * **Difyの学習方法は？**


  1. 公式ドキュメントを参照する：[Dify公式ドキュメント](https://docs.dify.ai/)で、詳細な使用ガイドをご覧いただけます。

  2. コミュニティに参加する：[Dify Discordコミュニティ](https://discord.com/invite/FngNHpbcY7)に参加して、開発者と交流し、使用体験を共有しましょう。



  * **教育認証を申請できないのは誰ですか？**


  1. 18歳未満のユーザー。

  2. 個人用メールアドレス（Gmailなど）でアカウント登録したユーザー。



  * **教育認証が拒否/取り消された理由と対処法は？**



以下の状況では、教育認証の申請が拒否または取り消される可能性があります：

  1. 教育認証申請時に**利用規約に同意する** にチェックを入れなかった
  2. 教育機関のメールアドレスを使用していない
  3. 偽の学校や企業のメールアドレスを使用している
  4. 虚偽の個人情報や学校情報を提供している
  5. 教育特典の不正使用



申請が拒否されたり認証が取り消された場合は、`<support@dify.ai>`までご連絡ください。

  * **卒業または学校を離れた後も教育認証は有効ですか？**



教育認証は教育機関のメールアドレスの状態に直接関連しています。教育メールアドレスが正常に使用できる限り、認証は有効です。

教育メールアドレスが使用できなくなった場合は、`<support@dify.ai>`までご連絡ください。

  * **教育機関のメールアドレスを持っていない場合、教育認証を申請するにはどうすればよいですか？**



現在、Dify教育認証は主に教育機関のメールアドレスによる身分確認を通じて行われています。教育機関のメールアドレスをお持ちでない場合は、誠に申し訳ありませんが、教育認証を申請することはできません。

  * **既にDifyプランを購読中です。教育版認証を申請した後、サブスクリプション内容はどうなりますか？**



現在有料サブスクリプションをご利用の場合、教育版認証の申請が成功した後、現在の有料サブスクリプション期間が終了した後に、無料のプロフェッショナルプランを手動で有効化することができます。

無料プランをご利用の場合、教育版認証の申請が成功した後、無料のプロフェッショナルプランを手動で有効化する必要があります。

  * **教育版認証を申請し、無料のプロフェッショナルプランサブスクリプションを取得しましたが、継続して使用したくない場合はどうすればよいですか？**



特に操作は必要ありません。サブスクリプションは有効期限が終了すると自動的に失効します。継続して使用したい場合は、期限切れ前に教育版認証を再申請するだけです。

## 

​

重要事項

Dify教育版は真正な学生、教師、教育機関のみがご利用いただけます。虚偽の情報による取得や商業目的での使用は禁止されています。

アカウントの使用状況を定期的に審査し、不正使用に対しては教育版資格の即座の停止とアカウント停止の権利を留保します。

Difyは教育版プログラムの随時変更または終了の権利を留保し、関連する争議に対する最終解釈権を有します。

* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/getting-started/dify-for-education.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20for-educat&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/getting-started%2Fdify-for-education.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[Dify Premium](/ja-jp/getting-started/dify-premium)[APIアクセス](/ja-jp/openapi-api-access-readme)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * はじめに
  * メリット
  * Dify教育版特典
  * Dify教育認証の申請方法
  * 申請資格
  * 申請手順
  * Dify教育認証状況の確認方法
  * Dify教育クーポンの使用方法
  * Dify教育版サブスクリプションの概要
  * 教育版サブスクリプションの有効化
  * 教育情報の更新方法
  * メールアドレスの更新
  * 学校情報の更新
  * Dify教育認証の更新方法
  * よくある質問
  * 重要事項



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/getting-started/dify-premium

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

入門

Dify Premium

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




入門

# Dify Premium

Copy page

プレミアムPremium

Dify Premiumは[AWS AMI](https://docs.aws.amazon.com/ja_jp/AWSEC2/latest/UserGuide/ec2-instances-and-amis.html)製品であります。これにより、ブランドのカスタマイズが可能で、AWS EC2にワンクリックで展開できます。[AWS Marketplace](https://aws.amazon.com/marketplace/pp/prodview-t22mebxzwjhu6)から購読し、次のようなシナリオに最適です：

  * 中小企業が1つ以上のアプリケーションをサーバーに構築し、データのプライバシーに関心がある場合。
  * [Dify Cloud](/ja-jp/getting-started/cloud)のサブスクリプションプランに関心があり、しかし、活用事例が[プラン](https://dify.ai/pricing)で提供されるリソースを超える場合。
  * Dify Enterpriseを組織内で導入する前に、POC検証を行いたい場合。



## 

​

セットアップ

Difyを初めて使用する際には、管理者初期化パスワード（EC2インスタンスIDとして設定）を入力し、セットアッププロセスを開始してください。

AMIを展開した後は、EC2コンソールで見つかるインスタンスのパブリックIPを使用してDifyにアクセスします（デフォルトではHTTPポート80を使用します）。

## 

​

アップグレード

EC2インスタンスで、次のコマンドを実行してください：
    
    
    git clone https://github.com/langgenius/dify.git /tmp/dify
    mv -f /tmp/dify/docker/* /dify/
    rm -rf /tmp/dify
    docker-compose down
    docker-compose pull
    docker-compose -f docker-compose.yaml -f docker-compose.override.yaml up -d

コミュニティ版を v1.0.0 にアップグレードする

アップグレードは以下の手順で行います：

  1. データのバックアップ
  2. プラグインの移行
  3. メインプロジェクトのアップグレード



### 

​

1\. データのバックアップ

1.1 `cd` コマンドで Dify プロジェクトのパスに移動し、バックアップ用のブランチを作成します。

1.2 次のコマンドを実行して、docker-compose YAML ファイルをバックアップします（オプション）。
    
    
    cd docker
    cp docker-compose.yaml docker-compose.yaml.$(date +%s).bak

1.3 サービスを停止するために以下のコマンドを実行し、Docker ディレクトリでデータバックアップを作成します。
    
    
    docker compose down
    tar -cvf volumes-$(date +%s).tgz volumes

### 

​

2\. バージョンアップ

`v1.0.0` は Docker Compose を使用してデプロイできます。`cd` コマンドで Dify プロジェクトのパスに移動し、以下のコマンドで Dify のバージョンをアップグレードします：
    
    
    git checkout 1.0.0 # 1.0.0 ブランチに切り替える
    cd docker
    docker compose -f docker-compose.yaml up -d

### 

​

3\. ツールの移行をプラグインに変換

このステップでは、以前のコミュニティ版で使用していたツールやモデルプロバイダを自動的にデータ移行し、新しいバージョンのプラグイン環境にインストールします。

  1. `docker ps` コマンドを実行して、docker-api コンテナの ID を確認します。



例：
    
    
    docker ps
    CONTAINER ID   IMAGE                                       COMMAND                  CREATED       STATUS                 PORTS                                                                                                                             NAMES
    417241cd****   nginx:latest                                "sh -c 'cp /docker-e…"   3 hours ago   Up 3 hours             0.0.0.0:80->80/tcp, :::80->80/tcp, 0.0.0.0:443->443/tcp, :::443->443/tcp                                                          docker-nginx-1
    f84aa773****   langgenius/dify-api:1.0.0                   "/bin/bash /entrypoi…"   3 hours ago   Up 3 hours             5001/tcp                                                                                                                          docker-worker-1
    a3cb19c2****   langgenius/dify-api:1.0.0                   "/bin/bash /entrypoi…"   3 hours ago   Up 3 hours             5001/tcp                                                                                                                          docker-api-1

`docker exec -it a3cb19c2**** bash` コマンドを実行してコンテナのターミナルにアクセスし、以下を実行します：
    
    
    poetry run flask extract-plugins --workers=20

> エラーが発生した場合は、サーバーに `poetry` 環境をインストールしてから実行してください。コマンド実行後、端末に入力待機のプロンプトが表示された場合は「Enter」を押して入力をスキップします。

このコマンドは、現在の環境で使用しているすべてのモデルとツールを抽出します。workers パラメータは並行プロセス数を決定し、必要に応じて調整できます。コマンドが終了すると、結果が保存される `plugins.jsonl` ファイルが生成されます。このファイルには、現在の Dify インスタンス内のすべてのワークスペースのプラグイン情報が含まれます。

インターネット接続が正常で、`https://marketplace.dify.ai` にアクセスできることを確認してください。`docker-api-1` コンテナ内で以下のコマンドを実行します：
    
    
    poetry run flask install-plugins --workers=2

このコマンドは、最新のコミュニティ版に必要なすべてのプラグインをダウンロードしてインストールします。ターミナルに `Install plugins completed.` と表示されたら、移行は完了です。

## 

​

カスタマイズ

セルフホスト展開の場合と同様に、EC2インスタンス内の.envファイルの環境変数を必要に応じて変更することができます。その後、以下のコマンドを使用してDifyを再起動してください：
    
    
    docker-compose down
    ocker-compose -f docker-compose.yaml -f docker-compose.override.yaml up -d

## 

​

カスタマイズ Webアプリのロゴやブランド

この機能は設定の**カスタマイズ** で有効にすることができます。**Powered by Difyを削除** を有効にして、独自のロゴをアップロードしてください。

* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/getting-started/dify-premium.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20prem&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/getting-started%2Fdify-premium.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[よくある質問](/ja-jp/getting-started/install-self-hosted/faq)[Dify 教育版](/ja-jp/getting-started/dify-for-education)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * セットアップ
  * アップグレード
  * カスタマイズ
  * カスタマイズ Webアプリのロゴやブランド



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/getting-started/install-self-hosted/README

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

Dify コミュニティ版

コミュニティ版

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

    * [コミュニティ版](/ja-jp/getting-started/install-self-hosted/README)
    * [Docker Compose デプロイ](/ja-jp/getting-started/install-self-hosted/docker-compose)
    * [ローカルソースコードからの起動](/ja-jp/getting-started/install-self-hosted/local-source-code)
    * [aaPanelでのデプロイ方法](/ja-jp/getting-started/install-self-hosted/bt-panel)
    * [単独でフロントエンドのDockerコンテナを起動する](/ja-jp/getting-started/install-self-hosted/start-the-frontend-docker-container)
    * [環境変数の説明](/ja-jp/getting-started/install-self-hosted/environments)
    * [よくある質問](/ja-jp/getting-started/install-self-hosted/faq)
  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




Dify コミュニティ版

# コミュニティ版

Copy page

Dify コミュニティ版はオープンソース版で、以下の2つの方法のいずれかでデプロイできます：

  * [Docker Compose デプロイ](/ja-jp/getting-started/install-self-hosted/docker-compose)
  * [ローカルソースコードで起動](/ja-jp/getting-started/install-self-hosted/local-source-code)



GitHub で [Dify コミュニティ版](https://github.com/langgenius/dify) をご覧ください。

### 

​

コードの寄稿

正確な審査を確保するため、直接変更をコミットする権限を持つ寄稿者を含むすべてのコードの寄稿は、PR（プルリクエスト）を提出し、マージされる前にコア開発者の承認を得る必要があります。

私たちはすべての人のPRを歓迎します！ご協力いただける場合は、[寄稿ガイド](https://github.com/langgenius/dify/blob/main/CONTRIBUTING_JA) でプロジェクトに貢献する方法についての詳細を確認できます。

* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/getting-started/install-self-hosted/README.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/getting-started/install-self-hosted%2FREADME.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[クラウドサービス](/ja-jp/getting-started/cloud)[Docker Compose デプロイ](/ja-jp/getting-started/install-self-hosted/docker-compose)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * コードの寄稿



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/getting-started/install-self-hosted/bt-panel

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

Dify コミュニティ版

aaPanelでのデプロイ方法

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

    * [コミュニティ版](/ja-jp/getting-started/install-self-hosted/README)
    * [Docker Compose デプロイ](/ja-jp/getting-started/install-self-hosted/docker-compose)
    * [ローカルソースコードからの起動](/ja-jp/getting-started/install-self-hosted/local-source-code)
    * [aaPanelでのデプロイ方法](/ja-jp/getting-started/install-self-hosted/bt-panel)
    * [単独でフロントエンドのDockerコンテナを起動する](/ja-jp/getting-started/install-self-hosted/start-the-frontend-docker-container)
    * [環境変数の説明](/ja-jp/getting-started/install-self-hosted/environments)
    * [よくある質問](/ja-jp/getting-started/install-self-hosted/faq)
  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




Dify コミュニティ版

# aaPanelでのデプロイ方法

Copy page

## 

​

前提条件

Difyをインストールする前に、以下の最低システム要件を満たしていることを確認してください：

  * CPU ≥ 2 Core
  * RAM ≥ 4 GiB

OS| ソフトウェア| 説明  
---|---|---  
Linuxプラットフォーム| aaPanel 7.0.11以降| aaPanelのインストール方法については、[aaPanelインストールガイド](https://www.aapanel.com/new/download.html#install)を参照してください。  
  
## 

​

デプロイ手順

  1. aaPanelにログインし、メニューバーで`Docker`をクリックします。

  2. 初めて利用する場合は、`Docker`と`Docker Compose`サービスのインストールを促されるので、`install`をクリックしてください。既にインストールされている場合は、このステップをスキップしてください。

  3. インストールが完了したら、`One-Click Install`から`Dify`を見つけて、`install`をクリックします。

  4. ドメイン名やポートなどの基本情報を設定し、インストールを完了させます。




ドメイン名はオプションです。ドメイン名を入力した場合は、[Website] —> [Proxy Project]から管理できます。ドメイン名を設定した後は、[Allow external access]のチェックを入れる必要はありません。それ以外の場合は、ポートを介してアクセスする前にチェックを入れる必要があります。

  5. インストールが完了したら、前のステップで設定したドメイン名またはIPアドレスとポートをブラウザで入力してアクセスします。


  * 名前（Name）：アプリケーション名、デフォルトは`Dify-characters`
  * バージョン選択(Version selection)：デフォルトは`latest`
  * ドメイン名(Domain name)：ドメイン名でアクセスする必要がある場合は、ここでドメイン名を設定し、ドメイン名をサーバーに解決してください。
  * 外部アクセスを許可(Allow external access)：`IP+ポート`を介して直接アクセスする必要がある場合は、チェックを入れてください。ドメイン名を設定している場合は、ここでチェックを入れないでください。
  * ポート(Port)：デフォルトは`8088`であり、必要に応じて変更できます。


  6. 提出後、パネルが自動的にアプリケーションを初期化し、約1〜3分かかります。初期化が完了したら、アクセスできるようになります。



### 

​

Difyにアクセスする

管理者初期化ページにアクセスして、管理者アカウントを設定してください：
    
    
    # ドメインを設定した場合
    http://yourdomain/install
    
    # `IP+ポート`を介してアクセスする場合
    http://your_server_ip:8088/install

Difyウェブインターフェースのアドレス：
    
    
    # ドメインを設定した場合
    http://yourdomain/
    
    # `IP+ポート`を介してアクセスする場合
    http://your_server_ip:8088/

* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/getting-started/install-self-hosted/bt-panel.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/getting-started/install-self-hosted%2Fbt-panel.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[ローカルソースコードからの起動](/ja-jp/getting-started/install-self-hosted/local-source-code)[単独でフロントエンドのDockerコンテナを起動する](/ja-jp/getting-started/install-self-hosted/start-the-frontend-docker-container)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * 前提条件
  * デプロイ手順
  * Difyにアクセスする



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/getting-started/install-self-hosted/docker-compose

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

Dify コミュニティ版

Docker Compose デプロイ

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

    * [コミュニティ版](/ja-jp/getting-started/install-self-hosted/README)
    * [Docker Compose デプロイ](/ja-jp/getting-started/install-self-hosted/docker-compose)
    * [ローカルソースコードからの起動](/ja-jp/getting-started/install-self-hosted/local-source-code)
    * [aaPanelでのデプロイ方法](/ja-jp/getting-started/install-self-hosted/bt-panel)
    * [単独でフロントエンドのDockerコンテナを起動する](/ja-jp/getting-started/install-self-hosted/start-the-frontend-docker-container)
    * [環境変数の説明](/ja-jp/getting-started/install-self-hosted/environments)
    * [よくある質問](/ja-jp/getting-started/install-self-hosted/faq)
  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




Dify コミュニティ版

# Docker Compose デプロイ

Copy page

### 

​

前提条件

> Dify インストール前に, マシンが最小インストール要件を満たしていることを確認してください：
> 
>   * CPU >= 2 Core
>   * RAM >= 4 GiB
> 


OS| ソフトウェア| 説明  
---|---|---  
macOS 10.14またはそれ以降| Docker Desktop| Docker仮想マシン (VM) を少なくとも2つの仮想CPU (vCPU) と8 GBの初期メモリを使用するように設定してください。そうしないと、インストールが失敗する可能性があります。詳細については[MacにDocker Desktopをインストール](https://docs.docker.com/desktop/mac/install/)を参照してください。  
Linuxプラットフォーム| Docker 19.03以降Docker Compose 1.28以降| 詳細については[Dockerのインストール](https://docs.docker.com/engine/install/)および[Docker Composeのインストール](https://docs.docker.com/compose/install/)を参照してください。  
WSL 2を有効にしたWindows| Docker Desktop| ソースコードやその他のデータをLinuxコンテナにバインドする際には、それらをWindowsファイルシステムではなくLinuxファイルシステムに保存することをお勧めします。詳細については[WSL 2バックエンドを使用してWindowsにDocker Desktopをインストール](https://docs.docker.com/desktop/windows/install/#wsl-2-backend)を参照してください。  
  
### 

​

Difyのクローン

Difyのソースコードをローカルにクローンします
    
    
    # 現在の最新バージョンは0.15.3だと仮定すると
    git clone https://github.com/langgenius/dify.git --branch 0.15.3

### 

​

Difyの起動

  1. difyソースコードのdockerディレクトリに移動し、次のコマンドを実行してdifyを起動する：
         
         cd dify/docker

  2. 環境配置ファイルをコピーする
         
         cp .env.example .env

  3. Docker コンテナを起動する

システムにインストールしたDocker Composeのバージョンをベースに，相応しい命令を使ってコンテナを起動します。 `$ docker compose version`を通してdockerのバージョンをチェックできます，詳しくは [Docker ドキュメント](https://docs.docker.com/compose/#compose-v2-and-the-new-docker-compose-command)を参考してください：

     * Docker Compose V2を使用する場合，以下の命令を入力する：
    
    docker compose up -d

     * Docker Compose V1を使用する場合，以下の命令を入力する：
    
    docker-compose up -d




上記のコマンドを実行すると、すべてのコンテナの状態とポートマッピングを表示する以下のような出力が表示されるはずです：
    
    
    [+] Running 11/11
     ✔ Network docker_ssrf_proxy_network  Created                                                                 0.1s 
     ✔ Network docker_default             Created                                                                 0.0s 
     ✔ Container docker-redis-1           Started                                                                 2.4s 
     ✔ Container docker-ssrf_proxy-1      Started                                                                 2.8s 
     ✔ Container docker-sandbox-1         Started                                                                 2.7s 
     ✔ Container docker-web-1             Started                                                                 2.7s 
     ✔ Container docker-weaviate-1        Started                                                                 2.4s 
     ✔ Container docker-db-1              Started                                                                 2.7s 
     ✔ Container docker-api-1             Started                                                                 6.5s 
     ✔ Container docker-worker-1          Started                                                                 6.4s 
     ✔ Container docker-nginx-1           Started                                                                 7.1s

最後に、すべてのコンテナが正常に稼働しているか確認：
    
    
    docker compose ps

これは3つのビジネスサービス `api / worker / web` と4つの基礎コンポーネント `weaviate / db / redis / nginx` を含まれます。
    
    
    NAME                IMAGE                              COMMAND                  SERVICE             CREATED             STATUS              PORTS
    docker-api-1        langgenius/dify-api:0.3.2          "/entrypoint.sh"         api                 4 seconds ago       Up 2 seconds        80/tcp, 5001/tcp
    docker-db-1         postgres:15-alpine                 "docker-entrypoint.s…"   db                  4 seconds ago       Up 2 seconds        0.0.0.0:5432->5432/tcp
    docker-nginx-1      nginx:latest                       "/docker-entrypoint.…"   nginx               4 seconds ago       Up 2 seconds        0.0.0.0:80->80/tcp
    docker-redis-1      redis:6-alpine                     "docker-entrypoint.s…"   redis               4 seconds ago       Up 3 seconds        6379/tcp
    docker-weaviate-1   semitechnologies/weaviate:1.18.4   "/bin/weaviate --hos…"   weaviate            4 seconds ago       Up 3 seconds        
    docker-web-1        langgenius/dify-web:0.3.2          "/entrypoint.sh"         web                 4 seconds ago       Up 3 seconds        80/tcp, 3000/tcp
    docker-worker-1     langgenius/dify-api:0.3.2          "/entrypoint.sh"         worker              4 seconds ago       Up 2 seconds        80/tcp, 5001/tcp

これらの手順を通して、Difyをローカルでインストールできます。

### 

​

Difyの更新

difyソースコードのdockerディレクトリに入り、以下のコマンドを順に実行：
    
    
    cd dify/docker
    git pull origin main
    docker compose down
    docker compose pull
    docker compose up -d

#### 

​

環境変数設定の同期 (重要！)

  * `.env.example` ファイルが更新された場合は、必ずローカルの `.env` ファイルをそれに応じて修正してください。
  * `.env` ファイル内のすべての設定項目を確認し、実際の運用環境に合わせて修正してください。`.env.example` から `.env` ファイルに新しい変数を追加したり、変更された値を更新する必要があるかもしれません。



### 

​

Difyへのアクセス

管理者初期化ページにアクセスして管理者アカウントを設定する:
    
    
    # ローカル環境
    http://localhost/install
    
    # サーバー環境
    http://your_server_ip/install

Dify web interface address:
    
    
    # ローカル環境
    http://localhost
    
    # サーバー環境
    http://your_server_ip

### 

​

Difyのカスタマイズ化

環境変数は docker/dotenvs にあります。もし変数を変更するには、対応する`.env.example` ファイル名の接尾辞 `.example` を削除し、ファイル中の変数を直接編集してください。その後、以下のコマンドを順に実行：
    
    
    docker compose down
    docker compose up -d

すべての環境変数は `docker/.env.example` にあります。

### 

​

もっと

もし疑問があれば、[よくある質問](/ja-jp/getting-started/install-self-hosted/faq)をご覧ください。

* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/getting-started/install-self-hosted/docker-compose.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20r-comp&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/getting-started/install-self-hosted%2Fdocker-compose.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[コミュニティ版](/ja-jp/getting-started/install-self-hosted/README)[ローカルソースコードからの起動](/ja-jp/getting-started/install-self-hosted/local-source-code)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * 前提条件
  * Difyのクローン
  * Difyの起動
  * Difyの更新
  * 環境変数設定の同期 (重要！)
  * Difyへのアクセス
  * Difyのカスタマイズ化
  * もっと



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/getting-started/install-self-hosted/environments

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

Dify コミュニティ版

環境変数の説明

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

    * [コミュニティ版](/ja-jp/getting-started/install-self-hosted/README)
    * [Docker Compose デプロイ](/ja-jp/getting-started/install-self-hosted/docker-compose)
    * [ローカルソースコードからの起動](/ja-jp/getting-started/install-self-hosted/local-source-code)
    * [aaPanelでのデプロイ方法](/ja-jp/getting-started/install-self-hosted/bt-panel)
    * [単独でフロントエンドのDockerコンテナを起動する](/ja-jp/getting-started/install-self-hosted/start-the-frontend-docker-container)
    * [環境変数の説明](/ja-jp/getting-started/install-self-hosted/environments)
    * [よくある質問](/ja-jp/getting-started/install-self-hosted/faq)
  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




Dify コミュニティ版

# 環境変数の説明

Copy page

このドキュメントは最新でない可能性があります。最新の構成ファイルをご参照ください：

  * [docker-compose.yaml](https://github.com/langgenius/dify/blob/5f8d20b5b2bb51f19547467167b18d9c0f6ffbb8/docker/docker-compose.yaml)

  * [.env.example](https://github.com/langgenius/dify/blob/5f8d20b5b2bb51f19547467167b18d9c0f6ffbb8/docker/.env.example)




## 

​

公共変数

### 

​

CONSOLE_API_URL

コンソールAPIのバックエンドのURLです。認証コールバックを組み合わせるために使用され、空の場合は同じドメインになります。例：`https://api.console.dify.ai`。

### 

​

CONSOLE_WEB_URL

コンソールウェブの**フロントエンド** のURLです。フロントエンドアドレスの一部を組み合わせたり、CORS設定に使用されます。空の場合は同じドメインになります。例：`https://console.dify.ai`

### 

​

SERVICE_API_URL

サービスAPIのURLです。**フロントエンド** にサービスAPIのベースURLを表示するために使用されます。空の場合は同じドメインになります。例：`https://api.dify.ai`

### 

​

APP_API_URL

WebアプリAPIのバックエンドURLです。**フロントエンド** APIのバックエンドアドレスを宣言するために使用されます。空の場合は同じドメインになります。例：`https://app.dify.ai`

### 

​

APP_WEB_URL

WebアプリのURLです。ファイルプレビューのためと**フロントエンド** にダウンロード用のURLを表示します、またはマルチモデル入力として使用されます。空の場合は、アプリと同じドメインになります。例：`https://udify.app/`

### 

​

FILES_URL

ファイルプレビューまたはダウンロード用のURLプレフィックスです。ファイルプレビューやダウンロードURLをフロントエンドに表示したり、マルチモーダルモデルの入力として使用します。他人による偽造を防ぐため、画像プレビューURLは署名付きで、5分の有効期限があります。

* * *

## 

​

サーバー側

### 

​

MODE

起動モードです。dockerによる起動時にのみ有効で、ソースコード起動では無効です。

  * api: APIサーバーを起動します。
  * worker: 非同期キューのワーカーを起動します。



### 

​

DEBUG

デバッグモード。デフォルトはfalse。ローカル開発時にはこの設定をオンにすることを推奨します。これにより、モンキーパッチによって発生する問題を防ぐことができます。

### 

​

FLASK_DEBUG

Flaskのデバッグモード。オンにすると、インターフェースでトレース情報が出力され、デバッグが容易になります。

### 

​

SECRET_KEY

セッションクッキーを安全に署名し、データベース上の機密情報を暗号化するためのキー。

初回起動時にこの変数を設定する必要があります。

`openssl rand -base64 42`を使用して強力なキーを生成できます。

### 

​

DEPLOY_ENV

デプロイ環境。

  * PRODUCTION（デフォルト）: プロダクション環境。
  * TESTING: テスト環境。フロントエンドページにはテスト環境を示す明確な色の識別が表示されます。



### 

​

LOG_LEVEL

ログ出力レベル。デフォルトはINFO。プロダクション環境ではERRORに設定することを推奨します。

### 

​

MIGRATION_ENABLED

trueに設定した場合、コンテナ起動時に自動的にデータベースのマイグレーションが実行されます。dockerによる起動時にのみ有効で、ソースコード起動では無効です。ソースコード起動の場合、apiディレクトリで手動で`flask db upgrade`を実行する必要があります。

### 

​

CHECK_UPDATE_URL

バージョンチェックポリシーを有効にするかどうか。falseに設定した場合、`https://updates.dify.ai`を呼び出してバージョンチェックを行いません。現在、国内から直接CloudFlare Workerのバージョンインターフェースにアクセスできないため、この変数を空に設定すると、このインターフェースの呼び出しをブロックできます。

### 

​

TEXT_GENERATION_TIMEOUT_MS

デフォルト値は60000 (milliseconds). 一部のプロセスが進行中にタイムアウトの原因で全部のサービスが利用できなくなるのを防ぐために、テキストの生成やワークフロー進行中にタイムアウトの時間を指定するために使用されます。

### 

​

CSP_WHITELIST

コンテンツセキュリティポリシー (CSP) ホワイトリスト。デフォルトでは有効になっていません。この変数に許可されるドメイン名のリストを入力すると、この変数が自動的に有効になり、潜在的な XSS 攻撃を減らすのに役立ちます。オンにすると、ホワイトリストには次のドメイン名が自動的に含まれます。
    
    
    *.sentry.io http://localhost:* http://127.0.0.1:* https://analytics.google.com https://googletagmanager.com https://api.github.com

### 

​

コンテナ起動関連設定

dockerイメージまたはdocker-composeによる起動時にのみ有効です。

  * DIFY_BIND_ADDRESS: APIサービスのバインドアドレス。デフォルト：0.0.0.0、すべてのアドレスからアクセス可能にします。

  * DIFY_PORT: APIサービスのバインドポート番号。デフォルト5001。

  * SERVER_WORKER_AMOUNT: APIサービスのServer worker数。すなわちgevent workerの数。公式：`CPUのコア数 x 2 + 1`。

詳細はこちら：<https://docs.gunicorn.org/en/stable/design.html#how-many-workers>

  * SERVER_WORKER_CLASS: デフォルトはgevent。Windowsの場合、syncまたはsoloに切り替えることができます。

  * GUNICORN_TIMEOUT: リクエスト処理のタイムアウト時間。デフォルト200。360に設定することを推奨します。これにより、長時間のSSE接続をサポートできます。

  * CELERY_WORKER_CLASS: `SERVER_WORKER_CLASS`と同様に、デフォルトはgevent。Windowsの場合、syncまたはsoloに切り替えることができます。

  * CELERY_WORKER_AMOUNT: Celery workerの数。デフォルトは1。必要に応じて設定します。

  * HTTP_PROXY: HTTPプロキシのアドレス。国内からOpenAIやHuggingFaceにアクセスできない問題を解決するために使用されます。注意点：プロキシがホストマシンにデプロイされている場合（例：`http://127.0.0.1:7890`）、このプロキシアドレスはローカルモデルに接続する場合と同様に、dockerコンテナ内のホストマシンアドレスを使用する必要があります（例：`http://192.168.1.100:7890`または`http://172.17.0.1:7890`）。

  * HTTPS_PROXY: HTTPSプロキシのアドレス。国内からOpenAIやHuggingFaceにアクセスできない問題を解決するために使用されます。HTTPプロキシと同様に設定します。




### 

​

データベース設定

データベースにはPostgreSQLを使用します。public schemaを使用してください。

  * DB_USERNAME：ユーザー名
  * DB_PASSWORD：パスワード
  * DB_HOST：データベースホスト
  * DB_PORT：データベースポート番号。デフォルト5432
  * DB_DATABASE：データベース名
  * SQLALCHEMY_POOL_SIZE：データベース接続プールのサイズ。デフォルトは30接続。必要に応じて増やせます。
  * SQLALCHEMY_POOL_RECYCLE：データベース接続プールのリサイクル時間。デフォルト3600秒。
  * SQLALCHEMY_ECHO：SQLを出力するかどうか。デフォルトはfalse。



### 

​

Redis 設定

このRedis設定はキャッシュおよび対話時のpub/subに使用されます。

  * REDIS_HOST：Redisホスト
  * REDIS_PORT：Redisポート。デフォルト6379
  * REDIS_DB：Redisデータベース。デフォルトは0。セッションRedisおよびCeleryブローカーとは異なるデータベースを使用してください。
  * REDIS_USERNAME：Redisユーザー名。デフォルトは空
  * REDIS_PASSWORD：Redisパスワード。デフォルトは空。パスワードを設定することを強く推奨します。
  * REDIS_USE_SSL：SSLプロトコルを使用して接続するかどうか。デフォルトはfalse
  * REDIS_USE_SENTINEL：Redis Sentinelを使用してRedisサーバーに接続
  * REDIS_SENTINELS：Sentinelノード、フォーマット：`<sentinel1_ip>:<sentinel1_port>,<sentinel2_ip>:<sentinel2_port>,<sentinel3_ip>:<sentinel3_port>`
  * REDIS_SENTINEL_SERVICE_NAME：Sentinelサービス名、Master Nameと同じ
  * REDIS_SENTINEL_USERNAME：Sentinelのユーザー名
  * REDIS_SENTINEL_PASSWORD：Sentinelのパスワード
  * REDIS_SENTINEL_SOCKET_TIMEOUT：Sentinelのタイムアウト、デフォルト値：0.1、単位：秒



### 

​

Celery 設定

  * CELERY_BROKER_URL

フォーマットは以下の通りです（直接接続モード）
        
        redis://<redis_username>:<redis_password>@<redis_host>:<redis_port>/<redis_database>

例：`redis://:difyai123456@redis:6379/1`

Sentinelモード
        
        sentinel://<sentinel_username>:<sentinel_password>@<sentinel_host>:<sentinel_port>/<redis_database>

例：`sentinel://localhost:26379/1;sentinel://localhost:26380/1;sentinel://localhost:26381/1`

  * BROKER_USE_SSL: trueに設定した場合、SSLプロトコルを使用して接続します。デフォルトはfalse。

  * CELERY_USE_SENTINEL: trueに設定すると、Sentinelモードが有効になります。デフォルトはfalse

  * CELERY_SENTINEL_MASTER_NAME: Sentinelのサービス名、すなわちMaster Name

  * CELERY_SENTINEL_SOCKET_TIMEOUT: Sentinelへの接続タイムアウト、デフォルト値：0.1、単位：秒




### 

​

CORS 設定

フロントエンドのクロスオリジンアクセスポリシーを設定するために使用します。

  * CONSOLE_CORS_ALLOW_ORIGINS: コンソールのCORSクロスオリジンポリシー。デフォルトは`*`、すべてのドメインがアクセス可能です。
  * WEB_API_CORS_ALLOW_ORIGINS: WebアプリのCORSクロスオリジンポリシー。デフォルトは`*`、すべてのドメインがアクセス可能です。



詳細な設定については、次のガイドを参照してください：[クロスオリジン/認証関連ガイド](https://docs.dify.ai/v/ja-jp/learn-more/faq/install-faq#id-3-insutruniroguindekinaimataharoguinshitani401ergasareruha)

### 

​

ファイルストレージ設定

データセットのアップロードファイル、チーム/テナントの暗号化キーなどのファイルを保存するために使用します。

  * STORAGE_TYPE

ストレージのタイプ

    * local（デフォルト）: ローカルファイルストレージ。この場合、以下の`STORAGE_LOCAL_PATH`を設定する必要があります。

    * s3: S3オブジェクトストレージ。この場合、以下のS3_プレフィックスを設定する必要があります。

    * azure-blob: Azure Blobストレージ。この場合、以下のAZURE_BLOB_ プレフィックスを設定する必要があります。

    * aliyun-oss: Alibaba Cloud OSS オブジェクト ストレージ。 このオプションが選択されている場合は、次の ALIYUN_OSS_ という接頭辞が付いた構成を設定する必要があります。

    * huawei-obs: Huawei OBS オブジェクト ストレージ。このオプションが選択されている場合は、次の HUAWEI_OBS_ という接頭辞が付いた構成を設定する必要があります。

  * STORAGE_LOCAL_PATH

デフォルトはstorage、すなわち現在のディレクトリのstorageディレクトリに保存します。

dockerまたはdocker-composeでデプロイする場合、2つのコンテナにある`/app/api/storage`ディレクトリを同じローカルディレクトリにマウントする必要があります。そうしないと、ファイルが見つからないエラーが発生する可能性があります。

  * S3_ENDPOINT：S3エンドポイントアドレス

  * S3_BUCKET_NAME：S3バケット名

  * S3_ACCESS_KEY：S3アクセスキー

  * S3_SECRET_KEY：S3シークレットキー

  * S3_REGION：S3リージョン情報（例：us-east-1）

  * AZURE_BLOB_ACCOUNT_NAME: アカウント名（例：‘difyai’）

  * AZURE_BLOB_ACCOUNT_KEY: アカウントキー（例：‘difyai’）

  * AZURE_BLOB_CONTAINER_NAME: コンテナ名（例：‘difyai-container’）

  * AZURE_BLOB_ACCOUNT_URL: ‘<https://your_account_name.blob.core.windows.net>’

  * ALIYUN_OSS_BUCKET_NAME: your-bucket-name（例：‘difyai’）

  * ALIYUN_OSS_ACCESS_KEY: your-access-key（例：‘difyai’）

  * ALIYUN_OSS_SECRET_KEY: your-secret-key（例：‘difyai’）

  * ALIYUN_OSS_ENDPOINT: <https://oss-ap-southeast-1-internal.aliyuncs.com> # reference: <https://www.alibabacloud.com/help/en/oss/user-guide/regions-and-endpoints>

  * ALIYUN_OSS_REGION: ap-southeast-1 # reference: <https://www.alibabacloud.com/help/en/oss/user-guide/regions-and-endpoints>

  * ALIYUN_OSS_AUTH_VERSION: v4

  * ALIYUN_OSS_PATH: your-path # Don’t start with ’/’. OSS doesn’t support leading slash in object names. reference: <https://www.alibabacloud.com/help/en/oss/support/0016-00000005>

  * HUAWEI_OBS_BUCKET_NAME: your-bucket-name（例：‘difyai’）

  * HUAWEI_OBS_SECRET_KEY: your-secret-key（例：‘difyai’）

  * HUAWEI_OBS_ACCESS_KEY: your-access-key（例：‘difyai’）

  * HUAWEI_OBS_SERVER: your-server-url # 参考文献: <https://support.huaweicloud.com/sdk-python-devg-obs/obs_22_0500.html>




### 

​

ベクトルデータベース設定

  * VECTOR_STORE

**使用可能な列挙型は以下を含みます：**

    * `weaviate`
    * `qdrant`
    * `milvus`
    * `zilliz`（`milvus`と同じ）
    * `pinecone`（現在未公開）
    * `tidb_vector`
    * `analyticdb`
    * `couchbase`
    * `oceanbase`
    * `tablestore`
    * `lindorm`
    * `tencent`
    * `opengauss`


  * WEAVIATE_ENDPOINT

Weaviateエンドポイントアドレス（例：`http://weaviate:8080`）。

  * WEAVIATE_API_KEY

Weaviateに接続するために使用するapi-keyの資格情報。

  * WEAVIATE_BATCH_SIZE

Weaviateでオブジェクトのバッチ作成数。デフォルトは100。詳細はこちらのドキュメントを参照してください：<https://weaviate.io/developers/weaviate/manage-data/import#how-to-set-batch-parameters>

  * WEAVIATE_GRPC_ENABLED

Weaviateとの通信にgRPC方式を使用するかどうか。オンにすると性能が大幅に向上しますが、ローカルでは使用できない可能性があります。デフォルトはtrueです。

  * QDRANT_URL

Qdrantエンドポイントアドレス（例：`https://your-qdrant-cluster-url.qdrant.tech/`）。

  * QDRANT_API_KEY

Qdrantに接続するために使用するapi-keyの資格情報。

  * PINECONE_API_KEY

Pineconeに接続するために使用するapi-keyの資格情報。

  * PINECONE_ENVIRONMENT

Pineconeの環境（例：`us-east4-gcp`）。

  * MILVUS_URI

MilvusのURI設定。例：`http://host.docker.internal:19530`。[Zilliz Cloud](https://zilliz.com/jp/cloud)の場合は、URIとトークンを パブリックエンドポイントとAPIキーに調整してください。

  * MILVUS_TOKEN

MilvusのTOKEN設定。デフォルトは空。

  * MILVUS_USER

Milvusユーザーの設定。デフォルトは空。

  * MILVUS_PASSWORD

Milvusパスワードの設定。デフォルトは空。

  * TIDB_VECTOR_HOST

TiDB Vectorホスト設定（例：`xxx.eu-central-1.xxx.tidbcloud.com`）

  * TIDB_VECTOR_PORT

TiDB Vectorポート番号設定（例：`4000`）

  * TIDB_VECTOR_USER

TiDB Vectorユーザー設定（例：`xxxxxx.root`）

  * TIDB_VECTOR_PASSWORD

TiDB Vectorパスワード設定

  * TIDB_VECTOR_DATABASE

TiDB Vectorデータベース設定（例：`dify`）

  * ANALYTICDB_KEY_ID

Aliyun OpenAPI認証に使用されるアクセスキーIDです。[ドキュメンテーション](https://help.aliyun.com/zh/analyticdb/analyticdb-for-postgresql/support/create-an-accesskey-pair) を参照してAccessKeyを作成します。

  * ANALYTICDB_KEY_SECRET

Aliyun OpenAPI認証に使用されるアクセスキーシークレットです。

  * ANALYTICDB_INSTANCE_ID

あなたのAnalyticDBインスタンスのユニークな識別子で、例えば `gp-xxxxxx` です。[ドキュメンテーション](https://help.aliyun.com/zh/analyticdb/analyticdb-for-postgresql/getting-started/create-an-instance-1) を参照してインスタンスを作成します。

  * ANALYTICDB_REGION_ID

AnalyticDBインスタンスが位置するリージョンの識別子で、例えば `cn-hangzhou` です。

  * ANALYTICDB_ACCOUNT

AnalyticDBインスタンスに接続するために使用するアカウント名です。[ドキュメンテーション](https://help.aliyun.com/zh/analyticdb/analyticdb-for-postgresql/getting-started/createa-a-privileged-account) を参照してアカウントを作成します。

  * ANALYTICDB_PASSWORD

AnalyticDBインスタンスに接続するために使用するアカウントのパスワードです。

  * ANALYTICDB_NAMESPACE

AnalyticDBインスタンス内で操作したいnamespace(schema)です。例えば `dify` です。このnamespaceが存在しない場合、自動的に作成されます。

  * ANALYTICDB_NAMESPACE_PASSWORD

namespace(schema)のパスワードです。このnamespaceが存在しない場合、このパスワードで作成されます。

  * COUCHBASE_CONNECTION_STRING

クラスターへのCouchbase接続文字列です。

  * COUCHBASE_USER

データベースユーザーのユーザー名です。

  * COUCHBASE_PASSWORD

データベースユーザーのパスワードです。

  * COUCHBASE_BUCKET_NAME

使用するバケットの名前です。

  * COUCHBASE_SCOPE_NAME

使用するスコープの名前です。

  * OCEANBASE_VECTOR_HOST

OceanBase Vector ホスト。

  * OCEANBASE_VECTOR_PORT

OceanBase Vector ポート。

  * OCEANBASE_VECTOR_USER

OceanBase Vector ユーザー名。

  * OCEANBASE_VECTOR_PASSWORD

OceanBase Vector パスワード。

  * OCEANBASE_VECTOR_DATABASE

OceanBase Vector データベース名。

  * OCEANBASE_CLUSTER_NAME

OceanBase クラスタ名，Docker デプロイメントのみ。

  * OCEANBASE_MEMORY_LIMIT

OceanBase メモリ使用上限，Docker デプロイメントのみ。

  * TABLESTORE_ENDPOINT

TablestoreのアクセスEndpoint。

  * TABLESTORE_INSTANCE_NAME

Tablestoreのアクセスインスタンス名。

  * TABLESTORE_ACCESS_KEY_ID

TablestoreのアクセスID。

  * TABLESTORE_ACCESS_KEY_SECRET

Tablestoreのアクセスキー。

  * LINDORM_URL

LINDORM の検索エンジンアドレスは、[コンソール](https://lindorm.console.aliyun.com/)から取得できます。

  * LINDORM_USERNAME

LINDORM のユーザー名

  * LINDORM_PASSWORD

LINDORM アクセスパスワード

  * TENCENT_VECTOR_DB_URL

腾讯云ベクトルデータベースのアクセスアドレスは、[コンソール](https://console.cloud.tencent.com/vdb)から取得できます。

  * TENCENT_VECTOR_DB_API_KEY

ベクトルデータベースサーバーのAPIキー（パスワード）は、認証を行うために使用されます。[キー管理](https://cloud.tencent.com/document/product/1709/95108)。

  * TENCENT_VECTOR_DB_USERNAME

ベクトルデータベースのアカウントは、デフォルトでrootです。[アカウントと権限管理](https://cloud.tencent.com/document/product/1709/115833)。

  * TENCENT_VECTOR_DB_TIMEOUT

デフォルトのリクエストタイムアウト時間を設定します。

  * TENCENT_VECTOR_DB_DATABASE

データベース（Database）とは、データ構造に基づいてデータを組織化し、保存および管理する倉庫であり、一つのインスタンスで複数のDatabaseを作成することができます。

[新しいDatabaseを作成します](https://cloud.tencent.com/document/product/1709/95822)。

  * TENCENT_VECTOR_DB_SHARD

シャード数を指定します。

  * TENCENT_VECTOR_DB_REPLICAS

レプリカ数を指定します。

  * TENCENT_VECTOR_DB_ENABLE_HYBRID_SEARCH

HybridSearchを有効にするかどうかを指定します。[スパースベクトル文書](https://cloud.tencent.com/document/product/1709/110110)。

  * OPENGAUSS_HOST

openGaussベクトルデータベースのホスト名またはIPアドレス。

  * OPENGAUSS_PORT

openGaussベクトルデータベースのポート。

  * OPENGAUSS_USER

openGaussベクトルデータベースのユーザー名。

  * OPENGAUSS_PASSWORD

openGaussベクトルデータベースのパスワード。

  * OPENGAUSS_DATABASE

openGaussベクトルデータベースのデータベース名。

  * OPENGAUSS_MIN_CONNECTION

openGaussベクトルデータベースの最小接続。

  * OPENGAUSS_MAX_CONNECTION

openGaussベクトルデータベースの最大接続数。

  * OPENGAUSS_ENABLE_PQ

openGaussベクトルデータベースのPQ加速を有効にします。




### 

​

ナレッジベース設定

  * UPLOAD_FILE_SIZE_LIMIT: アップロードファイルのサイズ制限。デフォルトは15M。

  * UPLOAD_FILE_BATCH_LIMIT: 一度にアップロードできるファイル数の上限。デフォルトは5個。

  * ETL_TYPE

**使用可能な列挙型は以下を含みます：**

    * dify: Dify独自のファイル抽出ソリューション
    * Unstructured: Unstructured.ioのファイル抽出ソリューション
  * UNSTRUCTURED_API_URL

ETL_TYPEがUnstructuredの場合、Unstructured APIパスの設定が必要です。

例：`http://unstructured:8000/general/v0/general`

  * TOP_K_MAX_VALUE

RAG の最大の上位 k 値。デフォルトは 10。




### 

​

マルチモーダルモデル設定

  * MULTIMODAL_SEND_IMAGE_FORMAT

マルチモーダルモデルの入力時に画像を送信する形式。デフォルトは`base64`、オプションで`url`。`url`モードでは呼び出しの遅延が`base64`モードよりも少なく、一般的には互換性が高い`base64`モードを推奨します。`url`に設定する場合、`FILES_URL`を外部からアクセス可能なアドレスに設定する必要があります。これにより、マルチモーダルモデルが画像にアクセスできるようになります。

  * UPLOAD_IMAGE_FILE_SIZE_LIMIT: アップロード画像ファイルのサイズ制限。デフォルトは10M。




### 

​

Sentry 設定

アプリの監視およびエラーログトラッキングに使用されます。

  * SENTRY_DSN: Sentry DSNアドレス。デフォルトは空。空の場合、すべての監視情報はSentryに報告されません。
  * SENTRY_TRACES_SAMPLE_RATE: Sentryイベントの報告割合。例えば、0.01に設定すると1%となります。
  * SENTRY_PROFILES_SAMPLE_RATE: Sentryプロファイルの報告割合。例えば、0.01に設定すると1%となります。



### 

​

Notion 統合設定

Notion統合設定。変数はNotion integrationを申請することで取得できます：<https://www.notion.so/my-integrations>

  * NOTION_CLIENT_ID
  * NOTION_CLIENT_SECRET



### 

​

メール関連の設定

  * MAIL_TYPE

    * resend
      * MAIL_DEFAULT_SEND_FROM: 送信者のメール名,（例：no-reply [no-reply@dify.ai](mailto:no-reply@dify.ai)）、必須ではありません。
      * RESEND_API_KEY: ResendメールプロバイダーのAPIキー。APIキーから取得できます。
    * smtp
      * SMTP_SERVER: SMTPサーバーアドレス
      * SMTP_PORT: SMTPサーバポートnumber
      * SMTP_USERNAME: SMTP ユーザー名
      * SMTP_PASSWORD: SMTP パスワード
      * SMTP_USE_TLS: TLSを使用するかどうか, デフォルトは false
      * MAIL_DEFAULT_SEND_FROM: 送り人のメールアドレス,（例：no-reply [no-reply@dify.ai](mailto:no-reply@dify.ai)）、必須ではありません。



### 

​

モデルプロバイダ & ツールの位置の構成

アプリで使用できるモデルプロバイダーとツールを指定するために使用されます。これらの設定により、使用可能なツールとモデルプロバイダー、およびアプリのインターフェースでの順序と含める/除外をカスタマイズできます。

使用可能な[ツール](https://github.com/langgenius/dify/blob/main/api/core/tools/provider/_position.yaml) と [モデルプロバイダ](https://github.com/langgenius/dify/blob/main/api/core/model_runtime/model_providers/_position.yaml)のリストについては、提供されているリンクを参照してください。

  * POSITION_TOOL_PINS

リストされたツールをリストの先頭に固定して、インターフェイスの先頭に確実に表示されるようにします。 (間に**スペースを入れず** にカンマ区切りの値を使用します。)

例: `POSITION_TOOL_PINS=bing,google`

  * POSITION_TOOL_INCLUDES

アプリに含めるツールを指定します。ここにリストされているツールのみが使用可能です。設定されていない場合は、POSITION_TOOL_EXCLUDES で指定されていない限り、すべてのツールが含まれます。 (間に**スペースを入れず** にカンマ区切りの値を使用します。)

例: `POSITION_TOOL_INCLUDES=bing,google`

  * POSITION_TOOL_EXCLUDES

特定のツールをアプリでの表示または使用から除外します。ここにリストされているツールは、固定されていない限り、使用可能なオプションから除外されます。 (間に**スペースを入れず** にカンマ区切りの値を使用します。)

例: `POSITION_TOOL_EXCLUDES=yahoo,wolframalpha`

  * POSITION_PROVIDER_PINS

リストされたモデルのサプライヤーをリストの先頭にピン留めして、インターフェイスの先頭に確実に表示されるようにします。 (間に**スペースを入れず** にカンマ区切りの値を使用します。)

例: `POSITION_PROVIDER_PINS=openai,openllm`

  * POSITION_PROVIDER_INCLUDES

アプリに含めるモデルプロバイダーを指定します。ここにリストされているサプライヤーのみが利用可能です。設定されていない場合は、POSITION_PROVIDER_EXCLUDES で指定されていない限り、すべてのプロバイダーが含まれます。 (間に**スペースを入れず** にカンマ区切りの値を使用します。)

例: `POSITION_PROVIDER_INCLUDES=cohere,upstage`

  * POSITION_PROVIDER_EXCLUDES

特定のモデル ベンダーをアプリでの表示から除外します。ここにリストされているサプライヤーは、固定されない限り、利用可能なオプションから削除されます。 (間に**スペースを入れず** にカンマ区切りの値を使用します。)

例: `POSITION_PROVIDER_EXCLUDES=openrouter,ollama`




### 

​

其他

  * INVITE_EXPIRY_HOURS：メンバーを招待するのリンクの有効期間（時），デフォルト：72。
  * HTTP_REQUEST_NODE_MAX_TEXT_SIZE：ワークフロー内のHTTPリクエストノードの最大テキストサイズ、デフォルト1MB。
  * HTTP_REQUEST_NODE_MAX_BINARY_SIZE：ワークフロー内のHTTPリクエストノードの最大バイナリサイズ、デフォルト10MB。



* * *

## 

​

Web フロントエンド

### 

​

SENTRY_DSN

Sentry DSN アドレス，デフォルトは空，空の場合、すべての監視情報は Sentry に報告されません。

## 

​

廃棄されました

### 

​

CONSOLE_URL

> ⚠️ この設定はバージョン 0.3.8 に改善し、0.4.9 から廃止されました，代わりは：`CONSOLE_API_URL` と `CONSOLE_WEB_URL` です。

コンソール URL です，認定コールバックやコンソールフロントエンドのアドレスの連結するため、および CORS の配置に使用されます、空の場合は同じドメインになります。例：`https://console.dify.ai`。

### 

​

API_URL

> ⚠️ この設定はバージョン 0.3.8 に改善し、0.4.9 から廃止されました，代わりは `SERVICE_API_URL`です。

API Url です，**フロントエンド** で使用して、サービス API ベース URL を表示します、空の場合は同じドメインになります。例：`https://api.dify.ai`

### 

​

APP_URL

> ⚠️ この設定はバージョン 0.3.8 に改善し、0.4.9 から廃止されました，代わりは `APP_API_URL` と `APP_WEB_URL` です。

WebApp Url，**フロントエンド** API バックエンド アドレスを宣言するために使用されます、空の場合は同じドメインになります。例：`https://udify.app/`

### 

​

Session Configuration

> ⚠️ この設定はバージョン 0.3.24 から廃止されました。

API サービスによってインターフェース ID 検証にのみ使用されます。

  * SESSION_TYPE: セッションコンポーネントのタイプ

    * redis（デフォルト）: これを選択した場合、下記の SESSION_REDIS_ で始まる環境変数を設定する必要があります。
    * sqlalchemy: これを選択した場合、現在のデータベース接続を使用し、sessions テーブルを使用してセッションレコードを読み書きします。
  * SESSION_REDIS_HOST：Redis ホスト

  * SESSION_REDIS_PORT：Redis ポート、デフォルトは 6379

  * SESSION_REDIS_DB：Redis データベース、デフォルトは 0、Redis および Celery ブローカーとは異なるデータベースを使用してください。

  * SESSION_REDIS_USERNAME：Redis ユーザー名、デフォルトは空

  * SESSION_REDIS_PASSWORD：Redis パスワード、デフォルトは空、パスワードの設定を強く推奨します。

  * SESSION_REDIS_USE_SSL：SSL プロトコルを使用して接続するかどうか、デフォルトは false




### 

​

クッキー戦略の設定

> ⚠️ この設定はバージョン 0.3.24 から廃止されました。

セッションクッキーのブラウザ戦略を設定するために使用されます。

  * COOKIE_HTTPONLY: クッキーの HttpOnly 設定、デフォルトは true。
  * COOKIE_SAMESITE: クッキーの SameSite 設定、デフォルトは Lax。
  * COOKIE_SECURE: クッキーの Secure 設定、デフォルトは false。



## 

​

文書チャンク長の設定

### 

​

INDEXING_MAX_SEGMENTATION_TOKENS_LENGTH

文書チャンク長の設定。長文処理時のテキストセグメントサイズを制御するために使用。デフォルト値：500。最大値：4000。

**大きなチャンク**

  * 単一のチャンク内により多くの文脈を保持でき、複雑または文脈依存のタスクに適しています。
  * チャンク数が減少し、処理時間やストレージの負担が軽減されます。



**小さなチャンク**

  * より細かい粒度を提供し、正確な情報抽出や要約タスクに適しています。
  * モデルのトークン制限を超えるリスクを低減し、制限の厳しいモデルに適応します。



**設定の推奨**

  * 大きなチャンク: 文脈依存性が高いタスク（例: 感情分析や長文の要約）に適しています。
  * 小さなチャンク: 詳細な分析が必要なタスク（例: キーワード抽出や段落レベルの内容処理）に適しています。



* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/getting-started/install-self-hosted/environments.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20onme&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/getting-started/install-self-hosted%2Fenvironments.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[単独でフロントエンドのDockerコンテナを起動する](/ja-jp/getting-started/install-self-hosted/start-the-frontend-docker-container)[よくある質問](/ja-jp/getting-started/install-self-hosted/faq)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * 公共変数
  * CONSOLE_API_URL
  * CONSOLE_WEB_URL
  * SERVICE_API_URL
  * APP_API_URL
  * APP_WEB_URL
  * FILES_URL
  * サーバー側
  * MODE
  * DEBUG
  * FLASK_DEBUG
  * SECRET_KEY
  * DEPLOY_ENV
  * LOG_LEVEL
  * MIGRATION_ENABLED
  * CHECK_UPDATE_URL
  * TEXT_GENERATION_TIMEOUT_MS
  * CSP_WHITELIST
  * コンテナ起動関連設定
  * データベース設定
  * Redis 設定
  * Celery 設定
  * CORS 設定
  * ファイルストレージ設定
  * ベクトルデータベース設定
  * ナレッジベース設定
  * マルチモーダルモデル設定
  * Sentry 設定
  * Notion 統合設定
  * メール関連の設定
  * モデルプロバイダ & ツールの位置の構成
  * 其他
  * Web フロントエンド
  * SENTRY_DSN
  * 廃棄されました
  * CONSOLE_URL
  * API_URL
  * APP_URL
  * Session Configuration
  * クッキー戦略の設定
  * 文書チャンク長の設定
  * INDEXING_MAX_SEGMENTATION_TOKENS_LENGTH



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/getting-started/install-self-hosted/faq

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

Dify コミュニティ版

よくある質問

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

    * [コミュニティ版](/ja-jp/getting-started/install-self-hosted/README)
    * [Docker Compose デプロイ](/ja-jp/getting-started/install-self-hosted/docker-compose)
    * [ローカルソースコードからの起動](/ja-jp/getting-started/install-self-hosted/local-source-code)
    * [aaPanelでのデプロイ方法](/ja-jp/getting-started/install-self-hosted/bt-panel)
    * [単独でフロントエンドのDockerコンテナを起動する](/ja-jp/getting-started/install-self-hosted/start-the-frontend-docker-container)
    * [環境変数の説明](/ja-jp/getting-started/install-self-hosted/environments)
    * [よくある質問](/ja-jp/getting-started/install-self-hosted/faq)
  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




Dify コミュニティ版

# よくある質問

Copy page

### 

​

1\. パスワードリセットメールが長時間届かない場合はどうしたらいいですか？

`.env`ファイルに`Mail`パラメータを設定する必要があることをご確認ください。メール設定に関する詳細は、「[環境変数の説明：メール関連の設定](/ja-jp/getting-started/install-self-hosted/environments)」セクションをご参照ください。

設定の変更後は、以下のコマンドを実行して、サービスをリスタートさせてください。
    
    
    docker compose down
    docker compose up -d

それでもまだメールが届かない場合は、メールサービスが正常に動作しているか、またメールがスパムフィルターに捕まっていないかをご確認ください。

### 

​

2\. ワークフローが複雑すぎてノードの上限を超えた場合、どう対処しますか？

コミュニティ版では、`web/app/components/workflow/constants.ts`で手動で `MAX_TREE_DEPTH` の単一ブランチの深さの上限を調整できます。私たちのデフォルト値は50ですが、自分で拡張した場合、あまりにも深いブランチはパフォーマンスに影響を与える可能性があることに注意してください。

### 

​

3\. 各ワークフローノードのランタイムを指定するには？

`.env` ファイル内の `TEXT_GENERATION_TIMEOUT_MS` 変数を変更することで、各ノードのランタイムを調整することができます。これにより、特定のプロセスがタイムアウトすることによるアプリケーション全体のサービス停止を防ぐことができます。

### 

​

4\. 管理者アカウントのパスワードをリセットする方法

Docker Composeを使ってデプロイしている場合、Docker Composeの実行中に以下のコマンドでパスワードをリセットすることができます：
    
    
    docker exec -it docker-api-1 flask reset-password

メールアドレスと新しいパスワードを入力するプロンプトが表示されます。例えば：
    
    
    dify@my-pc:~/hello/dify/docker$ docker compose up -d
    [+] Running 9/9
     ✔ Container docker-web-1         Started                                                              0.1s 
     ✔ Container docker-sandbox-1     Started                                                              0.1s 
     ✔ Container docker-db-1          Started                                                              0.1s 
     ✔ Container docker-redis-1       Started                                                              0.1s 
     ✔ Container docker-weaviate-1    Started                                                              0.1s 
     ✔ Container docker-ssrf_proxy-1  Started                                                              0.1s 
     ✔ Container docker-api-1         Started                                                              0.1s 
     ✔ Container docker-worker-1      Started                                                              0.1s 
     ✔ Container docker-nginx-1       Started                                                              0.1s 
    dify@my-pc:~/hello/dify/docker$ docker exec -it docker-api-1 flask reset-password
    None of PyTorch, TensorFlow >= 2.0, or Flax have been found. Models won't be available and only tokenizers, configuration and file/data utilities can be used.
    sagemaker.config INFO - Not applying SDK defaults from location: /etc/xdg/sagemaker/config.yaml
    sagemaker.config INFO - Not applying SDK defaults from location: /root/.config/sagemaker/config.yaml
    Email: hello@dify.ai
    New password: newpassword4567
    Password confirm: newpassword4567
    Password reset successfully.

### 

​

5\. ポートの変更方法

Docker Compose を使用してデプロイする場合、`.env` 設定を変更することで Dify のアクセスポートをカスタマイズできます。

Nginx 関連の設定を変更する必要があります：
    
    
    EXPOSE_NGINX_PORT=80
    EXPOSE_NGINX_SSL_PORT=443

他のデプロイに関する質問は[ここに](/ja-jp/learn-more/faq/install-faq)います。

### 

​

6\. docker-api-1 でのデータベース接続エラーの解決方法とは？

**問題の詳細** ：`http://localhost`にアクセスする際に`Internal Server Error`が表示され、`docker-api-1`のログに以下のようなエラーが記録される場合：
    
    
    FATAL:  no pg_hba.conf entry for host "172.19.0.7", user "postgres", database "dify", no encryption

**解決策** ：dbコンテナ内の`/var/lib/postgresql/pgdata/pg_hba.conf`を変更し、エラーメッセージに記載されているネットワークセグメントを認証リストに追加します。例：
    
    
    docker exec -it docker-db-1 sh -c "echo 'host all all 172.19.0.0/16 trust' >> /var/lib/postgresql/data/pgdata/pg_hba.conf"
    docker-compose restart

他のデプロイに関する質問は[ローカルデプロイに関する](../../learn-more/faq/install-faq)をご確認ください。

### 

​

7\. ナレッジベースのファイルアップロードサイズ制限を変更するには？

`.env`ファイル内の`UPLOAD_FILE_SIZE_LIMIT`パラメータを変更して、デフォルトの制限を調整できます。同時に、潜在的な問題を避けるために`NGINX_CLIENT_MAX_BODY_SIZE`パラメータの値も更新する必要があります。

* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/getting-started/install-self-hosted/faq.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/getting-started/install-self-hosted%2Ffaq.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[環境変数の説明](/ja-jp/getting-started/install-self-hosted/environments)[Dify Premium](/ja-jp/getting-started/dify-premium)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * 1\. パスワードリセットメールが長時間届かない場合はどうしたらいいですか？
  * 2\. ワークフローが複雑すぎてノードの上限を超えた場合、どう対処しますか？
  * 3\. 各ワークフローノードのランタイムを指定するには？
  * 4\. 管理者アカウントのパスワードをリセットする方法
  * 5\. ポートの変更方法
  * 6\. docker-api-1 でのデータベース接続エラーの解決方法とは？
  * 7\. ナレッジベースのファイルアップロードサイズ制限を変更するには？



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/getting-started/install-self-hosted/local-source-code

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

Dify コミュニティ版

ローカルソースコードからの起動

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

    * [コミュニティ版](/ja-jp/getting-started/install-self-hosted/README)
    * [Docker Compose デプロイ](/ja-jp/getting-started/install-self-hosted/docker-compose)
    * [ローカルソースコードからの起動](/ja-jp/getting-started/install-self-hosted/local-source-code)
    * [aaPanelでのデプロイ方法](/ja-jp/getting-started/install-self-hosted/bt-panel)
    * [単独でフロントエンドのDockerコンテナを起動する](/ja-jp/getting-started/install-self-hosted/start-the-frontend-docker-container)
    * [環境変数の説明](/ja-jp/getting-started/install-self-hosted/environments)
    * [よくある質問](/ja-jp/getting-started/install-self-hosted/faq)
  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




Dify コミュニティ版

# ローカルソースコードからの起動

Copy page

## 

​

前提条件

### 

​

Docker と Docker Compose のセットアップ

> Dify をインストールする前に、マシンが以下の最小システム要件を満たしていることを確認してください：
> 
>   * CPU >= 2 コア
>   * RAM >= 4 GiB
> 


OS| ソフトウェア| 説明  
---|---|---  
macOS 10.14 以降| Docker Desktop| Docker 仮想マシン（VM）が最低 2 つの仮想 CPU（vCPU）と 8 GB の初期メモリを使用するように設定してください。そうしないと、インストールが失敗する可能性があります。詳細については、[Mac 用 Docker Desktop インストールガイド](https://docs.docker.com/desktop/mac/install/)を参照してください。  
Linux プラットフォーム| Docker 19.03 以降 Docker Compose 1.25.1 以降| Docker と Docker Compose のインストール方法については、それぞれ[Docker インストールガイド](https://docs.docker.com/engine/install/)と[Docker Compose インストールガイド](https://docs.docker.com/compose/install/)を参照してください。  
WSL 2 が有効な Windows| Docker Desktop| Linux コンテナにバインドされるソースコードやその他のデータは、Windows ファイルシステムではなく Linux ファイルシステムに保存することをお勧めします。詳細については、[Windows での WSL 2 バックエンドを使用した Docker Desktop インストールガイド](https://docs.docker.com/desktop/windows/install/#wsl-2-backend)を参照してください。  
  
> OpenAI TTS を使用する必要がある場合は、正常に機能するためにシステムに `FFmpeg` がインストールされている必要があります。詳細については、[リンク](https://docs.dify.ai/getting-started/install-self-hosted/install-faq#id-14.-what-to-do-if-this-error-occurs-in-text-to-speech)を参照してください。

### 

​

Dify リポジトリのクローン

git コマンドを実行して [Dify リポジトリ](https://github.com/langgenius/dify) をクローンします。
    
    
    git clone https://github.com/langgenius/dify.git

### 

​

Docker Compose でミドルウェアを起動する

ストレージ用（PostgreSQL / Redis / Weaviate（ローカルで利用できない場合））や拡張機能用（Dify の [sandbox](https://github.com/langgenius/dify-sandbox) や [plugin-daemon](https://github.com/langgenius/dify-plugin-daemon) サービスなど）の一連のミドルウェアが Dify バックエンドサービスで必要です。次のコマンドを実行して Docker Compose でミドルウェアを起動します：
    
    
    cd docker
    cp middleware.env.example middleware.env
    docker compose -f docker-compose.middleware.yaml up -d

* * *

## 

​

バックエンドサービスのセットアップ

バックエンドサービスには以下が含まれます：

  1. API サービス：フロントエンドサービスと API アクセス用の API リクエストを提供
  2. Worker サービス：データセット処理、ワークスペース、クリーンアップなどの非同期タスクを提供



### 

​

環境の準備

Python 3.12 が必要です。Python 環境をすばやくインストールするには [pyenv](https://github.com/pyenv/pyenv) の使用をお勧めします。

追加の Python バージョンをインストールするには、pyenv install を使用します。
    
    
    pyenv install 3.12

「3.12」Python 環境に切り替えるには、次のコマンドを使用します：
    
    
    pyenv global 3.12

### 

​

API サービスの起動

  1. `api` ディレクトリに移動します：
         
         cd api

  2. 環境変数設定ファイルを準備します
         
         cp .env.example .env

  3. ランダムな秘密鍵を生成し、.env ファイルの SECRET_KEY の値を置き換えます
         
         awk -v key="$(openssl rand -base64 42)" '/^SECRET_KEY=/ {sub(/=.*/, "=" key)} 1' .env > temp_env && mv temp_env .env

  4. 依存関係のインストール

依存関係の管理には [uv](https://docs.astral.sh/uv/getting-started/installation/) を使用します。 `uv` で必要な依存関係をインストールするには、次のコマンドを実行します：
         
         uv sync

> macOS の場合：`brew install libmagic` で libmagic をインストールしてください。

  5. データベースの移行を実行する

データベースを最新バージョンに移行します：
         
         uv run flask db upgrade

  6. API サービスを起動する
         
         uv run flask run --host 0.0.0.0 --port=5001 --debug

期待される出力：
         
         * Debug mode: on
         INFO:werkzeug:WARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.
          * Running on all addresses (0.0.0.0)
          * Running on http://127.0.0.1:5001
         INFO:werkzeug:Press CTRL+C to quit
         INFO:werkzeug: * Restarting with stat
         WARNING:werkzeug: * Debugger is active!
         INFO:werkzeug: * Debugger PIN: 695-801-919




### 

​

Worker サービスの起動

データセットファイルのインポートやデータセットドキュメントの更新などのキューからの非同期タスクを処理するには、以下の手順に従って Worker サービスを起動します

  * macOS または Linux の場合
        
        uv run celery -A app.celery worker -P gevent -c 1 --loglevel INFO -Q dataset,generation,mail,ops_trace

Windows システムで Worker サービスを起動する場合は、代わりに次のコマンドを使用してください：

  * Windows の場合
        
        uv run celery -A app.celery worker -P solo --without-gossip --without-mingle -Q dataset,generation,mail,ops_trace --loglevel INFO

期待される出力：
        
        -------------- celery@bwdeMacBook-Pro-2.local v5.4.0 (opalescent)
        --- ***** -----
        -- ******* ---- macOS-15.4.1-arm64-arm-64bit 2025-04-28 17:07:14
        - *** --- * ---
        - ** ---------- [config]
        - ** ---------- .> app:         app_factory:0x1439e8590
        - ** ---------- .> transport:   redis://:**@localhost:6379/1
        - ** ---------- .> results:     postgresql://postgres:**@localhost:5432/dify
        - *** --- * --- .> concurrency: 1 (gevent)
          -- ******* ---- .> task events: OFF (enable -E to monitor tasks in this worker)
          --- ***** -----
          -------------- [queues]
          .> dataset          exchange=dataset(direct) key=dataset
          .> generation       exchange=generation(direct) key=generation
          .> mail             exchange=mail(direct) key=mail
          .> ops_trace        exchange=ops_trace(direct) key=ops_trace
        
        [tasks]
        . schedule.clean_embedding_cache_task.clean_embedding_cache_task
        . schedule.clean_messages.clean_messages
        . schedule.clean_unused_datasets_task.clean_unused_datasets_task
        . schedule.create_tidb_serverless_task.create_tidb_serverless_task
        . schedule.mail_clean_document_notify_task.mail_clean_document_notify_task
        . schedule.update_tidb_serverless_status_task.update_tidb_serverless_status_task
        . tasks.add_document_to_index_task.add_document_to_index_task
        . tasks.annotation.add_annotation_to_index_task.add_annotation_to_index_task
        . tasks.annotation.batch_import_annotations_task.batch_import_annotations_task
        . tasks.annotation.delete_annotation_index_task.delete_annotation_index_task
        . tasks.annotation.disable_annotation_reply_task.disable_annotation_reply_task
        . tasks.annotation.enable_annotation_reply_task.enable_annotation_reply_task
        . tasks.annotation.update_annotation_to_index_task.update_annotation_to_index_task
        . tasks.batch_clean_document_task.batch_clean_document_task
        . tasks.batch_create_segment_to_index_task.batch_create_segment_to_index_task
        . tasks.clean_dataset_task.clean_dataset_task
        . tasks.clean_document_task.clean_document_task
        . tasks.clean_notion_document_task.clean_notion_document_task
        . tasks.deal_dataset_vector_index_task.deal_dataset_vector_index_task
        . tasks.delete_account_task.delete_account_task
        . tasks.delete_segment_from_index_task.delete_segment_from_index_task
        . tasks.disable_segment_from_index_task.disable_segment_from_index_task
        . tasks.disable_segments_from_index_task.disable_segments_from_index_task
        . tasks.document_indexing_sync_task.document_indexing_sync_task
        . tasks.document_indexing_task.document_indexing_task
        . tasks.document_indexing_update_task.document_indexing_update_task
        . tasks.duplicate_document_indexing_task.duplicate_document_indexing_task
        . tasks.enable_segments_to_index_task.enable_segments_to_index_task
        . tasks.mail_account_deletion_task.send_account_deletion_verification_code
        . tasks.mail_account_deletion_task.send_deletion_success_task
        . tasks.mail_email_code_login.send_email_code_login_mail_task
        . tasks.mail_invite_member_task.send_invite_member_mail_task
        . tasks.mail_reset_password_task.send_reset_password_mail_task
        . tasks.ops_trace_task.process_trace_tasks
        . tasks.recover_document_indexing_task.recover_document_indexing_task
        . tasks.remove_app_and_related_data_task.remove_app_and_related_data_task
        . tasks.remove_document_from_index_task.remove_document_from_index_task
        . tasks.retry_document_indexing_task.retry_document_indexing_task
        . tasks.sync_website_document_indexing_task.sync_website_document_indexing_task
        
        2025-04-28 17:07:14,681 INFO [connection.py:22]  Connected to redis://:**@localhost:6379/1
        2025-04-28 17:07:14,684 INFO [mingle.py:40]  mingle: searching for neighbors
        2025-04-28 17:07:15,704 INFO [mingle.py:49]  mingle: all alone
        2025-04-28 17:07:15,733 INFO [worker.py:175]  celery@bwdeMacBook-Pro-2.local ready.
        2025-04-28 17:07:15,742 INFO [pidbox.py:111]  pidbox: Connected to redis://:**@localhost:6379/1.




* * *

## 

​

Web サービスのセットアップ

フロントエンドページ用の Web サービスを起動します。

### 

​

環境の準備

Web フロントエンドサービスを起動するには、[Node.js v22 (LTS)](http://nodejs.org/) と [PNPM v10](https://pnpm.io/) が必要です。

  * NodeJS のインストール

<https://nodejs.org/en/download> にアクセスし、v18.x 以上のお使いのオペレーティングシステム用のインストールパッケージを選択してください。一般的な使用には LTS バージョンをお勧めします。

  * PNPM のインストール

[インストールガイド](https://pnpm.io/installation) に従って PNPM をインストールします。または、以下のコマンドで `npm` を使用して `pnpm` をインストールできます。
        
        npm i -g pnpm




### 

​

Web サービスの起動

  1. web ディレクトリに移動します
         
         cd web

  2. 依存関係をインストールします
         
         pnpm install --frozen-lockfile

  3. 環境変数設定ファイルを準備します

現在のディレクトリに `.env.local` というファイルを作成し、`.env.example` の内容をコピーします。必要に応じてこれらの環境変数の値を変更します：
         
         # For production release, change this to PRODUCTION
         NEXT_PUBLIC_DEPLOY_ENV=DEVELOPMENT
         # The deployment edition, SELF_HOSTED or CLOUD
         NEXT_PUBLIC_EDITION=SELF_HOSTED
         # The base URL of console application, refers to the Console base URL of WEB service if console domain is
         # different from api or web app domain.
         # example: http://cloud.dify.ai/console/api
         NEXT_PUBLIC_API_PREFIX=http://localhost:5001/console/api
         # The URL for Web APP, refers to the Web App base URL of WEB service if web app domain is different from
         # console or api domain.
         # example: http://udify.app/api
         NEXT_PUBLIC_PUBLIC_API_PREFIX=http://localhost:5001/api
         
         # SENTRY
         NEXT_PUBLIC_SENTRY_DSN=
         NEXT_PUBLIC_SENTRY_ORG=
         NEXT_PUBLIC_SENTRY_PROJECT=

  4. Web サービスをビルドします
         
         pnpm build

  5. Web サービスを起動します
         
         pnpm start

期待される出力：
         
         ▲ Next.js 15
            - Local:        http://localhost:3000
            - Network:      http://0.0.0.0:3000
         
          ✓ Starting...
          ✓ Ready in 73ms




### 

​

Dify にアクセスする

ブラウザで [http://127.0.0.1:3000](http://127.0.0.1:3000/) にアクセスして、Dify のすべての機能をお楽しみください。

乾杯！🍻

* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/getting-started/install-self-hosted/local-source-code.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20-source-c&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/getting-started/install-self-hosted%2Flocal-source-code.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[Docker Compose デプロイ](/ja-jp/getting-started/install-self-hosted/docker-compose)[aaPanelでのデプロイ方法](/ja-jp/getting-started/install-self-hosted/bt-panel)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * 前提条件
  * Docker と Docker Compose のセットアップ
  * Dify リポジトリのクローン
  * Docker Compose でミドルウェアを起動する
  * バックエンドサービスのセットアップ
  * 環境の準備
  * API サービスの起動
  * Worker サービスの起動
  * Web サービスのセットアップ
  * 環境の準備
  * Web サービスの起動
  * Dify にアクセスする



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/getting-started/install-self-hosted/start-the-frontend-docker-container

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

Dify コミュニティ版

単独でフロントエンドのDockerコンテナを起動する

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

    * [コミュニティ版](/ja-jp/getting-started/install-self-hosted/README)
    * [Docker Compose デプロイ](/ja-jp/getting-started/install-self-hosted/docker-compose)
    * [ローカルソースコードからの起動](/ja-jp/getting-started/install-self-hosted/local-source-code)
    * [aaPanelでのデプロイ方法](/ja-jp/getting-started/install-self-hosted/bt-panel)
    * [単独でフロントエンドのDockerコンテナを起動する](/ja-jp/getting-started/install-self-hosted/start-the-frontend-docker-container)
    * [環境変数の説明](/ja-jp/getting-started/install-self-hosted/environments)
    * [よくある質問](/ja-jp/getting-started/install-self-hosted/faq)
  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




Dify コミュニティ版

# 単独でフロントエンドのDockerコンテナを起動する

Copy page

バックエンドを単独で開発する際、ソースコードからバックエンドサービスを起動するだけで十分で、フロントエンドのコードをローカルで構築して起動する必要はないかもしれません。その代わり、Dockerイメージをプルしてコンテナを起動する方法でフロントエンドサービスを起動することができます。以下は具体的な手順です：

#### 

​

DockerHubのイメージを直接使用する
    
    
    docker run -it -p 3000:3000 -e CONSOLE_URL=http://127.0.0.1:5001 -e APP_URL=http://127.0.0.1:5001 langgenius/dify-web:latest

#### 

​

ソースコードからDockerイメージを構築する

  1. フロントエンドイメージを構築する
         
         cd web && docker build . -t dify-web

  2. フロントエンドイメージを起動する
         
         docker run -it -p 3000:3000 -e CONSOLE_URL=http://127.0.0.1:5001 -e APP_URL=http://127.0.0.1:5001 dify-web

  3. コンソールのドメイン名とWeb APPのドメイン名が一致しない場合、`CONSOLE_URL`と`APP_URL`を個別に設定できます。

  4. ローカルで <http://127.0.0.1:3000> にアクセスします。




* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/getting-started/install-self-hosted/start-the-frontend-docker-container.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20-the-frontend-docker-contai&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/getting-started/install-self-hosted%2Fstart-the-frontend-docker-container.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[aaPanelでのデプロイ方法](/ja-jp/getting-started/install-self-hosted/bt-panel)[環境変数の説明](/ja-jp/getting-started/install-self-hosted/environments)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * DockerHubのイメージを直接使用する
  * ソースコードからDockerイメージを構築する



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/getting-started/readme/features-and-specifications

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

Difyへようこそ

特徴と技術的な仕様

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

    * [Difyへようこそ](/ja-jp/introduction)
    * [特徴と技術的な仕様](/ja-jp/getting-started/readme/features-and-specifications)
    * [モデルプロバイダーリスト](/ja-jp/getting-started/readme/model-providers)
  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




Difyへようこそ

# 特徴と技術的な仕様

Copy page

LLMアプリケーションの技術スタックに精通している方々にとって、このドキュメントはDify独自の強みを理解するための近道となります。これにより、的確な比較と選択が可能になり、同僚や友人への推奨もしやすくなるでしょう。

Difyでは、製品の仕様に関する透明性の高いポリシーを採用しています。これにより、製品を十分に理解した上で意思決定を行うことができます。この透明性は、技術選定に役立つだけでなく、コミュニティのメンバーが製品をより深く理解し、積極的に貢献することを促進します。

### 

​

プロジェクトの基本情報

属性| 詳細  
---|---  
プロジェクト設立| 2023年3月  
オープンソースライセンス| [Apache License 2.0（商用ライセンスあり）](../../policies/open-source.md)  
公式開発チーム| 15名以上のフルタイム従業員  
コミュニティ貢献者| [290人以上（2024年Q2時点）](https://ossinsight.io/analyze/langgenius/dify)  
バックエンド技術| Python / Flask / PostgreSQL  
フロントエンド技術| Next.js  
コードベースサイズ| 13万行以上  
リリース頻度| 平均週1回  
  
### 

​

技術的な仕様

特徴| 詳細  
---|---  
LLM推論エンジン| Dify Runtime （LangChainはv0.4以降削除）  
対応商用モデル| **10種類以上** （OpenAI、Anthropic等を含む）新しい主要なモデルは48時間以内に対応  
MaaSベンダー| **7** （Hugging Face、Replicate、AWS Bedrock、NVIDIA、GroqCloud、together.ai、OpenRouter）  
ローカルモデル推論ランタイム| **6** （Xorbits（推奨）、OpenLLM、LocalAI、ChatGLM、Ollama、NVIDIA TIS）  
OpenAIインターフェース標準モデル統合| **無制限**  
マルチモーダル機能| ASR（音声認識）モデルGPT-4o相当のリッチテキストモデル  
内蔵アプリタイプ| テキスト生成、チャットボット、エージェント、ワークフロー、チャットフロー  
プロンプトサービスオーケストレーション| 視覚的なオーケストレーションインターフェースは高く評価されており、プロンプトを変更して効果を確認できます。**オーケストレーションモード**

  * シンプルなオーケストレーション
  * アシスタントオーケストレーション
  * フローオーケストレーション

**プロンプト変数タイプ**

  * 文字列
  * ラジオ列挙
  * 外部API
  * ファイル（2024年Q3以降）

  
エージェントワークフロー機能| 業界をリードする視覚的なワークフローオーケストレーションインターフェース。ライブノードデバッグ、モジュール化されたDSL、およびネイティブコードランタイムを備え、より複雑で信頼性と安定性の高いLLMアプリケーションの構築に適しています。**サポートノード**

  * LLM
  * 知識検索
  * 質問分類
  * IF/ELSE
  * CODE
  * テンプレート
  * HTTPリクエスト
  * ツール

  
RAG機能| 業界をリードする視覚的なナレッジベース管理インターフェース。スニペットプレビューとリトリーバルテストをサポートします。**インデックス方法**

  * キーワード
  * テキストベクトル
  * LLM-assisted質問スニペットモデル

**検索手法**

  * キーワード
  * テキスト類似性マッチング
  * ハイブリッド検索
  * N choose 1（レガシー）
  * マルチパス検索

**リコール最適化**

  * リランクモデル

  
ETL機能| TXT、Markdown、PDF、HTML、DOC、CSV形式の自動クリーニング。非構造化サービスにより最大限のサポート。Notionドキュメントをナレッジベースとして同期。Webページをナレッジベースとして同期。  
ベクトルデータベース対応| Qdrant（推奨）、Weaviate、Zilliz/Milvus、Pgvector、Pgvector-rs、Chroma、OpenSearch、TiDB、Tencent Vector、Oracle、Relyt、Analyticdb、Couchbase  
エージェント技術| ReAct、Function Call**ツールサポート**

  * OpenAI Plugin標準ツールの呼び出し
  * OpenAPI仕様APIを直接ツールとして読み込み

**内蔵ツール**

  * 40種類以上のツール（2024年Q2時点）

  
ログ| サポート、ログベースの注釈  
注釈付き返答| 人間による注釈Q&Aに基づく類似度ベースの返答。データ形式としてエクスポート可能。  
コンテンツモデレーション| OpenAI Moderationまたは外部API  
チームコラボレーション| ワークスペース、マルチメンバー管理  
API仕様| RESTful、ほとんどの機能をカバー  
デプロイ方法| Docker、Helm  
  
* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/getting-started/readme/features-and-specifications.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20res-and-specificati&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/getting-started/readme%2Ffeatures-and-specifications.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[Difyへようこそ](/ja-jp/introduction)[モデルプロバイダーリスト](/ja-jp/getting-started/readme/model-providers)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * プロジェクトの基本情報
  * 技術的な仕様



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/getting-started/readme/model-providers

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

Difyへようこそ

モデルプロバイダーリスト

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

    * [Difyへようこそ](/ja-jp/introduction)
    * [特徴と技術的な仕様](/ja-jp/getting-started/readme/features-and-specifications)
    * [モデルプロバイダーリスト](/ja-jp/getting-started/readme/model-providers)
  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




Difyへようこそ

# モデルプロバイダーリスト

Copy page

Difyは以下のモデルプロバイダーをサポートしています：

プロバイダー| LLM| テキスト埋め込み| 再ランク付け| 音声認識| 音声合成  
---|---|---|---|---|---  
OpenAI| ✔️(🛠️)(👓)| ✔️| | ✔️| ✔️  
Anthropic| ✔️(🛠️)| | | |   
Azure OpenAI| ✔️(🛠️)(👓)| ✔️| | ✔️| ✔️  
Gemini| ✔️| | | |   
Google Cloud| ✔️(👓)| ✔️| | |   
Nvidia API Catalog| ✔️| ✔️| ✔️| |   
Nvidia NIM| ✔️| | | |   
Nvidia Triton Inference Server| ✔️| | | |   
AWS Bedrock| ✔️| ✔️| | |   
OpenRouter| ✔️| | | |   
Cohere| ✔️| ✔️| ✔️| |   
together.ai| ✔️| | | |   
Ollama| ✔️| ✔️| | |   
Mistral AI| ✔️| | | |   
groqcloud| ✔️| | | |   
Replicate| ✔️| ✔️| | |   
Hugging Face| ✔️| ✔️| | |   
Xorbits inference| ✔️| ✔️| ✔️| ✔️| ✔️  
智谱（ズーパ）| ✔️(🛠️)(👓)| ✔️| | |   
百川（バイチュアン）| ✔️| ✔️| | |   
讯飞星火（イフライシンカ）| ✔️| | | |   
Minimax| ✔️(🛠️)| ✔️| | |   
通義千問（トンイーチェンウェン）| ✔️| ✔️| | | ✔️  
文心一言（ブンシンイチゲン）| ✔️| ✔️| | |   
月之暗面（ゲツノアンメン）| ✔️(🛠️)| | | |   
Tencent Cloud| | | | ✔️|   
階躍星辰（カイヤクセイシン）| ✔️(🛠️)(👓)| | | |   
火山エンジン| ✔️| ✔️| | |   
零一万物（レイイチバンブツ）| ✔️| | | |   
360 智脑| ✔️| | | |   
Azure AI Studio| ✔️| | ✔️| |   
deepseek| ✔️(🛠️)| | | |   
騰訊混元（テンセンコンゲン）| ✔️| | | |   
SILICONFLOW| ✔️| ✔️| | |   
Jina AI| | ✔️| ✔️| |   
ChatGLM| ✔️| | | |   
Xinference| ✔️(🛠️)(👓)| ✔️| ✔️| |   
OpenLLM| ✔️| ✔️| | |   
LocalAI| ✔️| ✔️| ✔️| ✔️|   
OpenAI API互換| ✔️| ✔️| | ✔️|   
PerfXCloud| ✔️| ✔️| | |   
Lepton AI| ✔️| | | |   
novita.ai| ✔️| | | |   
Amazon Sagemaker| ✔️| ✔️| ✔️| |   
Text Embedding Inference| | ✔️| ✔️| |   
GPUStack| ✔️(🔧️)(👓)| ✔️| ✔️| ✔️| ✔️  
  
その中で (🛠️) は関数呼び出しをサポートすることを、(👓) は視覚能力を持つことを示します。

この表は常に更新されています。また、コミュニティメンバーからのモデル供給者に関する様々な[リクエスト](https://github.com/langgenius/dify/discussions/categories/ideas)も注視しています。必要なモデル供給者がこのリストにない場合は、プルリクエストを提出して貢献することができます。詳しくは、[貢献者ガイド](/ja-jp/community/contribution)をご覧ください。

* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/getting-started/readme/model-providers.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20-provid&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/getting-started/readme%2Fmodel-providers.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[特徴と技術的な仕様](/ja-jp/getting-started/readme/features-and-specifications)[クラウドサービス](/ja-jp/getting-started/cloud)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/guides/annotation/annotation-reply

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

アノテーション

アノテーションリプライ

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

  * ナレッジベース

  * アプリ公開

  * アノテーション

    * [ログとアナウンス](/ja-jp/guides/annotation/logs)
    * [アノテーションリプライ](/ja-jp/guides/annotation/annotation-reply)
  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




アノテーション

# アノテーションリプライ

Copy page

アノテーションリプライ機能は、手動編集されたアノテーションを通じて、アプリケーションにカスタマイズされた高品質なQ&Aリプライ能力を提供します。

適用シーン：

  * **特定分野のカスタマイズ回答：** 企業や政府などのカスタマーサービスやナレッジベースQ&Aのシーンで、特定の問題に対してシステムが明確な結果を提供することを望む場合、特定の問題についてカスタマイズされた出力結果が必要です。例えば、特定の問題に対する「標準回答」や、特定の問題に対する「回答不可」の設定などが挙げられます。
  * **POCやデモ製品の迅速なチューニング：** プロトタイプ製品を迅速に構築する際に、アノテーションリプライを通じて実現されたカスタマイズ回答は、Q&Aの生成結果の予期を効率的に向上させ、顧客満足度を高めることができます。



アノテーションリプライ機能は、LLM (大規模言語モデル) の生成プロセスをスキップし、RAG (Retrieval-Augmented Generation) の生成幻覚問題を回避するための別の検索強化システムを提供するものです。

### 

​

使用プロセス

  1. アノテーションリプライ機能を有効にすると、LLMの対話リプライ内容に対してアノテーションを行うことができます。LLMがリプライした高品質な回答を直接アノテーションとして追加することもできますし、必要に応じて高品質な回答を手動で編集することもできます。これらの編集されたアノテーション内容は永続化保存されます。
  2. ユーザーが再度類似の質問をした場合、その質問をベクトル化し、類似するアノテーションをクエリします。
  3. マッチング項目が見つかった場合、そのアノテーションに対応する回答を直接返し、LLMやRAGのプロセスを経由せずにリプライします。
  4. マッチング項目が見つからなかった場合、質問は通常プロセスを継続します（LLMやRAGに渡されます）。
  5. アノテーションリプライ機能をオフにすると、システムはアノテーションからのマッチングリプライを継続して行いません。



### 

​

提示詞編成でアノテーションリプライを有効にする

「アプリケーション構築->機能追加」からアノテーションリプライのスイッチを有効にします：

有効にする際には、まずアノテーションリプライのパラメータを設定する必要があります。設定可能なパラメータには次のものがあります：スコア閾値と埋め込みモデル

**スコア閾値** ：アノテーションリプライのマッチング類似度閾値を設定するために使用されます。閾値スコアを超えるアノテーションのみがリコールされます。

**埋め込みモデル** ：アノテーションテキストをベクトル化するために使用され、モデルの切り替え時には再度埋め込みが生成されます。

保存して有効にすると、この設定は直ちに有効となり、システムはすべての保存されたアノテーションに対して埋め込みモデルを利用して埋め込みを生成し保存します。

### 

​

会話デバッグページでアノテーションを追加する

デバッグおよびプレビューページでモデルのリプライ情報に直接アノテーションを追加または編集できます。

必要な高品質リプライに編集して保存します。

同じユーザー質問を再度入力すると、システムは既に保存されたアノテーションを使用してユーザー質問に直接リプライします。

### 

​

ログとアノテーションでアノテーションリプライを有効にする

「アプリケーション構築->ログとアノテーション->アノテーション」からアノテーションリプライのスイッチを有効にします：

### 

​

アノテーションバックエンドでアノテーションリプライのパラメータを設定する

アノテーションリプライで設定可能なパラメータには次のものがあります：スコア閾値と埋め込みモデル

**スコア閾値** ：アノテーションリプライのマッチング類似度閾値を設定するために使用されます。閾値スコアを超えるアノテーションのみがリコールされます。

**埋め込みモデル** ：アノテーションテキストをベクトル化するために使用され、モデルの切り替え時には再度埋め込みが生成されます。

### 

​

アノテーションQ&Aペアを一括インポートする

一括インポート機能内で、アノテーションインポートテンプレートをダウンロードし、テンプレート形式に従ってアノテーションQ&Aペアを編集します。編集が完了したら、一括インポートします。

### 

​

アノテーションQ&Aペアを一括エクスポートする

アノテーション一括エクスポート機能を通じて、システム内に保存されたすべてのアノテーションQ&Aペアを一度にエクスポートできます。

### 

​

アノテーションリプライのヒット履歴を確認する

アノテーションヒット履歴機能内で、すべてのヒットしたアノテーションの編集履歴、ヒットしたユーザー質問、リプライ回答、ヒットソース、マッチング類似度スコア、ヒット時間などの情報を確認できます。これらのシステム情報に基づいて、アノテーション内容を継続的に改善することができます。

* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/guides/annotation/annotation-reply.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20ation-re&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/guides/annotation%2Fannotation-reply.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[ログとアナウンス](/ja-jp/guides/annotation/logs)[データ分析](/ja-jp/guides/monitoring/analysis)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * 使用プロセス
  * 提示詞編成でアノテーションリプライを有効にする
  * 会話デバッグページでアノテーションを追加する
  * ログとアノテーションでアノテーションリプライを有効にする
  * アノテーションバックエンドでアノテーションリプライのパラメータを設定する
  * アノテーションQ&Aペアを一括インポートする
  * アノテーションQ&Aペアを一括エクスポートする
  * アノテーションリプライのヒット履歴を確認する



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/guides/annotation/logs

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

アノテーション

ログとアナウンス

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

  * ナレッジベース

  * アプリ公開

  * アノテーション

    * [ログとアナウンス](/ja-jp/guides/annotation/logs)
    * [アノテーションリプライ](/ja-jp/guides/annotation/annotation-reply)
  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




アノテーション

# ログとアナウンス

Copy page

アプリがユーザーデータを収集する際には、必ず現地の法規を遵守してください。一般的な方法としては、プライバシーポリシーを公開し、ユーザーの同意を得ることです。

ログ（Logs）機能は、Dify アプリの動作を観察およびマークするためのものです。Dify はアプリのすべてのインタラクションプロセスを記録し、ウェブアプリ（WebApp）や API を通じて呼び出される場合でも、プロンプトエンジニアや LLM 運用担当者に視覚的な LLM アプリ運営体験を提供します。

### 

​

ログコンソールの使用

アプリの左側ナビゲーションに**ログ（Logs）**を見つけることができ、このページは通常以下を表示します：

  * 選択した時間内のユーザーおよびユーザーのインタラクション記録
  * ユーザー入力と AI 出力の結果。対話型アプリの場合、通常は一連のメッセージフロー
  * ユーザーおよび運用担当者の評価、ならびに運用担当者の改良マーク



注意点：チーム内の複数の協力者が同じログをマークすると、最後のマークが以前のマークを上書きします。

> 無料プランのチームでは、インタラクションログは過去30日間のみ保存されます。より長期間のインタラクション履歴を保存したい場合は、[価格ページ](https://dify.ai/pricing)を訪れて、上位プランにアップグレードするか、[コミュニティエディション](/ja-jp/getting-started/install-self-hosted/docker-compose)を展開することを検討してください。

### 

​

改良アナウンス

これらのマークは、Dify の後続バージョンでモデルの微調整（モデルの微調整）に使用され、モデルの正確性と返信スタイルを向上させることを目的としています。現在のプレビュー版では、マークのみがサポートされています。

ログをクリックすると、画面の右側にログ詳細パネルが開き、このパネルで運用担当者はインタラクションに対してマークを追加できます：

  * 良いパフォーマンスのメッセージに「いいね」
  * 悪いパフォーマンスのメッセージに「よくないね」
  * 改善結果に対して改良返信をマーク。これはあなたが期待する AI の返信テキストです



注意点：チーム内の複数の管理者が同じログをマークすると、最後のマークが以前のマークを上書きします。

* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/guides/annotation/logs.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/guides/annotation%2Flogs.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[フロントエンドテンプレートに基づいた再開発](/ja-jp/guides/application-publishing/based-on-frontend-templates)[アノテーションリプライ](/ja-jp/guides/annotation/annotation-reply)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * ログコンソールの使用
  * 改良アナウンス



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/guides/application-orchestrate/README

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

アプリ・オーケストレーション

アプリ・オーケストレーション

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

    * [アプリ・オーケストレーション](/ja-jp/guides/application-orchestrate/README)
    * [アプリ作成](/ja-jp/guides/application-orchestrate/creating-an-application)
    * チャットボット

    * [エージェント](/ja-jp/guides/application-orchestrate/agent)
    * ツールキット

  * ワークフロー

  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




アプリ・オーケストレーション

# アプリ・オーケストレーション

Copy page

Difyにおいて、「アプリ・オーケストレーション」とは、GPTなどの大規模言語モデルを基に構築された実際のシナリオアプリケーションを指します。アプリケーションを作成することで、特定のニーズに応じたスマートAI技術を適用することができます。これは、AIアプリケーションの開発のためのエンジニアリングパラダイムと具体的なデリバラブルの両方を含んでいます。

要するに、アプリケーションは開発者に以下を提供します：

  * トークン認証を通じて、バックエンドまたはフロントエンドアプリケーションから直接呼び出せる、使いやすいAPI
  * すぐに使える、美しくホスティングされたWebApp。WebAppのテンプレートを使用して二次開発が可能
  * 提示詞エンジニアリング、コンテキスト管理、ログ分析、および注釈を含む使いやすいインターフェースのセット



これらの**いずれか一つ** または**すべて** を選んで、あなたのAIアプリケーション開発をサポートできます。

### 

​

アプリケーションタイプ 

Difyには、五つのアプリケーションタイプが提供されています:

  * **チャットボット** ：LLMを基にした対話型インタラクションアシスタント。
  * **テキスト ジェネレーター** ：ストーリーの執筆、テキスト分類、翻訳などのテキスト生成タスク向けのアシスタント。
  * **エージェント** ：タスクを分解し、推論し、ツールを呼び出す対話型インテリジェントアシスタント。
  * **チャットフロー** ：メモリ機能を備えたマルチラウンドの複雑な対話タスクのワークフローオーケストレーション。
  * **ワークフロー** ：自動化やバッチ処理などの単一ラウンドのタスクのためのワークフローオーケストレーション。



テキスト ジェネレーターアプリケーションとチャットボットアシスタントの違いは以下の表をご覧ください:

| テキスト ジェネレーター| チャットボット  
---|---|---  
Webアプリインターフェース| フォーム+結果式| チャット式  
WebAPIエンドポイント| `completion-messages`| `chat-messages`  
インタラクション方式| 一問一答| 対話型のやりとり  
ストリーミング結果返却| 対応| 対応  
コンテキスト保存| セッション内のみ| 継続的に保存  
ユーザー入力フォーム| 対応| 対応  
データセットとプラグイン| 対応| 対応  
AIオープニング| 不対応| 対応  
シナリオ例| 翻訳、判断、インデックス付け| チャット  
  
### 

​

* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/guides/application-orchestrate/README.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/guides/application-orchestrate%2FREADME.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[負荷分散](/ja-jp/guides/model-configuration/load-balancing)[アプリ作成](/ja-jp/guides/application-orchestrate/creating-an-application)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * アプリケーションタイプ 
  * 


Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/guides/application-orchestrate/agent

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

アプリ・オーケストレーション

エージェント

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

    * [アプリ・オーケストレーション](/ja-jp/guides/application-orchestrate/README)
    * [アプリ作成](/ja-jp/guides/application-orchestrate/creating-an-application)
    * チャットボット

    * [エージェント](/ja-jp/guides/application-orchestrate/agent)
    * ツールキット

  * ワークフロー

  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




アプリ・オーケストレーション

# エージェント

Copy page

### 

​

定義

エージェントアシスタントは、大規模言語モデルの推論能力を活用し、複雑な人間のタスクを自律的に目標設定、タスク分解、ツールの呼び出し、プロセスのイテレーションを行い、人間の介入なしでタスクを完了することができます。

### 

​

エージェントアシスタントの使い方

迅速に使い始めるために、「探索」でエージェントアシスタントのアプリケーションテンプレートを見つけて自分のワークスペースに追加するか、それを基にカスタマイズすることができます。新しいDifyスタジオでは、ゼロから自分専用のエージェントアシスタントを編成し、財務報告書の分析、レポートの作成、ロゴデザイン、旅行計画などのタスクを完了する手助けをすることができます。

### 

​

会話のオープニング設定

エージェントアシスタントの会話オープニングとオープニング質問を設定できます。設定された会話オープニングは、ユーザーが初めて対話を開始する際に、アシスタントが完了できるタスクや提案される質問の例を表示します。

### 

​

ファイルのアップロード

[Claude 3.5 Sonnet](https://docs.anthropic.com/en/docs/build-with-claude/pdf-support) や [Gemini 1.5 Pro](https://ai.google.dev/api/files) など、一部のLLMはファイル処理に標準対応しています。各LLMのウェブサイトで、ファイルのアップロード機能について詳しくご確認ください。

ファイルの読み込みに対応したLLMを選択し、「Document」を有効にしてください。これにより、チャットボットは複雑な設定なしでファイルの内容を理解し、利用できるようになります。

### 

​

デバッグとプレビュー

エージェントアシスタントの編成が完了したら、アプリとして公開する前にデバッグとプレビューを行い、アシスタントのタスク完了効果を確認できます。

### 

​

アプリの公開

* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/guides/application-orchestrate/agent.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/guides/application-orchestrate%2Fagent.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[複数モデルのデバッグ](/ja-jp/guides/application-orchestrate/multiple-llms-debugging)[ツールキット](/ja-jp/guides/application-orchestrate/app-toolkits/README)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * 定義
  * エージェントアシスタントの使い方
  * 会話のオープニング設定
  * ファイルのアップロード
  * デバッグとプレビュー
  * アプリの公開



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/guides/application-orchestrate/app-toolkits/README

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

ツールキット

ツールキット

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

    * [アプリ・オーケストレーション](/ja-jp/guides/application-orchestrate/README)
    * [アプリ作成](/ja-jp/guides/application-orchestrate/creating-an-application)
    * チャットボット

    * [エージェント](/ja-jp/guides/application-orchestrate/agent)
    * ツールキット

      * [ツールキット](/ja-jp/guides/application-orchestrate/app-toolkits/README)
      * [コンテンツモデレーション](/ja-jp/guides/application-orchestrate/app-toolkits/moderation-tool)
  * ワークフロー

  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




ツールキット

# ツールキット

Copy page

**スタジオ — アプリケーションオーケストレーション** 内で**機能を追加する** をクリックし、アプリケーションツールボックスを開きます。

アプリケーションツールボックスは、Difyの[アプリケーション](/ja-jp/guides/application-orchestrate/chatbot-application)に対して様々な付加機能を提供します。

### 

​

会話のオープニング

対話型アプリケーションでは、AIが最初の発言や質問を行います。開場のメッセージや質問を編集することで、ユーザーに質問を促し、アプリの背景を説明し、対話のハードルを下げることができます。

### 

​

次の質問の提案

次の質問の提案を設定すると、AIが前回の対話内容に基づいて3つの質問を生成し、次の対話を誘導します。

### 

​

テキストから音声への変換

この機能をオンにすると、AIの返信内容を自然な音声に変換できます。 アプリケーションツールボックスに「テキストから音声へ」のボタンを押すと、この機能を使えます。

### 

​

音声からテキストへの変換

この機能をオンにすると、アプリ内で録音し、その音声を自動的にテキストに変換できます。 アプリケーションツールボックスに「音声からテキストへ」のボタンを押すと、この機能を使えます。

### 

​

引用と帰属

この機能をオンにすると、大規模言語モデルがナレッジベースからの内容を引用して回答する際に、返信内容の下に具体的な引用段落情報（元の段落テキスト、段落番号、マッチ度など）を表示できます。

詳しい説明は[引用と帰属](/ja-jp/guides/knowledge-base/retrieval-test-and-citation)をご覧ください。

### 

​

コンテンツレビュー

AIアプリと対話する際には、内容の安全性、ユーザー体験、法律規制など、さまざまな厳しい要求があります。このような場合には「センシティブコンテンツレビュー」機能が必要で、エンドユーザーにより良い対話環境を提供します。

詳しい説明は[センシティブコンテンツレビュー](/ja-jp/guides/application-orchestrate/app-toolkits/moderation-tool)をご覧ください。

### 

​

注釈付き返信

注釈付き返信機能は、人工的に編集された注釈によって、アプリにカスタマイズされた高品質な質問応答能力を提供します。

詳しい説明は[注釈付き返信](/ja-jp/guides/annotation/annotation-reply)をご覧ください。

* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/guides/application-orchestrate/app-toolkits/README.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/guides/application-orchestrate/app-toolkits%2FREADME.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[エージェント](/ja-jp/guides/application-orchestrate/agent)[コンテンツモデレーション](/ja-jp/guides/application-orchestrate/app-toolkits/moderation-tool)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * 会話のオープニング
  * 次の質問の提案
  * テキストから音声への変換
  * 音声からテキストへの変換
  * 引用と帰属
  * コンテンツレビュー
  * 注釈付き返信



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/guides/application-orchestrate/app-toolkits/moderation-tool

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

ツールキット

コンテンツモデレーション

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

    * [アプリ・オーケストレーション](/ja-jp/guides/application-orchestrate/README)
    * [アプリ作成](/ja-jp/guides/application-orchestrate/creating-an-application)
    * チャットボット

    * [エージェント](/ja-jp/guides/application-orchestrate/agent)
    * ツールキット

      * [ツールキット](/ja-jp/guides/application-orchestrate/app-toolkits/README)
      * [コンテンツモデレーション](/ja-jp/guides/application-orchestrate/app-toolkits/moderation-tool)
  * ワークフロー

  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




ツールキット

# コンテンツモデレーション

Copy page

AIアプリケーションと対話する際、コンテンツの安全性、ユーザーエクスペリエンス、法律と規制など多方面で厳しい要件が求められます。このような場合、エンドユーザーにより良いインタラクティブ環境を提供するために「センシティブワード審査」機能が必要です。プロンプト編成ページで「機能を追加」をクリックし、下部のツールボックス「コンテンツのモデレーション」を見つけます：

### 

​

機能一：OpenAI モデレーション API の呼び出し

OpenAI やほとんどの大規模言語モデル (LLM) 会社が提供するモデルには、暴力、性、違法行為などの議論を含むコンテンツを出力しないようにするためのコンテンツ審査機能が備わっています。OpenAI はこのコンテンツ審査機能を公開しており、詳細は [platform.openai.com](https://platform.openai.com/docs/guides/moderation/overview) を参照してください。今では Dify でも直接 OpenAI モデレーション API を呼び出すことができます。入力内容や出力内容を監査するには、対応する「プリセット応答」を入力するだけです。

### 

​

機能二：カスタムキーワード

開発者は監査が必要なセンシティブワードをカスタムキーワードとして設定できます。例えば「kill」をキーワードとして設定し、ユーザーが入力した際に監査動作を行い、プリセット応答内容として「The content is violating usage policies.」と設定します。予測される結果として、ユーザーが「kill」を含むテキストを入力すると、センシティブワード審査ツールが作動し、プリセット応答内容が返されます。

### 

​

機能三：敏感語審査 モデレーション拡張

企業内部では異なるセンシティブワード審査のメカニズムが存在することが多いです。企業が企業内ナレッジベースチャットボットなどのAIアプリケーションを開発する際、社員が入力したクエリ内容をセンシティブワード審査する必要があります。このため、開発者は自社のセンシティブワード審査メカニズムに基づいて API 拡張を作成することができます。詳細は [moderation.md](../../extension/api-based-extension/moderation.md "mention") を参照してください。これにより、Dify 上で呼び出し、高度なカスタマイズとプライバシー保護を実現することができます。

例えば、私たちのローカルサービスで、`ドナルド・ジョン・トランプ`というセンシティブワード審査ルールをカスタマイズします。ユーザーが`query`変数に「トランプ」と入力すると、対話時に “貴社のご使用ポリシーに反するコンテンツとなっております。” という応答が返されます。テスト結果は以下の通りです：

* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/guides/application-orchestrate/app-toolkits/moderation-tool.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20ation-t&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/guides/application-orchestrate/app-toolkits%2Fmoderation-tool.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[ツールキット](/ja-jp/guides/application-orchestrate/app-toolkits/README)[キーコンセプト](/ja-jp/guides/workflow/concepts)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * 機能一：OpenAI モデレーション API の呼び出し
  * 機能二：カスタムキーワード
  * 機能三：敏感語審査 モデレーション拡張



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/guides/application-orchestrate/chatbot-application

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

チャットボット

チャットボット

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

    * [アプリ・オーケストレーション](/ja-jp/guides/application-orchestrate/README)
    * [アプリ作成](/ja-jp/guides/application-orchestrate/creating-an-application)
    * チャットボット

      * [チャットボット](/ja-jp/guides/application-orchestrate/chatbot-application)
      * [複数モデルのデバッグ](/ja-jp/guides/application-orchestrate/multiple-llms-debugging)
    * [エージェント](/ja-jp/guides/application-orchestrate/agent)
    * ツールキット

  * ワークフロー

  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




チャットボット

# チャットボット

Copy page

チャットボットは、ユーザーとの継続的な対話を一問一答形式で行います。

### 

​

適用シーン

チャットボットは、カスタマーサービス、オンライン教育、医療、金融サービスなどの分野で利用されることがあります。これらのアプリは、組織の業務の効率を向上させたり、人件費を削減したり、ユーザーエクスペリエンスを高めるのに寄与します。

### 

​

編成方法

チャットボットの作成には、プロンプト、変数、コンテキスト、オープニングダイアログ、次の質問の提案などが含まれています。

ここでは、**面接官** 用のアプリを例に使って、チャットボットの編成方法を紹介します。

#### 

​

アプリの作成

ホームページで「最初から作成」をクリックしてアプリを作成します。アプリ名を入力し、アプリタイプは**チャットボット** を選択します。

#### 

​

アプリの編成

アプリを作成すると、自動的にアプリの概要ページに移動します。左側のメニューから編成をクリックしてアプリを編成します。

**プロンプトの記入**

プロンプトは、AIが専門的な回答を行う範囲を制限し、回答をより正確にします。組み込みのプロンプトジェネレータを使用して、適切なプロンプトを作成することができます。プロンプト内には、たとえば `{{input}}` のようなフォーム変数を挿入することができます。変数内の値は、ユーザーが入力した値に置き換えられます。

例：

  1. インタビューシナリオの指示を入力します。
  2. プロンプトが自動的に右側の内容欄に生成されます。
  3. カスタム変数をプロンプトに挿入することで、特定の要望や詳細に応じてカスタマイズが可能です。



ユーザーエクスペリエンスを向上させるために、オープニングダイアログを追加することができます：`こんにちは、{{name}}さん。私はあなたの面接官、Bobです。準備はできていますか？`。ページ下部の「機能の追加」ボタンをクリックして、「オープニングダイアログ」機能を開きます

オープニングダイアログを追加する方法は、底の「機能を追加」ボタンをクリックして、「会話の開始」機能を開きます：

オープニングステートメントを編集する際に、いくつかのオープニング質問を追加することもできます：

#### 

​

コンテキストの追加

AIの対話範囲を[ナレッジベース](/ja-jp/guides/knowledge-base/readme)内に制限したい場合、企業内のカスタマーサービス用語規準などを「コンテキスト」で参照することができます。

### 

​

ファイルのアップロード

[Claude 3.5 Sonnet](https://docs.anthropic.com/en/docs/build-with-claude/pdf-support) や [Gemini 1.5 Pro](https://ai.google.dev/api/files) など、一部のLLMはファイル処理に標準対応しています。各LLMのウェブサイトで、ファイルのアップロード機能について詳しくご確認ください。

ファイルの読み込みに対応したLLMを選択し、「Document」を有効にしてください。これにより、チャットボットは複雑な設定なしでファイルの内容を理解し、利用できるようになります。

#### 

​

デバッグ

右側にユーザー入力項目を入力し、内容を入力してデバッグします。

回答結果が望ましくない場合は、プロンプトやモデルを調整することができます。また、複数のモデルを同期してデバッグすることもでき、適切な構成を組み合わせることができます。

単一モデルでのデバッグが効率的ではない場合、[**「複数のモデルでのデバッグ」**](./multiple-llms-debugging)機能を使用して、複数のモデルの回答効果を一括確認することもできます。

#### 

​

アプリの公開

アプリのデバッグが完了したら、右上の**公開** ボタンをクリックして独立したAIアプリを生成します。公開URLを使用してアプリを体験するだけでなく、APIベースの開発やWebサイトへの組み込みなども行うことができます。詳細については[公開](../application-publishing/README)を参照してください。

公開されたアプリをカスタマイズしたい場合は、当社のオープンソースの[WebAppテンプレート](https://github.com/langgenius/webapp-conversation)をForkしてください。テンプレートをベースに、シチュエーションやスタイルに合わせたアプリを作成できます。

### 

​

よくある質問

**チャットボット内にサードパーティツールを追加するにはどうすればよいですか？**

チャットボットアプリは、サードパーティツールの追加をサポートしていません。[エージェント](/ja-jp/guides/application-orchestrate/agent) 内でサードパーティツールを追加できます。

**チャットボット作成時のメタデータフィルタリング活用方法とは？ **

詳細な手順は、[アプリ内でのナレッジベース統合](/ja-jp/guides/knowledge-base/integrate-knowledge-within-application)の「**メタデータフィルタリング → チャットボット** 」をご確認ください。

* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/guides/application-orchestrate/chatbot-application.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20ot-applicat&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/guides/application-orchestrate%2Fchatbot-application.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[アプリ作成](/ja-jp/guides/application-orchestrate/creating-an-application)[複数モデルのデバッグ](/ja-jp/guides/application-orchestrate/multiple-llms-debugging)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * 適用シーン
  * 編成方法
  * アプリの作成
  * アプリの編成
  * コンテキストの追加
  * ファイルのアップロード
  * デバッグ
  * アプリの公開
  * よくある質問



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/guides/application-orchestrate/creating-an-application

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

アプリ・オーケストレーション

アプリ作成

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

    * [アプリ・オーケストレーション](/ja-jp/guides/application-orchestrate/README)
    * [アプリ作成](/ja-jp/guides/application-orchestrate/creating-an-application)
    * チャットボット

    * [エージェント](/ja-jp/guides/application-orchestrate/agent)
    * ツールキット

  * ワークフロー

  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




アプリ・オーケストレーション

# アプリ作成

Copy page

Difyスタジオでは、アプリケーションを作成するにあたり以下の3つの方法があります：

  * アプリケーションテンプレートを使用（初心者におすすめ）
  * 最初からアプリケーションを作成
  * DSLファイルをインポートして作成(ローカル・オンライン)



### 

​

テンプレートを使ってアプリケーションを作成

Difyを初めて使う場合、アプリケーション制作に不慣れなこともあるでしょう。そのため、Difyチームは様々な用途に対応する高品質なテンプレートを提供しており、これによりDifyで作成可能なアプリケーションの種類を迅速に把握できます。

ナビゲーションメニューより「スタジオ」を選んだ後、「テンプレートから作成」をアプリケーションリストから選択してください。

好みのテンプレートを選択し、**このテンプレートを使用する** ボタンをクリックします。

### 

​

新しいアプリケーションの作成

Difyで最初からアプリケーションを作成する場合、ナビゲーションメニューから「スタジオ」を選び、「最初から作成」をアプリケーションリストで選択します。

Difyは、チャットボイス、テキストジェネレータ、エージェント、ワークフロー、チャットフローという5つの異なる種類のアプリケーションがあります。

アプリケーションを作成する際には、名前を付け、適切なアイコンを選択し、このアプリケーションの目的を簡潔に説明することで、チーム内での使用を容易にします。

### 

​

DSLファイルから作成

Dify DSLは、Dify.AIが定めるAIアプリケーション開発のための標準ファイルフォーマット(YML)です。この標準には、アプリケーションの基本情報、モデルのパラメータ、オーケストレーションの設定などが含まれます。

#### 

​

ローカルのDSLファイルをインポート

コミュニティや他者から提供されたDSLファイル（テンプレート）を持っている場合は、「DSLファイルをインポート」をスタジオから選択してください。インポート後、元のアプリケーションの設定が直接読み込まれます。

#### 

​

URLを通じてDSLファイルをインポート

以下の形式を使用して、URL経由でDSLファイルをインポートすることができます：
    
    
    https://example.com/your_dsl.yml

> DSLファイルを取り込む際には、バージョンが自動で確認されます。バージョン間に大きな違いがあると、互換性に問題が生じる恐れがあります。この件につきましては、[アプリケーション管理：インポート](/ja-jp/guides/management/app-management)セクションで詳細をご覧いただけます。

* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/guides/application-orchestrate/creating-an-application.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20ing-an-applicat&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/guides/application-orchestrate%2Fcreating-an-application.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[アプリ・オーケストレーション](/ja-jp/guides/application-orchestrate/README)[チャットボット](/ja-jp/guides/application-orchestrate/chatbot-application)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * テンプレートを使ってアプリケーションを作成
  * 新しいアプリケーションの作成
  * DSLファイルから作成
  * ローカルのDSLファイルをインポート
  * URLを通じてDSLファイルをインポート



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/guides/application-orchestrate/multiple-llms-debugging

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

チャットボット

複数モデルのデバッグ

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

    * [アプリ・オーケストレーション](/ja-jp/guides/application-orchestrate/README)
    * [アプリ作成](/ja-jp/guides/application-orchestrate/creating-an-application)
    * チャットボット

      * [チャットボット](/ja-jp/guides/application-orchestrate/chatbot-application)
      * [複数モデルのデバッグ](/ja-jp/guides/application-orchestrate/multiple-llms-debugging)
    * [エージェント](/ja-jp/guides/application-orchestrate/agent)
    * ツールキット

  * ワークフロー

  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




チャットボット

# 複数モデルのデバッグ

Copy page

**チャットボット** アプリは、**「複数モデルでデバッグ」**機能をサポートしており、同じ質問に対する異なるモデルの応答を同時に比較できます。

一度に最大**4つ** の大規模言語モデルを追加できます。

デバッグ中に、優れたパフォーマンスを発揮するモデルが見つかった場合は、**「単一モデルでデバッグ」**をクリックすると、そのモデル専用のプレビューウィンドウに切り替わります。

## 

​

よくある質問

### 

​

1\. LLMを追加する際に、モデルが一覧に表示されないのはなぜですか？

[「モデルプロバイダー」](/ja-jp/guides/model-configuration/readme)にアクセスし、指示に従って複数のモデルのキーを手動で追加してください。

### 

​

2\. 複数モデルデバッグモードを終了するにはどうすればよいですか？

いずれかのモデルを選択し、**「単一モデルでデバッグ」** をクリックすると、複数モデルデバッグモードを終了できます。

* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/guides/application-orchestrate/multiple-llms-debugging.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20ple-llms-debugg&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/guides/application-orchestrate%2Fmultiple-llms-debugging.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[チャットボット](/ja-jp/guides/application-orchestrate/chatbot-application)[エージェント](/ja-jp/guides/application-orchestrate/agent)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * よくある質問
  * 1\. LLMを追加する際に、モデルが一覧に表示されないのはなぜですか？
  * 2\. 複数モデルデバッグモードを終了するにはどうすればよいですか？



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/guides/application-publishing/based-on-frontend-templates

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

アプリ公開

フロントエンドテンプレートに基づいた再開発

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

  * ナレッジベース

  * アプリ公開

    * シングルページWebアプリとして公開

    * [Webサイトへの埋め込み](/ja-jp/guides/application-publishing/embedding-in-websites)
    * [API 基づく開発](/ja-jp/guides/application-publishing/developing-with-apis)
    * [フロントエンドテンプレートに基づいた再開発](/ja-jp/guides/application-publishing/based-on-frontend-templates)
  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




アプリ公開

# フロントエンドテンプレートに基づいた再開発

Copy page

もし開発者が新製品をゼロから開発する場合や製品プロトタイプ設計の段階にある場合、Difyを使用して迅速にAIサイトをリリースすることができます。同時に、Difyは開発者がさまざまな形式のフロントエンドアプリを自由に創造できることを望んでおり、そのため以下を提供しています：

  * **SDK** ：さまざまな言語でDify APIに迅速に接続するためのもの
  * **WebAppテンプレート** ：各種アプリケーションのためのWebApp開発用スキャフォルディング



WebAppテンプレートはMITライセンスに基づいてオープンソース化されていますので、自由に変更してデプロイすることができ、Difyのすべての機能を実現することができます。また、自分のアプリを実現するための参考コードとしても使用できます。

これらのテンプレートはGitHubで見つけることができます：

  * [会話型アプリケーション](https://github.com/langgenius/webapp-conversation)
  * [テキスト生成型アプリケーション](https://github.com/langgenius/webapp-text-generator)



WebAppテンプレートを使用する最も簡単な方法は、GitHubで「このテンプレートを使用」をクリックすることです。これにより、新しいリポジトリがフォークされます。その後、DifyのアプリIDとAPIキーを以下のように設定する必要があります：
    
    
    export const APP_ID = ''
    export const API_KEY = ''
    ```
    
    `config/index.ts`での詳細な設定：
    ```js
    export const APP_INFO: AppInfo = {
      "title": 'Chat APP',
      "description": '',
      "copyright": '',
      "privacy_policy": '',
      "default_language": 'zh-Hans'
    }
    
    export const isShowPrompt = true
    export const promptTemplate = ''

> アプリIDはアプリのURLの中から取得できます。URLの長い文字列の部分がユニークなアプリIDです。

各WebAppテンプレートにはREADMEファイルが含まれており、デプロイ方法の説明が記載されています。通常、WebAppテンプレートには軽量バックエンドサービスが含まれており、これは開発者のAPIキーがユーザーに直接露出しないようにするためのものです。

これらのWebAppテンプレートは、AIアプリプロトタイプを迅速に構築し、Difyのすべての機能を使用するのに役立ちます。もしこれらを基に自分のアプリや新しいテンプレートを開発した場合、ぜひ私たちと共有してください。

* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/guides/application-publishing/based-on-frontend-templates.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20-on-frontend-templa&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/guides/application-publishing%2Fbased-on-frontend-templates.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[API 基づく開発](/ja-jp/guides/application-publishing/developing-with-apis)[ログとアナウンス](/ja-jp/guides/annotation/logs)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/guides/application-publishing/developing-with-apis

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

アプリ公開

API 基づく開発

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

  * ナレッジベース

  * アプリ公開

    * シングルページWebアプリとして公開

    * [Webサイトへの埋め込み](/ja-jp/guides/application-publishing/embedding-in-websites)
    * [API 基づく開発](/ja-jp/guides/application-publishing/developing-with-apis)
    * [フロントエンドテンプレートに基づいた再開発](/ja-jp/guides/application-publishing/based-on-frontend-templates)
  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




アプリ公開

# API 基づく開発

Copy page

Difyは、「**後端即サービス(Backend as a Service)** 」の理念に基づいて、すべてのアプリケーションにAPIを提供し、AIアプリケーション開発者に多くの利便性をもたらしています。この理念を通じて、開発者は複雑なバックエンドアーキテクチャやデプロイプロセスを気にすることなく、フロントエンドアプリケーションで大型言語モデル（LLM）の強力な能力を直接利用できます。

### 

​

Dify API を使用する利点

  * フロントエンドアプリケーションが直接安全にLLMの能力を呼び出すことができ、バックエンドサービスの開発プロセスを省略
  * 視覚的なインターフェースでアプリケーションを設計し、すべてのクライアントにリアルタイムで反映
  * LLMプロバイダーの基本能力を良好にパッケージ化
  * LLMプロバイダーをいつでも切り替え、LLMのAPIキーを集中管理
  * 視覚的なインターフェースでアプリケーションを運営、例えばログの分析、ラベリング、ユーザーの活性度の観察
  * アプリケーションに対して継続的により多くのツール能力、プラグイン能力、データセットを提供



### 

​

利用方法

アプリケーションを選択し、アプリケーション（Apps）の左側ナビゲーションで **APIアクセス（API Access）** を見つけます。このページでDifyが提供するAPIドキュメントを確認し、APIにアクセスするための認証情報を管理できます。

例えば、あなたがコンサルティング会社の開発部門であれば、会社のプライベートデータベースに基づいてAI能力をエンドユーザーや開発者に提供できますが、開発者はあなたのデータやAIロジック設計を把握することはできません。これにより、サービスは安全かつ持続可能に提供され、商業目的を満たすことができます。

ベストプラクティスとして、APIキーはバックエンドで呼び出されるべきで、フロントエンドコードやリクエストに平文で直接露出しないようにしてください。これにより、アプリケーションの悪用や攻撃を防ぐことができます。

アプリケーションに対して**複数のアクセス認証情報** を作成し、異なるユーザーや開発者に提供することができます。これにより、APIの使用者はアプリケーション開発者が提供するAI能力を使用できますが、その背後のプロンプトエンジニアリング、データセット、ツール能力はパッケージ化されています。

### 

​

テキスト生成型アプリケーション

高品質なテキスト生成に使用できるアプリケーション、例えば記事生成、要約、翻訳などが含まれます。completion-messagesエンドポイントを呼び出し、ユーザー入力を送信して生成されたテキスト結果を取得します。テキスト生成に使用されるモデルパラメータとプロンプトテンプレートは、Difyのプロンプト編成ページで開発者が設定したものに依存します。

**アプリケーション - > APIアクセス**でそのアプリケーションのAPIドキュメントとサンプルリクエストを見つけることができます。

例えば、テキスト補完情報のAPIの呼び出し例：

  * cURL
  * Python


    
    
    curl --location --request POST 'https://api.dify.ai/v1/completion-messages' \
    --header 'Authorization: Bearer ENTER-YOUR-SECRET-KEY' \
    --header 'Content-Type: application/json' \
    --data-raw '{
    "inputs": {},
    "response_mode": "streaming",
    "user": "abc-123"
    }'
    
    
    curl --location --request POST 'https://api.dify.ai/v1/completion-messages' \
    --header 'Authorization: Bearer ENTER-YOUR-SECRET-KEY' \
    --header 'Content-Type: application/json' \
    --data-raw '{
    "inputs": {},
    "response_mode": "streaming",
    "user": "abc-123"
    }'
    
    
    import requests
    import json
    
    url = "https://api.dify.ai/v1/completion-messages"
    
    headers = {
    'Authorization': 'Bearer ENTER-YOUR-SECRET-KEY',
    'Content-Type': 'application/json',
    }
    
    data = {
    "inputs": {"text": 'Hello, how are you?'},
    "response_mode": "streaming",
    "user": "abc-123"
    }
    
    response = requests.post(url, headers=headers, data=json.dumps(data))
    
    print(response.text)

### 

​

会話型アプリケーション

大部分のシーンで使用できる会話型アプリケーションは、一問一答形式でユーザーと継続的に会話します。会話を開始するにはchat-messagesエンドポイントを呼び出し、返されたconversation_idを引き続き提供することで会話を継続することができます。

#### 

​

`conversation_id` に関する重要事項:

  * **`conversation_id` の生成:** 新しい会話を開始するときは、`conversation_id` フィールドを空のままにしておきます。システムは新しい `conversation_id` を生成して返します。この新しい `conversation_id` は、今後のやり取りで使用して会話を続行します。
  * **既存のセッションでの`conversation_id` の処理:** `conversation_id` が生成されると、Dify ボットとの会話の継続性を確保するために、今後の API 呼び出しにこの `conversation_id` を含める必要があります。以前の `conversation_id` が渡されると、新しい `inputs` は無視されます。進行中の会話では `query` のみが処理されます。
  * **動的変数の管理:** セッション中にロジックまたは変数を変更する必要がある場合は、会話変数 (セッション固有の変数) を使用してボットの動作または応答を調整できます。



**アプリケーション - > APIアクセス**でそのアプリケーションのAPIドキュメントとサンプルリクエストを見つけることができます。

以下は`chat-messages`のAPIの呼び出し例：

  * cURL
  * Python


    
    
    curl --location --request POST 'https://api.dify.ai/v1/chat-messages' \
    --header 'Authorization: Bearer ENTER-YOUR-SECRET-KEY' \
    --header 'Content-Type: application/json' \
    --data-raw '{
    "inputs": {},
    "query": "eh",
    "response_mode": "streaming",
    "conversation_id": "1c7e55fb-1ba2-4e10-81b5-30addcea2276",
    "user": "abc-123"
    }'
    
    
    curl --location --request POST 'https://api.dify.ai/v1/chat-messages' \
    --header 'Authorization: Bearer ENTER-YOUR-SECRET-KEY' \
    --header 'Content-Type: application/json' \
    --data-raw '{
    "inputs": {},
    "query": "eh",
    "response_mode": "streaming",
    "conversation_id": "1c7e55fb-1ba2-4e10-81b5-30addcea2276",
    "user": "abc-123"
    }'
    
    
    import requests
    import json
    
    url = 'https://api.dify.ai/v1/chat-messages'
    headers = {
    'Authorization': 'Bearer ENTER-YOUR-SECRET-KEY',
    'Content-Type': 'application/json',
    }
    data = {
    "inputs": {},
    "query": "eh",
    "response_mode": "streaming",
    "conversation_id": "1c7e55fb-1ba2-4e10-81b5-30addcea2276",
    "user": "abc-123"
    }
    
    response = requests.post(url, headers=headers, data=json.dumps(data))
    
    print(response.text())

* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/guides/application-publishing/developing-with-apis.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20oping-with-a&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/guides/application-publishing%2Fdeveloping-with-apis.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[Webサイトへの埋め込み](/ja-jp/guides/application-publishing/embedding-in-websites)[フロントエンドテンプレートに基づいた再開発](/ja-jp/guides/application-publishing/based-on-frontend-templates)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * Dify API を使用する利点
  * 利用方法
  * テキスト生成型アプリケーション
  * 会話型アプリケーション
  * conversation_id に関する重要事項:



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/guides/application-publishing/embedding-in-websites

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

アプリ公開

Webサイトへの埋め込み

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

  * ナレッジベース

  * アプリ公開

    * シングルページWebアプリとして公開

    * [Webサイトへの埋め込み](/ja-jp/guides/application-publishing/embedding-in-websites)
    * [API 基づく開発](/ja-jp/guides/application-publishing/developing-with-apis)
    * [フロントエンドテンプレートに基づいた再開発](/ja-jp/guides/application-publishing/based-on-frontend-templates)
  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




アプリ公開

# Webサイトへの埋め込み

Copy page

Dify Apps は iframe を使用してWebサイトに埋め込むことができます。これにより、Dify App をWebサイト、ブログ、またはその他のウェブページに統合できます。

Dify Chatbot Bubble Button をWebサイトに埋め込む際に、ボタンのスタイル、位置、その他の設定をカスタマイズできます。

## 

​

Dify Chatbot Bubble Button のカスタマイズ

Dify Chatbot Bubble Button は、以下の設定オプションでカスタマイズできます。
    
    
    window.difyChatbotConfig = {
        // 必須：Dify によって自動的に生成されます
        token: 'YOUR_TOKEN',
        // オプション：デフォルトは false です
        isDev: false,
        // オプション：isDev が true の場合、デフォルトは '[https://dev.udify.app](https://dev.udify.app)'、それ以外の場合は '[https://udify.app](https://udify.app)' です
        baseUrl: 'YOUR_BASE_URL',
        // オプション：`id` 以外の有効な HTMLElement 属性（例：`style`、`className` など）を受け入れます
        containerProps: {},
        // オプション：ボタンのドラッグを許可するかどうか、デフォルトは `false` です
        draggable: false,
        // オプション：ボタンのドラッグを許可する軸、デフォルトは 'both'、'x'、'y'、'both' のいずれかを指定できます
        dragAxis: 'both',
        // オプション:dify チャットボットに設定されている入力オブジェクト
        inputs: {
            // key は変数名です
            // 例:
            // name: "NAME"
        }
    };

## 

​

デフォルトのボタンスタイルの上書き

CSS 変数または `containerProps` オプションを使用して、デフォルトのボタンスタイルを上書きできます。CSSの優先度に基づいてこれらの方法を適用し、希望のカスタマイズを実現します。

### 

​

1.CSS 変数の変更

以下の CSS 変数をカスタマイズに使用できます。
    
    
    /* ボタンの下端からの距離、デフォルトは `1rem` */
    --dify-chatbot-bubble-button-bottom
    
    /* ボタンの右端からの距離、デフォルトは `1rem` */
    --dify-chatbot-bubble-button-right
    
    /* ボタンの左端からの距離、デフォルトは `unset` */
    --dify-chatbot-bubble-button-left
    
    /* ボタンの上端からの距離、デフォルトは `unset` */
    --dify-chatbot-bubble-button-top
    
    /* ボタンの背景色、デフォルトは `#155EEF` */
    --dify-chatbot-bubble-button-bg-color
    
    /* ボタンの幅、デフォルトは `50px` */
    --dify-chatbot-bubble-button-width
    
    /* ボタンの高さ、デフォルトは `50px` */
    --dify-chatbot-bubble-button-height
    
    /* ボタンの角丸、デフォルトは `25px` */
    --dify-chatbot-bubble-button-border-radius
    
    /* ボタンのボックスシャドウ、デフォルトは `rgba(0, 0, 0, 0.2) 0px 4px 8px 0px)` */
    --dify-chatbot-bubble-button-box-shadow
    
    /* ボタンホバー時の変形、デフォルトは `scale(1.1)` */
    --dify-chatbot-bubble-button-hover-transform

例えば、ボタンの背景色を #ABCDEF に変更するには、次の CSS を追加します。
    
    
    #dify-chatbot-bubble-button {
        --dify-chatbot-bubble-button-bg-color: #ABCDEF;
    }

### 

​

2.`containerProps` を使用する

`style` 属性を使用してインラインスタイルを設定します。
    
    
    window.difyChatbotConfig = {
        // ... 他の設定
        containerProps: {
            style: {
                backgroundColor: '#ABCDEF',
                width: '60px',
                height: '60px',
                borderRadius: '30px',
            },
            // ちょっとしたスタイル変更の場合、style 属性に文字列を使用することもできます。
            // style: 'background-color: #ABCDEF; width: 60px;',
        },
    };

`className` 属性を使用して CSS クラスを適用します:
    
    
    window.difyChatbotConfig = {
        // ... 他の設定
        containerProps: {
            className: 'dify-chatbot-bubble-button-custom my-custom-class',
        },
    };

### 

​

3\. `inputs` の渡し方

サポートされている入力タイプは4種類あります：

  1. **`text-input`** ：任意の値を受け入れます。入力文字列の長さが許容される最大長を超える場合、切り詰められます。
  2. **`paragraph`** ：`text-input` と同様に、任意の値を受け入れ、文字列が最大長を超える場合には切り詰められます。
  3. **`number`** ：数値または数値の文字列を受け入れます。文字列が提供された場合、`Number` 関数を使用して数値に変換されます。
  4. **`options`** ：事前に設定されたオプションのいずれかと一致する値を受け入れます。



設定例：
    
    
    window.difyChatbotConfig = {
        // 他の設定項目...
        inputs: {
            name: 'apple',
        },
    }

注意: `embed.js` スクリプトを使用してiframeを作成する場合、各入力値はURLに追加される前にGZIPで圧縮され、base64でエンコードされます。

例えば、処理された入力値を含むURLは以下のようになります： `http://localhost/chatbot/{token}?name=H4sIAKUlmWYA%2FwWAIQ0AAACDsl7gLuiv2PQEUNAuqQUAAAA%3D`

* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/guides/application-publishing/embedding-in-websites.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20ding-in-websi&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/guides/application-publishing%2Fembedding-in-websites.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[会話型アプリケーション](/ja-jp/guides/application-publishing/launch-your-webapp-quickly/conversation-application)[API 基づく開発](/ja-jp/guides/application-publishing/developing-with-apis)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * Dify Chatbot Bubble Button のカスタマイズ
  * デフォルトのボタンスタイルの上書き
  * 1.CSS 変数の変更
  * 2.containerProps を使用する
  * 3\. inputs の渡し方



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/guides/application-publishing/launch-your-webapp-quickly/conversation-application

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

シングルページWebアプリとして公開

会話型アプリケーション

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

  * ナレッジベース

  * アプリ公開

    * シングルページWebアプリとして公開

      * [概覧](/ja-jp/guides/application-publishing/launch-your-webapp-quickly/web-app-settings)
      * [テキスト生成型アプリケーション](/ja-jp/guides/application-publishing/launch-your-webapp-quickly/text-generator)
      * [会話型アプリケーション](/ja-jp/guides/application-publishing/launch-your-webapp-quickly/conversation-application)
    * [Webサイトへの埋め込み](/ja-jp/guides/application-publishing/embedding-in-websites)
    * [API 基づく開発](/ja-jp/guides/application-publishing/developing-with-apis)
    * [フロントエンドテンプレートに基づいた再開発](/ja-jp/guides/application-publishing/based-on-frontend-templates)
  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




シングルページWebアプリとして公開

# 会話型アプリケーション

Copy page

会話型アプリケーションは、一問一答の形式でユーザーと継続的に会話を行います。会話型アプリケーションは以下の機能をサポートします（アプリケーションの設定時にこれらの機能が有効になっていることを確認してください）：

  * 会話前に入力する変数。
  * 会話の作成、ピン留め、削除。
  * 会話の冒頭。
  * 次のステップの質問の提案。
  * 音声認識。
  * 引用と帰属。



### 

​

会話前に入力する変数

アプリケーションの設定時に変数入力を求める設定をしている場合、会話を始める前に指示に従って情報を入力する必要があります：

必要な内容を入力し、「会話を開始」ボタンをクリックしてチャットを始めます。AIの回答に移動して、会話の内容をコピーしたり、回答に「いいね」や「悪いね」を付けたりできます。

### 

​

会話の作成、ピン留め、削除

「新しい会話」ボタンをクリックして新しい会話を開始します。会話に移動して、会話を「ピン留め」または「削除」することができます。

### 

​

会話のオープニング

アプリケーションの設定時に「会話のオープニング」機能が有効になっている場合、新しい会話を作成するとAIアプリケーションが自動的に最初の会話を開始します：

### 

​

次のステップの質問の提案

アプリケーションの設定時に「次のステップの質問の提案」機能が有効になっている場合、会話後にシステムが自動的に3つの関連する質問を提案します：

### 

​

音声認識

アプリケーションの設定時に「音声認識」機能が有効になっている場合、Webアプリケーション端の入力欄に音声入力のアイコンが表示され、アイコンをクリックすることで音声入力が文字に変換されます：

_使用するデバイス環境がマイクロフォンの使用を許可していることを確認してください。_

### 

​

引用と帰属

アプリ内でナレッジベースの効果をテストする際、**ワークスペース — 機能の追加 — 引用と帰属** に移動し、引用と帰属機能をオンにすることができます。詳細については[「引用と帰属」](/ja-jp/guides/knowledge-base/retrieval-test-and-citation)を参照してください。

* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/guides/application-publishing/launch-your-webapp-quickly/conversation-application.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20rsation-applicat&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/guides/application-publishing/launch-your-webapp-quickly%2Fconversation-application.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[テキスト生成型アプリケーション](/ja-jp/guides/application-publishing/launch-your-webapp-quickly/text-generator)[Webサイトへの埋め込み](/ja-jp/guides/application-publishing/embedding-in-websites)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * 会話前に入力する変数
  * 会話の作成、ピン留め、削除
  * 会話のオープニング
  * 次のステップの質問の提案
  * 音声認識
  * 引用と帰属



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/guides/application-publishing/launch-your-webapp-quickly/text-generator

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

シングルページWebアプリとして公開

テキスト生成型アプリケーション

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

  * ナレッジベース

  * アプリ公開

    * シングルページWebアプリとして公開

      * [概覧](/ja-jp/guides/application-publishing/launch-your-webapp-quickly/web-app-settings)
      * [テキスト生成型アプリケーション](/ja-jp/guides/application-publishing/launch-your-webapp-quickly/text-generator)
      * [会話型アプリケーション](/ja-jp/guides/application-publishing/launch-your-webapp-quickly/conversation-application)
    * [Webサイトへの埋め込み](/ja-jp/guides/application-publishing/embedding-in-websites)
    * [API 基づく開発](/ja-jp/guides/application-publishing/developing-with-apis)
    * [フロントエンドテンプレートに基づいた再開発](/ja-jp/guides/application-publishing/based-on-frontend-templates)
  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




シングルページWebアプリとして公開

# テキスト生成型アプリケーション

Copy page

テキスト生成型アプリケーションは、ユーザーが提供するプロンプトに基づいて高品質のテキストを自動生成するアプリケーションです。記事の要約や翻訳など、さまざまなタイプのテキストを生成することができます。

テキスト生成型アプリケーションは以下の機能をサポートしています：

  1. 一回実行。
  2. バッチ実行。
  3. 実行結果の保存。
  4. より類似した結果の生成。



以下にそれぞれの機能を紹介します。

### 

​

一度実行

クエリ内容を入力し、実行ボタンをクリックすると、右側に結果が生成されます。以下の図のように：

生成された結果部分では、「コピー」ボタンをクリックすると内容をクリップボードにコピーできます。「保存」ボタンをクリックすると内容を保存できます。「保存済み」タブで保存した内容を見ることができます。また、生成された内容には「いいね」や「バッド」をつけることもできます。

### 

​

バッチ実行

時には、アプリケーションを何度も実行する必要があります。例えば、テーマに基づいて記事を生成するWebアプリケーションがあるとします。今、100種類のテーマに基づいて記事を生成する必要があるとします。この場合、このタスクを100回も行うのは非常に面倒です。また、1つのタスクが完了するのを待たなければ次のタスクを開始できません。

上記のシナリオでは、バッチ実行機能を使うと操作が便利になり（テーマを `csv` ファイルに入力し、一度だけ実行する）、生成時間も節約できます（複数のタスクが同時に実行される）。使用方法は以下の通りです：

#### 

​

第1歩 バッチ実行ページに入る

「バッチ実行」タブをクリックすると、バッチ実行ページに入ります。

#### 

​

第2歩 テンプレートをダウンロードして内容を入力する

「テンプレートダウンロード」ボタンをクリックし、テンプレートをダウンロードします。テンプレートを編集し、内容を入力して `.csv` 形式のファイルとして保存します。

#### 

​

第3歩 ファイルをアップロードして実行

生成された内容をエクスポートする必要がある場合は、右上の「ダウンロードボタン」をクリックして `csv` ファイルとしてエクスポートできます。

**注意:** アップロードする `csv` ファイルのエンコードは `ユニコード` でなければなりません。そうでないと、実行結果が失敗する可能性があります。解決策：ExcelやWPSなどで `csv` ファイルをエクスポートする際に、エンコードを `ユニコード` に選択します。

### 

​

保存結果

生成結果の下にある「保存」ボタンをクリックすると、実行結果を保存できます。「保存済み」タブで、すべての保存された内容を見ることができます。

### 

​

より多くの類似結果の生成

アプリケーションのオーケストレーションで「より類似した」機能を有効にしている場合、Webアプリケーションで「より類似した」ボタンをクリックすると、現在の結果と似た内容を生成できます。以下の図の通りです：

* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/guides/application-publishing/launch-your-webapp-quickly/text-generator.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20genera&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/guides/application-publishing/launch-your-webapp-quickly%2Ftext-generator.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[概覧](/ja-jp/guides/application-publishing/launch-your-webapp-quickly/web-app-settings)[会話型アプリケーション](/ja-jp/guides/application-publishing/launch-your-webapp-quickly/conversation-application)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * 一度実行
  * バッチ実行
  * 第1歩 バッチ実行ページに入る
  * 第2歩 テンプレートをダウンロードして内容を入力する
  * 第3歩 ファイルをアップロードして実行
  * 保存結果
  * より多くの類似結果の生成



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/guides/application-publishing/launch-your-webapp-quickly/web-app-settings

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

シングルページWebアプリとして公開

概覧

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

  * ナレッジベース

  * アプリ公開

    * シングルページWebアプリとして公開

      * [概覧](/ja-jp/guides/application-publishing/launch-your-webapp-quickly/web-app-settings)
      * [テキスト生成型アプリケーション](/ja-jp/guides/application-publishing/launch-your-webapp-quickly/text-generator)
      * [会話型アプリケーション](/ja-jp/guides/application-publishing/launch-your-webapp-quickly/conversation-application)
    * [Webサイトへの埋め込み](/ja-jp/guides/application-publishing/embedding-in-websites)
    * [API 基づく開発](/ja-jp/guides/application-publishing/developing-with-apis)
    * [フロントエンドテンプレートに基づいた再開発](/ja-jp/guides/application-publishing/based-on-frontend-templates)
  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




シングルページWebアプリとして公開

# 概覧

Copy page

Web アプリはアプリのユーザーが使用するものです。アプリ開発者が Dify でアプリを作成すると、対応する Web アプリが取得されます。Web アプリのユーザーはログインせずに使用できます。Web アプリは異なるサイズのデバイスに対応しています：PC、タブレット、スマートフォン。

Web アプリの内容とアプリの公開設定は一致しています。アプリの設定を変更し、アプリのプロンプト編成ページで「公開」ボタンをクリックして公開すると、Web アプリの内容も現在のアプリの設定に基づいて更新されます。

アプリの概要ページで Web アプリへのアクセスを有効または無効にし、Web アプリのサイト情報を変更できます：

  * アイコン
  * 名前
  * アプリの説明
  * インターフェース言語
  * 著作権情報
  * プライバシーポリシーリンク



Web アプリの機能は、開発者がアプリを編成する際にその機能を有効にするかどうかによって異なります。例えば：

  * 会話のオープニング
  * 会話前に入力する変数
  * 次の質問の提案
  * 音声からテキストへの変換
  * 引用と帰属
  * より類似した回答（テキスト型アプリ）
  * …



以下のセクションでは、Web アプリの2種類のタイプについて説明します：

  * テキスト生成型
  * 会話型



* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/guides/application-publishing/launch-your-webapp-quickly/web-app-settings.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20pp-setti&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/guides/application-publishing/launch-your-webapp-quickly%2Fweb-app-settings.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[外部知識API](/ja-jp/guides/knowledge-base/api-documentation/external-knowledge-api-documentation)[テキスト生成型アプリケーション](/ja-jp/guides/application-publishing/launch-your-webapp-quickly/text-generator)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/guides/extension/api-based-extension/README

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

API 拡張

API 拡張

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

    * API 拡張

      * [API 拡張](/ja-jp/guides/extension/api-based-extension/README)
      * [Cloudflare ワーカーを使用して API ツールをデプロイ](/ja-jp/guides/extension/api-based-extension/cloudflare-workers)
      * [敏感内容審査](/ja-jp/guides/extension/api-based-extension/moderation)
    * コード拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




API 拡張

# API 拡張

Copy page

開発者はAPIエクステンションを通じてモジュールの機能を拡張できます。現在、以下のモジュールがサポートされています：

  * `モデレーション` 敏感内容の監査
  * `外部データツール` 外部データツール



モジュールの機能を拡張する前に、APIと認証用のAPIキー（Difyが自動生成することも可能）を準備する必要があります。

対応するモジュール機能を開発するだけでなく、DifyがAPIを正しく呼び出せるよう、以下の仕様にも従う必要があります。

### 

​

API仕様 

Difyは以下の仕様に従ってインターフェースを呼び出します：
    
    
    POST {Your-API-Endpoint}

#### 

​

ヘッダー 

Header| Value| Desc  
---|---|---  
`Content-Type`| application/json| リクエスト内容はJSON形式です。  
`Authorization`| `Bearer {api_key}` | APIキーはトークン形式で送信されます。`api_key`を解析し、提供されたAPIキーと一致するか確認してください。  
  
#### 

​

リクエストボディ 
    
    
    {
        "point":  string, //  エクステンションポイント、異なるモジュールは複数のエクステンションポイントを含む可能性があります
        "params": {
            ...  // 各モジュールのエクステンションポイントに渡すパラメータ
        }
    }

#### 

​

APIレスポンス 
    
    
    {
        ...  // APIレスポンスの内容、異なるエクステンションポイントのレスポンスは各モジュールの仕様に従います
    }

### 

​

検証 

DifyがAPIベースのエクステンションを設定する際、DifyはAPIエンドポイントにリクエストを送り、APIの有効性を確認します。

APIエンドポイントが`point=ping`を受信した場合、インターフェースは`result=pong`を返す必要があります。具体的には次の通りです：

#### 

​

ヘッダー 
    
    
    Content-Type: application/json
    Authorization: Bearer {api_key}

#### 

​

リクエストボディ 
    
    
    {
        "point": "ping"
    }

#### 

​

API期待レスポンス 
    
    
    {
        "result": "pong"
    }

### 

​

例 

ここでは外部データツールを例にとり、地域に基づいて外部の天気情報を取得するシナリオを示します。

#### 

​

API例 
    
    
    POST https://fake-domain.com/api/dify/receive

**ヘッダー**
    
    
    Content-Type: application/json
    Authorization: Bearer 123456

**リクエストボディ**
    
    
    {
        "point": "app.external_data_tool.query",
        "params": {
            "app_id": "61248ab4-1125-45be-ae32-0ce91334d021",
            "tool_variable": "weather_retrieve",
            "inputs": {
                "location": "London"
            },
            "query": "How's the weather today?"
        }
    }

**APIレスポンス**
    
    
    {
        "result": "City: London\nTemperature: 10°C\nRealFeel®: 8°C\nAir Quality: Poor\nWind Direction: ENE\nWind Speed: 8 km/h\nWind Gusts: 14 km/h\nPrecipitation: Light rain"
    }

#### 

​

コード例 

コードはPython FastAPIフレームワークに基づいています。

  1. 依存関係をインストールする
         
         pip install fastapi[all] uvicorn

  2. インターフェース仕様に従ってコードを書く
         
         from fastapi import FastAPI, Body, HTTPException, Header
         from pydantic import BaseModel
         
         app = FastAPI()
         
         
         class InputData(BaseModel):
             point: str
             params: dict = {}
         
         
         @app.post("/api/dify/receive")
         async def dify_receive(data: InputData = Body(...), authorization: str = Header(None)):
             """
             DifyからのAPIクエリデータを受信します。
             """
             expected_api_key = "123456"  # TODO このAPIのAPIキー
             auth_scheme, _, api_key = authorization.partition(' ')
         
             if auth_scheme.lower() != "bearer" or api_key != expected_api_key:
                 raise HTTPException(status_code=401, detail="Unauthorized")
         
             point = data.point
         
             # デバッグ用
             print(f"point: {point}")
         
             if point == "ping":
                 return {
                     "result": "pong"
                 }
             if point == "app.external_data_tool.query":
                 return handle_app_external_data_tool_query(params=data.params)
             # elif point == "{point name}":
                 # TODO その他のポイントの実装
         
             raise HTTPException(status_code=400, detail="Not implemented")
         
         
         def handle_app_external_data_tool_query(params: dict):
             app_id = params.get("app_id")
             tool_variable = params.get("tool_variable")
             inputs = params.get("inputs")
             query = params.get("query")
         
             # デバッグ用
             print(f"app_id: {app_id}")
             print(f"tool_variable: {tool_variable}")
             print(f"inputs: {inputs}")
             print(f"query: {query}")
         
             # TODO 外部データツールクエリの実装
             # 返り値は"result"キーを持つ辞書でなければならず、その値はクエリの結果でなければならない
             if inputs.get("location") == "London":
                 return {
                     "result": "City: London\nTemperature: 10°C\nRealFeel®: 8°C\nAir Quality: Poor\nWind Direction: ENE\nWind "
                               "Speed: 8 km/h\nWind Gusts: 14 km/h\nPrecipitation: Light rain"
                 }
             else:
                 return {"result": "Unknown city"}

  3. APIサービスを起動する。デフォルトポートは8000で、APIの完全なアドレスは：`http://127.0.0.1:8000/api/dify/receive`、設定されたAPIキーは`123456`です。

`uvicorn main:app --reload --host 0.0.0.0`

  4. DifyにこのAPIを設定します。




  5. アプリでこのAPIエクステンションを選択します。



アプリのデバッグ時、Difyは設定されたAPIにリクエストを送り、以下の内容（例）を送信します：
    
    
    {
        "point": "app.external_data_tool.query",
        "params": {
            "app_id": "61248ab4-1125-45be-ae32-0ce91334d021",
            "tool_variable": "weather_retrieve",
            "inputs": {
                "location": "London"
            },
            "query": "How's the weather today?"
        }
    }

APIレスポンスは以下の通りです：
    
    
    {
        "result": "City: London\nTemperature: 10°C\nRealFeel®: 8°C\nAir Quality: Poor\nWind Direction: ENE\nWind Speed: 8 km/h\nWind Gusts: 14 km/h\nPrecipitation: Light rain"
    }

### 

​

ローカルデバッグ

Difyクラウド版は内網APIサービスにアクセスできないため、ローカルでAPIサービスをデバッグするために、[Ngrok](https://ngrok.com)を使用してAPIサービスのエンドポイントをパブリックに公開し、クラウドでローカルコードをデバッグすることができます。操作手順は次の通りです：

  1. <https://ngrok.com>の公式サイトにアクセスし、登録してNgrokファイルをダウンロードします。

  2. ダウンロードが完了したら、ダウンロードディレクトリに移動し、以下の説明に従って圧縮ファイルを解凍し、初期化スクリプトを実行します。

     * $ unzip /path/to/ngrok.zip
           $ ./ngrok config add-authtoken あなたのトークン

  3. ローカルAPIサービスのポートを確認します：




次に以下のコマンドを実行して開始します：

  * $ ./ngrok http ポート番号

成功例は以下の通りです：




  4. Forwardingで示されるように、上の図では`https://177e-159-223-41-52.ngrok-free.app`（これは例のドメインです。自分のドメインに置き換えてください）がパブリックドメインとなります。


  * 上記の例に従って、ローカルで既に起動しているサービスエンドポイントを公開し、コード例のインターフェース：`http://127.0.0.1:8000/api/dify/receive`を`https://177e-159-223-41-52.ngrok-free.app/api/dify/receive`に置き換えます。



これで、このAPIエンドポイントはパブリックアクセス可能となります。これで、DifyでこのAPIエンドポイントを設定してローカルデバッグコードを実行できます。設定手順については、[external-data-tool.md](/ja-jp/guides/knowledge-base/metadata)を参照してください。

### 

​

Cloudflare Workersを使用したAPIエクステンションのデプロイ

Cloudflare Workersを使用してAPIエクステンションをデプロイすることをお勧めします。Cloudflare Workersは簡単にパブリックアドレスを提供でき、無料で使用できます。

[cloudflare-workers.md](/ja-jp/guides/extension/api-based-extension/cloudflare-workers)。

* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/guides/extension/api-based-extension/README.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/guides/extension/api-based-extension%2FREADME.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[W&B Weaveの統合](/ja-jp/guides/monitoring/integrate-external-ops-tools/integrate-weave)[Cloudflare ワーカーを使用して API ツールをデプロイ](/ja-jp/guides/extension/api-based-extension/cloudflare-workers)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * API仕様 
  * ヘッダー 
  * リクエストボディ 
  * APIレスポンス 
  * 検証 
  * ヘッダー 
  * リクエストボディ 
  * API期待レスポンス 
  * 例 
  * API例 
  * コード例 
  * ローカルデバッグ
  * Cloudflare Workersを使用したAPIエクステンションのデプロイ



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/guides/extension/api-based-extension/cloudflare-workers

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

API 拡張

Cloudflare ワーカーを使用して API ツールをデプロイ

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

    * API 拡張

      * [API 拡張](/ja-jp/guides/extension/api-based-extension/README)
      * [Cloudflare ワーカーを使用して API ツールをデプロイ](/ja-jp/guides/extension/api-based-extension/cloudflare-workers)
      * [敏感内容審査](/ja-jp/guides/extension/api-based-extension/moderation)
    * コード拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




API 拡張

# Cloudflare ワーカーを使用して API ツールをデプロイ

Copy page

## 

​

入門

Dify API Extension は、アクセス可能な公開アドレスを API エンドポイントとして使用する必要があるため、API 拡張を公開アドレスにデプロイする必要があります。ここでは、Cloudflare ワーカーを使用して API 拡張をデプロイします。

まず、[Example GitHub レポジトリ](https://github.com/crazywoola/dify-extension-workers) をクローンします。このレポジトリには、簡単な API 拡張が含まれており、これを基にして修正を行うことができます。
    
    
    git clone https://github.com/crazywoola/dify-extension-workers.git
    cp wrangler.toml.example wrangler.toml

次に、`wrangler.toml` ファイルを開き、`名前` と `互換性の日付` をあなたのアプリ名と互換日付に変更します。

ここで注意が必要な設定は、`vars` 内の `トークン` です。Dify に API 拡張を追加する際に、このトークンを入力する必要があります。セキュリティ上の観点から、ランダムな文字列をトークンとして使用することをお勧めします。トークンをソースコードに直接書き込むのではなく、環境変数を使用してトークンを渡す方法を取るべきです。したがって、wrangler.toml をコードレポジトリにコミットしないでください。
    
    
    name = "dify-extension-example"
    compatibility_date = "2023-01-01"
    
    [vars]
    TOKEN = "bananaiscool"

この API 拡張は、ランダムなブレイキング・バッドの名言を返します。`src/index.ts` 内でこの API 拡張のロジックを変更することができます。この例は、サードパーティの API とやり取りする方法を示しています。
    
    
    // ⬇️ Implement your logic here ⬇️
    // point === "app.external_data_tool.query"
    // https://api.breakingbadquotes.xyz/v1/quotes
    const count = params?.inputs?.count ?? 1;
    const url = `https://api.breakingbadquotes.xyz/v1/quotes/${count}`;
    const result = await fetch(url).then(res => res.text())
    // ⬆️ implement your logic here ⬆️

このレポジトリは、ビジネスロジック以外のすべての設定を簡素化しています。`npm` コマンドを使用して API 拡張をデプロイすることができます。
    
    
    npm run deploy

デプロイが成功すると、公開アドレスが得られます。このアドレスを Dify に API エンドポイントとして追加できます。`endpoint` パスを忘れないようにしてください。

## 

​

その他のロジック TL;DR

### 

​

ベアラー認証について
    
    
    import { bearerAuth } from "hono/bearer-auth";
    
    (c, next) => {
        const auth = bearerAuth({ token: c.env.TOKEN });
        return auth(c, next);
    },

上記のコードでは、ベアラー認証ロジックを示しています。`hono/bearer-auth` パッケージを使用してベアラー認証を実装しています。`src/index.ts` で `c.env.TOKEN` を使用してトークンを取得できます。

### 

​

パラメータの検証について
    
    
    import { z } from "zod";
    import { zValidator } from "@hono/zod-validator";
    
    const schema = z.object({
      point: z.union([
        z.literal("ping"),
        z.literal("app.external_data_tool.query"),
      ]), // 'point' を2つの特定の値に制限
      params: z
        .object({
          app_id: z.string().optional(),
          tool_variable: z.string().optional(),
          inputs: z.record(z.any()).optional(),
          query: z.any().optional(),  // 文字列または null
        })
        .optional(),
    });

ここでは、`zod` を使用してパラメータのタイプを定義しています。`src/index.ts` で `zValidator` を使用してパラメータを検証できます。`const { point, params } = c.req.valid("json");` を使用して検証後のパラメータを取得します。`point` は2つの値しか持たないため、`z.union` を使用して定義しています。`params` はオプションのため、`z.optional` を使用して定義しています。この中には `inputs` パラメータがあり、これは `Record<string, any>` 型です。この型はキーが文字列で値が任意のオブジェクトを示します。`src/index.ts` で `params?.inputs?.count` を使用して `count` パラメータを取得できます。

### 

​

Cloudflare ワーカーのログを取得する
    
    
    wrangler tail

## 

​

参考内容

  * [Cloudflare Workers](https://workers.cloudflare.com/)
  * [Cloudflare Workers CLI](https://developers.cloudflare.com/workers/cli-wrangler/install-update)
  * [Example GitHub Repository](https://github.com/crazywoola/dify-extension-workers)



* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/guides/extension/api-based-extension/cloudflare-workers.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20flare-work&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/guides/extension/api-based-extension%2Fcloudflare-workers.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[API 拡張](/ja-jp/guides/extension/api-based-extension/README)[敏感内容審査](/ja-jp/guides/extension/api-based-extension/moderation)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * 入門
  * その他のロジック TL;DR
  * ベアラー認証について
  * パラメータの検証について
  * Cloudflare ワーカーのログを取得する
  * 参考内容



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/guides/extension/api-based-extension/moderation

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

API 拡張

敏感内容審査

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

    * API 拡張

      * [API 拡張](/ja-jp/guides/extension/api-based-extension/README)
      * [Cloudflare ワーカーを使用して API ツールをデプロイ](/ja-jp/guides/extension/api-based-extension/cloudflare-workers)
      * [敏感内容審査](/ja-jp/guides/extension/api-based-extension/moderation)
    * コード拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




API 拡張

# 敏感内容審査

Copy page

このモジュールは、アプリケーションにおける端末ユーザーの入力内容とLLM（大規模言語モデル）の出力内容を審査するために使用され、2つの拡張点タイプに分かれています。

### 

​

拡張点 

  * `app.moderation.input` 端末ユーザー入力内容の審査拡張点
    * 端末ユーザーが送信した変数の内容や対話型アプリケーションにおける対話の入力内容を審査するために使用されます。
  * `app.moderation.output` LLM出力内容の審査拡張点
    * LLMの出力内容を審査するために使用されます。
    * LLMの出力がストリーミング形式の場合、出力内容は100文字ごとに分割され、APIにリクエストされます。これにより、出力内容が長い場合でも審査が遅れないようにします。



### 

​

app.moderation.input 拡張点 

#### 

​

リクエストボディ 
    
    
    {
        "point": "app.moderation.input", // 拡張点タイプ。ここでは固定で app.moderation.input
        "params": {
            "app_id": string,  // アプリケーションID
            "inputs": {  // 端末ユーザーが送信した変数の値。key は変数名、value は変数の値
                "var_1": "value_1",
                "var_2": "value_2",
                ...
            },
            "query": string | null  // 端末ユーザーの現在の対話入力内容。対話型アプリケーションの固定パラメータ。
        }
    }

  * 例
    * {
              "point": "app.moderation.input",
              "params": {
                  "app_id": "61248ab4-1125-45be-ae32-0ce91334d021",
                  "inputs": {
                      "var_1": "I will kill you.",
                      "var_2": "I will fuck you."
                  },
                  "query": "Happy everydays."
              }
          }




#### 

​

APIレスポンス 
    
    
    {
        "flagged": bool,  // 検証ルールに違反しているかどうか
        "action": string, // アクション。direct_output 予設回答の直接出力; overridden 送信された変数値の上書き
        "preset_response": string,  // 予設回答（actionがdirect_outputの場合のみ返される）
        "inputs": {  // 端末ユーザーが送信した変数の値。key は変数名、value は変数の値（actionがoverriddenの場合のみ返される）
            "var_1": "value_1",
            "var_2": "value_2",
            ...
        },
        "query": string | null  // 上書きされた端末ユーザーの現在の対話入力内容。対話型アプリケーションの固定パラメータ。（actionがoverriddenの場合のみ返される）
    }

  * 例
    * `action=direct_output`
      * {
                "flagged": true,
                "action": "direct_output",
                "preset_response": "Your content violates our usage policy."
            }

    * `action=overridden`
      * {
                "flagged": true,
                "action": "overridden",
                "inputs": {
                    "var_1": "I will *** you.",
                    "var_2": "I will *** you."
                },
                "query": "Happy everydays."
            }




### 

​

app.moderation.output 拡張点 

#### 

​

リクエストボディ 
    
    
    {
        "point": "app.moderation.output", // 拡張点タイプ。ここでは固定で app.moderation.output
        "params": {
            "app_id": string,  // アプリケーションID
            "text": string  // LLMの回答内容。LLMの出力がストリーミング形式の場合、ここには100文字ごとの分割された内容が入ります。
        }
    }

  * 例
    * {
              "point": "app.moderation.output",
              "params": {
                  "app_id": "61248ab4-1125-45be-ae32-0ce91334d021",
                  "text": "I will kill you."
              }
          }




#### 

​

APIレスポンス 
    
    
    {
        "flagged": bool,  // 検証ルールに違反しているかどうか
        "action": string, // アクション。direct_output 予設回答の直接出力; overridden 送信された変数値の上書き
        "preset_response": string,  // 予設回答（actionがdirect_outputの場合のみ返される）
        "text": string  // 上書きされたLLMの回答内容。（actionがoverriddenの場合のみ返される）
    }

  * 例
    * `action=direct_output`
      * {
                "flagged": true,
                "action": "direct_output",
                "preset_response": "Your content violates our usage policy."
            }

    * `action=overridden`
      * {
                "flagged": true,
                "action": "overridden",
                "text": "I will *** you."
            }




* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/guides/extension/api-based-extension/moderation.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20at&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/guides/extension/api-based-extension%2Fmoderation.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[Cloudflare ワーカーを使用して API ツールをデプロイ](/ja-jp/guides/extension/api-based-extension/cloudflare-workers)[コード拡張](/ja-jp/guides/extension/code-based-extension/README)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * 拡張点 
  * app.moderation.input 拡張点 
  * リクエストボディ 
  * APIレスポンス 
  * app.moderation.output 拡張点 
  * リクエストボディ 
  * APIレスポンス 



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/guides/extension/code-based-extension/README

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

コード拡張

コード拡張

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

    * API 拡張

    * コード拡張

      * [コード拡張](/ja-jp/guides/extension/code-based-extension/README)
      * [外部データツール](/ja-jp/guides/extension/code-based-extension/external-data-tool)
      * [敏感内容審査](/ja-jp/guides/extension/code-based-extension/moderation)
  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




コード拡張

# コード拡張

Copy page

開発者がDifyをローカルでデプロイする際、APIサービスを再構築せずに拡張機能を実装したい場合は、コード拡張を使用できます。これにより、元のDifyのコードロジックを乱すことなく、コード形式（つまり、プラグイン機能）で機能を拡張または強化することが可能です。特定のインターフェースや仕様に従うことで、メインプログラムとの互換性とプラグアンドプレイ機能を実現できます。現在、Difyは2種類のコード拡張を提供しています：

  * 新しいタイプの外部データツールの追加 [external-data-tool.md](/ja-jp/guides/extension/code-based-extension/external-data-tool)
  * センシティブコンテンツモデレーション戦略の拡張 [moderation.md](/ja-jp/guides/extension/code-based-extension/moderation)



上記の機能に基づき、コードレベルのインターフェース仕様に従うことで水平拡張を実現できます。もしあなたが自分の拡張機能を私たちに提供したい場合、Difyにプルリクエストを提出することを心より歓迎します。

## 

​

フロントエンドコンポーネント仕様定義

コード拡張のフロントエンドスタイルは `schema.json` を通じて定義されます：

  * label: カスタムタイプ名、システム言語切り替えに対応
  * form_schema: フォーム内容のリスト
    * type: コンポーネントタイプ
      * select: ドロップダウンオプション
      * text-input: テキスト入力
      * paragraph: 段落
    * label: コンポーネント名、システム言語切り替えに対応
    * variable: 変数名
    * required: 必須かどうか
    * default: デフォルト値
    * placeholder: コンポーネントのヒント内容
    * options: “select” コンポーネント専用プロパティ、ドロップダウン内容を定義
      * label: ドロップダウン名、システム言語切り替えに対応
      * value: ドロップダウンオプション値
    * max_length: “text-input” コンポーネント専用プロパティ、最大長



### 

​

テンプレート例
    
    
    {
        "label": {
            "en-US": "Cloud Service",
            "zh-Hans": "云服务"
        },
        "form_schema": [
            {
                "type": "select",
                "label": {
                    "en-US": "Cloud Provider",
                    "zh-Hans": "云厂商"
                },
                "variable": "cloud_provider",
                "required": true,
                "options": [
                    {
                        "label": {
                            "en-US": "AWS",
                            "zh-Hans": "亚马逊"
                        },
                        "value": "AWS"
                    },
                    {
                        "label": {
                            "en-US": "Google Cloud",
                            "zh-Hans": "谷歌云"
                        },
                        "value": "GoogleCloud"
                    },
                    {
                        "label": {
                            "en-US": "Azure Cloud",
                            "zh-Hans": "微软云"
                        },
                        "value": "Azure"
                    }
                ],
                "default": "GoogleCloud",
                "placeholder": ""
            },
            {
                "type": "text-input",
                "label": {
                    "en-US": "API Endpoint",
                    "zh-Hans": "API Endpoint"
                },
                "variable": "api_endpoint",
                "required": true,
                "max_length": 100,
                "default": "",
                "placeholder": "https://api.example.com"
            },
            {
                "type": "paragraph",
                "label": {
                    "en-US": "API Key",
                    "zh-Hans": "API Key"
                },
                "variable": "api_keys",
                "required": true,
                "default": "",
                "placeholder": "Paste your API key here"
            }
        ]
    }

* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/guides/extension/code-based-extension/README.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/guides/extension/code-based-extension%2FREADME.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[敏感内容審査](/ja-jp/guides/extension/api-based-extension/moderation)[外部データツール](/ja-jp/guides/extension/code-based-extension/external-data-tool)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * フロントエンドコンポーネント仕様定義
  * テンプレート例



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/guides/extension/code-based-extension/external-data-tool

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

コード拡張

外部データツール

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

    * API 拡張

    * コード拡張

      * [コード拡張](/ja-jp/guides/extension/code-based-extension/README)
      * [外部データツール](/ja-jp/guides/extension/code-based-extension/external-data-tool)
      * [敏感内容審査](/ja-jp/guides/extension/code-based-extension/moderation)
  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




コード拡張

# 外部データツール

Copy page

外部データツールは、エンドユーザーがデータを送信した後、外部ツールを使用して追加のデータを取得し、それをプロンプトに組み込むことで、LLMの追加のコンテキスト情報として利用します。Difyはデフォルトで外部API呼び出しツールを提供しており、詳細は[api-based-extension](/zh-hans/guides/tools/extensions/api-based/api-based-extension)を参照してください。

ローカルにDifyをデプロイする開発者向けには、よりカスタマイズされたニーズに対応するため、または追加のAPIサーバーを開発したくない場合、Difyサービスの基盤にカスタムの外部データツールをプラグインとして直接挿入することができます。カスタムツールを拡張した後、ツールタイプのドロップダウンリストにカスタムツールオプションが追加され、チームメンバーはカスタムツールを使用して外部データを取得できるようになります。

## 

​

クイックスタート

ここでは、`天気検索`外部データツール拡張を例として、以下の手順を説明します：

  1. ディレクトリの初期化
  2. フロントエンドフォーム規格の追加
  3. 実装クラスの追加
  4. 拡張のデバッグ



### 

​

1\. **ディレクトリの初期化**

新しいカスタムタイプ`Weather Search`を追加するには、`api/core/external_data_tool`ディレクトリに関連するディレクトリとファイルを新規作成します。
    
    
    .
    └── api
        └── core
            └── external_data_tool
                └── weather_search
                    ├── __init__.py
                    ├── weather_search.py
                    └── schema.json

### 

​

2\. **フロントエンドコンポーネント規格の追加**

  * `schema.json`、ここではフロントエンドコンポーネントの規格を定義します。


    
    
    {
        "label": {
            "en-US": "Weather Search",
            "zh-Hans": "天気検索"
        },
        "form_schema": [
            {
                "type": "select",
                "label": {
                    "en-US": "Temperature Unit",
                    "zh-Hans": "温度単位"
                },
                "variable": "temperature_unit",
                "required": true,
                "options": [
                    {
                        "label": {
                            "en-US": "Fahrenheit",
                            "zh-Hans": "華氏度"
                        },
                        "value": "fahrenheit"
                    },
                    {
                        "label": {
                            "en-US": "Centigrade",
                            "zh-Hans": "摂氏度"
                        },
                        "value": "centigrade"
                    }
                ],
                "default": "centigrade",
                "placeholder": "Please select temperature unit"
            }
        ]
    }

### 

​

3\. 実装クラスの追加

`weather_search.py`のコードテンプレートです。ここに具体的な業務ロジックを実装します。

注意点：クラス変数nameはカスタムタイプ名称であり、ディレクトリとファイル名と一致し、かつ唯一である必要があります。
    
    
    from typing import Optional
    
    from core.external_data_tool.base import ExternalDataTool
    
    
    class WeatherSearch(ExternalDataTool):
        """
        The name of custom type must be unique, keep the same with directory and file name.
        """
        name: str = "weather_search"
    
        @classmethod
        def validate_config(cls, tenant_id: str, config: dict) -> None:
            """
            schema.json validation. It will be called when user save the config.
    
            Example:
                .. code-block:: python
                    config = {
                        "temperature_unit": "centigrade"
                    }
    
            :param tenant_id: the id of workspace
            :param config: the variables of form config
            :return:
            """
    
            if not config.get('temperature_unit'):
                raise ValueError('temperature unit is required')
    
        def query(self, inputs: dict, query: Optional[str] = None) -> str:
            """
            Query the external data tool.
    
            :param inputs: user inputs
            :param query: the query of chat app
            :return: the tool query result
            """
            city = inputs.get('city')
            temperature_unit = self.config.get('temperature_unit')
    
            if temperature_unit == 'fahrenheit':
                return f'Weather in {city} is 32°F'
            else:
                return f'Weather in {city} is 0°C'

### 

​

4\. **拡張のデバッグ**

これで、Difyアプリケーションオーケストレーションインターフェースでカスタム`Weather Search`外部データツール拡張タイプを選択してデバッグできます。

## 

​

実装クラステンプレート
    
    
    from typing import Optional
    
    from core.external_data_tool.base import ExternalDataTool
    
    
    class WeatherSearch(ExternalDataTool):
        """
        The name of custom type must be unique, keep the same with directory and file name.
        """
        name: str = "weather_search"
    
        @classmethod
        def validate_config(cls, tenant_id: str, config: dict) -> None:
            """
            schema.json validation. It will be called when user save the config.
    
            :param tenant_id: the id of workspace
            :param config: the variables of form config
            :return:
            """
    
            # implement your own logic here
    
        def query(self, inputs: dict, query: Optional[str] = None) -> str:
            """
            Query the external data tool.
    
            :param inputs: user inputs
            :param query: the query of chat app
            :return: the tool query result
            """
           
            # implement your own logic here
            return "your own data."

### 

​

実装クラスの詳細な説明

### 

​

def validate_config

`schema.json`フォーム検証メソッド、ユーザーが「公開」をクリックして設定を保存するときに呼び出されます。

  * `config` フォームパラメータ
    * `{variable}` フォームカスタム変数



### 

​

def query

ユーザーがカスタムデータクエリを実装し、返される結果は指定された変数に置き換えられます。

  * `inputs` ：エンドユーザーが入力した変数値
  * `query` ：エンドユーザーが現在の会話で入力した内容、対話型アプリケーションの固定パラメータ。



* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/guides/extension/code-based-extension/external-data-tool.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20nal-data-t&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/guides/extension/code-based-extension%2Fexternal-data-tool.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[コード拡張](/ja-jp/guides/extension/code-based-extension/README)[敏感内容審査](/ja-jp/guides/extension/code-based-extension/moderation)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * クイックスタート
  * 1\. ディレクトリの初期化
  * 2\. フロントエンドコンポーネント規格の追加
  * 3\. 実装クラスの追加
  * 4\. 拡張のデバッグ
  * 実装クラステンプレート
  * 実装クラスの詳細な説明
  * def validate_config
  * def query



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/guides/extension/code-based-extension/moderation

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

コード拡張

敏感内容審査

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

    * API 拡張

    * コード拡張

      * [コード拡張](/ja-jp/guides/extension/code-based-extension/README)
      * [外部データツール](/ja-jp/guides/extension/code-based-extension/external-data-tool)
      * [敏感内容審査](/ja-jp/guides/extension/code-based-extension/moderation)
  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




コード拡張

# 敏感内容審査

Copy page

Dify にはシステムに内蔵された内容審査タイプの他に、ユーザーが独自にカスタマイズした内容審査ルールを拡張する機能もあります。この方法は、プライベートデプロイ環境での開発者向けにカスタム開発が可能です。例えば、企業内部のカスタマーサポートにおいて、ユーザーが問い合わせを行う際やカスタマーサポートが返信する際に、暴力、性、違法行為などの関連用語を入力してはならないといった規定に加え、企業が独自に定めた禁則語や内部の審査ロジックに違反する内容も含めないようにすることができます。このような場合、開発者はプライベートデプロイ環境の Dify コード層で独自の内容審査ルールを拡張できます。

## 

​

クイックスタート

ここでは、`Cloud Service` 内容審査拡張を例にとって、以下の手順を説明します：

  1. ディレクトリの初期化
  2. フロントエンドコンポーネント定義ファイルの追加
  3. 実装クラスの追加
  4. フロントエンド画面のプレビュー
  5. 拡張機能のデバッグ



### 

​

1\. ディレクトリの初期化

新しいカスタムタイプ `Cloud Service` を追加するには、`api/core/moderation` ディレクトリ内に関連するディレクトリとファイルを新規作成します。
    
    
    .
    └── api
        └── core
            └── moderation
                └── cloud_service
                    ├── __init__.py
                    ├── cloud_service.py
                    └── schema.json

### 

​

2\. フロントエンドコンポーネント規格の追加

  * `schema.json` ここでは、フロントエンドコンポーネントの規格を定義しています。


    
    
    {
        "label": {
            "en-US": "Cloud Service",
            "zh-Hans": "クラウドサービス"
        },
        "form_schema": [
            {
                "type": "select",
                "label": {
                    "en-US": "Cloud Provider",
                    "zh-Hans": "クラウドプロバイダー"
                },
                "variable": "cloud_provider",
                "required": true,
                "options": [
                    {
                        "label": {
                            "en-US": "AWS",
                            "zh-Hans": "AWS"
                        },
                        "value": "AWS"
                    },
                    {
                        "label": {
                            "en-US": "Google Cloud",
                            "zh-Hans": "GoogleCloud"
                        },
                        "value": "GoogleCloud"
                    },
                    {
                        "label": {
                            "en-US": "Azure Cloud",
                            "zh-Hans": "Azure"
                        },
                        "value": "Azure"
                    }
                ],
                "default": "GoogleCloud",
                "placeholder": ""
            },
            {
                "type": "text-input",
                "label": {
                    "en-US": "API Endpoint",
                    "zh-Hans": "APIエンドポイント"
                },
                "variable": "api_endpoint",
                "required": true,
                "max_length": 100,
                "default": "",
                "placeholder": "https://api.example.com"
            },
            {
                "type": "paragraph",
                "label": {
                    "en-US": "API Key",
                    "zh-Hans": "APIキー"
                },
                "variable": "api_keys",
                "required": true,
                "default": "",
                "placeholder": "ここにAPIキーを貼り付けてください"
            }
        ]
    }

### 

​

3\. 実装クラスの追加

`cloud_service.py` のコードテンプレートです。ここで具体的なビジネスロジックを実装できます。

注意点：クラス変数 name はカスタムタイプの名称であり、ディレクトリ名およびファイル名と一致し、かつ一意である必要があります。
    
    
    from core.moderation.base import Moderation, ModerationAction, ModerationInputsResult, ModerationOutputsResult
    
    class CloudServiceModeration(Moderation):
        """
        The name of custom type must be unique, keep the same with directory and file name.
        """
        name: str = "cloud_service"
    
        @classmethod
        def validate_config(cls, tenant_id: str, config: dict) -> None:
            """
            schema.json validation. It will be called when user save the config.
    
            Example:
                .. code-block:: python
                    config = {
                        "cloud_provider": "GoogleCloud",
                        "api_endpoint": "https://api.example.com",
                        "api_keys": "123456",
                        "inputs_config": {
                            "enabled": True,
                            "preset_response": "Your content violates our usage policy. Please revise and try again."
                        },
                        "outputs_config": {
                            "enabled": True,
                            "preset_response": "Your content violates our usage policy. Please revise and try again."
                        }
                    }
    
            :param tenant_id: the id of workspace
            :param config: the variables of form config
            :return:
            """
    
            cls._validate_inputs_and_outputs_config(config, True)
    
            if not config.get("cloud_provider"):
                raise ValueError("cloud_provider is required")
    
            if not config.get("api_endpoint"):
                raise ValueError("api_endpoint is required")
    
            if not config.get("api_keys"):
                raise ValueError("api_keys is required")
    
        def moderation_for_inputs(self, inputs: dict, query: str = "") -> ModerationInputsResult:
            """
            Moderation for inputs.
    
            :param inputs: user inputs
            :param query: the query of chat app, there is empty if is completion app
            :return: the moderation result
            """
            flagged = False
            preset_response = ""
    
            if self.config['inputs_config']['enabled']:
                preset_response = self.config['inputs_config']['preset_response']
    
                if query:
                    inputs['query__'] = query
                flagged = self._is_violated(inputs)
    
            # return ModerationInputsResult(flagged=flagged, action=ModerationAction.overridden, inputs=inputs, query=query)
            return ModerationInputsResult(flagged=flagged, action=ModerationAction.DIRECT_OUTPUT, preset_response=preset_response)
    
        def moderation_for_outputs(self, text: str) -> ModerationOutputsResult:
            """
            Moderation for outputs.
    
            :param text: the text of LLM response
            :return: the moderation result
            """
            flagged = False
            preset_response = ""
    
            if self.config['outputs_config']['enabled']:
                preset_response = self.config['outputs_config']['preset_response']
    
                flagged = self._is_violated({'text': text})
    
            # return ModerationOutputsResult(flagged=flagged, action=ModerationAction.overridden, text=text)
            return ModerationOutputsResult(flagged=flagged, action=ModerationAction.DIRECT_OUTPUT, preset_response=preset_response)
    
        def _is_violated(self, inputs: dict):
            """
            The main logic of moderation.
    
            :param inputs:
            :return: the moderation result
            """
            return False

### 

​

4\. 拡張機能のデバッグ

ここまでで、Dify のアプリケーションオーケストレーション画面でカスタム `クラウドサービス` 内容審査拡張タイプを選択してデバッグすることができます。

## 

​

実装クラステンプレート
    
    
    from core.moderation.base import Moderation, ModerationAction, ModerationInputsResult, ModerationOutputsResult
    
    class CloudServiceModeration(Moderation):
        """
        The name of custom type must be unique, keep the same with directory and file name.
        """
        name: str = "cloud_service"
    
        @classmethod
        def validate_config(cls, tenant_id: str, config: dict) -> None:
            """
            schema.json validation. It will be called when user saves the config.
            
            :param tenant_id: the id of workspace
            :param config: the variables of form config
            :return:
            """
            cls._validate_inputs_and_outputs_config(config, True)
            
            # implement your own logic here
    
        def moderation_for_inputs(self, inputs: dict, query: str = "") -> ModerationInputsResult:
            """
            Moderation for inputs.
    
            :param inputs: user inputs
            :param query: the query of chat app, there is empty if is completion app
            :return: the moderation result
            """
            flagged = False
            preset_response = ""
            
            # implement your own logic here
            
            # return ModerationInputsResult(flagged=flagged, action=ModerationAction.overridden, inputs=inputs, query=query)
            return ModerationInputsResult(flagged=flagged, action=ModerationAction.DIRECT_OUTPUT, preset_response=preset_response)
    
        def moderation_for_outputs(self, text: str) -> ModerationOutputsResult:
            """
            Moderation for outputs.
    
            :param text: the text of LLM response
            :return: the moderation result
            """
            flagged = False
            preset_response = ""
            
            # implement your own logic here
    
            # return ModerationOutputsResult(flagged=flagged, action=ModerationAction.overridden, text=text)
            return ModerationOutputsResult(flagged=flagged, action=ModerationAction.DIRECT_OUTPUT, preset_response=preset_response)

## 

​

実装クラスの詳細説明

### 

​

def validate_config

`schema.json` フォーム検証方法、ユーザーが「公開」をクリックして設定を保存するときに呼び出される

  * `config` フォームパラメータ
    * `{{variable}}` フォームカスタム変数
    * `inputs_config` 入力検証プリセット応答
      * `enabled` 有効化
      * `preset_response` 入力プリセット応答
    * `outputs_config` 出力検証プリセット応答
      * `enabled` 有効化
      * `preset_response` 出力プリセット応答



### 

​

def moderation_for_inputs

入力検証関数

  * `inputs` ：エンドユーザーによって渡された変数値
  * `query` ：エンドユーザーが現在入力している内容、対話型アプリケーションの固定パラメータ。
  * `ModerationInputsResult`
    * `flagged` 検証ルールに違反しているかどうか
    * `action` 実行動作
      * `direct_output` プリセット応答を直接出力
      * `overridden` 渡された変数値を上書き
    * `preset_response` プリセット応答（action=direct_outputの場合のみ返される）
    * `inputs` エンドユーザーによって渡された変数値、キーは変数名、値は変数値（action=overriddenの場合のみ返される）
    * `query` 上書きされたエンドユーザーの現在の入力内容、対話型アプリケーションの固定パラメータ（action=overriddenの場合のみ返される）



### 

​

def moderation_for_outputs

出力検証関数

  * `text`：内容
  * `moderation_for_outputs`：出力検証関数
    * `text`：LLM回答内容。LLMの出力がの場合、これは100文字ごとの分割内容である。
    * `ModerationOutputsResult`
      * `flagged` 検証ルールに違反しているかどうか
      * `action` 実行動作
        * `direct_output` プリセット応答を直接出力
        * `overridden` 渡された変数値を上書き
      * `preset_response` プリセット応答（action=direct_outputの場合のみ返される）
      * `text` 上書きされたLLM回答内容（action=overriddenの場合のみ返される）



* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/guides/extension/code-based-extension/moderation.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20at&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/guides/extension/code-based-extension%2Fmoderation.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[外部データツール](/ja-jp/guides/extension/code-based-extension/external-data-tool)[コラボレーション](/ja-jp/guides/workspace/readme)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * クイックスタート
  * 1\. ディレクトリの初期化
  * 2\. フロントエンドコンポーネント規格の追加
  * 3\. 実装クラスの追加
  * 4\. 拡張機能のデバッグ
  * 実装クラステンプレート
  * 実装クラスの詳細説明
  * def validate_config
  * def moderation_for_inputs
  * def moderation_for_outputs



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/guides/knowledge-base/api-documentation/external-knowledge-api-documentation

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

ナレッジベース

外部知識API

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

  * ナレッジベース

    * [ナレッジベース](/ja-jp/guides/knowledge-base/readme)
    * ナレッジベース作成

    * ナレッジベースの管理

    * [メタデータ](/ja-jp/guides/knowledge-base/metadata)
    * [アプリ内でのナレッジベース統合](/ja-jp/guides/knowledge-base/integrate-knowledge-within-application)
    * [リコールテスト/引用帰属](/ja-jp/guides/knowledge-base/retrieval-test-and-citation)
    * [ナレッジベースの要求頻度制限](/ja-jp/guides/knowledge-base/knowledge-request-rate-limit)
    * [外部ナレッジベースとの接続](/ja-jp/guides/knowledge-base/connect-external-knowledge-base)
    * [外部知識API](/ja-jp/guides/knowledge-base/api-documentation/external-knowledge-api-documentation)
  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




ナレッジベース

# 外部知識API

Copy page

## 

​

エンドポイント
    
    
    POST <your-endpoint>/retrieval

## 

​

ヘッダー

このAPIは、Difyとは独立して開発者が維持管理するナレッジベースに接続するために使用されます。詳細については、[外部ナレッジベースへの接続](/ja-jp/guides/knowledge-base/connect-external-knowledge-base)を参照してください。`Authorization` HTTPヘッダーで `API-Key` を使用して権限を検証できます。認証ロジックは、以下のように検索APIで定義します：
    
    
    Authorization: Bearer {API_KEY}

## 

​

リクエストボディ要素

リクエストは以下のJSON形式のデータを受け入れます。

プロパティ| 必須| 型| 説明| 例値  
---|---|---|---|---  
knowledge_id| TRUE| string| ナレッジベースの一意ID| AAA-BBB-CCC  
query| TRUE| string| ユーザーのクエリ| Difyとは何ですか？  
retrieval_setting| TRUE| object| 知識の検索パラメータ| 以下参照  
metadata_condition| TRUE| object| 元の配列のフィルタリング| 以下参照  
  
`retrieval_setting` プロパティは以下のキーを含むオブジェクトです：

プロパティ| 必須| 型| 説明| 例値  
---|---|---|---|---  
top_k| TRUE| int| 検索結果の最大数| 5  
score_threshold| TRUE| float| クエリに対する結果の関連性スコアの閾値、範囲：0〜1| 0.5  
  
`metadata_condition` プロパティは以下のキーを含むオブジェクトです：

属性| 必須かどうか| 型| 説明| 例  
---|---|---|---|---  
logical_operator| いいえ| 文字列| 論理演算子、値は `and` または `or`、デフォルトは `and`| and  
conditions| はい| 配列（オブジェクト）| 条件リスト| 以下参照  
  
`conditions` 配列の各オブジェクトには以下のキーが含まれます：

属性| 必須かどうか| 型| 説明| 例  
---|---|---|---|---  
name| はい| 配列（文字列）| フィルタリングするmetadataの名前| `["category", "tag"]`  
comparison_operator| はい| 文字列| 比較演算子| `contains`  
value| いいえ| 文字列| 比較値、演算子が `empty`、`not empty`、`null`、`not null` の場合は省略可能| `"AI"`  
  
サポートされている `comparison_operator` 演算子：

  * `contains`：特定の値を含む
  * `not contains`：特定の値を含まない
  * `start with`：特定の値で始まる
  * `end with`：特定の値で終わる
  * `is`：特定の値と等しい
  * `is not`：特定の値と等しくない
  * `empty`：空である
  * `not empty`：空ではない
  * `=`：等しい
  * `≠`：等しくない
  * `>`：より大きい
  * `<`：より小さい
  * `≥`：以上
  * `≤`：以下
  * `before`：特定の日付より前
  * `after`：特定の日付より後



## 

​

リクエスト構文
    
    
    POST <your-endpoint>/retrieval HTTP/1.1
    -- ヘッダー
    Content-Type: application/json
    Authorization: Bearer your-api-key
    -- データ
    {
        "knowledge_id": "your-knowledge-id",
        "query": "your question",
        "retrieval_setting":{
            "top_k": 2,
            "score_threshold": 0.5
        }
    }

## 

​

レスポンス要素

アクションが成功した場合、サービスはHTTP 200レスポンスを返します。

サービスは以下のデータをJSON形式で返します。

プロパティ| 必須| 型| 説明| 例値  
---|---|---|---|---  
records| TRUE| List[Object]| ナレッジベースのクエリ結果のレコードリスト| 以下参照  
  
`records` プロパティは以下のキーを含むリストオブジェクトです：

プロパティ| 必須| 型| 説明| 例値  
---|---|---|---|---  
content| TRUE| string| ナレッジベースのデータソースからのテキストチャンクを含む| Dify：GenAIアプリケーションのイノベーションエンジン  
score| TRUE| float| クエリに対する結果の関連性スコア、範囲：0〜1| 0.5  
title| TRUE| string| ドキュメントタイトル| Dify紹介  
metadata| FALSE| json| データソース内のドキュメントのメタデータ属性とその値を含む| 例参照  
  
## 

​

レスポンス構文
    
    
    HTTP/1.1 200
    Content-type: application/json
    {
        "records": [{
                        "metadata": {
                                "path": "s3://dify/knowledge.txt",
                                "description": "dify知識ドキュメント"
                        },
                        "score": 0.98,
                        "title": "knowledge.txt",
                        "content": "これは外部知識のドキュメントです。"
                },
                {
                        "metadata": {
                                "path": "s3://dify/introduce.txt",
                                "description": "dify紹介"
                        },
                        "score": 0.66,
                        "title": "introduce.txt",
                        "content": "GenAIアプリケーションのイノベーションエンジン"
                }
        ]
    }

## 

​

エラー

アクションが失敗した場合、サービスは以下のエラー情報をJSON形式で返します：

プロパティ| 必須| 型| 説明| 例値  
---|---|---|---|---  
error_code| TRUE| int| エラーコード| 1001  
error_msg| TRUE| string| API例外の説明| 無効な認証ヘッダー形式です。`Bearer <api-key>` 形式が期待されます。  
  
`error_code` プロパティには以下の種類があります：

コード| 説明  
---|---  
1001| 無効な認証ヘッダー形式  
1002| 認証失敗  
2001| 知識が存在しません  
  
## 

​

開発例

以下の動画では、LlamaCloudを例として外部ナレッジベースプラグインの開発方法を学ぶことができます：

詳細については、プラグインの[GitHubリポジトリ](https://github.com/langgenius/dify-official-plugins/tree/main/extensions/llamacloud)を参照してください。

### 

​

HTTPステータスコード

**AccessDeniedException** アクセス権限がないため、リクエストが拒否されました。権限を確認して再試行してください。 HTTPステータスコード：403

**InternalServerException** 内部サーバーエラーが発生しました。リクエストを再試行してください。 HTTPステータスコード：500

* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/guides/knowledge-base/api-documentation/external-knowledge-api-documentation.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20nal-knowledge-api-documentat&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/guides/knowledge-base/api-documentation%2Fexternal-knowledge-api-documentation.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[外部ナレッジベースとの接続](/ja-jp/guides/knowledge-base/connect-external-knowledge-base)[概覧](/ja-jp/guides/application-publishing/launch-your-webapp-quickly/web-app-settings)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * エンドポイント
  * ヘッダー
  * リクエストボディ要素
  * リクエスト構文
  * レスポンス要素
  * レスポンス構文
  * エラー
  * 開発例
  * HTTPステータスコード



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/guides/knowledge-base/connect-external-knowledge-base

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

ナレッジベース

外部ナレッジベースとの接続

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

  * ナレッジベース

    * [ナレッジベース](/ja-jp/guides/knowledge-base/readme)
    * ナレッジベース作成

    * ナレッジベースの管理

    * [メタデータ](/ja-jp/guides/knowledge-base/metadata)
    * [アプリ内でのナレッジベース統合](/ja-jp/guides/knowledge-base/integrate-knowledge-within-application)
    * [リコールテスト/引用帰属](/ja-jp/guides/knowledge-base/retrieval-test-and-citation)
    * [ナレッジベースの要求頻度制限](/ja-jp/guides/knowledge-base/knowledge-request-rate-limit)
    * [外部ナレッジベースとの接続](/ja-jp/guides/knowledge-base/connect-external-knowledge-base)
    * [外部知識API](/ja-jp/guides/knowledge-base/api-documentation/external-knowledge-api-documentation)
  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




ナレッジベース

# 外部ナレッジベースとの接続

Copy page

> この文書では、Difyプラットフォームとは独立したナレッジベースを総称して**「外部ナレッジベース」**と呼びます。

## 

​

機能概要

高度なコンテンツ検索の要件を持つ上級開発者にとって、Difyプラットフォームに組み込まれたナレッジベース機能とテキスト検索・取得メカニズムには**制約があり、検索結果を簡単に変更することができません。**

テキスト検索と取得の精度に高い要求を持ち、内部資料の管理ニーズを満たすために、一部のチームは独自にRAGアルゴリズムを開発し、個人のテキスト取得システムを維持したり、コンテンツをクラウドプロバイダのナレッジベースサービス（例：[AWS Bedrock](https://aws.amazon.com/bedrock/)）に統合したりしています。

中立的なLLMアプリケーション開発プラットフォームであるDifyは、開発者にさまざまな選択肢を提供することを目指しています。

**外部ナレッジベースに接続する** 機能を使うことで、Difyプラットフォームと外部ナレッジベースを接続できます。APIサービスを通じて、AIアプリケーションはより多くの情報源からデータを取得できるようになります。具体的には：

  * Difyプラットフォームは、クラウドサービスプロバイダのナレッジベースにホスティングされているテキストコンテンツを直接取得でき、開発者はDify内のナレッジベースに再度コンテンツを転送する必要がありません。
  * Difyプラットフォームは、独自に構築したナレッジベース内のアルゴリズムで処理されたテキストコンテンツを直接取得でき、開発者は独自のナレッジベースの情報検索メカニズムに焦点を当て、情報取得の精度を継続的に最適化できます。



Principle of external knowledge base connection

以下は外部ナレッジベースに接続するための詳細な手順です：

1

## 要件を満たす外部ナレッジベースAPIを構築する

Difyとの接続を成功させるためには、外部ナレッジベースがDifyが作成した[外部ナレッジベースAPI仕様](/ja-jp/guides/knowledge-base/api-documentation/external-knowledge-api-documentation)を慎重に読み、APIサービスを構築する必要があります。

2

外部ナレッジベースを関連付ける

> 現在、Difyは外部ナレッジベースに対する最適化や変更をサポートしておらず、検索権限のみを有しています。開発者は外部ナレッジベースを自己管理する必要があります。

**“ナレッジベース”** ページに移動し、右上の **“外部ナレッジベースAPI”** をクリックし、 **“外部ナレッジベースAPIを追加”** を選択します。

ページの指示に従い、以下の内容を順番に入力してください：

  * ナレッジベースの名前：カスタム名を設定でき、接続された異なる外部ナレッジAPIを区別するために使用します。
  * APIインターフェースアドレス：外部ナレッジベースの接続アドレス（例：`api-endpoint/retrieval`）；詳細な説明は[外部ナレッジベースAPI](/ja-jp/guides/knowledge-base/api-documentation/external-knowledge-api-documentation)を参照してください。
  * APIキー：外部ナレッジベース接続のためのキー；詳細な説明は[外部ナレッジベースAPI](/ja-jp/guides/knowledge-base/api-documentation/external-knowledge-api-documentation)を参照してください。



3

外部ナレッジベースに接続する

**“ナレッジベース”** ページに移動し、追加したナレッジベースカードの下にある **“外部ナレッジベースに接続”** をクリックして、パラメーター設定ページに移動します。

以下のパラメータを入力してください：

  * **ナレッジベースの名称と説明**

  * **外部ナレッジベースAPI** : 第二ステップで関連付けられた外部ナレッジベースAPIを選択します。DifyはAPI接続を通じて、外部ナレッジベースに保存されているテキスト内容を呼び出します。

  * **外部ナレッジベースID** : 関連付ける特定の外部ナレッジベースIDを指定します。詳細については[外部ナレッジベースAPI](/ja-jp/guides/knowledge-base/api-documentation/external-knowledge-api-documentation)を参照してください。

  * **召回設定の調整**

**Top K:** ユーザーが質問を発起した際に、外部知識APIに関連性の高いコンテンツ片を要求します。このパラメータは、ユーザーの質問との類似度が高いテキスト片をフィルタリングするために使用されます。デフォルト値は3で、数値が大きいほど関連性のあるテキスト片が多く召回されます。

**スコア閾値:** テキスト片フィルタリングの類似度閾値で、設定されたスコアを超えるテキスト片のみが召回されます。デフォルト値は0.5です。数値が高いほど、テキストと質問要求の類似度が高く、召回されるテキストの数が少なくなり、結果的により精度が高まります。




4

外部ナレッジベースの接続と召回のテスト

接続が確立された後、開発者は **「召回テスト」** で可能な質問キーワードをシミュレーションし、外部ナレッジベースから召回されたテキスト片をプレビューできます。召回結果に満足できない場合は、召回パラメータの変更や外部ナレッジベースの検索設定の調整を試みてください。

5

アプリ内で外部ナレッジベースを統合

  * **Chatbot / エージェント型アプリ**



Chatbot / エージェント型アプリの編成ページにある **「コンテキスト」** で、`EXTERNAL`ラベルの付いた外部ナレッジベースを選択します。

  * **チャットフロー / ワークフロー型アプリ**



チャットフロー / ワークフロー型アプリに **「知識検索」** ノードを追加し、`EXTERNAL`ラベルの付いた外部ナレッジベースを選択します。

6

外部ナレッジベースの管理

**「ナレッジベース」**ページでは、外部ナレッジベースのカードの右上に** EXTERNAL**ラベルが表示されます。変更が必要なナレッジベースに入って、**「設定」**をクリックして以下の内容を変更します：

  * **ナレッジベースの名称と説明**

  * **可視範囲** : 「自分だけ」、「全チームメンバー」、「一部のチームメンバー」の3つの権限範囲を提供します。権限のない人はそのナレッジベースにアクセスできません。ナレッジベースを他のメンバーに公開することを選択した場合、他のメンバーもそのナレッジベースの閲覧、編集、および削除権限を持つことになります。

  * **召回設定**

**Top K:** ユーザーが質問をした際に、外部知識APIに関連性の高いコンテンツ片を要求します。このパラメータは、ユーザーの質問との類似度が高いテキスト片をフィルタリングするために使用されます。デフォルト値は3で、数値が大きいほど関連性のあるテキスト片が多く召回されます。

**スコア閾値:** テキスト片フィルタリングの類似度閾値で、設定されたスコアを超えるテキスト片のみが召回されます。デフォルト値は0.5です。数値が高いほど、テキストと質問要求の類似度が高く、召回されるテキストの数が少なくなり、結果的により精度が高まります。




外部ナレッジベースに関連付けられた **「外部ナレッジベースAPI」** と **「外部知識ID」** は変更できません。変更が必要な場合は、新しい「外部ナレッジベースAPI」を関連付けて再接続してください。

ナレッジベースの設置

### 

​

接続例

#### 

​

AWS Bedrock

[AWS Bedrockナレッジベースへの接続方法](../../learn-more/use-cases/how-to-connect-aws-bedrock.md "mention")

#### 

​

LlamaCloud

DifyはLlamaCloudプラグインを公式に提供しており、LlamaCloudナレッジベースに簡単に接続することができます。

##### プラグインのインストール

  1. Difyの[マーケットプレイス](https://marketplace.dify.ai/)にアクセスし、`LlamaCloud`を検索します
  2. 指示に従ってLlamaCloudプラグインをインストールおよび設定します
  3. Difyプラットフォームでプラグインを有効にします
  4. プラグイン設定ウィザードに従って、LlamaCloudのAPIキーやその他の必要な情報を入力します
  5. 設定が完了すると、ナレッジベースリストに接続された外部ナレッジベースが表示されます



LlamaCloudプラグインを使用すると、カスタムAPIを作成することなく、DifyプラットフォームでLlamaCloudの強力な検索機能を直接利用できます。

詳細については、プラグインの[GitHubリポジトリ](https://github.com/langgenius/dify-official-plugins/tree/main/extensions/llamacloud)を参照してください。

##### ビデオチュートリアル

以下の動画では、LlamaCloudプラグインを使用して外部ナレッジベースに接続する方法を詳しく説明しています：

## 

​

よくある質問

**外部ナレッジベースAPI接続時に異常が発生し、エラーが表示された場合の対処法は？**

以下は、返された各エラーコードに対するエラーメッセージと解決策です：

エラーコード| エラーメッセージ| 解決策  
---|---|---  
1001| 無効なAuthorization header形式| リクエストのAuthorization header形式を確認してください  
1002| 認証異常| 入力したAPIキーが正しいか確認してください  
2001| ナレッジベースが存在しない| 外部ナレッジベースを確認してください  
  
* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/guides/knowledge-base/connect-external-knowledge-base.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20ct-external-knowledge-b&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/guides/knowledge-base%2Fconnect-external-knowledge-base.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[ナレッジベースの要求頻度制限](/ja-jp/guides/knowledge-base/knowledge-request-rate-limit)[外部知識API](/ja-jp/guides/knowledge-base/api-documentation/external-knowledge-api-documentation)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * 機能概要
  * 接続例
  * AWS Bedrock
  * LlamaCloud
  * よくある質問



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/guides/knowledge-base/create-knowledge-and-upload-documents/chunking-and-cleaning-text

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

ナレッジベース作成

2\. チャンクモードの指定

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

  * ナレッジベース

    * [ナレッジベース](/ja-jp/guides/knowledge-base/readme)
    * ナレッジベース作成

      * [作成手順](/ja-jp/guides/knowledge-base/knowledge-base-creation/introduction)
      * 1\. オンラインデータソースの活用

      * [2\. チャンクモードの指定](/ja-jp/guides/knowledge-base/create-knowledge-and-upload-documents/chunking-and-cleaning-text)
      * [3\. インデックス方法と検索設定を指定](/ja-jp/guides/knowledge-base/create-knowledge-and-upload-documents/setting-indexing-methods)
    * ナレッジベースの管理

    * [メタデータ](/ja-jp/guides/knowledge-base/metadata)
    * [アプリ内でのナレッジベース統合](/ja-jp/guides/knowledge-base/integrate-knowledge-within-application)
    * [リコールテスト/引用帰属](/ja-jp/guides/knowledge-base/retrieval-test-and-citation)
    * [ナレッジベースの要求頻度制限](/ja-jp/guides/knowledge-base/knowledge-request-rate-limit)
    * [外部ナレッジベースとの接続](/ja-jp/guides/knowledge-base/connect-external-knowledge-base)
    * [外部知識API](/ja-jp/guides/knowledge-base/api-documentation/external-knowledge-api-documentation)
  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




ナレッジベース作成

# 2\. チャンクモードの指定

Copy page

コンテンツをナレッジベースにアップロードした後、次に行うべき作業は、コンテンツの分割とデータのクリーニングです。この段階では、コンテンツの前処理と構造化を行い、長いテキストを複数の小さなブロックに分割します。

具体的にどのように分割とクリーニングを行うのでしょうか？

  * 分割

大規模な言語モデルが処理できる情報量には限界があるため、知識データベースのコンテンツを一度にすべて処理することはできません。このため、長い文書をより小さいコンテンツブロックに分割する必要があります。一部のモデルでは、文書全体をアップロードする機能をサポートしていますが、実験により、コンテンツをブロックごとに検索した方が効率的であることが分かっています。

言語モデルが知識データベース内の情報に基づいて正確な回答を提供できるかどうかは、コンテンツブロックの検索と選択の効果に依存します。マニュアルから必要な章を探すように、文書全体を詳細に分析することなく迅速に答えを見つけられます。分割された知識データベースでは、ユーザーの質問に基づいて、関連性が高いコンテンツブロックを選択し、重要な情報を提供することで、回答の精度を向上させます。

質問とコンテンツブロックの意味的なマッチングを行う際、適切な分割サイズが非常に重要です。これにより、モデルが問題に最も関連性が高いコンテンツを正確に特定し、無関係な情報を減らすことができます。分割が大きすぎるか小さすぎると、選択の効果に悪影響を及ぼす可能性があります。

Difyは、「汎用分割」と「階層分割」の2種類の分割モードを提供しており、それぞれ異なる文書の構造と用途に適応し、異なる検索と選択の効率と精度の要件を満たします。

  * クリーニング

テキストの選択効果を保証するためには、通常、データを知識データベースに入力する前にクリーニングが必要です。例えば、意味のない文字や空行が含まれている可能性があり、これらは応答の品質に影響を与えるため、クリーニングが必要です。Difyでは、自動的なクリーニング戦略が組み込まれており、詳細はETLセクションを参照してください。




ユーザーが質問した後、LLMがその質問に基づいたナレッジベースからの正確な回答を提供できるかどうかは、関連する情報ブロックを効率的に検索し取り出せるかにかかっています。AIアプリケーションが正確かつ包括的な回答を出すためには、その問題に直接関わる情報ブロックの特定が非常に重要です。

例えば、スマートカスタマーサービスの場合、LLMがツールマニュアル内の重要な章の情報ブロックをすぐに見つけ出せれば、ユーザーの問いに素早く答えられます。これにより、文書全体を何度も分析する手間が省けます。結果として、AIアプリケーションの質問応答(Q&A)機能の品質を、トークン使用量を節約しつつ向上させることができます。

## 

​

ナレッジベースのセグメント分類方法の選択

私たちのナレッジベースでは、以下の2つのセグメント分類方法を提供しています。

  * **汎用分割**



注意：以前の「自動セグメント分割＆クリーニング」モードは、自動で汎用分割へとアップデートされました。何も手を加える必要はありません。既定の設定でそのまま利用可能です。

  * **親子分割（階層分割）**



セグメント分類方法を選んでナレッジベースを作成した後での変更は不可能です。ナレッジベースに新たに追加される文書も、選択した同じセグメント分類方法に従います。

### 

​

汎用分割モード

汎用分割では、システムはユーザーが設定したルールに沿ってコンテンツを独立したセグメントに分割します。ユーザーが検索クエリを入力すると、システムは自動的にそのクエリのキーワードを分析し、それらのキーワードとナレッジベース内の各コンテンツセグメントとの関連性を評価します。その後、関連性が高いものから順に並べ、最も関連性の高いコンテンツセグメントを選択し、大規模言語モデル(LLM)による処理と回答を行います。

このモードでは、異なる文書形式やシナリオの要件に応じて、以下の設定項目を参考にしながら、テキストのセグメント**分割ルール** を手動で調整することが必要です。

  * **セグメント分割識別子** ：デフォルト値は `\n\n` で、文書内の各段落をセグメントに分割します。[正規表現のルール](https://regexr.com/)に従って、分割ルールをカスタマイズできます。例えば、`\n` は各行をセグメントに分割することを意味します。下記の図は、異なる文法を用いたテキスト分割の効果を示しています：


  * **セグメントの最大長さ** ：セグメント内のテキスト文字数の最大値を設定します。この長さを超えると、強制的にセグメントが分割されます。デフォルト値は 500 トークンで、セグメント長の最大値は 4000 トークンです。

  * **セグメントの重複長さ** ：データをセグメントに分割する際、セグメント間で一定量の重複が生じます。この重複は情報の損失を防ぎ、分析の精度を向上させ、情報のリコール効率を高めるのに役立ちます。セグメント長の10％から25％を重複させることを推奨します。




**テキスト前処理ルール** ：ナレッジベース内の不要な内容をフィルタリングするための設定です。

  * 連続する空白、改行、タブを置換
  * すべてのURLと電子メールアドレスを削除



設定完了後、「プレビューブロック」をクリックすることで、セグメント分割後の効果を確認できます。各セグメントの文字数が直感的に理解可能です。

複数の文書を一括でアップロードした場合、文書のタイトルをクリックすることで、他の文書のセグメント分割効果を素早く確認できます。

セグメント分割ルールの設定が完了したら、次にインデックス方式を選択する必要があります。「高品質インデックス」と「経済インデックス」が利用可能で、詳細は[インデックス方法の設定](./setting-indexing-methods)をご覧ください。

### 

​

親子分割モード（階層分割モード）

汎用分割モードと比べると、親子分割モードは、データを二層構造で扱うことで、詳細なマッチングと文脈情報の提供の両方を可能にします。例として、AIを活用したカスタマーサポートでは、このモードを用いてユーザーの質問を解決策のドキュメント内の特定の文へと紐づけ、その文が含まれる段落や章をLLMへと送信します。これにより、質問の背景情報を完全に把握し、より適切な回答を提供することができます。

基本的な動作は以下の通りです：

  * サブセグメントマッチングクエリ：
    * ドキュメントを小さな情報単位（例えば、一文）に分割し、ユーザーの質問により精密にマッチングします。
    * サブセグメントは、ユーザーのニーズに最も適した初期結果を素早く提供します。
  * メインセグメントによる文脈を提供：
    * マッチングしたサブセグメントを含むより大きな単位（段落、章、または文書全体）をメインブロックとして扱い、LLMへと送信します。
    * メインセグメントは、LLMが情報を逃さず、ナレッジベースに基づいた適切な回答を導くための完全な背景情報を提供します。



このモードでは、文書の形式やシナリオの要求に応じて、手動で階層型セグメンテーションのルールを設定する必要があります。

**メインセグメント(親セグメント)** ：

メインセグメントの設定では、以下のオプションを提供します：

  * 段落 あらかじめ設定された区切り記号ルールと最大ブロック長を基にテキストを段落に分割します。各段落はメインブロックとして扱われ、テキスト量が多く、内容が明確で段落が独立している文書に適しています。以下の設定オプションがあります：

    * **区切り文字** 、デフォルトは `\n\n` で、テキストの段落に従って分割します。[正規表現の文法](https://regexr.com/)に従ったカスタムルールを設定でき、テキストに区切り文字が現れたときに自動的に分割します。

    * **最大分割長** 、分割内のテキストの最大文字数を指定し、超えると自動的に分割します。デフォルトは500トークンで、最大4000トークンまで設定可能です。

  * 全文 段落に分けずに、全文を単一のメインブロックとして扱います。パフォーマンスの観点から、テキスト内の最初の10000トークンの文字のみが保持され、テキスト量が少なく、段落間に関連性があり、全文を完全に検索する必要があるシナリオに適しています。




**サブセグメント(子セグメント)** ：

サブセグメントのテキストは、メインテキストのセグメントに基づいて、区切り記号ルールに従って分割されます。これは、クエリのキーワードに最も関連し、直接的な情報を検索しマッチングするために使用されます。

メインセグメントが段落の場合、サブセグメントはその段落内の個別の文です；メインセグメントが全文の場合、サブセグメントは全文中の各個別の文です。

  * **区切り文字** 、デフォルトは \n で、文に従って分割します。[正規表現の文法](https://regexr.com/)に従ったカスタムルールを設定でき、テキストに区切り文字が現れたときに自動的に分割します。

  * **最大分割長** 、分割内のテキストの最大文字数を指定し、超えると自動的に分割します。デフォルトは200トークンで、最大4000トークンまで設定可能です。




設定完了後、「プレビュー」ボタンをクリックすると、分割された結果を確認できます。メインブロック全体の文字数が確認でき、背景が青色で表示された部分がサブブロックであり、現在のサブセグメントの文字数も表示されます。

分割ルールを変更した場合は、「プレビュー」ボタンを再度クリックして、新しい内容の分割結果を確認する必要があります。

複数の文書を同時にアップロードした場合、ページ上部の文書タイトルをタップして、他の文書へ素早く切り替えて分割結果をプレビューできます。

コンテンツ検索の精度を確保するため、親子分割モードは[「高品質インデックス」](/ja-jp/guides/knowledge-base/create-knowledge-and-upload-documents/chunking-and-cleaning-text)の使用のみをサポートしています。

### 

​

二つのモードの主な違いは何ですか？

主な違いは、コンテンツをどのように分割するかにあります。汎用モードでは、複数の独立したブロックにコンテンツが分けられますが、親子モードでは二層構造を使ってコンテンツを分割します。つまり、一つの親ブロック（文書全体や段落）が、複数の子ブロック（文）を含む構造になっています。

この分割方法の違いが、LLMがナレッジベースを検索する際の効率に大きな影響を与えます。特に、親子検索では、より包括的なコンテキスト情報が提供されるため、精度も向上し、従来の単層の汎用検索方法と比べて格段に優れた性能を発揮します。

### 

​

もっと読む

分割モードを選んだら、次にインデックスの設定や検索方法の調整を行い、ナレッジベースの構築を進めましょう。

  * [インデックス方式](./setting-indexing-methods)
  * [検索オプションの設定](./selecting-retrieval-settings)



* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/guides/knowledge-base/create-knowledge-and-upload-documents/chunking-and-cleaning-text.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20ing-and-cleaning-t&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/guides/knowledge-base/create-knowledge-and-upload-documents%2Fchunking-and-cleaning-text.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[1.2 Webサイトからデータをインポート](/ja-jp/guides/knowledge-base/create-knowledge-and-upload-documents/import-content-data/sync-from-website)[3\. インデックス方法と検索設定を指定](/ja-jp/guides/knowledge-base/create-knowledge-and-upload-documents/setting-indexing-methods)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * ナレッジベースのセグメント分類方法の選択
  * 汎用分割モード
  * 親子分割モード（階層分割モード）
  * 二つのモードの主な違いは何ですか？
  * もっと読む



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/guides/knowledge-base/create-knowledge-and-upload-documents/import-content-data/readme

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

1\. オンラインデータソースの活用

1\. テキストデータのインポート

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

  * ナレッジベース

    * [ナレッジベース](/ja-jp/guides/knowledge-base/readme)
    * ナレッジベース作成

      * [作成手順](/ja-jp/guides/knowledge-base/knowledge-base-creation/introduction)
      * 1\. オンラインデータソースの活用

        * [1\. テキストデータのインポート](/ja-jp/guides/knowledge-base/create-knowledge-and-upload-documents/import-content-data/readme)
        * [1.1 Notionデータをインポート](/ja-jp/guides/knowledge-base/create-knowledge-and-upload-documents/import-content-data/sync-from-notion)
        * [1.2 Webサイトからデータをインポート](/ja-jp/guides/knowledge-base/create-knowledge-and-upload-documents/import-content-data/sync-from-website)
      * [2\. チャンクモードの指定](/ja-jp/guides/knowledge-base/create-knowledge-and-upload-documents/chunking-and-cleaning-text)
      * [3\. インデックス方法と検索設定を指定](/ja-jp/guides/knowledge-base/create-knowledge-and-upload-documents/setting-indexing-methods)
    * ナレッジベースの管理

    * [メタデータ](/ja-jp/guides/knowledge-base/metadata)
    * [アプリ内でのナレッジベース統合](/ja-jp/guides/knowledge-base/integrate-knowledge-within-application)
    * [リコールテスト/引用帰属](/ja-jp/guides/knowledge-base/retrieval-test-and-citation)
    * [ナレッジベースの要求頻度制限](/ja-jp/guides/knowledge-base/knowledge-request-rate-limit)
    * [外部ナレッジベースとの接続](/ja-jp/guides/knowledge-base/connect-external-knowledge-base)
    * [外部知識API](/ja-jp/guides/knowledge-base/api-documentation/external-knowledge-api-documentation)
  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




1\. オンラインデータソースの活用

# 1\. テキストデータのインポート

Copy page

Difyプラットフォームの上部ナビゲーションにある**「ナレッジベース」**→** 「ナレッジベースを作成」**をクリックします。ローカルファイルのアップロードやオンラインデータのインポートを通じて、ドキュメントをナレッジベースにアップロードできます。

### 

​

**ローカルファイルのアップロード**

ファイルをドラッグ＆ドロップするか選択してアップロードします。**バッチアップロードに対応** していますが、一度にアップロードできるファイル数は[サブスクリプションプラン](https://dify.ai/pricing)によって制限されています。

**ローカルドキュメントのアップロードには以下の制限があります：**

  * 単一ドキュメントのアップロードサイズは**15MB** に制限されています
  * 異なるSaaSバージョンの[サブスクリプションプラン](https://dify.ai/pricing)により**バッチアップロード数、ドキュメント総アップロード数、ベクトルストレージスペース** が制限されています



### 

​

**オンラインデータのインポート**

ナレッジベース作成時にオンラインデータからのインポートに対応しています。ナレッジベースでは以下の2種類のオンラインデータインポートをサポートしています：

## [NotionからインポートNotionからデータをインポートする方法について学ぶ](./sync-from-notion) ## [ウェブサイトからインポートウェブサイトからデータをインポートする方法について学ぶ](./sync-from-website)

オンラインデータを参照するナレッジベースには、後からローカルドキュメントを追加することはできません。また、ローカルファイルタイプのナレッジベースに変更することもできません。これは、一つのナレッジベースに複数のデータソースが存在することで管理が困難になるのを防ぐためです。

### 

​

後からのインポート

ドキュメントやその他のコンテンツデータの準備ができていない場合は、まず空のナレッジベースを作成し、後からローカルドキュメントをアップロードするか、オンラインデータをインポートすることができます。

* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/guides/knowledge-base/create-knowledge-and-upload-documents/import-content-data/readme.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/guides/knowledge-base/create-knowledge-and-upload-documents/import-content-data%2Freadme.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[作成手順](/ja-jp/guides/knowledge-base/knowledge-base-creation/introduction)[1.1 Notionデータをインポート](/ja-jp/guides/knowledge-base/create-knowledge-and-upload-documents/import-content-data/sync-from-notion)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * ローカルファイルのアップロード
  * オンラインデータのインポート
  * 後からのインポート



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/guides/knowledge-base/create-knowledge-and-upload-documents/import-content-data/sync-from-notion

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

1\. オンラインデータソースの活用

1.1 Notionデータをインポート

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

  * ナレッジベース

    * [ナレッジベース](/ja-jp/guides/knowledge-base/readme)
    * ナレッジベース作成

      * [作成手順](/ja-jp/guides/knowledge-base/knowledge-base-creation/introduction)
      * 1\. オンラインデータソースの活用

        * [1\. テキストデータのインポート](/ja-jp/guides/knowledge-base/create-knowledge-and-upload-documents/import-content-data/readme)
        * [1.1 Notionデータをインポート](/ja-jp/guides/knowledge-base/create-knowledge-and-upload-documents/import-content-data/sync-from-notion)
        * [1.2 Webサイトからデータをインポート](/ja-jp/guides/knowledge-base/create-knowledge-and-upload-documents/import-content-data/sync-from-website)
      * [2\. チャンクモードの指定](/ja-jp/guides/knowledge-base/create-knowledge-and-upload-documents/chunking-and-cleaning-text)
      * [3\. インデックス方法と検索設定を指定](/ja-jp/guides/knowledge-base/create-knowledge-and-upload-documents/setting-indexing-methods)
    * ナレッジベースの管理

    * [メタデータ](/ja-jp/guides/knowledge-base/metadata)
    * [アプリ内でのナレッジベース統合](/ja-jp/guides/knowledge-base/integrate-knowledge-within-application)
    * [リコールテスト/引用帰属](/ja-jp/guides/knowledge-base/retrieval-test-and-citation)
    * [ナレッジベースの要求頻度制限](/ja-jp/guides/knowledge-base/knowledge-request-rate-limit)
    * [外部ナレッジベースとの接続](/ja-jp/guides/knowledge-base/connect-external-knowledge-base)
    * [外部知識API](/ja-jp/guides/knowledge-base/api-documentation/external-knowledge-api-documentation)
  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




1\. オンラインデータソースの活用

# 1.1 Notionデータをインポート

Copy page

DifyデータセットはNotionからのインポートをサポートし、**同期** を設定することで、Notionのデータが更新されると自動的にDifyに同期されます。

### 

​

認証確認

  1. データセットを作成し、データソースを選択する際に、**Notion内容から同期— バインドへ進み、指示に従って認証確認を完了してください。**
  2. または、**設定 — データソース — データソースを追加** に進み、Notionソースで**バインド** をクリックして認証確認を完了することもできます。



### 

​

Notionデータのインポート

認証確認が完了したら、データセット作成ページに進み、**Notion内容から同期** をクリックし、必要な認証ページを選択してインポートします。

### 

​

分割とクリーニングの実施

次に、**分割設定** と**インデックス方式** を選択し、**保存して処理** をクリックします。Difyがこれらのデータを処理するのを待ちます。このステップでは、大規模言語モデル（LLM）サプライヤーでトークンが消費される場合があります。Difyは通常のページデータのインポートをサポートするだけでなく、データベースタイプのページ属性もまとめて保存します。

**注意点：画像やファイルのインポートは現在サポートされていません。表データはテキストとして表示されます。**

### 

​

Notionデータの同期

Notionの内容に変更があった場合、Difyデータセットの**文書リストページ** で**同期** をクリックするだけで、データを一括で同期できます。このステップでもトークンが消費されます。

### 

​

コミュニティ版Notionの統合設定方法

Notionの統合は、**インターナル統合** （internal integration）と**パブリック統合** （public integration）の2種類があります。Difyで必要に応じて設定できます。2つの統合方法の具体的な違いについては[Notion公式ドキュメント](https://developers.notion.com/docs/authorization)を参照してください。

### 

​

1、**インターナル統合方式の利用**

まず、統合設定ページで[統合を作成](https://www.notion.so/my-integrations)します。デフォルトでは、すべての統合はインターナル統合として開始されます。インターナル統合は選択したワークスペースと関連付けられるため、ワークスペースの所有者である必要があります。

具体的な操作手順：

**New integration** ボタンをクリックし、タイプはデフォルトで**インターナル** （変更不可）です。関連付けるスペースを選択し、統合名を入力しロゴをアップロードした後、**Submit** をクリックして統合を作成します。

統合を作成したら、必要に応じてCapabilitiesタブで設定を更新し、Secretsタブで**Show** ボタンをクリックしてSecretsをコピーします。

コピーした後、Difyのソースコードに戻り、**.env** ファイルに関連する環境変数を設定します。環境変数は以下の通りです：

**NOTION_INTEGRATION_TYPE** = インターナル または **NOTION_INTEGRATION_TYPE** = パブリック

**NOTION_INTERNAL_SECRET** =you-internal-secret

### 

​

2、**パブリック統合方式の利用**

**インターナル統合をパブリック統合にアップグレードする必要があります** 。統合の配布ページに移動し、スイッチを切り替えて統合を公開します。スイッチをパブリック設定に切り替えるには、以下の組織情報フォームに会社名、Webサイト、リダイレクトURLなどの情報を入力し、**Submit** ボタンをクリックします。

統合の設定ページで公開に成功すると、密鍵タブで統合の密鍵にアクセスできるようになります：

Difyのソースコードに戻り、**.env** ファイルに関連する環境変数を設定します。環境変数は以下の通りです：

**NOTION_INTEGRATION_TYPE** =パブリック

**NOTION_CLIENT_SECRET** =you-client-secret

**NOTION_CLIENT_ID** =you-client-id

設定が完了したら、データセットでNotionのデータインポートおよび同期機能を操作できます。

* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/guides/knowledge-base/create-knowledge-and-upload-documents/import-content-data/sync-from-notion.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20from-not&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/guides/knowledge-base/create-knowledge-and-upload-documents/import-content-data%2Fsync-from-notion.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[1\. テキストデータのインポート](/ja-jp/guides/knowledge-base/create-knowledge-and-upload-documents/import-content-data/readme)[1.2 Webサイトからデータをインポート](/ja-jp/guides/knowledge-base/create-knowledge-and-upload-documents/import-content-data/sync-from-website)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * 認証確認
  * Notionデータのインポート
  * 分割とクリーニングの実施
  * Notionデータの同期
  * コミュニティ版Notionの統合設定方法
  * 1、インターナル統合方式の利用
  * 2、パブリック統合方式の利用



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/guides/knowledge-base/create-knowledge-and-upload-documents/import-content-data/sync-from-website

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

1\. オンラインデータソースの活用

1.2 Webサイトからデータをインポート

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

  * ナレッジベース

    * [ナレッジベース](/ja-jp/guides/knowledge-base/readme)
    * ナレッジベース作成

      * [作成手順](/ja-jp/guides/knowledge-base/knowledge-base-creation/introduction)
      * 1\. オンラインデータソースの活用

        * [1\. テキストデータのインポート](/ja-jp/guides/knowledge-base/create-knowledge-and-upload-documents/import-content-data/readme)
        * [1.1 Notionデータをインポート](/ja-jp/guides/knowledge-base/create-knowledge-and-upload-documents/import-content-data/sync-from-notion)
        * [1.2 Webサイトからデータをインポート](/ja-jp/guides/knowledge-base/create-knowledge-and-upload-documents/import-content-data/sync-from-website)
      * [2\. チャンクモードの指定](/ja-jp/guides/knowledge-base/create-knowledge-and-upload-documents/chunking-and-cleaning-text)
      * [3\. インデックス方法と検索設定を指定](/ja-jp/guides/knowledge-base/create-knowledge-and-upload-documents/setting-indexing-methods)
    * ナレッジベースの管理

    * [メタデータ](/ja-jp/guides/knowledge-base/metadata)
    * [アプリ内でのナレッジベース統合](/ja-jp/guides/knowledge-base/integrate-knowledge-within-application)
    * [リコールテスト/引用帰属](/ja-jp/guides/knowledge-base/retrieval-test-and-citation)
    * [ナレッジベースの要求頻度制限](/ja-jp/guides/knowledge-base/knowledge-request-rate-limit)
    * [外部ナレッジベースとの接続](/ja-jp/guides/knowledge-base/connect-external-knowledge-base)
    * [外部知識API](/ja-jp/guides/knowledge-base/api-documentation/external-knowledge-api-documentation)
  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




1\. オンラインデータソースの活用

# 1.2 Webサイトからデータをインポート

Copy page

Dify のナレッジベースでは、[Jina Reader](https://jina.ai/reader)や[Firecrawl](https://www.firecrawl.dev/)を利用してウェブページをスクレイピングし、解析したデータをMarkdownの形式でナレッジベースに取り込むことができます。

[Jina Reader](https://jina.ai/reader)や[Firecrawl](https://www.firecrawl.dev/)は、オープンソースのウェブページ解析ツールです。ウェブページをクリーンで大規模言語モデル（LLM）が扱いやすいMarkdown形式のテキストに変換します。また、使いやすいAPIサービスも提供しています。

## 

​

Firecrawl

### 

​

Firecrawlの認証情報の設定

右上隅にあるアバターをクリックし、DataSourceページでFirecrawlの認証情報を設定する必要があります。

[Firecrawl 公式サイト](https://www.firecrawl.dev/) にログインして登録を完了し、APIキーを取得してから入力し、保存します。

### 

​

Firecrawl を使用してWebコンテンツをクロールする

ナレッジベース作成のページで**Sync from website** を選択し、スクレイピングの対象どしてのウェブページのURLを入力します。

設定項目には、サブページのスクレイピング、スクレイピングするページの上限、ページのスクレイピング深度、ページの除外、指定ページのみのスクレイピング、コンテンツの抽出などが含まれます。設定が完了したら **Run** をクリックし、解析結果のページをプレビューします。

解析されたテキストをナレッジベースのドキュメントにインポートし、結果を確認します。**Add URL** をクリックすると、新しいウェブページをさらにインポートできます。

* * *

## 

​

Jina Reader

### 

​

Jina Readerの認証情報の設定

右上隅にあるアバターをクリックし、DataSourceページでJina Readerの認証情報を設定する必要があります。

[Jina Readerの公式サイト](https://jina.ai/reader) にログインして登録を完了し、APIキーを取得してから入力し、保存します。

### 

​

Jina Reader を使用してWebコンテンツをクロールする

ナレッジベース作成のページで**Sync from website** を選択し、スクレイピングの対象どしてのウェブページのURLを入力します。

設定項目には、サブページをクロールするかどうか、クロールされるページ数の上限、サイトマップのクロールを使用するかどうかなどがあります。設定が完了したら **Run** をクリックし、解析結果のページをプレビューします。

解析されたテキストをナレッジベースのドキュメントにインポートし、結果を確認します。**Add URL** をクリックすると、新しいウェブページをさらにインポートできます。

クロールが完了すると、Web ページのコンテンツがナレッジ ベースに組み込まれます。

* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/guides/knowledge-base/create-knowledge-and-upload-documents/import-content-data/sync-from-website.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20from-webs&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/guides/knowledge-base/create-knowledge-and-upload-documents/import-content-data%2Fsync-from-website.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[1.1 Notionデータをインポート](/ja-jp/guides/knowledge-base/create-knowledge-and-upload-documents/import-content-data/sync-from-notion)[2\. チャンクモードの指定](/ja-jp/guides/knowledge-base/create-knowledge-and-upload-documents/chunking-and-cleaning-text)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * Firecrawl
  * Firecrawlの認証情報の設定
  * Firecrawl を使用してWebコンテンツをクロールする
  * Jina Reader
  * Jina Readerの認証情報の設定
  * Jina Reader を使用してWebコンテンツをクロールする



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/guides/knowledge-base/create-knowledge-and-upload-documents/setting-indexing-methods

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

ナレッジベース作成

3\. インデックス方法と検索設定を指定

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

  * ナレッジベース

    * [ナレッジベース](/ja-jp/guides/knowledge-base/readme)
    * ナレッジベース作成

      * [作成手順](/ja-jp/guides/knowledge-base/knowledge-base-creation/introduction)
      * 1\. オンラインデータソースの活用

      * [2\. チャンクモードの指定](/ja-jp/guides/knowledge-base/create-knowledge-and-upload-documents/chunking-and-cleaning-text)
      * [3\. インデックス方法と検索設定を指定](/ja-jp/guides/knowledge-base/create-knowledge-and-upload-documents/setting-indexing-methods)
    * ナレッジベースの管理

    * [メタデータ](/ja-jp/guides/knowledge-base/metadata)
    * [アプリ内でのナレッジベース統合](/ja-jp/guides/knowledge-base/integrate-knowledge-within-application)
    * [リコールテスト/引用帰属](/ja-jp/guides/knowledge-base/retrieval-test-and-citation)
    * [ナレッジベースの要求頻度制限](/ja-jp/guides/knowledge-base/knowledge-request-rate-limit)
    * [外部ナレッジベースとの接続](/ja-jp/guides/knowledge-base/connect-external-knowledge-base)
    * [外部知識API](/ja-jp/guides/knowledge-base/api-documentation/external-knowledge-api-documentation)
  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




ナレッジベース作成

# 3\. インデックス方法と検索設定を指定

Copy page

コンテンツの分割モードを選択した後、構造化されたコンテンツの**インデックス方法** と**検索設定** を行います。

## 

​

インデックス方法の設定

検索エンジンが効率的なインデックスアルゴリズムを通じてユーザーの質問に最も関連するウェブページコンテンツをマッチングするように、インデックス方法の適切さはLLMがナレッジベース内のコンテンツを検索する効率と回答の正確性に直接影響します。

**高品質** と**エコノミー** の2種類のインデックス方法を提供しており、それぞれ異なる検索設定オプションがあります：

元のQ&Aモード（コミュニティ版のみ対応）は、高品質インデックス方法のオプションになりました。

  * 高品質
  * エコノミー



**高品質**

高品質モードでは、Embeddingモデルを使用して、分割されたテキストブロックを数値ベクトルに変換し、大量のテキスト情報をより効果的に圧縮・保存します。**これによりユーザーの質問とテキスト間のマッチングがより正確になります** 。

コンテンツブロックをベクトル化してデータベースに登録した後、ユーザーの質問にマッチするコンテンツブロックを効果的に取り出す検索方法が必要です。高品質モードでは、ベクトル検索、全文検索、ハイブリッド検索の3つの検索設定を提供しています。各設定の詳細については、[検索設定](/_sites/docs.dify.ai/ja-jp/guides/knowledge-base/create-knowledge-and-upload-documents/setting-indexing-methods#%E6%A4%9C%E7%B4%A2%E6%96%B9%E6%B3%95%E3%81%AE%E6%8C%87%E5%AE%9A)を参照してください。

高品質モードを選択した後、現在のナレッジベースのインデックス方法を後から**「エコノミー」インデックスモード**にダウングレードすることはできません。切り替えが必要な場合は、ナレッジベースを新しく作成し、インデックス方法を再選択することをお勧めします。

> Embedding技術とベクトルについての詳細は、[「Embedding技術とDify」](https://mp.weixin.qq.com/s/vmY_CUmETo2IpEBf1nEGLQ)を参照してください。

**Q &Aモードの有効化（オプション、[コミュニティ版](/ja-jp/getting-started/install-self-hosted/faq)のみ）**

このモードを有効にすると、システムはアップロードされたテキストを分割し、各分割のコンテンツを要約して自動的にQ&Aマッチングペアを生成します。一般的な「Q to P」（ユーザーの質問がテキスト段落にマッチング）戦略とは異なり、QAモードでは「Q to Q」（質問が質問にマッチング）戦略を採用しています。

これは「よくある質問」文書内のテキストが**通常、完全な文法構造を持つ自然言語** であるため、Q to Qモードによって質問と回答のマッチングがより明確になり、同時に高頻度で類似度の高い質問のシナリオにも対応できるからです。

> **Q &Aモードは「中国語、英語、日本語」の3言語のみサポートしています。このモードを有効にするとより多くのLLM Tokensを消費する可能性があり、**[**エコノミーインデックス方法**](/ja-jp/guides/knowledge-base/create-knowledge-and-upload-documents/setting-indexing-methods)**は使用できません。**

ユーザーが質問すると、システムは最も類似した質問を見つけ、対応する分割を回答として返します。この方法はより精密で、ユーザーの質問に直接マッチングするため、ユーザーが本当に必要とする情報をより正確に検索できます。

**高品質**

高品質モードでは、Embeddingモデルを使用して、分割されたテキストブロックを数値ベクトルに変換し、大量のテキスト情報をより効果的に圧縮・保存します。**これによりユーザーの質問とテキスト間のマッチングがより正確になります** 。

コンテンツブロックをベクトル化してデータベースに登録した後、ユーザーの質問にマッチするコンテンツブロックを効果的に取り出す検索方法が必要です。高品質モードでは、ベクトル検索、全文検索、ハイブリッド検索の3つの検索設定を提供しています。各設定の詳細については、[検索設定](/_sites/docs.dify.ai/ja-jp/guides/knowledge-base/create-knowledge-and-upload-documents/setting-indexing-methods#%E6%A4%9C%E7%B4%A2%E6%96%B9%E6%B3%95%E3%81%AE%E6%8C%87%E5%AE%9A)を参照してください。

高品質モードを選択した後、現在のナレッジベースのインデックス方法を後から**「エコノミー」インデックスモード**にダウングレードすることはできません。切り替えが必要な場合は、ナレッジベースを新しく作成し、インデックス方法を再選択することをお勧めします。

> Embedding技術とベクトルについての詳細は、[「Embedding技術とDify」](https://mp.weixin.qq.com/s/vmY_CUmETo2IpEBf1nEGLQ)を参照してください。

**Q &Aモードの有効化（オプション、[コミュニティ版](/ja-jp/getting-started/install-self-hosted/faq)のみ）**

このモードを有効にすると、システムはアップロードされたテキストを分割し、各分割のコンテンツを要約して自動的にQ&Aマッチングペアを生成します。一般的な「Q to P」（ユーザーの質問がテキスト段落にマッチング）戦略とは異なり、QAモードでは「Q to Q」（質問が質問にマッチング）戦略を採用しています。

これは「よくある質問」文書内のテキストが**通常、完全な文法構造を持つ自然言語** であるため、Q to Qモードによって質問と回答のマッチングがより明確になり、同時に高頻度で類似度の高い質問のシナリオにも対応できるからです。

> **Q &Aモードは「中国語、英語、日本語」の3言語のみサポートしています。このモードを有効にするとより多くのLLM Tokensを消費する可能性があり、**[**エコノミーインデックス方法**](/ja-jp/guides/knowledge-base/create-knowledge-and-upload-documents/setting-indexing-methods)**は使用できません。**

ユーザーが質問すると、システムは最も類似した質問を見つけ、対応する分割を回答として返します。この方法はより精密で、ユーザーの質問に直接マッチングするため、ユーザーが本当に必要とする情報をより正確に検索できます。

**エコノミー**

エコノミーモードでは、各ブロック内で10個のキーワードを使用して検索し、精度は下がりますが費用は発生しません。検索されたブロックに対しては、逆引きインデックス方式のみで最も関連性の高いブロックを選択します。詳細は[以下](/_sites/docs.dify.ai/ja-jp/guides/knowledge-base/create-knowledge-and-upload-documents/setting-indexing-methods#%E6%A4%9C%E7%B4%A2%E6%96%B9%E6%B3%95%E3%81%AE%E6%8C%87%E5%AE%9A)をお読みください。

エコノミータイプのインデックス方法を選択した後、実際の効果が良くないと感じる場合は、ナレッジベース設定ページで**「高品質」インデックス方法**にアップグレードできます。

## 

​

検索方法の指定 

ナレッジベースはユーザーのクエリを受け取った後、事前設定された検索方法に従って既存の文書内で関連コンテンツを検索し、言語モデルが高品質な回答を生成するために高度に関連する情報の断片を抽出します。これはLLMが取得できる背景情報を決定し、生成結果の正確性と信頼性に影響を与えます。

一般的な検索方法には、ベクトル類似度に基づく意味検索と、キーワードに基づく精密マッチングがあります。前者はテキストコンテンツブロックと質問クエリをベクトルに変換し、ベクトル類似度の計算によってより深いレベルの意味的関連性をマッチングします。後者は検索エンジンでよく使われる検索方法である逆引きインデックスを通じて、質問と重要なコンテンツをマッチングします。

異なるインデックス方法には異なる検索設定があります。

  * 高品質インデックス
  * エコノミーインデックス



**高品質インデックス**

高品質インデックス方法では、Difyはベクトル検索、全文検索、ハイブリッド検索の設定を提供しています：

**ベクトル検索**

**定義：** ユーザーが入力した質問をベクトル化し、クエリテキストの数学ベクトルを生成し、クエリベクトルとナレッジベース内の対応するテキストベクトル間の距離を比較し、隣接する分割コンテンツを探します。

**ベクトル検索設定：**

**Rerankモデル：** デフォルトでは無効です。有効にすると、ベクトル検索によって呼び出されたコンテンツセグメントを第三者のRerankモデルを使用して再度並べ替え、並べ替え結果を最適化します。LLMがより正確なコンテンツを取得し、出力の品質を向上させるのを助けます。このオプションを有効にする前に、「設定」→「モデルプロバイダー」に移動し、RerankモデルのAPIキーを事前に設定する必要があります。

> この機能を有効にすると、Rerankモデルのトークンが消費されます。詳細については、対応するモデルの価格説明を参照してください。

**TopK：** ユーザーの質問との類似度が最も高いテキスト断片をフィルタリングするために使用されます。システムは同時に使用するモデルのコンテキストウィンドウサイズに基づいて断片の数を動的に調整します。デフォルト値は3です。値が高いほど、呼び出されるテキストセグメントの予想数が多くなります。

**Scoreしきい値：** テキスト断片をフィルタリングする類似度のしきい値を設定するために使用され、設定されたスコアを超えるテキスト断片のみを呼び出します。デフォルト値は0.5です。値が高いほど、テキストと質問の類似度の要求が高くなり、呼び出されるテキストの予想数も少なくなります。

> TopKとScore設定はRerankステップでのみ有効であるため、RerankモデルをRerankモデルを追加して有効にする必要があります。

* * *

**全文検索**

**定義：** キーワード検索、つまり文書内のすべての語彙のインデックス作成です。ユーザーが質問を入力した後、明示的なキーワードによってナレッジベース内の対応するテキスト断片をマッチングし、キーワードに合致するテキスト断片を返します。検索エンジンの明示的な検索と類似しています。

**Rerankモデル：** デフォルトでは無効です。有効にすると、全文検索によって呼び出されたコンテンツセグメントを第三者のRerankモデルを使用して再度並べ替え、並べ替え結果を最適化します。LLMに再並べ替えされたセグメントを送信し、出力コンテンツの品質を向上させます。このオプションを有効にする前に、「設定」→「モデルプロバイダー」に移動し、RerankモデルのAPIキーを事前に設定する必要があります。

> この機能を有効にすると、Rerankモデルのトークンが消費されます。詳細については、対応するモデルの価格説明を参照してください。

**TopK：** ユーザーの質問との類似度が最も高いテキスト断片をフィルタリングするために使用されます。システムは同時に使用するモデルのコンテキストウィンドウサイズに基づいて断片の数を動的に調整します。システムのデフォルト値は3です。値が高いほど、呼び出されるテキストセグメントの予想数が多くなります。

**Scoreしきい値：** テキスト断片をフィルタリングする類似度のしきい値を設定するために使用され、設定されたスコアを超えるテキスト断片のみを呼び出します。デフォルト値は0.5です。値が高いほど、テキストと質問の類似度の要求が高くなり、呼び出されるテキストの予想数も少なくなります。

> TopKとScore設定はRerankステップでのみ有効であるため、RerankモデルをRerankモデルを追加して有効にする必要があります。

* * *

**ハイブリッド検索**

**定義：** 全文検索とベクトル検索、またはRerankモデルを同時に実行し、クエリ結果からユーザーの質問に最もマッチする最良の結果を選択します。

ハイブリッド検索設定では、**「重み付け設定」**または** 「Rerankモデル」**の有効化を選択できます。

  * **重み付け設定**

ユーザーが意味的優先度とキーワード優先度にカスタム重みを付けることができます。キーワード検索はナレッジベース内での全文検索（Full Text Search）を指し、意味検索はナレッジベース内でのベクトル検索（Vector Search）を指します。

    * **意味値を1にする**

**意味検索モードのみを有効にします** 。Embeddingモデルを活用することで、クエリに含まれる正確な単語がナレッジベースになくても、ベクトル距離を計算することで検索の深度を高め、正確なコンテンツを返すことができます。また、多言語コンテンツを処理する必要がある場合、意味検索は異なる言語間の意味変換をキャプチャし、より正確なクロス言語検索結果を提供できます。

    * **キーワード値を1にする**

**キーワード検索モードのみを有効にします** 。ユーザーが入力した情報テキストをナレッジベース全体でマッチングし、ユーザーが正確な情報や用語を知っているシナリオに適しています。この方法は消費する計算リソースが比較的少なく、大量の文書を含むナレッジベース内での迅速な検索に適しています。

    * **キーワードと意味の重みをカスタマイズする**

異なる値を1に引き上げるだけでなく、両者の重みを継続的に調整して、ビジネスシナリオに合った最適な重み比率を見つけることができます。




> 意味検索とは、ユーザーの質問とナレッジベースコンテンツ内のベクトル間の距離を比較することを指します。距離が近いほど、マッチングの確率が高くなります。参考文献：[「Dify：Embedding技術とDifyナレッジベースの設計/計画」](https://mp.weixin.qq.com/s/vmY_CUmETo2IpEBf1nEGLQ)。

* * *

  * **Rerankモデル**

デフォルトでは無効です。有効にすると、ハイブリッド検索によって呼び出されたコンテンツセグメントを第三者のRerankモデルを使用して再度並べ替え、並べ替え結果を最適化します。LLMに再並べ替えされたセグメントを送信し、出力コンテンツの品質を向上させます。このオプションを有効にする前に、「設定」→「モデルプロバイダー」に移動し、RerankモデルのAPIキーを事前に設定する必要があります。

> この機能を有効にすると、Rerankモデルのトークンが消費されます。詳細については、対応するモデルの価格説明を参照してください。




**「重み付け設定」**と** 「Rerankモデル」**設定では、以下のオプションを有効にすることができます：

**TopK：** ユーザーの質問との類似度が最も高いテキスト断片をフィルタリングするために使用されます。システムは同時に使用するモデルのコンテキストウィンドウサイズに基づいて断片の数を動的に調整します。システムのデフォルト値は3です。値が高いほど、呼び出されるテキストセグメントの予想数が多くなります。

**Scoreしきい値：** テキスト断片をフィルタリングする類似度のしきい値を設定するために使用されます。つまり、設定されたスコアを超えるテキスト断片のみを呼び出します。システムはデフォルトでこの設定を無効にしています。つまり、呼び出されたテキスト断片の類似値をフィルタリングしません。有効にするとデフォルト値は0.5です。値が高いほど、呼び出されるテキストの予想数は少なくなります。

**高品質インデックス**

高品質インデックス方法では、Difyはベクトル検索、全文検索、ハイブリッド検索の設定を提供しています：

**ベクトル検索**

**定義：** ユーザーが入力した質問をベクトル化し、クエリテキストの数学ベクトルを生成し、クエリベクトルとナレッジベース内の対応するテキストベクトル間の距離を比較し、隣接する分割コンテンツを探します。

**ベクトル検索設定：**

**Rerankモデル：** デフォルトでは無効です。有効にすると、ベクトル検索によって呼び出されたコンテンツセグメントを第三者のRerankモデルを使用して再度並べ替え、並べ替え結果を最適化します。LLMがより正確なコンテンツを取得し、出力の品質を向上させるのを助けます。このオプションを有効にする前に、「設定」→「モデルプロバイダー」に移動し、RerankモデルのAPIキーを事前に設定する必要があります。

> この機能を有効にすると、Rerankモデルのトークンが消費されます。詳細については、対応するモデルの価格説明を参照してください。

**TopK：** ユーザーの質問との類似度が最も高いテキスト断片をフィルタリングするために使用されます。システムは同時に使用するモデルのコンテキストウィンドウサイズに基づいて断片の数を動的に調整します。デフォルト値は3です。値が高いほど、呼び出されるテキストセグメントの予想数が多くなります。

**Scoreしきい値：** テキスト断片をフィルタリングする類似度のしきい値を設定するために使用され、設定されたスコアを超えるテキスト断片のみを呼び出します。デフォルト値は0.5です。値が高いほど、テキストと質問の類似度の要求が高くなり、呼び出されるテキストの予想数も少なくなります。

> TopKとScore設定はRerankステップでのみ有効であるため、RerankモデルをRerankモデルを追加して有効にする必要があります。

* * *

**全文検索**

**定義：** キーワード検索、つまり文書内のすべての語彙のインデックス作成です。ユーザーが質問を入力した後、明示的なキーワードによってナレッジベース内の対応するテキスト断片をマッチングし、キーワードに合致するテキスト断片を返します。検索エンジンの明示的な検索と類似しています。

**Rerankモデル：** デフォルトでは無効です。有効にすると、全文検索によって呼び出されたコンテンツセグメントを第三者のRerankモデルを使用して再度並べ替え、並べ替え結果を最適化します。LLMに再並べ替えされたセグメントを送信し、出力コンテンツの品質を向上させます。このオプションを有効にする前に、「設定」→「モデルプロバイダー」に移動し、RerankモデルのAPIキーを事前に設定する必要があります。

> この機能を有効にすると、Rerankモデルのトークンが消費されます。詳細については、対応するモデルの価格説明を参照してください。

**TopK：** ユーザーの質問との類似度が最も高いテキスト断片をフィルタリングするために使用されます。システムは同時に使用するモデルのコンテキストウィンドウサイズに基づいて断片の数を動的に調整します。システムのデフォルト値は3です。値が高いほど、呼び出されるテキストセグメントの予想数が多くなります。

**Scoreしきい値：** テキスト断片をフィルタリングする類似度のしきい値を設定するために使用され、設定されたスコアを超えるテキスト断片のみを呼び出します。デフォルト値は0.5です。値が高いほど、テキストと質問の類似度の要求が高くなり、呼び出されるテキストの予想数も少なくなります。

> TopKとScore設定はRerankステップでのみ有効であるため、RerankモデルをRerankモデルを追加して有効にする必要があります。

* * *

**ハイブリッド検索**

**定義：** 全文検索とベクトル検索、またはRerankモデルを同時に実行し、クエリ結果からユーザーの質問に最もマッチする最良の結果を選択します。

ハイブリッド検索設定では、**「重み付け設定」**または** 「Rerankモデル」**の有効化を選択できます。

  * **重み付け設定**

ユーザーが意味的優先度とキーワード優先度にカスタム重みを付けることができます。キーワード検索はナレッジベース内での全文検索（Full Text Search）を指し、意味検索はナレッジベース内でのベクトル検索（Vector Search）を指します。

    * **意味値を1にする**

**意味検索モードのみを有効にします** 。Embeddingモデルを活用することで、クエリに含まれる正確な単語がナレッジベースになくても、ベクトル距離を計算することで検索の深度を高め、正確なコンテンツを返すことができます。また、多言語コンテンツを処理する必要がある場合、意味検索は異なる言語間の意味変換をキャプチャし、より正確なクロス言語検索結果を提供できます。

    * **キーワード値を1にする**

**キーワード検索モードのみを有効にします** 。ユーザーが入力した情報テキストをナレッジベース全体でマッチングし、ユーザーが正確な情報や用語を知っているシナリオに適しています。この方法は消費する計算リソースが比較的少なく、大量の文書を含むナレッジベース内での迅速な検索に適しています。

    * **キーワードと意味の重みをカスタマイズする**

異なる値を1に引き上げるだけでなく、両者の重みを継続的に調整して、ビジネスシナリオに合った最適な重み比率を見つけることができます。




> 意味検索とは、ユーザーの質問とナレッジベースコンテンツ内のベクトル間の距離を比較することを指します。距離が近いほど、マッチングの確率が高くなります。参考文献：[「Dify：Embedding技術とDifyナレッジベースの設計/計画」](https://mp.weixin.qq.com/s/vmY_CUmETo2IpEBf1nEGLQ)。

* * *

  * **Rerankモデル**

デフォルトでは無効です。有効にすると、ハイブリッド検索によって呼び出されたコンテンツセグメントを第三者のRerankモデルを使用して再度並べ替え、並べ替え結果を最適化します。LLMに再並べ替えされたセグメントを送信し、出力コンテンツの品質を向上させます。このオプションを有効にする前に、「設定」→「モデルプロバイダー」に移動し、RerankモデルのAPIキーを事前に設定する必要があります。

> この機能を有効にすると、Rerankモデルのトークンが消費されます。詳細については、対応するモデルの価格説明を参照してください。




**「重み付け設定」**と** 「Rerankモデル」**設定では、以下のオプションを有効にすることができます：

**TopK：** ユーザーの質問との類似度が最も高いテキスト断片をフィルタリングするために使用されます。システムは同時に使用するモデルのコンテキストウィンドウサイズに基づいて断片の数を動的に調整します。システムのデフォルト値は3です。値が高いほど、呼び出されるテキストセグメントの予想数が多くなります。

**Scoreしきい値：** テキスト断片をフィルタリングする類似度のしきい値を設定するために使用されます。つまり、設定されたスコアを超えるテキスト断片のみを呼び出します。システムはデフォルトでこの設定を無効にしています。つまり、呼び出されたテキスト断片の類似値をフィルタリングしません。有効にするとデフォルト値は0.5です。値が高いほど、呼び出されるテキストの予想数は少なくなります。

**逆引きインデックス**

エコノミーインデックス方法では、**逆引きインデックス方式** のみが提供されます。これは文書内のキーワードを迅速に検索するためのインデックス構造で、オンライン検索エンジンでよく使用されています。逆引きインデックスは**TopK** 設定項目のみをサポートしています。

**TopK：**

ユーザーの質問との類似度が最も高いテキスト断片をフィルタリングするために使用されます。システムは同時に使用するモデルのコンテキストウィンドウサイズに基づいて断片の数を動的に調整します。システムのデフォルト値は3です。値が高いほど、呼び出されるテキストセグメントの予想数が多くなります。

## 

​

もっと読む

検索設定を指定した後、以下のドキュメントを参照して、実際のシナリオでのキーワードとコンテンツブロックのマッチング状況を確認できます。

## [リコールテスト/引用と帰属実際のシナリオでのキーワードとコンテンツブロックのマッチング状況を確認する](../retrieval-test-and-citation)

* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/guides/knowledge-base/create-knowledge-and-upload-documents/setting-indexing-methods.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20ng-indexing-meth&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/guides/knowledge-base/create-knowledge-and-upload-documents%2Fsetting-indexing-methods.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[2\. チャンクモードの指定](/ja-jp/guides/knowledge-base/create-knowledge-and-upload-documents/chunking-and-cleaning-text)[ナレッジベースの管理](/ja-jp/guides/knowledge-base/knowledge-and-documents-maintenance/readme)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * インデックス方法の設定
  * 検索方法の指定 
  * もっと読む



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/guides/knowledge-base/integrate-knowledge-within-application

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

ナレッジベース

アプリ内でのナレッジベース統合

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

  * ナレッジベース

    * [ナレッジベース](/ja-jp/guides/knowledge-base/readme)
    * ナレッジベース作成

    * ナレッジベースの管理

    * [メタデータ](/ja-jp/guides/knowledge-base/metadata)
    * [アプリ内でのナレッジベース統合](/ja-jp/guides/knowledge-base/integrate-knowledge-within-application)
    * [リコールテスト/引用帰属](/ja-jp/guides/knowledge-base/retrieval-test-and-citation)
    * [ナレッジベースの要求頻度制限](/ja-jp/guides/knowledge-base/knowledge-request-rate-limit)
    * [外部ナレッジベースとの接続](/ja-jp/guides/knowledge-base/connect-external-knowledge-base)
    * [外部知識API](/ja-jp/guides/knowledge-base/api-documentation/external-knowledge-api-documentation)
  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




ナレッジベース

# アプリ内でのナレッジベース統合

Copy page

### 

​

1 ナレッジベースの引用プロセス

ナレッジベースは、大言語モデルに対して外部知識を提供し、ユーザーの質問に正確に回答するために使用されます。Difyの[すべてのアプリタイプ](../application-orchestrate/#application_type)内で作成されたナレッジベースを関連付けることができます。

チャットボットを例にすると、以下の手順で進めます：

  1. **スタジオ — アプリを作成 — チャットボットを作成** に進む
  2. **コンテキスト設定** に進み、**追加** をクリックし、作成済みのナレッジベースを選択
  3. **コンテキスト設定 — パラメータ設定** 内で**リコール策略** を設定
  4. ナレッジベース内のドキュメント検索を最適化するには、**メタデータフィルタリング** を活用します。
  5. **コンテキスト設定 - 検索設定** で**検索パラメータ** を構成します。
  6. **機能追加** 内で**引用と帰属** をオンにする
  7. **デバッグとプレビュー** 内でナレッジベース関連のユーザー質問を入力してデバッグ
  8. デバッグが完了したら、**保存して公開** し、AIナレッジベースQ&Aアプリケーションとして公開



* * *

### 

​

ナレッジベースの関連付けとリコールモードの設定

現在のアプリケーションのコンテキストが複数のナレッジベースに関連している場合、検索結果をより正確にするためにリコールモードを設定する必要があります。**コンテキスト→パラメータ設定→リコール設定** に進み、ナレッジベースのリコールモードを選択します。

#### 

​

検索設定

複数リコールモードでは、検索器はアプリに関連付けられたすべてのナレッジベースから、ユーザーの問題に関連するテキスト内容を検索します。そして、複数リコールの関連文書結果を統合します。以下は複数リコールモードの技術フローチャートです：

ユーザーの意図に基づいて、すべての **「コンテキスト」** に追加されたナレッジベースを同時に検索し、関連するテキスト断片を複数のナレッジベースからクエリし、ユーザーの問題に最も一致する内容を選択します。最適なコンテンツをRerank戦略で見つけてユーザーに回答します。この方法はより科学的な検索原理です。

例：アプリAのコンテキストには、K1、K2、K3 の3つのナレッジベースが関連付けられています。ユーザーが問い合わせを入力すると、3つのナレッジベースで検索を行い、複数の内容をまとめます。最適な内容を見つけるためには、Rerank戦略を使用してユーザーの問題に最も関連する内容を特定し、結果をより正確で信頼性の高いものにします。

実際の質疑応答シーンでは、各ナレッジベースのコンテンツの出典や検索方法が異なる場合があります。複数の混合コンテンツが返される検索に対して、[Rerank戦略](https://docs.dify.ai/v/ja-jp/learn-more/extended-reading/retrieval-augment/rerank)はより科学的なコンテンツの並べ替えメカニズムです。これにより、候補コンテンツリストをユーザーの問題に一致させ、複数の知識間の結果の順序を改善し、最も一致するコンテンツを見つけて回答の質とユーザーエクスペリエンスを向上させることができます。

Rerankの使用コストとビジネス要件を考慮すると、複数リコールモードは次の2つのRerank設定を提供します：

#### 

​

重み設定

この設定には外部のRerankモデルの構成は不要で、コンテンツの再並べ替えに**追加コストは発生しません** 。セマンティクスまたはキーワードの重み比率を設定します。

  * **セマンティック値が1の場合**

セマンティック検索モードが有効になります。このモードでは、埋め込みモデルを利用して、クエリに正確な単語がナレッジベースに存在しない場合でも、ベクトル距離を計算することで検索の精度を向上させ、適切なコンテンツを返すことができます。また、複数言語のコンテンツを扱う場合には、セマンティック検索が異なる言語間の意味を把握し、より正確なクロス言語検索結果を提供します。

  * **キーワード値が1の場合**

この場合、キーワード検索モードが有効になります。ユーザーが入力した情報テキストがナレッジベース全体と一致し、ユーザーが正確な情報や用語を把握している場合に適しています。この方法は計算リソースを少なく消費し、大量の文書を迅速に検索するのに適しています。

  * **カスタムキーワードとセマンティックの重み**

セマンティック検索またはキーワード検索モードのいずれかを選択する代わりに、柔軟なカスタム重み設定も利用可能です。両者の重みを調整し続けることで、ビジネスシナリオに最も適した重み比率を見つけることができます。




**Rerankモデル**

Rerankモデルは外部のスコアリングシステムで、ユーザーの質問と各候補文書の関連性スコアを計算します。これにより、セマンティックソートの結果が改善され、関連性に基づいて高い順に並べ替えられた文書リストが返されます。

この方法には追加のコストが発生しますが、ナレッジベースのコンテンツが複雑な場合に特に適しています。セマンティッククエリとキーワードマッチングのコンテンツが混在している場合や、複数言語のコンテンツが含まれる場合に優れた結果を提供します。

> より詳細な情報は[リコール拡張](https://docs.dify.ai/v/ja-jp/learn-more/extended-reading/retrieval-augment/rerank)メカニズムをご覧ください。

Difyは現在、複数のRerankモデルをサポートしており、“モデルサプライヤー”ページでRerankモデル（例：Cohere、Jina AIなど）のAPIキーを入力することができます。

**調整可能なパラメータ**

  * **TopK**

ユーザーの質問に最も類似したテキストセグメントを選択するために使用されます。システムはモデルの選択に基づいてコンテキストウィンドウサイズを動的に調整し、セグメントの数を増やします。数値が高いほど、リコールされるテキストセグメントの数が増加します。

  * **スコアの閾値**

テキストセグメントの選択に使用される類似性の閾値を設定します。ベクトル検索の類似性スコアは、設定したスコアを超える必要があり、数値が高いほどリコールされるテキストの数が減少します。




複数のリコールモードを利用することで、高品質なリコール効果を得ることができるため、リコールモードを複数のリコールモードに設定することを強くお勧めします。

### 

​

メタデータを使用して知識をフィルタリングする

#### 

​

チャットフロー/ワークフロー

**チャットフロー/ワークフロー** の**知識検索** ノードでは、**メタデータフィルタリング** 機能を使用して文書を正確に検索できます。この機能は、文書のメタデータフィールド（タグ、カテゴリ、アクセス権限など）に基づいて検索結果を最適化するのに役立ちます。

**設定手順**

  1. フィルタリングモードを選択する

     * **無効モード** （デフォルト）：**メタデータフィルタリング** 機能を無効にし、フィルタリング条件を設定しません。

     * **自動モード** ：システムは**知識検索** ノードに渡される**クエリ変数** に基づいてフィルタリング条件を自動的に設定します。簡単なフィルタリング要件に適しています。

> 自動モードを有効にした後も、**モデル** 欄で文書検索タスクを実行するための適切な大規模モデルを選択する必要があります。

     * **手動モード** ：ユーザーが手動でフィルタリング条件を設定し、フィルタリングルールを自由に設定できます。複雑なフィルタリング要件に適しています。



  2. **手動モード** を選択した場合は、以下の手順でフィルタリング条件を設定してください：

     1. **条件** ボタンをクリックすると、設定ボックスが表示されます。

     2. 設定ボックスの**+条件を追加**ボタンをクリックします：

        * ドロップダウンリストから選択したナレッジベース内の既存のメタデータフィールドを選択し、フィルタリング条件リストに追加できます。

> 複数のナレッジベースを同時に選択した場合、ドロップダウンリストにはこれらのナレッジベースに共通するメタデータフィールドのみが表示されます。

        * **メタデータを検索** 検索ボックスで必要なフィールドを検索し、フィルタリング条件リストに追加することもできます。

     3. 複数のフィールドを追加する必要がある場合は、**+条件を追加** ボタンを繰り返しクリックします。

     4. フィールドタイプごとのフィルタリング条件を設定します：
フィールドタイプ| フィルタリング条件| フィルタリング条件の説明と例  
---|---|---  
文字列| is| フィールドの値は入力した値と完全に一致する必要があります。例えば、フィルタリング条件を is `"公開済み"` に設定した場合、「公開済み」とマークされた文書のみが返されます。  
is not| フィールドの値は入力した値と一致してはいけません。例えば、フィルタリング条件を `is not "下書き"` に設定した場合、「下書き」とマークされていないすべての文書が返されます。|   
is empty| フィールドの値が空です。この条件を設定すると、その文字列がマークされていない文書を検索できます。|   
is not empty| フィールドの値が空ではありません。この条件を設定すると、その文字列がマークされている文書を検索できます。|   
contains| フィールドの値に入力したテキストが含まれています。例えば、フィルタリング条件を `contains "レポート"` に設定した場合、「月次レポート」や「年次レポート」など、「レポート」を含むすべての文書が返されます。|   
not contains| フィールドの値に入力したテキストが含まれていません。例えば、フィルタリング条件を `not contains "下書き"` に設定した場合、「下書き」を含まないすべての文書が返されます。|   
starts with| フィールドの値が入力したテキストで始まります。例えば、フィルタリング条件を `starts with "Doc"` に設定した場合、「Doc1」や「Document」など、「Doc」で始まるすべての文書が返されます。|   
ends with| フィールドの値が入力したテキストで終わります。例えば、フィルタリング条件を `ends with "2024"` に設定した場合、「レポート 2024」や「概要 2024」など、「2024」で終わるすべての文書が返されます。|   
数値| =| フィールドの値は入力した数値と等しい必要があります。例えば、`= 10` は数値が10とマークされているすべての文書に一致します。  
≠| フィールドの値は入力した数値と等しくてはいけません。例えば、`≠ 5` は数値が5とマークされていないすべての文書を返します。|   
>| フィールドの値は入力した数値より大きい必要があります。例えば、`> 100` は数値が100より大きいとマークされているすべての文書を返します。|   
<| フィールドの値は入力した数値より小さい必要があります。例えば、`< 50` は数値が50より小さいとマークされているすべての文書を返します。|   
≥| フィールドの値は入力した数値以上である必要があります。例えば、`≥ 20` は数値が20以上とマークされているすべての文書を返します。|   
≤| フィールドの値は入力した数値以下である必要があります。例えば、`≤ 200` は数値が200以下とマークされているすべての文書を返します。|   
is empty| フィールドに値が設定されていません。例えば、`is empty` はそのフィールドに数値がマークされていないすべての文書を返します。|   
is not empty| フィールドに値が設定されています。例えば、`is not empty` はそのフィールドに数値がマークされているすべての文書を返します。|   
時間| is| フィールドの時間値は選択した時間と完全に一致する必要があります。例えば、`is "2024-01-01"` は2024年1月1日とマークされている文書のみを返します。  
before| フィールドの時間値は選択した時間より前でなければなりません。例えば、`before "2024-01-01"` は2024年1月1日より前とマークされているすべての文書を返します。|   
after| フィールドの時間値は選択した時間より後でなければなりません。例えば、`after "2024-01-01"` は2024年1月1日より後とマークされているすべての文書を返します。|   
is empty| フィールドの時間値が空です。この条件を設定すると、その時間情報がマークされていない文书を検索できます。|   
is not empty| フィールドの時間値が空ではありません。この条件を設定すると、その时间信息がマークされている文书を検索できます。|   
     5. メタデータフィルタリング値を選択して追加します：

        * **変数** ：**変数（Variable）を選択し、そのチャットフロー/ワークフロー** 内で文書のフィルタリングに使用する変数を選択します。

        * **定数** ：**定数（Constant）**を選択し、必要な定数値を手動で入力します。

> **时间** フィールドタイプは定数のみを使用した文書フィルタリングをサポートしています。时间フィールドを使用して文书をフィルタリングする場合、システムは时间选択ツールを表示し、特定の时点を选択できるようにします。

定数フィルタリング值を入力する場合、そのフィルタリング值はそのメタデータフィールド值のテキストと完全に一致する必要があり、システムはその文書を返します。例えば、フィルタリング条件を `starts with "アプリ"` または `contains "アプリ"` に設定した場合、システムは「Apple」とマークされた文書を返しますが、「apple」や「APPLE」とマークされた文书は返しません。

     6. フィルタリング条件间の论理関系 `AND` または `OR` を设置します。
        * `AND`：文书がすべてのフィルタリング条件を满足する場合にのみ、その文书を検索できます。
        * `OR`：文书がいずれかのフィルタリング条件を满足する場合、その文书を検索できます。

     7. ポップアップを闭じると、システムは自动的に选択内容を保存します。

**チャットボット**

**チャットボット** では、**メタデータフィルタリング** 构能はインターフェースの左下にある**コンテキスト** セクションの下に位置し、设置方法は**チャットフロー/ワークフロー** での操做と同じです。同じ手顺でメタデータフィルタリング条件を设置できます。

#### 

​

ナレッジベースでリンクされたアプリを表示する

ナレッジベースの左侧に関連するアプリを表示し、アプリケーションページでの变更をサポートします。

#### 

​

よくある質問

     1. **複数のリコールモードでのRerank設定の選択方法は？**

ユーザーが正确な信息や用语を知っている場合は、キーワード検索を使用して一致する结果を正确に取得できるため、「重み设置」の**キーワード优先モード** をおすすめします。

ナレッジベースに正确な単语が表示されていない场合や、クロス语言クエリがある场合は、「重み设置」の**セマンティック优先モード** を选択することをおすすめします。

ビジネスユーザーが实际の质问シナリオに详しく、セマンティックまたはキーワードの比率を积极的に调整したい场合は、「重み设置」の**カスタムモード** を选択することをお勧めします。

ナレッジベースのコンテンツが复杂であり、セマンティックまたはキーワードのシンプルな条件で一致させることができない场合、伤っ正确な返信が必要で追加料金を支払うことを望む场合は、コンテンツ检索に**Rerankモデル** を使用することをおすすめします。

     2. **「重み设置」が见つからない、またはRerankモデルの设定が必要な场合、どのように対処すれば良いですか？**

以下は、複数のリコール方法がナレッジベース検索に与える影响を示します：

     3. **複数のナレッジベースを引用する际、「重み设置」を调整できず、エラーが表示される场合はどう対処すれば良いですか？**

この问题が发生すると、引用される複数のナレッジベースで使用される埋め込みモデルが一致しないためです。检索コンテンツの竞争を避けるためには、以下の推荐解决策を试みてください。「モデルプロバイダー」で设置を行い、Rerankモデルを有効にするか、ナレッジベースの検索设置を统一してください。

     4. **複数のリコール方法が使用されている场合、「重み设置」オプションが见つからず、Rerankモデルしか表示されない理由は何ですか？**

ナレッジベースが「エコノミー」モードのインデックスモードを使用しているかどうかを确认してください。その场合は、「ハイクオリティ」モードのインデックスモードに切り替えてください。




* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/guides/knowledge-base/integrate-knowledge-within-application.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20rate-knowledge-within-applicat&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/guides/knowledge-base%2Fintegrate-knowledge-within-application.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[メタデータ](/ja-jp/guides/knowledge-base/metadata)[リコールテスト/引用帰属](/ja-jp/guides/knowledge-base/retrieval-test-and-citation)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * 1 ナレッジベースの引用プロセス
  * ナレッジベースの関連付けとリコールモードの設定
  * 検索設定
  * 重み設定
  * メタデータを使用して知識をフィルタリングする
  * チャットフロー/ワークフロー



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/guides/knowledge-base/knowledge-and-documents-maintenance/maintain-dataset-via-api

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

ナレッジベースの管理

APIを活用したナレッジベースのメンテナンス

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

  * ナレッジベース

    * [ナレッジベース](/ja-jp/guides/knowledge-base/readme)
    * ナレッジベース作成

    * ナレッジベースの管理

      * [ナレッジベースの管理](/ja-jp/guides/knowledge-base/knowledge-and-documents-maintenance/readme)
      * [ナレッジベース内のドキュメントの管理](/ja-jp/guides/knowledge-base/knowledge-and-documents-maintenance/maintain-knowledge-documents)
      * [APIを活用したナレッジベースのメンテナンス](/ja-jp/guides/knowledge-base/knowledge-and-documents-maintenance/maintain-dataset-via-api)
    * [メタデータ](/ja-jp/guides/knowledge-base/metadata)
    * [アプリ内でのナレッジベース統合](/ja-jp/guides/knowledge-base/integrate-knowledge-within-application)
    * [リコールテスト/引用帰属](/ja-jp/guides/knowledge-base/retrieval-test-and-citation)
    * [ナレッジベースの要求頻度制限](/ja-jp/guides/knowledge-base/knowledge-request-rate-limit)
    * [外部ナレッジベースとの接続](/ja-jp/guides/knowledge-base/connect-external-knowledge-base)
    * [外部知識API](/ja-jp/guides/knowledge-base/api-documentation/external-knowledge-api-documentation)
  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




ナレッジベースの管理

# APIを活用したナレッジベースのメンテナンス

Copy page

> 認証や呼び出し方法はサービスAPIと同様ですが、生成される各ナレッジベースAPIトークンには、現在のアカウントでアクセス可能なすべてのナレッジベースを操作する権限が付与されています。データの安全性には十分ご注意ください。

## 

​

ナレッジベースAPI活用のメリット

APIによるナレッジベース管理はデータ処理効率を飛躍的に向上させます。コマンドラインからのデータ同期や自動化操作を容易に実現でき、UI操作の煩雑さから解放されます。

主なメリット：

  * **自動同期** : データシステムとDifyナレッジベースをシームレスに連携し、効率的なワークフローを構築。
  * **総合管理** : ナレッジベースリスト、ドキュメントリスト、詳細検索機能を提供し、カスタム管理インターフェースの構築が可能。
  * **柔軟なアップロード** : テキスト直接入力とファイルアップロードを両方サポート、チャンク単位の一括操作に対応。
  * **生産性向上** : 手動作業時間を削減し、Difyプラットフォームの利用体験を最適化。



## 

​

使用方法

ナレッジベース管理画面左側ナビゲーションの**API** ページにアクセス。APIドキュメントの閲覧や、**APIキー** による認証情報の管理が可能です。

## 

​

API呼び出しの例

### 

​

テクストを通してドキュメントを作成する

入力例：
    
    
    curl --location --request POST 'https://api.dify.ai/v1/datasets/{dataset_id}/document/create-by-text' \
    --header 'Authorization: Bearer {api_key}' \
    --header 'Content-Type: application/json' \
    --data-raw '{"name": "text","text": "text","indexing_technique": "high_quality","process_rule": {"mode": "automatic"}}'

出力例：
    
    
    {
      "document": {
        "id": "",
        "position": 1,
        "data_source_type": "upload_file",
        "data_source_info": {
            "upload_file_id": ""
        },
        "dataset_process_rule_id": "",
        "name": "text.txt",
        "created_from": "api",
        "created_by": "",
        "created_at": 1695690280,
        "tokens": 0,
        "indexing_status": "waiting",
        "error": null,
        "enabled": true,
        "disabled_at": null,
        "disabled_by": null,
        "archived": false,
        "display_status": "queuing",
        "word_count": 0,
        "hit_count": 0,
        "doc_form": "text_model"
      },
      "batch": ""
    }

### 

​

ファイルを通してドキュメントを作成する

入力例：
    
    
    curl --location --request POST 'https://api.dify.ai/v1/datasets/{dataset_id}/document/create_by_file' \
    --header 'Authorization: Bearer {api_key}' \
    --form 'data="{"indexing_technique":"high_quality","process_rule":{"rules":{"pre_processing_rules":[{"id":"remove_extra_spaces","enabled":true},{"id":"remove_urls_emails","enabled":true}],"segmentation":{"separator":"###","max_tokens":500}},"mode":"custom"}}";type=text/plain' \
    --form 'file=@"/path/to/file"'

出力例：
    
    
    {
      "document": {
        "id": "",
        "position": 1,
        "data_source_type": "upload_file",
        "data_source_info": {
          "upload_file_id": ""
        },
        "dataset_process_rule_id": "",
        "name": "Dify.txt",
        "created_from": "api",
        "created_by": "",
        "created_at": 1695308667,
        "tokens": 0,
        "indexing_status": "waiting",
        "error": null,
        "enabled": true,
        "disabled_at": null,
        "disabled_by": null,
        "archived": false,
        "display_status": "queuing",
        "word_count": 0,
        "hit_count": 0,
        "doc_form": "text_model"
      },
      "batch": ""
    }

### 

​

空白のナレッジベースを作成する

空のデータセットを作成するためだけに使用

入力例：
    
    
    curl --location --request POST 'https://api.dify.ai/v1/datasets' \
    --header 'Authorization: Bearer {api_key}' \
    --header 'Content-Type: application/json' \
    --data-raw '{"name": "name", "permission": "only_me"}'

出力例：
    
    
    {
      "id": "",
      "name": "name",
      "description": null,
      "provider": "vendor",
      "permission": "only_me",
      "data_source_type": null,
      "indexing_technique": null,
      "app_count": 0,
      "document_count": 0,
      "word_count": 0,
      "created_by": "",
      "created_at": 1695636173,
      "updated_by": "",
      "updated_at": 1695636173,
      "embedding_model": null,
      "embedding_model_provider": null,
      "embedding_available": null
    }

### 

​

ナレッジベースリスト

入力例：
    
    
    curl --location --request GET 'https://api.dify.ai/v1/datasets?page=1&limit=20' \
    --header 'Authorization: Bearer {api_key}'

出力例：
    
    
    {
      "data": [
        {
          "id": "",
          "name": "ナレッジベースの名前",
          "description": "情報説明",
          "permission": "only_me",
          "data_source_type": "upload_file",
          "indexing_technique": "",
          "app_count": 2,
          "document_count": 10,
          "word_count": 1200,
          "created_by": "",
          "created_at": "",
          "updated_by": "",
          "updated_at": ""
        },
        ...
      ],
      "has_more": true,
      "limit": 20,
      "total": 50,
      "page": 1
    }

### 

​

ナレッジベースの削除

入力例：
    
    
    curl --location --request DELETE 'https://api.dify.ai/v1/datasets/{dataset_id}' \
    --header 'Authorization: Bearer {api_key}'

出力例：
    
    
    204 No Content

### 

​

テクストを通してドキュメントを更新する

このAPIは存在しているナレッジベースにしか使えます。

入力例：
    
    
    curl --location --request POST 'https://api.dify.ai/v1/datasets/{dataset_id}/documents/{document_id}/update_by_text' \
    --header 'Authorization: Bearer {api_key}' \
    --header 'Content-Type: application/json' \
    --data-raw '{"name": "name","text": "text"}'

出力例：
    
    
    {
      "document": {
        "id": "",
        "position": 1,
        "data_source_type": "upload_file",
        "data_source_info": {
          "upload_file_id": ""
        },
        "dataset_process_rule_id": "",
        "name": "name.txt",
        "created_from": "api",
        "created_by": "",
        "created_at": 1695308667,
        "tokens": 0,
        "indexing_status": "waiting",
        "error": null,
        "enabled": true,
        "disabled_at": null,
        "disabled_by": null,
        "archived": false,
        "display_status": "queuing",
        "word_count": 0,
        "hit_count": 0,
        "doc_form": "text_model"
      },
      "batch": ""
    }

### 

​

ファイルを通してドキュメントを更新する

このAPIは存在しているナレッジベースにしか使えます。

入力例：
    
    
    curl --location --request POST 'https://api.dify.ai/v1/datasets/{dataset_id}/documents/{document_id}/update_by_file' \
    --header 'Authorization: Bearer {api_key}' \
    --form 'data="{"name":"Dify","indexing_technique":"high_quality","process_rule":{"rules":{"pre_processing_rules":[{"id":"remove_extra_spaces","enabled":true},{"id":"remove_urls_emails","enabled":true}],"segmentation":{"separator":"###","max_tokens":500}},"mode":"custom"}}";type=text/plain' \
    --form 'file=@"/path/to/file"'

出力例：
    
    
    {
      "document": {
        "id": "",
        "position": 1,
        "data_source_type": "upload_file",
        "data_source_info": {
          "upload_file_id": ""
        },
        "dataset_process_rule_id": "",
        "name": "Dify.txt",
        "created_from": "api",
        "created_by": "",
        "created_at": 1695308667,
        "tokens": 0,
        "indexing_status": "waiting",
        "error": null,
        "enabled": true,
        "disabled_at": null,
        "disabled_by": null,
        "archived": false,
        "display_status": "queuing",
        "word_count": 0,
        "hit_count": 0,
        "doc_form": "text_model"
      },
      "batch": "20230921150427533684"
    }

### 

​

ドキュメント埋め込みステータス(進捗状況)の取得

入力例：
    
    
    curl --location --request GET 'https://api.dify.ai/v1/datasets/{dataset_id}/documents/{batch}/indexing-status' \
    --header 'Authorization: Bearer {api_key}'

出力例：
    
    
    {
      "data":[{
        "id": "",
        "indexing_status": "indexing",
        "processing_started_at": 1681623462.0,
        "parsing_completed_at": 1681623462.0,
        "cleaning_completed_at": 1681623462.0,
        "splitting_completed_at": 1681623462.0,
        "completed_at": null,
        "paused_at": null,
        "error": null,
        "stopped_at": null,
        "completed_segments": 24,
        "total_segments": 100
      }]
    }

### 

​

ドキュメント埋め込みステータス(進捗状況)の取得

入力例：
    
    
    curl --location --request GET 'https://api.dify.ai/v1/datasets/{dataset_id}/documents/{batch}/indexing-status' \
    --header 'Authorization: Bearer {api_key}'

出力例：
    
    
    {
      "data":[{
        "id": "",
        "indexing_status": "indexing",
        "processing_started_at": 1681623462.0,
        "parsing_completed_at": 1681623462.0,
        "cleaning_completed_at": 1681623462.0,
        "splitting_completed_at": 1681623462.0,
        "completed_at": null,
        "paused_at": null,
        "error": null,
        "stopped_at": null,
        "completed_segments": 24,
        "total_segments": 100
      }]
    }

### 

​

ドキュメントの削除

入力例：
    
    
    curl --location --request DELETE 'https://api.dify.ai/v1/datasets/{dataset_id}/documents/{document_id}' \
    --header 'Authorization: Bearer {api_key}'

出力例：
    
    
    {
      "result": "success"
    }

### 

​

ナレッジベースのドキュメントのリスト

入力例：
    
    
    curl --location --request GET 'https://api.dify.ai/v1/datasets/{dataset_id}/documents' \
    --header 'Authorization: Bearer {api_key}'

出力例：
    
    
    {
      "data": [
        {
          "id": "",
          "position": 1,
          "data_source_type": "file_upload",
          "data_source_info": null,
          "dataset_process_rule_id": null,
          "name": "dify",
          "created_from": "",
          "created_by": "",
          "created_at": 1681623639,
          "tokens": 0,
          "indexing_status": "waiting",
          "error": null,
          "enabled": true,
          "disabled_at": null,
          "disabled_by": null,
          "archived": false
        },
      ],
      "has_more": false,
      "limit": 20,
      "total": 9,
      "page": 1
    }

### 

​

新しセグメントを増加

入力例：
    
    
    curl --location --request POST 'https://api.dify.ai/v1/datasets/{dataset_id}/documents/{document_id}/segments' \
    --header 'Authorization: Bearer {api_key}' \
    --header 'Content-Type: application/json' \
    --data-raw '{"segments": [{"content": "1","answer": "1","keywords": ["a"]}]}'

出力例：
    
    
    {
      "data": [{
        "id": "",
        "position": 1,
        "document_id": "",
        "content": "1",
        "answer": "1",
        "word_count": 25,
        "tokens": 0,
        "keywords": [
            "a"
        ],
        "index_node_id": "",
        "index_node_hash": "",
        "hit_count": 0,
        "enabled": true,
        "disabled_at": null,
        "disabled_by": null,
        "status": "completed",
        "created_by": "",
        "created_at": 1695312007,
        "indexing_at": 1695312007,
        "completed_at": 1695312007,
        "error": null,
        "stopped_at": null
      }],
      "doc_form": "text_model"
    }

### 

​

ドキュメントのセグメントを見つける

入力例：
    
    
    curl --location --request GET 'https://api.dify.ai/v1/datasets/{dataset_id}/documents/{document_id}/segments' \
    --header 'Authorization: Bearer {api_key}' \
    --header 'Content-Type: application/json'

出力例：
    
    
    {
      "data": [{
        "id": "",
        "position": 1,
        "document_id": "",
        "content": "1",
        "answer": "1",
        "word_count": 25,
        "tokens": 0,
        "keywords": [
            "a"
        ],
        "index_node_id": "",
        "index_node_hash": "",
        "hit_count": 0,
        "enabled": true,
        "disabled_at": null,
        "disabled_by": null,
        "status": "completed",
        "created_by": "",
        "created_at": 1695312007,
        "indexing_at": 1695312007,
        "completed_at": 1695312007,
        "error": null,
        "stopped_at": null
      }],
      "doc_form": "text_model"
    }

### 

​

ドキュメントのセグメントの削除

入力例：
    
    
    curl --location --request DELETE 'https://api.dify.ai/v1/datasets/{dataset_id}/documents/{document_id}/segments/{segment_id}' \
    --header 'Authorization: Bearer {api_key}' \
    --header 'Content-Type: application/json'

出力例：
    
    
    {
      "result": "success"
    }

### 

​

ドキュメントのセグメントの更新

入力例：
    
    
    curl --location --request POST 'https://api.dify.ai/v1/datasets/{dataset_id}/documents/{document_id}/segments/{segment_id}' \
    --header 'Authorization: Bearer {api_key}' \
    --header 'Content-Type: application/json'\
    --data-raw '{"segment": {"content": "1","answer": "1", "keywords": ["a"], "enabled": false}}'

出力例：
    
    
    {
      "data": [{
        "id": "",
        "position": 1,
        "document_id": "",
        "content": "1",
        "answer": "1",
        "word_count": 25,
        "tokens": 0,
        "keywords": [
            "a"
        ],
        "index_node_id": "",
        "index_node_hash": "",
        "hit_count": 0,
        "enabled": true,
        "disabled_at": null,
        "disabled_by": null,
        "status": "completed",
        "created_by": "",
        "created_at": 1695312007,
        "indexing_at": 1695312007,
        "completed_at": 1695312007,
        "error": null,
        "stopped_at": null
      }],
      "doc_form": "text_model"
    }

### 

​

ナレッジベースのメタデータフィールドを追加する

入力例：
    
    
    curl --location 'https://api.dify.ai/v1/datasets/{dataset_id}/metadata' \
    --header 'Content-Type: application/json' \
    --header 'Authorization: Bearer {api_key}' \
    --data '{
        "type":"string",
        "name":"test"
    }'

出力例：
    
    
    {
        "id": "9f63c91b-d60e-4142-bb0c-c81a54dc2db5",
        "type": "string",
        "name": "test"
    }

### 

​

ナレッジベースのメタデータフィールドを更新する

入力例：
    
    
    curl --location --request PATCH 'https://api.dify.ai/v1/datasets/{dataset_id}/metadata/{metadata_id}' \
    --header 'Authorization: Bearer {api_key}' \
    --header 'Content-Type: application/json'\
    --data-raw '{"name": "test"}'

出力例：
    
    
    {
      "id": "abc",
      "type": "string",
      "name": "test",
    }

### 

​

ナレッジベースのメタデータフィールドを削除する

入力例：
    
    
    curl --location --request DELETE 'https://api.dify.ai/v1/datasets/{dataset_id}/metadata/{metadata_id}' \
    --header 'Authorization: Bearer {api_key}'

出力例：
    
    
    200 success

### 

​

ナレッジベースのメタデータにある組み込みフィールドを有効化/無効化する

入力例：
    
    
    curl --location --request DELETE 'https://api.dify.ai/v1/datasets/{dataset_id}/metadata/built-in/{action}' \
    --header 'Authorization: Bearer {api_key}'

出力例：
    
    
    200 success

### 

​

ドキュメントのメタデータを修正する（値の割り当て）

入力例：
    
    
    curl --location 'https://api.dify.ai/v1/datasets/{dataset_id}/documents/metadata' \
    --header 'Content-Type: application/json' \
    --header 'Authorization: Bearer {api_key}'
    --data '{
        "operation_data":[
            {
                "document_id": "3e928bc4-65ea-4201-87c8-cbcc5871f525",
                "metadata_list": [
                        {
                        "id": "1887f5ec-966f-4c93-8c99-5ad386022f46",
                        "value": "dify",
                        "name": "test"
                    }
                ]
            }
        ]
    }'

出力例：
    
    
    200 success

### 

​

データセットのメタデータリスト

入力例：
    
    
    curl --location 'https://api.dify.ai/v1/datasets/{dataset_id}/metadata' \
    --header 'Authorization: Bearer {api_key}'

出力例：
    
    
    {
      "doc_metadata": [
        {
          "id": "550e8400-e29b-41d4-a716-446655440000",
          "type": "string",
          "name": "title",
          "use_count": 42
        },
        {
          "id": "6ba7b810-9dad-11d1-80b4-00c04fd430c8",
          "type": "number",
          "name": "price",
          "use_count": 28
        },
        {
          "id": "7ba7b810-9dad-11d1-80b4-00c04fd430c9",
          "type": "time",
          "name": "created_at",
          "use_count": 35
        }
      ],
      "built_in_field_enabled": true
    }

### 

​

エラーメッセージ

エラーメッセージ| エラーコード| 理由  
---|---|---  
no_file_uploaded| 400| ファイルをアップロードしてください  
too_many_files| 400| 1つのファイルのみアップロードできます  
file_too_large| 413| ファイルサイズが制限を超えています  
unsupported_file_type| 415| サポートされていないファイルタイプです。現在、以下の形式のみをサポートしています：`txt`、 `markdown`、 `md`、 `pdf`、 `html`、 `xlsx`、 `docx`、 `csv`  
high_quality_dataset_only| 400| 現在の操作は「高品質」のナレッジベースのみをサポートしています  
dataset_not_initialized| 400| ナレッジベースはまだ初期化中またはインデックス中です。お待ちください  
archived_document_immutable| 403| アーカイブされたドキュメントは編集できません  
dataset_name_duplicate| 409| ナレッジベース名がすでに存在します。ナレッジベース名を変更してください  
invalid_action| 400| 無効な操作です  
document_already_finished| 400| ドキュメントの処理がすでに完了しています。ページを更新するか、ドキュメントの詳細を確認してください  
document_indexing| 400| ドキュメントが処理中のため、編集できません  
invalid_metadata| 400| メタデータの内容が正しくありません。確認して検証してください  
  
* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/guides/knowledge-base/knowledge-and-documents-maintenance/maintain-dataset-via-api.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20ain-dataset-via-&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/guides/knowledge-base/knowledge-and-documents-maintenance%2Fmaintain-dataset-via-api.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[ナレッジベース内のドキュメントの管理](/ja-jp/guides/knowledge-base/knowledge-and-documents-maintenance/maintain-knowledge-documents)[メタデータ](/ja-jp/guides/knowledge-base/metadata)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * ナレッジベースAPI活用のメリット
  * 使用方法
  * API呼び出しの例
  * テクストを通してドキュメントを作成する
  * ファイルを通してドキュメントを作成する
  * 空白のナレッジベースを作成する
  * ナレッジベースリスト
  * ナレッジベースの削除
  * テクストを通してドキュメントを更新する
  * ファイルを通してドキュメントを更新する
  * ドキュメント埋め込みステータス(進捗状況)の取得
  * ドキュメント埋め込みステータス(進捗状況)の取得
  * ドキュメントの削除
  * ナレッジベースのドキュメントのリスト
  * 新しセグメントを増加
  * ドキュメントのセグメントを見つける
  * ドキュメントのセグメントの削除
  * ドキュメントのセグメントの更新
  * ナレッジベースのメタデータフィールドを追加する
  * ナレッジベースのメタデータフィールドを更新する
  * ナレッジベースのメタデータフィールドを削除する
  * ナレッジベースのメタデータにある組み込みフィールドを有効化/無効化する
  * ドキュメントのメタデータを修正する（値の割り当て）
  * データセットのメタデータリスト
  * エラーメッセージ



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/guides/knowledge-base/knowledge-and-documents-maintenance/maintain-knowledge-documents

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

ナレッジベースの管理

ナレッジベース内のドキュメントの管理

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

  * ナレッジベース

    * [ナレッジベース](/ja-jp/guides/knowledge-base/readme)
    * ナレッジベース作成

    * ナレッジベースの管理

      * [ナレッジベースの管理](/ja-jp/guides/knowledge-base/knowledge-and-documents-maintenance/readme)
      * [ナレッジベース内のドキュメントの管理](/ja-jp/guides/knowledge-base/knowledge-and-documents-maintenance/maintain-knowledge-documents)
      * [APIを活用したナレッジベースのメンテナンス](/ja-jp/guides/knowledge-base/knowledge-and-documents-maintenance/maintain-dataset-via-api)
    * [メタデータ](/ja-jp/guides/knowledge-base/metadata)
    * [アプリ内でのナレッジベース統合](/ja-jp/guides/knowledge-base/integrate-knowledge-within-application)
    * [リコールテスト/引用帰属](/ja-jp/guides/knowledge-base/retrieval-test-and-citation)
    * [ナレッジベースの要求頻度制限](/ja-jp/guides/knowledge-base/knowledge-request-rate-limit)
    * [外部ナレッジベースとの接続](/ja-jp/guides/knowledge-base/connect-external-knowledge-base)
    * [外部知識API](/ja-jp/guides/knowledge-base/api-documentation/external-knowledge-api-documentation)
  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




ナレッジベースの管理

# ナレッジベース内のドキュメントの管理

Copy page

## 

​

ナレッジベース内のドキュメントの編集

### 

​

ドキュメントの追加

ナレッジベースは複数のドキュメントから構成されています。ドキュメントは、ローカルからのアップロードのほか、他のオンラインデータソースからのインポートにも対応しています。ナレッジベース内の各ドキュメントは、データソース上の “1ファイル” に相当し、たとえば Notion 内の1件のドキュメントや、Web上のオンラインドキュメントなどが該当します。

既に作成済みのナレッジベースに新たなドキュメントを追加するには、「ナレッジベース」 → 「ドキュメント一覧」 → 「ファイル追加」をクリックしてください。

### 

​

ドキュメントの有効化／無効化／アーカイブ／削除

**有効化** ：通常使用可能な状態のドキュメントは、編集およびナレッジベース内での検索が可能です。無効化されたドキュメントは後から再び有効化できます。また、一度アーカイブされたドキュメントは、アーカイブ解除後にのみ再有効化が可能となります。

**無効化** ：AIアプリケーション利用時に検索対象から除外したいドキュメントについては、該当ドキュメント右側にある青いスイッチをオフにすることで無効化できます。なお、無効化後も内容の編集は可能です。

**アーカイブ** ：今後削除せずに保存しておきたい古いドキュメントの場合、アーカイブ機能をご利用ください。アーカイブされたドキュメントは閲覧や削除は可能ですが、再編集はできません。アーカイブは、ナレッジベースのドキュメント一覧から該当ボタンをクリックするか、ドキュメント詳細画面から操作できます。**アーカイブ操作は後から取り消し可能です。**

**削除** ：⚠️ 削除は取り消し不可能なため、誤ったドキュメントや内容が曖昧なものについては、ドキュメント右側のメニューから削除してください。削除したドキュメントは復元できませんので、慎重に操作してください。

> 上記の各操作は、複数のドキュメントを同時に選択した状態で一括実行することも可能です。

**注意：**

ナレッジベース内で長期間更新がなく、または検索対象とならなかったドキュメントについては、システムの効率運用を考慮し、一時的に無効化される場合があります。

  * Sandbox／Free プランのユーザーでは、利用されていないナレッジベース内のドキュメントは **7日後** に自動で無効化されます。
  * Professional／Team プランのユーザーでは、同様のドキュメントが **30日後** に自動で無効化されます。



いつでもナレッジベースへアクセスし、再度有効化することで通常利用に戻すことが可能です。なお、料金プランをご利用のユーザーは **「一括復元」** 機能によって、無効化された全ドキュメントを迅速に有効化できます。

* * *

## 

​

テキスト分割の管理

### 

​

テキスト分割の表示

ナレッジベースにアップロードされた各ドキュメントは、テキスト分割（Chunks）形式で格納されます。ドキュメントタイトルをクリックすると、詳細画面でそのドキュメントの分割リストが表示され、初期状態では1ページにつき10のブロックが表示されます。ページ下部の設定にて、1ページあたりの表示件数を調整可能です。

各ブロックは、先頭2行のプレビューを提示します。ブロック内の全内容を確認したい場合は、「分割を展開」ボタンをクリックしてください。

また、フィルター機能を利用することで、有効／無効状態のドキュメントをすばやく確認できます。

なお、各種[テキスト分割モード](../create-knowledge-and-upload-documents/chunking-and-cleaning-text)により、分割表示の方法が異なります。

  * 汎用モード
  * 親子モード
  * Q&A モード（コミュニティ版のみ）



**汎用モード**

[汎用モード](../create-knowledge-and-upload-documents/#tong-yong)では、各テキスト分割は独立したブロックとして扱われます。ブロック内の全内容を確認する場合は、右上隅の全画面アイコンをクリックして全画面表示モードに切り替えてください。

また、上部のドキュメントタイトルをクリックすることで、ナレッジベース内の他ドキュメントへの迅速な切り替えが可能です。

**汎用モード**

[汎用モード](../create-knowledge-and-upload-documents/#tong-yong)では、各テキスト分割は独立したブロックとして扱われます。ブロック内の全内容を確認する場合は、右上隅の全画面アイコンをクリックして全画面表示モードに切り替えてください。

また、上部のドキュメントタイトルをクリックすることで、ナレッジベース内の他ドキュメントへの迅速な切り替えが可能です。

**親子モード**

[親子モード](../create-knowledge-and-upload-documents/#fu-zi-fen-duan)の場合、表示される内容は「親分割」と「子分割」に区分されます。

• **親分割**

ナレッジベース内の任意のドキュメントを選択すると、まず親分割が表示されます。親分割には、**「段落」** と **「全文」** の2種類の表示モードがあり、より豊富な文脈情報を提供します。下図は各モードにおけるテキストプレビューの違いを示しています。

• **子分割**

子分割は、通常、親分割内の1文などの小さなテキストブロックで、詳細情報を含みます。各ブロックには文字数および検索での召喚回数が表示されます。子分割ブロックをクリックすると、詳細内容が表示され、右上の全画面アイコンをクリックすれば全内容を表示できます。

**Q &A モード**

Q&A モードでは、1つのブロック内に「質問」と「回答」が含まれます。任意のドキュメントタイトルをクリックすると、テキスト分割が表示されます。

* * *

### 

​

分割品質の確認

ドキュメントのテキスト分割は、ナレッジベースを利用した質疑応答システムの精度に大きく影響します。そのため、ナレッジベースとアプリケーションを連携する前に、分割品質を人の目でチェックすることを推奨します。

自動化された文字長、識別子、あるいは NLP の意味解析に基づく分割方法は、大量のテキスト分割作業を大幅に軽減できますが、分割品質はドキュメントの形式や文脈の継続性に依存するため、機械的な処理だけでは十分でない場合があります。人力によるチェックと修正により、機械分割の弱点を補完することが可能です。

分割品質を確認する際、主に以下の点に注意してください。

  * **短すぎるテキスト分割** ：意味の一部が欠落する可能性があります。



  * **長すぎるテキスト分割** ：文脈のノイズが生じ、検索精度に影響を与える場合があります。



  * **強制的な意味の切断** ：最大分割長により、意味が途中で切れてしまう場合があり、検索時に情報が欠落する可能性があります。



* * *

### 

​

テキスト分割の追加

ナレッジベース内のドキュメントは、必要に応じて個別にテキスト分割を追加することが可能です。なお、分割追加の方法は選択している分割モードにより異なります。

> テキスト分割の追加は有料機能となります。詳細は[こちら](https://dify.ai/pricing)をご確認ください。

  * 汎用モード
  * 父子モード
  * Q&Aモード（コミュニティ版のみ）



**汎用モード**

分割リスト上部の「分割を追加」ボタンをクリックすると、ドキュメント内に任意のテキストブロックを1つまたは複数追加できます。

手動でテキスト分割を追加する際は、本文およびキーワードの入力が可能です。入力後、末尾の **「連続追加」** ボタンにチェックを入れると、引き続き新たな分割を追加できます。

また、一括で分割を追加する場合は、まず CSV 形式の分割アップロード用テンプレートをダウンロードします。Excelなどでテンプレートに沿って内容を編集し、CSVファイルとして保存後、アップロードしてください。

**汎用モード**

分割リスト上部の「分割を追加」ボタンをクリックすると、ドキュメント内に任意のテキストブロックを1つまたは複数追加できます。

手動でテキスト分割を追加する際は、本文およびキーワードの入力が可能です。入力後、末尾の **「連続追加」** ボタンにチェックを入れると、引き続き新たな分割を追加できます。

また、一括で分割を追加する場合は、まず CSV 形式の分割アップロード用テンプレートをダウンロードします。Excelなどでテンプレートに沿って内容を編集し、CSVファイルとして保存後、アップロードしてください。

**父子モード**

分割リスト上部にある「分割を追加」ボタンをクリックすると、文書内に対して、1つまたは複数のカスタムな**親分割** を一括で追加できます。

内容を入力後、下部にある **「連続追加」** ボタンにチェックを入れることで、引き続きテキストを追加できます。

また、親分割内において子分割を個別に追加することも可能です。親分割内の子分割右側にある「追加」ボタンをタップすると、子分割を単体で追加できます。

**Q &Aモード**

分割リスト上部にある「分割を追加」ボタンをクリックすると、文書内に質問と回答のペアによるコンテンツブロックを1つまたは複数追加できます。

* * *

### 

​

テキスト分割の編集

  * 汎用モード
  * 父子モード
  * Q&Aモード（コミュニティ版のみ）



**汎用モード**

追加された分割の内容は、直接編集・変更が可能です。分割内のテキストやキーワードも自由に変更できます。  
また、重複して編集してしまわないよう、編集後のコンテンツブロックには「編集済み」ラベルが表示されます。

**汎用モード**

追加された分割の内容は、直接編集・変更が可能です。分割内のテキストやキーワードも自由に変更できます。  
また、重複して編集してしまわないよう、編集後のコンテンツブロックには「編集済み」ラベルが表示されます。

**父子モード**

親分割は、内部に含む子分割の内容を保持していますが、双方は独立して編集可能です。つまり、親分割と子分割の内容はそれぞれ別々に変更できます。 下図は、親子分割間の編集フローを示しています。

**親分割の編集** ：親分割右側の編集ボタンをクリックし、内容を入力してください。**「保存」**をクリックすると子分割の内容はそのままで、もし子分割の内容も再生成したい場合は **「保存して子分割を再生成」** をクリックしてください。

編集後、重複編集を防止するため、対象のコンテンツブロックには「編集済み」ラベルが表示されます。

**子分割の編集** ：任意の子分割を選択し編集モードに入った後、変更が完了したら保存してください。なお、子分割の編集内容は親分割には影響しません。編集または新規追加された子分割には、`C-NUMBER-EDITED`という濃い青色のラベルが付与されます。

また、子分割は現在の親分割のタグと見なすことも可能です。

**Q &Aモード**

Q&Aモードでは、1つのコンテンツブロック内に質問と回答が含まれています。編集したいテキスト分割をクリックすると、質問と回答それぞれの内容を編集できるほか、現在のコンテンツブロックのキーワードも変更可能です。

### 

​

アップロード済み文書のテキスト分割の変更

既存のナレッジベースでは、文書の分割設定を再構成することができます。

**大きい分割**

  * 1つの分割でより多くの文脈（コンテキスト）を保持できるため、複雑なタスクあるいは文脈に依存するタスクに適しています。
  * 分割数が減ることにより、処理時間およびストレージの必要量が削減されます。



**小さい分割**

  * より細かい粒度でテキスト内容の正確な抽出や要約が可能です。
  * モデルのトークン制限を超えるリスクを軽減し、制約が厳しいモデルへの適応性も向上します。



「分割設定」にアクセス後、**保存して処理** ボタンをクリックすることで、分割設定の変更内容が保存され、現在の文書分割処理が再トリガーされます。  
設定保存と埋め込み処理が完了すると、文書の分割リストは自動的に更新され、ページの手動リロードは不要です。

* * *

### 

​

メタデータ管理

メタデータの詳細については、[メタデータ](https://docs.dify.ai/ja-jp/guides/knowledge-base/metadata)を参照してください。

* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/guides/knowledge-base/knowledge-and-documents-maintenance/maintain-knowledge-documents.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20ain-knowledge-docume&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/guides/knowledge-base/knowledge-and-documents-maintenance%2Fmaintain-knowledge-documents.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[ナレッジベースの管理](/ja-jp/guides/knowledge-base/knowledge-and-documents-maintenance/readme)[APIを活用したナレッジベースのメンテナンス](/ja-jp/guides/knowledge-base/knowledge-and-documents-maintenance/maintain-dataset-via-api)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * ナレッジベース内のドキュメントの編集
  * ドキュメントの追加
  * ドキュメントの有効化／無効化／アーカイブ／削除
  * テキスト分割の管理
  * テキスト分割の表示
  * 分割品質の確認
  * テキスト分割の追加
  * テキスト分割の編集
  * アップロード済み文書のテキスト分割の変更
  * メタデータ管理



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/guides/knowledge-base/knowledge-and-documents-maintenance/readme

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

ナレッジベースの管理

ナレッジベースの管理

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

  * ナレッジベース

    * [ナレッジベース](/ja-jp/guides/knowledge-base/readme)
    * ナレッジベース作成

    * ナレッジベースの管理

      * [ナレッジベースの管理](/ja-jp/guides/knowledge-base/knowledge-and-documents-maintenance/readme)
      * [ナレッジベース内のドキュメントの管理](/ja-jp/guides/knowledge-base/knowledge-and-documents-maintenance/maintain-knowledge-documents)
      * [APIを活用したナレッジベースのメンテナンス](/ja-jp/guides/knowledge-base/knowledge-and-documents-maintenance/maintain-dataset-via-api)
    * [メタデータ](/ja-jp/guides/knowledge-base/metadata)
    * [アプリ内でのナレッジベース統合](/ja-jp/guides/knowledge-base/integrate-knowledge-within-application)
    * [リコールテスト/引用帰属](/ja-jp/guides/knowledge-base/retrieval-test-and-citation)
    * [ナレッジベースの要求頻度制限](/ja-jp/guides/knowledge-base/knowledge-request-rate-limit)
    * [外部ナレッジベースとの接続](/ja-jp/guides/knowledge-base/connect-external-knowledge-base)
    * [外部知識API](/ja-jp/guides/knowledge-base/api-documentation/external-knowledge-api-documentation)
  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




ナレッジベースの管理

# ナレッジベースの管理

Copy page

> ナレッジベースのページは、チームオーナー、チーム管理者、編集権限があるユーザーのみがアクセスできます。

Difyチームのホームページで、「ナレッジベース」ボタンをクリックし、管理したいナレッジベースを選択して、左のナビゲーションパネルで **設定** をクリックして調整を行います。

ナレッジベースの名前、説明、表示権限、索引モード、埋め込みモデル、および検索設定を変更することができます。

  * **ナレッジベースの名前** ：異なるナレッジベースを区別するために使用されます。
  * **ナレッジの説明** ：ナレッジベースのドキュメントで表現される情報を説明するために使用されます。
  * **表示権限** ：ナレッジベースへのアクセス制御を定義します。3つのレベルがあります：**「自分だけ」** 、**「全チームメンバー」** と **「一部のチームメンバー」** 。権限のない方はナレッジベースをアクセスできません。このナレッジベースを他のメンバーと共有すると、そのメンバーもこのナレッジベースに対する完全な権限を持ちます。
  * **索引方法** ：詳細な説明については、[ドキュメント](./create-knowledge-and-upload-documents/setting-indexing-methods)を参照してください。
  * **埋め込みモデル** ：ナレッジベースの埋め込みモデルを変更できます。埋め込みモデルを変更すると、ナレッジベース内のすべてのドキュメントが再埋め込みされ、元の埋め込みが削除されます。
  * **検索設定** ：詳細な説明については、[ドキュメント](./create-knowledge-and-upload-documents/selecting-retrieval-settings)を参照してください。



* * *

### 

​

関連アプリの確認方法

ナレッジベース内では、左側のサイドバーに紐づけられたアプリケーションの件数が表示されます。丸い情報アイコンにマウスカーソルを合わせると、紐付けられたアプリケーションの一覧がポップアップで現れます。さらに、右側にある「ジャンプ」ボタンをクリックすることで、それらのアプリケーションへ素早く移動して確認することが可能です。

* * *

### 

​

ナレッジベースAPIの管理

Difyのナレッジベースは、標準APIの完全なセットを提供しています。開発者はAPI呼び出しを行うことで、ナレッジベース内のドキュメントやチャンクの追加、削除、変更、クエリなどの日常的な管理およびメンテナンス操作を実行できます。詳細については、[ナレッジベースAPIドキュメント](maintain-dataset-via-api)を参照してください。

* * *

## 

​

ナレッジベース内の文書管理

### 

​

文書の追加方法

ナレッジベースは、さまざまな文書が集められたものです。これらの文書は、開発者や管理者によってアップロードされたり、他のデータソースから同期されたりすることがあります。ナレッジベース内の各文書は、データソースの中の1つのファイルに相当します。たとえば、Notionのライブラリにある文書や、新しいオンライン文書のページなどが該当します。

「ナレッジベース」→「文書リスト」→「ファイルを追加」の順に進み、既に作成されているナレッジベースに新しい文書をアップロードできます。

### 

​

文書の有効化・無効化・アーカイブ・削除

**有効化** ：通常利用されている状態の文書で、内容の編集やナレッジベースでの検索が可能です。無効化された文書は再び有効化することができますが、アーカイブされた文書を再び有効化する前には、アーカイブを解除する必要があります。

**無効化** ：AIアプリケーションの利用時に検索結果に含まれたくない文書は、文書の横にある青いスイッチをオフにすることで無効化できます。無効化された後も、文書の編集は可能です。

**アーカイブ** ：もはや使用しないが削除したくない古い文書データは、アーカイブすることができます。アーカイブされたデータは閲覧や削除のみ可能で、編集はできません。ナレッジベースの文書リストからアーカイブボタンをクリックするか、文書の詳細ページでアーカイブ操作を行えます。アーカイブは後で取り消し可能です。

**削除** ：⚠️危険な操作です。誤りがある文書や誤解を招く内容の文書は、文書の横にあるメニューボタンから削除できます。削除された内容は復元できないため、慎重に操作してください。

> 上記の操作は、複数の文書を選択して一括で行うことが可能です。

**注意** ：

ナレッジベース内に長期間更新されていない、または検索されていない文書がある場合、ナレッジベースの効率的な運用を保つため、システムはこれらの非活動文書を一時的に無効化することがあります。

  * サンドボックス/無料版のユーザーは、ナレッジベースを利用していない場合、**7日** 後に自動的に無効化されます。

  * プロフェッショナル/チーム版のユーザーは、ナレッジベースを利用していない場合、**30日** 後に自動的に無効化されます。




いつでもナレッジベースにアクセスして、無効化された文書を再び有効化し、通常の利用を再開できます。有料ユーザーは**ワンクリックで復活** 機能を利用して、無効化されたすべての文書を迅速に有効化することができます。

* * *

## 

​

テキストチャンクの管理

### 

​

テキストチャンクを確認

ナレッジベースにアップロードされた文書は、テキストのチャンク（Chunk）として保存されています。文書の見出しをクリックして、詳細ページに移動すると、その文書に含まれるテキストチャンクのリストを見ることができます。デフォルトでは、各ページには10個のチャンクが表示され、ページ下部でこの表示数を変更することが可能です。

チャンクは、先頭の2行がプレビューとして表示されます。チャンクの全内容を閲覧したい場合は、「チャンクを展開」ボタンを軽くタップします。

[テキストチャンク](./create-knowledge-and-upload-documents/chunking-and-cleaning-text)を表示する方法にはいくつかのモードがあり、それぞれでテキストの見せ方が異なります：

  * 汎用モード
  * 親子モード
  * Q&Aモード（コミュニティーのみ対処）



**汎用モード**

[汎用モード](./create-knowledge-and-upload-documents/chunking-and-cleaning-text)では、各テキストチャンクが独立したブロックとして扱われます。全内容を表示したい場合は、右上にある全画面表示ボタンをタップしてください。

文書の見出し部分をクリックすることで、ナレッジベース内の他の文書へ素早く移動が可能です。

**汎用モード**

[汎用モード](./create-knowledge-and-upload-documents/chunking-and-cleaning-text)では、各テキストチャンクが独立したブロックとして扱われます。全内容を表示したい場合は、右上にある全画面表示ボタンをタップしてください。

文書の見出し部分をクリックすることで、ナレッジベース内の他の文書へ素早く移動が可能です。

**親子モード**

[親子モード](./create-knowledge-and-upload-documents/chunking-and-cleaning-text)では、テキストが親チャンクと子チャンクに分かれて表示されます。

  * **親チャンク**

ナレッジベース内の文書を選択すると、まず親チャンクの内容が表示されます。これには、**「段落」** 表示と **「全文」** 表示の2種類があり、文脈をより完全に提供します。以下は、異なる表示方法によるテキストプレビューの違いを説明します。 

  * **子チャンク**

子チャンクは通常、段落内の特定の文（より小さいテキストブロック）で、詳細な情報を含んでいます。各チャンクは、文字数と検索された回数を示します。詳細を見るには、子チャンクを軽くタップします。ブロックの全内容を見たい場合は、右上の全画面表示ボタンをタップしてください。




**Q &Aモード**

Q&Aモードでは、各コンテンツブロックが一組の質問と答えを含んでいます。文書の見出しを軽くタップすることで、テキストチャンクを確認することができます。

* * *

### 

​

テキストチャンクの品質管理

テキストをチャンクする作業は、ナレッジベースを用いたQ&Aアプリの性能に直接影響を及ぼします。ナレッジベースとアプリを結びつける前に、チャンクされたテキストの品質を手動で確認することを強く推奨します。

文字数、特定の識別子、または自然言語処理（NLP）を用いた意味的なチャンクなど、自動化された方法で大量のテキストを効率的にチャンクすることが可能ですが、品質は文の構造や文脈による意味の流れに大きく左右されます。手動での確認と修正を行うことで、自動チャンクの限界を補い、より高い品質を保証することができます。

チャンクの品質を検証する際には、以下の点に注意する必要があります：

  * **チャンクされたテキストが短すぎる** 場合、意図した意味が途切れてしまう可能性があります； 

  * **チャンクされたテキストが長すぎる** 場合、不要な情報が混入し、検索結果の精度を低下させる原因となります； 

  * **意味の流れが不自然に断ち切られている** 場合、最大チャンク長を設定しても、内容の一部が失われることがあります； 




* * *

### 

​

テキストチャンクの追加

ナレッジベースに含まれる文書は、テキストを追加的にチャンクすることが可能です。異なるチャンクモードはそれぞれ、特定のチャンク方法を提供します。

> テキストチャンクの追加は有料機能です。この機能を利用するには、アカウントのアップグレードが必要です。

  * 汎用モード
  * 親子モード
  * Q&Aモード（コミュニティーのみ対処）



**汎用モード**

ドキュメントに「チャンク追加」ボタンがあり、これをクリックすることで任意の数のカスタマイズされたチャンクを追加することが可能です。

テキストチャンクを手動で追加する際には、テキスト本体とキーワードの入力が選択肢としてあります。入力完了後、画面下部の「追加を続ける」にチェックを入れると、さらにテキストの追加が行えます。

複数のチャンクを一度に追加したい場合は、まずCSV形式のチャンクアップロード用テンプレートをダウンロードし、そのテンプレートに従ってExcelでチャンクの内容を編集します。編集後はCSVファイルを保存し、それをアップロードしてください。

**汎用モード**

ドキュメントに「チャンク追加」ボタンがあり、これをクリックすることで任意の数のカスタマイズされたチャンクを追加することが可能です。

テキストチャンクを手動で追加する際には、テキスト本体とキーワードの入力が選択肢としてあります。入力完了後、画面下部の「追加を続ける」にチェックを入れると、さらにテキストの追加が行えます。

複数のチャンクを一度に追加したい場合は、まずCSV形式のチャンクアップロード用テンプレートをダウンロードし、そのテンプレートに従ってExcelでチャンクの内容を編集します。編集後はCSVファイルを保存し、それをアップロードしてください。

**親子モード**

「チャンク追加」ボタンを使って、ドキュメント内に一つまたは複数のカスタム**親チャンク** を自由に追加できます。

入力完了後、画面下部の **「追加を続ける」** にチェックを入れると、さらにテキストの追加が可能です。

親チャンク内には、子チャンクを個別に追加することもできます。親チャンクに属する子チャンクの右側にある「追加」ボタンをクリックすることで、子チャンクを個別に追加できます。

**Q &Aモード**

「チャンク追加」ボタンをクリックすると、質問と回答のペアを形成するブロックを一つまたは複数、ドキュメント内に自由に追加することができます。

* * *

### 

​

テキストチャンクの編集

  * 汎用モード
  * 親子モード
  * Q&Aモード（コミュニティーのみ対処）



**汎用モード**

追加された段落は、直接内容の編集や修正が行えます。これには、文中のテキストやキーワードの変更が含まれます。

編集の重複を避けるため、編集完了後のコンテンツブロックには「編集済み」というマークが付けられます。

**汎用モード**

追加された段落は、直接内容の編集や修正が行えます。これには、文中のテキストやキーワードの変更が含まれます。

編集の重複を避けるため、編集完了後のコンテンツブロックには「編集済み」というマークが付けられます。

**親子モード**

親チャンクは、その中に含まれる子チャンクの内容を持っていますが、両者は独立しており、それぞれ個別に修正が可能です。以下の説明では、親子間の編集プロセスを解説します：

**親チャンクの編集** ：親チャンクの右側にある編集ボタンをタップし、内容を入力します。**「保存」**をクリックすると、子チャンクには影響しません。** 「保存して子チャンクを再生成」**を選択すると、子チャンクの内容も更新されます。

編集後のコンテンツブロックには「編集済み」というマークが付けられます。

**子チャンクの編集** ：任意の子チャンクを選び、編集モードで修正します。保存後、親チャンクへの影響はありません。編集済みまたは追加された子チャンクブロックには、特定の編集状態を示すタグが表示されます。また、この子チャンクを現在の親テキストブロックのタグとして参照することも可能です。

**Q &Aモード**

Q&Aモードでは、各コンテンツブロックが一つの質問とその答えを含んでいます。希望するテキストチャンクをクリックすることで、質問と答えを個別に修正できます。また、現在のブロック内のキーワードの編集もサポートされています。

* * *

## 

​

メタデータの管理

メタデータは、ウェブページのタイトル、URL、キーワード、説明など、さまざまな情報源からの文書を区別するために用いられる情報です。これらは、ナレッジベースでのテキスト検索時に構造化されたフィールドとして利用されるほか、参照元の情報表示にも活用されます。

* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/guides/knowledge-base/knowledge-and-documents-maintenance/readme.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/guides/knowledge-base/knowledge-and-documents-maintenance%2Freadme.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[3\. インデックス方法と検索設定を指定](/ja-jp/guides/knowledge-base/create-knowledge-and-upload-documents/setting-indexing-methods)[ナレッジベース内のドキュメントの管理](/ja-jp/guides/knowledge-base/knowledge-and-documents-maintenance/maintain-knowledge-documents)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * 関連アプリの確認方法
  * ナレッジベースAPIの管理
  * ナレッジベース内の文書管理
  * 文書の追加方法
  * 文書の有効化・無効化・アーカイブ・削除
  * テキストチャンクの管理
  * テキストチャンクを確認
  * テキストチャンクの品質管理
  * テキストチャンクの追加
  * テキストチャンクの編集
  * メタデータの管理



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/guides/knowledge-base/knowledge-base-creation/introduction

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

ナレッジベース作成

作成手順

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

  * ナレッジベース

    * [ナレッジベース](/ja-jp/guides/knowledge-base/readme)
    * ナレッジベース作成

      * [作成手順](/ja-jp/guides/knowledge-base/knowledge-base-creation/introduction)
      * 1\. オンラインデータソースの活用

      * [2\. チャンクモードの指定](/ja-jp/guides/knowledge-base/create-knowledge-and-upload-documents/chunking-and-cleaning-text)
      * [3\. インデックス方法と検索設定を指定](/ja-jp/guides/knowledge-base/create-knowledge-and-upload-documents/setting-indexing-methods)
    * ナレッジベースの管理

    * [メタデータ](/ja-jp/guides/knowledge-base/metadata)
    * [アプリ内でのナレッジベース統合](/ja-jp/guides/knowledge-base/integrate-knowledge-within-application)
    * [リコールテスト/引用帰属](/ja-jp/guides/knowledge-base/retrieval-test-and-citation)
    * [ナレッジベースの要求頻度制限](/ja-jp/guides/knowledge-base/knowledge-request-rate-limit)
    * [外部ナレッジベースとの接続](/ja-jp/guides/knowledge-base/connect-external-knowledge-base)
    * [外部知識API](/ja-jp/guides/knowledge-base/api-documentation/external-knowledge-api-documentation)
  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




ナレッジベース作成

# 作成手順

Copy page

ナレッジベースの作成とドキュメントのアップロードは、以下のステップに分かれています：

  1. ナレッジベースを作成します。ローカルファイルのアップロード、オンラインデータのインポート、または空のナレッジベースを作成することができます。

## [コンテンツデータのインポートローカルファイルのアップロード、オンラインデータのインポート、または空のナレッジベースの作成について。](.././create-knowledge-and-upload-documents/import-content-data/readme)

  2. チャンキングモードを指定します。この段階では、コンテンツの前処理とデータ構造化を行い、長いテキストが複数のセグメントに分割されます。ここでは、テキストの分割効果をプレビューすることができます。

## [テキストのチャンキングとクリーニングテキスト分割とデータクリーニングのプロセスについて学ぶ](.././create-knowledge-and-upload-documents/chunking-and-cleaning-text)

  3. インデックス方法と検索設定を設定します。ナレッジベースはユーザーからのクエリを受け取ると、事前設定された検索方法に従って既存のドキュメント内で関連コンテンツを検索し、言語モデルが高品質の回答を生成するために関連性の高い情報を抽出します。

## [インデックス方法の設定インデックス方法と検索パラメータの設定方法について学ぶ](.././create-knowledge-and-upload-documents/setting-indexing-methods)

  4. チャンクのエンベディング処理が完了するまで待ちます。
  5. アップロードが完了したら、アプリケーション内でナレッジベースを関連付けて使用します。[アプリケーション内でのナレッジベースの統合](/ja-jp/guides/knowledge-base/integrate-knowledge-within-application)を参照して、ナレッジベースに基づいて質問応答ができるLLMアプリケーションを構築できます。ナレッジベースの修正や管理が必要な場合は、[ナレッジベース管理とドキュメントメンテナンス](/ja-jp/guides/knowledge-base/knowledge-and-documents-maintenance/introduction)を参照してください。



* * *

### 

​

参考資料

#### 

​

ETL

RAGの本番環境での応用では、より良いデータ検索結果を得るために、複数のソースからのデータに対して前処理とクリーニングを行う必要があります。これがETL（ _extract, transform, load_ ）です。非構造化/半構造化データの前処理能力を強化するため、Difyでは**Dify ETL** と[**Unstructured ETL**](https://docs.unstructured.io/welcome)の2つのETLソリューションをサポートしています。Unstructuredは、後続のステップのためにデータを効率的に抽出し、クリーンなデータに変換します。Difyの各バージョンにおけるETLソリューションの選択：

  * SaaSバージョンでは選択できず、デフォルトでUnstructured ETLを使用します；
  * コミュニティバージョンでは選択可能で、デフォルトではDify ETLを使用し、[環境変数](/ja-jp/getting-started/install-self-hosted/environments)を通じてUnstructured ETLを有効にできます；



ファイル解析でサポートされる形式の違い：

DIFY ETL| Unstructured ETL  
---|---  
txt、markdown、md、pdf、html、htm、xlsx、xls、docx、csv| txt、markdown、md、pdf、html、htm、xlsx、xls、docx、csv、eml、msg、pptx、ppt、xml、epub  
  
異なるETLソリューションはファイル抽出効果においても違いがあります。Unstructured ETLのデータ処理方法についてさらに詳しく知りたい場合は、[公式ドキュメント](https://docs.unstructured.io/open-source/core-functionality/partitioning)を参照してください。

* * *

#### 

​

**エンベディング**

**エンベディング** は、離散変数（単語、短文、または文書全体など）を連続的なベクトル表現に変換する技術です。これにより、高次元データ（単語、フレーズ、画像など）を低次元空間にマッピングし、コンパクトで効果的な表現方法を提供します。このような表現は、データの次元を削減するだけでなく、重要な意味情報も保持するため、後続のコンテンツ検索がより効率的になります。

**エンベディングモデル** は、テキストをベクトル化することに特化した大規模言語モデルで、テキストを密な数値ベクトルに変換し、意味情報を効果的に捉えることができます。

* * *

#### 

​

メタデータ

メタデータ機能を使用してナレッジベースを管理する場合は、[メタデータ](/ja-jp/guides/knowledge-base/metadata)を参照してください。

* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/guides/knowledge-base/knowledge-base-creation/introduction.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20duct&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/guides/knowledge-base/knowledge-base-creation%2Fintroduction.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[ナレッジベース](/ja-jp/guides/knowledge-base/readme)[1\. テキストデータのインポート](/ja-jp/guides/knowledge-base/create-knowledge-and-upload-documents/import-content-data/readme)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * 参考資料
  * ETL
  * エンベディング
  * メタデータ



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/guides/knowledge-base/knowledge-request-rate-limit

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

ナレッジベース

ナレッジベースの要求頻度制限

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

  * ナレッジベース

    * [ナレッジベース](/ja-jp/guides/knowledge-base/readme)
    * ナレッジベース作成

    * ナレッジベースの管理

    * [メタデータ](/ja-jp/guides/knowledge-base/metadata)
    * [アプリ内でのナレッジベース統合](/ja-jp/guides/knowledge-base/integrate-knowledge-within-application)
    * [リコールテスト/引用帰属](/ja-jp/guides/knowledge-base/retrieval-test-and-citation)
    * [ナレッジベースの要求頻度制限](/ja-jp/guides/knowledge-base/knowledge-request-rate-limit)
    * [外部ナレッジベースとの接続](/ja-jp/guides/knowledge-base/connect-external-knowledge-base)
    * [外部知識API](/ja-jp/guides/knowledge-base/api-documentation/external-knowledge-api-documentation)
  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




ナレッジベース

# ナレッジベースの要求頻度制限

Copy page

Dify クラウドサービスの安定性を維持し、すべてのユーザーにより良いナレッジベース利用体験を向上させるため、**2025 年 2 月 24 日** よりナレッジリクエストレート頻度制限（Knowledge Request Rate Limit）を導入します。

## 

​

ナレッジベースの要求頻度制限とは?

ナレッジリクエスト頻度制限とは、1つのワークスペースがナレッジベースに対して1分間に実行できる最大リクエスト数のことです。この操作には、データセットの作成、ドキュメントの管理、アプリケーションやワークフローにおけるナレッジベースのクエリなどが含まれます。

## 

​

サブスクリプションバージョンの制限値

  * **Sandbox** ：10 回/分
  * **Professional** ：100 回/分
  * **Team** ：1,000 回/分



例えば、**Sandboxユーザー** が1分間に10回のヒットテストを実行した場合、該当ワークスペースは次の1分間、ナレッジリクエスト頻度制限によって操作が制限されます。

## 

​

どのような操作がナレッジリクエスト頻度制限の対象となりますか？

以下の操作を実行すると、ナレッジリクエストの頻度に制限されます：

  1. 空のデータセットの作成
  2. データセットの削除
  3. データセット設定の更新
  4. ドキュメントのアップロード
  5. ドキュメントの削除
  6. ドキュメントの更新
  7. ドキュメントの無効化
  8. ドキュメントの有効化
  9. ドキュメントのアーカイブ
  10. アーカイブされたドキュメントの復元
  11. ドキュメント処理の一時停止
  12. ドキュメント処理の再開
  13. セグメントの追加
  14. セグメントの削除
  15. セグメントの更新
  16. セグメントの一括インポート
  17. ヒットテストの実行
  18. アプリケーションとワークフローでナレッジベースをクエリ（注：マルチパスリコールによる複数回クエリも1リクエストとして集計されます）



* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/guides/knowledge-base/knowledge-request-rate-limit.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20edge-request-rate-li&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/guides/knowledge-base%2Fknowledge-request-rate-limit.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[リコールテスト/引用帰属](/ja-jp/guides/knowledge-base/retrieval-test-and-citation)[外部ナレッジベースとの接続](/ja-jp/guides/knowledge-base/connect-external-knowledge-base)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * ナレッジベースの要求頻度制限とは?
  * サブスクリプションバージョンの制限値
  * どのような操作がナレッジリクエスト頻度制限の対象となりますか？



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/guides/knowledge-base/metadata

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

ナレッジベース

メタデータ

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

  * ナレッジベース

    * [ナレッジベース](/ja-jp/guides/knowledge-base/readme)
    * ナレッジベース作成

    * ナレッジベースの管理

    * [メタデータ](/ja-jp/guides/knowledge-base/metadata)
    * [アプリ内でのナレッジベース統合](/ja-jp/guides/knowledge-base/integrate-knowledge-within-application)
    * [リコールテスト/引用帰属](/ja-jp/guides/knowledge-base/retrieval-test-and-citation)
    * [ナレッジベースの要求頻度制限](/ja-jp/guides/knowledge-base/knowledge-request-rate-limit)
    * [外部ナレッジベースとの接続](/ja-jp/guides/knowledge-base/connect-external-knowledge-base)
    * [外部知識API](/ja-jp/guides/knowledge-base/api-documentation/external-knowledge-api-documentation)
  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




ナレッジベース

# メタデータ

Copy page

## 

​

メタデータとは？

### 

​

定義

メタデータは他のデータを説明するための情報です。簡単に言えば、「データに関するデータ」です。これは本の目次やラベルのようなもので、データの内容、出所、用途を紹介します。 データの文脈を提供することで、メタデータはナレッジベース内でのデータの迅速な検索と管理を支援します。

### 

​

ナレッジベースのメタデータ定義

  * **フィールド（Field）** ：メタデータフィールドは文書の特定の属性を説明するための識別項目で、各フィールドは文書のある特徴や情報を表します。例えば「author」「language」など。

  * **フィールド値（Value）** ：フィールド値はそのフィールドの具体的な情報や属性です。例えば「Jack」「English」。



  * **フィールド値カウント（Value Count）** ：フィールド値カウントは、あるメタデータフィールドにマークされているフィールド値の数を指し、重複項目も含みます。例えば、ここでの「3」はフィールド値カウントであり、そのフィールドに3つのユニークなフィールド値があることを示します。


  * **値タイプ（Value Type）** ：値タイプはフィールド値の種類を指します。
    * 現在、Difyのメタデータ機能は以下の三種類の値タイプをサポートしています：
      * **文字列** （String）：テキスト値。
      * **数値** （Number）：数値。
      * **時間** （Time）：日付と時間。



## 

​

ナレッジベースのメタデータはどのように管理するか？

### 

​

ナレッジベースのメタデータフィールドの管理

ナレッジベース管理インターフェースでは、メタデータフィールドの作成、修正、削除ができます。

> 注意：このインターフェースで行うすべての更新は**グローバル更新** であり、メタデータフィールドリストへの変更はナレッジベース全体に影響し、すべての文書にマークされたメタデータを含みます。

#### 

​

メタデータ管理インターフェースの紹介

**メタデータ管理インターフェースへのアクセス**

ナレッジベース管理インターフェースで、右上の **メタデータ** ボタンをクリックして、メタデータ管理インターフェースに入ります。

**ナレッジベースのメタデータフィールドの種類**

ナレッジベースでは、メタデータフィールドは**ビルトインメタデータ（Built-in）**と** カスタムメタデータ**の二種類に分かれます。

Feature| ビルトインメタデータ（Built-in）| カスタムメタデータ  
---|---|---  
表示位置| ナレッジベースインターフェースのメタデータ欄の下半分。| ナレッジベースインターフェースのメタデータ欄の上半分。  
有効化方法| デフォルトでは無効で、手動で有効にする必要があります。| ユーザーが必要に応じて自由に追加できます。  
生成方法| 有効化後、システムが自動的に関連情報を抽出してフィールド値を生成します。| ユーザーが手動で追加し、完全にユーザー定義です。  
修正権限| 一度生成されると、フィールドとフィールド値は修正できません。| フィールド名の削除や編集が可能で、フィールド値も修正できます。  
適用範囲| 有効化後、既にアップロードされた文書と新たにアップロードされるすべての文書に適用されます。| メタデータフィールドを追加した後、フィールドはナレッジベースのメタデータリストに保存されます。具体的な文書にそのフィールドを適用するには手動設定が必要です。  
フィールド| システムによって事前定義され、以下を含みます：

  * document_name (string)：ファイル名
  * uploader (string)：アップローダー
  * upload_date (time)：アップロード日
  * last_update_date (time)：最終更新時間
  * source (string)：ファイルソース

| 初期状態では、ナレッジベースにカスタムメタデータフィールドはなく、ユーザーが手動で追加する必要があります。  
フィールド値タイプ| 

  * 文字列 (string)：テキスト値
  * 数値 (number)：数値
  * 時間 (time)：日付と時間

| 

  * 文字列 (string)：テキスト値
  * 数値 (number)：数値
  * 時間 (time)：日付と時間

  
  
#### 

​

メタデータフィールドの新規作成

  1. **+メタデータを追加** ボタンをクリックすると、**メタデータの新規作成** ポップアップが表示されます。



  2. **フィールド値タイプ** でメタデータフィールドの値タイプを選択します。

  3. **名前** ボックスにフィールドの名前を入力します。




> フィールド名は小文字、数字、アンダースコア（_）のみをサポートし、スペースや大文字はサポートしていません。

  4. **保存** ボタンをクリックして、フィールドを保存します。



#### 

​

メタデータフィールドの修正

  1. 単一のメタデータフィールドの右側にある編集ボタンをクリックすると、**リネーム** ポップアップが表示されます。



  2. **名前** ボックスでフィールド名を修正します。



> このポップアップではフィールド名の修正のみをサポートし、フィールド値タイプの修正はサポートしていません。

  3. **保存** ボタンをクリックして、修正後のフィールドを保存します。



> 修正して保存すると、そのフィールドはナレッジベース内のすべての関連文書で同期更新されます。

#### 

​

メタデータフィールドの削除

単一のメタデータフィールドの右側にある削除ボタンをクリックすると、そのフィールドを削除できます。

> 単一のフィールドを削除すると、そのフィールドおよびそのフィールドに含まれるフィールド値がナレッジベースのすべての文書から削除されます。

### 

​

文書メタデータ情報の編集

#### 

​

文書メタデータ情報の一括編集

ナレッジベース管理インターフェースで文書のメタデータ情報を一括編集できます。

**メタデータ編集ポップアップを開く**

  1. ナレッジベース管理インターフェースを開き、文書リストの左側にある白いボックスで一括操作したい文書をチェックします。チェックすると、ページの下部に操作オプションが表示されます。



[Entrance of Edit Metadata](https://assets-docs.dify.ai/2025/03/18b0c435604db6173acba41662474446.png)

  2. 操作オプションの **メタデータ** をクリックすると、**メタデータの編集** ポップアップが表示されます。



**メタデータ情報の一括追加**

  1. **メタデータの編集** ポップアップの下部にある **+メタデータを追加** ボタンをクリックすると、操作ポップアップが表示されます。


  * 選択した文書に既に作成されたフィールドを追加する場合：

    * ドロップダウンリストから既存のフィールドを選択して、フィールドリストに追加できます。

    * **メタデータを検索** 検索ボックスで必要なフィールドを検索し、その文書のフィールドリストに追加できます。

  * 選択した文書に新しいフィールドを作成する場合は、ポップアップの左下にある **+メタデータを新規作成** ボタンをクリックし、前述の **メタデータフィールドの新規作成** セクションを参照してフィールドを作成できます。




> **+メタデータを新規作成** ポップアップで作成したメタデータフィールドは、自動的にナレッジベースのフィールドリストに同期されます。

  * 既に作成されたフィールドを管理する場合は、そのポップアップの右下にある **管理** ボタンをクリックすると、ナレッジベースの管理インターフェースに移動します。



  2. _（オプション）_ フィールドを追加した後、フィールド値ボックスにそのフィールドに対応するフィールド値を入力します。


  * 値タイプが **時間** の場合、フィールド値を入力する際に時間選択ツールが表示され、具体的な時間を選択できます。


  3. **保存** ボタンをクリックして、操作を保存します。



**メタデータ情報の一括削除と修正**

  1. **メタデータの編集** ポップアップでメタデータ情報を削除・修正します：


  * **フィールド値の追加** ： メタデータ値を追加したいフィールドボックス内に直接必要な値を入力します。

  * **フィールド値のリセット** ： カーソルをフィールド名の左側にある青い点の上に置くと、青い点は **リセット** ボタンに変わります。青い点をクリックすると、フィールドボックス内の修正された内容が元のメタデータ値にリセットされます。

  * **フィールド値の削除** ：

    * 1つのフィールド値を削除する：削除したいフィールド値のフィールドボックス内で直接そのフィールド値を削除します。

    * 複数のフィールド値を削除する：**複数の値** カードの削除アイコンをクリックして、選択したすべての文書のそのメタデータフィールドの値を消去します。

  * **単一メタデータフィールドの削除** ： フィールドの最右側にある削除記号をクリックして、そのフィールドを削除します。削除後、そのフィールドは横線で消され、グレーアウトします。




> この操作は選択した文書のそのフィールドとフィールド値のみを削除し、フィールド自体はナレッジベースに保持されます。

  2. **保存** ボタンをクリックして、操作を保存します。



**一括操作の適用範囲の調整**

  * **一括操作の適用範囲の調整** ： **メタデータの編集** ポップアップの左下にある **すべての文書に適用** チェックボックスを使用して、編集モードでの変更の適用範囲を調整できます。

    * **いいえ（デフォルト）** ： このオプションをチェックしない場合、編集モードでの変更は元々そのメタデータフィールドを持っていた文書にのみ適用され、他の文書には影響しません。

    * **はい** ： このオプションをチェックする場合、編集モードでの変更はすべての選択された文書に適用されます。元々そのフィールドを持っていなかった文書には、自動的にそのフィールドが追加されます。




#### 

​

単一文書のメタデータ情報の編集

文書詳細インターフェースで単一文書のメタデータ情報を編集できます。

**文書メタデータ編集モードへのアクセス**

  1. 文書詳細インターフェースで、情報バーの上部にある **ラベリングを開始** ボタンをクリックします。



  2. 文書メタデータ編集モードに入ります。



**メタデータの文書追加**

  1. 文書のメタデータ編集モードで、**+メタデータを追加** ボタンをクリックすると、操作ポップアップが表示されます。 


  * 新しいフィールドを作成してその文書にフィールド値をマークしたい場合は、ポップアップの左下にある**+ メタデータを新規作成**ボタンをクリックし、前述の** メタデータフィールドの新規作成**セクションを参照してフィールドを作成できます。

> 文書ページで作成された新しいメタデータフィールドは、自動的にナレッジベースのフィールドリストに同期されます。

  * ナレッジベースに既存のフィールドを使用してその文書にフィールド値をマークしたい場合は、以下のいずれかの方法で既存のフィールドを使用できます：

    * ドロップダウンリストからナレッジベースの既存のフィールドを選択し、その文書のフィールドリストに追加します。

    * **メタデータを検索** 検索ボックスで必要なフィールドを検索し、その文書のフィールドリストに追加します。

  * ナレッジベースの既存のフィールドを管理したい場合は、ポップアップの右下にある**管理** ボタンをクリックして、ナレッジベースの管理インターフェースに移動します。



  2. _（オプション）_ フィールドを追加した後、フィールド名の右側のメタデータ欄にフィールド値を入力します。



  3. 右上の**保存** ボタンをクリックして、フィールド値を保存します。



**文書メタデータ情報の削除と編集**

  1. 文書のメタデータ編集モードで、右上の**編集** ボタンをクリックして、編集モードに入ります。



  2. 文書メタデータ情報を削除・編集します：

     * **フィールド値の削除と編集** ：フィールド名の右側のフィールド値ボックス内で、フィールド値を削除または修正します。

> このモードではフィールド値の修正のみをサポートし、フィールド名の修正はサポートしていません。

     * **フィールドの削除** ：フィールド値ボックスの右側にある削除ボタンをクリックして、フィールドを削除します。

> この操作はその文書のそのフィールドとフィールド値のみを削除し、フィールド自体はナレッジベースに保持されます。




  3. 右上の**保存** ボタンをクリックして、修正後のフィールド情報を保存します。



## 

​

メタデータ機能を使用してナレッジベース内の文書をフィルタリングする方法は？

[アプリケーション内でナレッジベースを統合する](https://docs.dify.ai/ja-jp/guides/knowledge-base/integrate-knowledge-within-application)の**メタデータを使用して知識をフィルタリングする** セクションを参照してください。

## 

​

API情報

[APIを通じてナレッジベースを維持する](https://docs.dify.ai/ja-jp/guides/knowledge-base/knowledge-and-documents-maintenance/maintain-dataset-via-api)を参照してください。

## 

​

FAQ

  * **メタデータの役割は何ですか？**

    * 検索効率の向上：ユーザーはメタデータタグを使用して関連情報を素早くフィルタリングして検索でき、時間を節約し作業効率を高めます。

    * データセキュリティの強化：メタデータを通じてアクセス権限を設定し、許可されたユーザーのみが機密情報にアクセスできるようにすることで、データのセキュリティを確保します。

    * データ管理能力の最適化：メタデータは企業や組織が効果的にデータを分類・保存するのを助け、データの管理と検索能力を向上させ、データの可用性と一貫性を強化します。

    * 自動化プロセスのサポート：メタデータは文書管理やデータ分析などのシナリオでタスクや操作を自動的にトリガーし、プロセスを簡素化して全体の効率を高めます。

  * **ナレッジベースメタデータ管理リスト内のメタデータフィールドと特定の文書内のメタデータ値には、どのような違いがありますか？**


/| 定義| 性質| 例  
---|---|---|---  
メタデータ管理リスト内のメタデータフィールド| 文書の特定の属性を説明するための事前定義されたフィールド。| グローバルフィールド。すべての文書がこれらのフィールドを使用できます。| 著者、文書タイプ、アップロード日。  
特定の文書内のメタデータ値| 各文書が必要に応じてマークする特定の文書に関する情報。| 文書固有の値。各文書はその内容に応じて異なるメタデータ値をマークします。| 文書Aの「著者」フィールド値は「張三」、文書Bの「著者」フィールド値は「李四」。  
  
  * **「ナレッジベース管理インターフェースでのメタデータフィールドの削除」「メタデータ編集ポップアップでの選択された文書のメタデータフィールドの削除」「文書詳細インターフェースでのメタデータフィールドの削除」には、どのような違いがありますか？**

操作方法| 操作手順| 影響範囲| 結果  
---|---|---|---  
ナレッジベース管理インターフェースでメタデータフィールドを削除| ナレッジベース管理インターフェースで、特定のメタデータフィールドの右側にある削除アイコンをクリックして、そのフィールドを削除します。| ナレッジベース管理リストからそのメタデータフィールドとそのすべてのフィールド値を完全に削除します。| そのフィールドはナレッジベースから削除され、すべての文書内のそのフィールドとすべてのフィールド値も消えます。  
メタデータ編集ポップアップで選択された文書のメタデータフィールドを削除| メタデータ編集ポップアップで、特定のメタデータフィールドの右側にある削除アイコンをクリックして、そのフィールドを削除します。| 選択された文書のそのフィールドとフィールド値のみを削除し、フィールド自体はナレッジベース管理リストに保持されます。| 選択された文書内のフィールドとフィールド値は削除されますが、フィールドはナレッジベース内に保持され、フィールド値カウントは数値上の変化が発生します。  
文書詳細インターフェースでメタデータフィールドを削除| 文書詳細インターフェースのメタデータ編集モードで、特定のメタデータフィールドの右側にある削除アイコンをクリックして、そのフィールドを削除します。| その文書のそのフィールドとフィールド値のみを削除し、フィールド自体はナレッジベース管理リストに保持されます。| その文書内のフィールドとフィールド値は削除されますが、フィールドはナレッジベース内に保持され、フィールド値カウントは数値上の変化が発生します。  
  
* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/guides/knowledge-base/metadata.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/guides/knowledge-base%2Fmetadata.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[APIを活用したナレッジベースのメンテナンス](/ja-jp/guides/knowledge-base/knowledge-and-documents-maintenance/maintain-dataset-via-api)[アプリ内でのナレッジベース統合](/ja-jp/guides/knowledge-base/integrate-knowledge-within-application)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * メタデータとは？
  * 定義
  * ナレッジベースのメタデータ定義
  * ナレッジベースのメタデータはどのように管理するか？
  * ナレッジベースのメタデータフィールドの管理
  * メタデータ管理インターフェースの紹介
  * メタデータフィールドの新規作成
  * メタデータフィールドの修正
  * メタデータフィールドの削除
  * 文書メタデータ情報の編集
  * 文書メタデータ情報の一括編集
  * 単一文書のメタデータ情報の編集
  * メタデータ機能を使用してナレッジベース内の文書をフィルタリングする方法は？
  * API情報
  * FAQ



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/guides/knowledge-base/readme

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

ナレッジベース

ナレッジベース

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

  * ナレッジベース

    * [ナレッジベース](/ja-jp/guides/knowledge-base/readme)
    * ナレッジベース作成

    * ナレッジベースの管理

    * [メタデータ](/ja-jp/guides/knowledge-base/metadata)
    * [アプリ内でのナレッジベース統合](/ja-jp/guides/knowledge-base/integrate-knowledge-within-application)
    * [リコールテスト/引用帰属](/ja-jp/guides/knowledge-base/retrieval-test-and-citation)
    * [ナレッジベースの要求頻度制限](/ja-jp/guides/knowledge-base/knowledge-request-rate-limit)
    * [外部ナレッジベースとの接続](/ja-jp/guides/knowledge-base/connect-external-knowledge-base)
    * [外部知識API](/ja-jp/guides/knowledge-base/api-documentation/external-knowledge-api-documentation)
  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




ナレッジベース

# ナレッジベース

Copy page

Difyプラットフォームでは、RAG（検索強化生成）ソリューションを通じて、ナレッジベースをよりアクセスしやすい形で提供します。開発者は企業の内部文書、FAQ、規格情報などをナレッジベースにアップロードし、整理することが可能で、これらはその後、大規模言語モデル（LLM）が問い合わせる際の情報源として利用されます。これにより、AIの大規模モデルが当初学習した静的なデータに依存する代わりに、ナレッジベースの内容をリアルタイムで更新し、情報が古くなることや欠けることによる問題を防ぐことができます。

ユーザーからの質問を受けたLLMは、まずナレッジベース内の内容をキーワードに基づいて検索します。これにより、関連性の高いコンテンツが選択され、LLMがより正確な答えを出すための重要な文脈を提供します。

この手法により、開発者はLLMが既存の訓練データに頼るだけでなく、リアルタイムの文書やデータベースからの最新情報を扱うことが可能となり、答えの正確性と関連性が向上します。

**Difyの主な利点** ：

  * リアルタイム更新：ナレッジベースの内容はいつでも最新のものに更新することができ、モデルが最新情報を得られるようにします。

  * 高精度：関連する文書を検索することで、LLMは実際の内容に基づき高品質な回答を生み出すことができ、誤情報を減らします。

  * 柔軟性：開発者はナレッジベースの内容をカスタマイズでき、実際のニーズに合わせて知識の範囲を調整できます。




ナレッジベース機能はRAGパイプラインの各段階を可視化し、ユーザーが個人またはチームのナレッジベースを管理しやすくするシンプルで使いやすいユーザーインターフェースを提供します。また、これを迅速にAIアプリケーションに統合することができます。準備するのは以下のようなテキストコンテンツだけです：

  * 長文コンテンツ（TXT、Markdown、DOCX、HTML、JSON、さらにはPDF）
  * 構造化データ（CSV、Excelなど）
  * オンラインデータソース（ウェブサイトからの情報収集、Notionからのデータ取得など）



ファイルを「ナレッジベース」にアップロードすることで、データの自動処理が行われます。

> もし既に独自のナレッジベースを持っている場合は、それをDifyに接続することで、外部のナレッジベースとの連携を確立できます。

### 

​

使用案例

例えば、既存のナレッジベースや製品のドキュメントを利用してAIカスタマーサポートアシスタントを開発したい場合、Difyを用いると、ドキュメントをナレッジベースにアップロードし、対話型アプリケーションを簡単に作成できます。従来の手法では、テキストデータからAIカスタマーサポートアシスタントを開発するまで数週間を要し、継続的なメンテナンスや効果的な更新作業が難しいことがありました。しかし、Difyを使用すると、このプロセスをわずか3分で完了させ、ユーザーからのフィードバック収集を始めることができます。

### 

​

ナレッジベースとドキュメント

Difyでのナレッジベースは、複数のドキュメント（Documents）から構成され、一つのドキュメントは複数のコンテンツブロック（Chunk）を含むことがあります。このナレッジベースは、アプリケーション全体で検索の対象として統合することが可能です。ドキュメントは、開発者や運営スタッフによってアップロードされるか、他のデータソースから同期されます。

独自のドキュメントライブラリを構築している場合、Difyの[外部ナレッジベース機能](./connect-external-knowledge-base)を利用して、自身のナレッジベースをDifyプラットフォームにリンクさせることができます。これにより、Difyプラットフォーム内で内容を再度アップロードすることなく、大規模な言語モデルがリアルタイムで独自のナレッジベースの内容を参照することが可能になります。

* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/guides/knowledge-base/readme.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/guides/knowledge-base%2Freadme.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[変更のお知らせ：画像アップロードがファイルアップロードに統合されました](/ja-jp/guides/workflow/bulletin)[作成手順](/ja-jp/guides/knowledge-base/knowledge-base-creation/introduction)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * 使用案例
  * ナレッジベースとドキュメント



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/guides/knowledge-base/retrieval-test-and-citation

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

ナレッジベース

リコールテスト/引用帰属

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

  * ナレッジベース

    * [ナレッジベース](/ja-jp/guides/knowledge-base/readme)
    * ナレッジベース作成

    * ナレッジベースの管理

    * [メタデータ](/ja-jp/guides/knowledge-base/metadata)
    * [アプリ内でのナレッジベース統合](/ja-jp/guides/knowledge-base/integrate-knowledge-within-application)
    * [リコールテスト/引用帰属](/ja-jp/guides/knowledge-base/retrieval-test-and-citation)
    * [ナレッジベースの要求頻度制限](/ja-jp/guides/knowledge-base/knowledge-request-rate-limit)
    * [外部ナレッジベースとの接続](/ja-jp/guides/knowledge-base/connect-external-knowledge-base)
    * [外部知識API](/ja-jp/guides/knowledge-base/api-documentation/external-knowledge-api-documentation)
  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




ナレッジベース

# リコールテスト/引用帰属

Copy page

### 

​

1 リコールテスト

Difyのナレッジベースでは、テキストによる検索テスト機能を提供しており、ユーザーがキーワードを入力すると、ナレッジベース内の関連コンテンツを呼び出すプロセスを模擬します。この際、検索されたコンテンツは関連度のスコアによって並べ替えられ、その後LLM（大規模言語モデル）に送られます。一般に、質問とコンテンツの一致度が高ければ高いほど、LLMによる回答の質も向上し、テキストの「学習効果」も高まります。

異なる検索手法や設定を試して、検索されたコンテンツの品質と効果を確認することが可能です。各ナレッジベースの分割方法には、それぞれ異なる検索テスト手法が対応しています。

  * Automatic
  * Custom



#### 

​

一般モード

**「ソーステキスト」** 入力欄に一般的なユーザー質問を入力し、**「テスト」** ボタンをクリックすることで、リコール結果を右側の **「リコール段落」** で確認できます。

一般モードでは、各コンテンツは独立しており、右上に表示されるスコアは、そのコンテンツがキーワードとどれだけマッチしているかを示します。高いスコアは、質問のキーワードとコンテンツがより密接に一致していることを意味します。

コンテンツをクリックすると、詳しい情報を確認できます。各コンテンツの下には、その情報源が表示され、その内容が信頼できるかどうかを判断できます。

#### 

​

一般モード

**「ソーステキスト」** 入力欄に一般的なユーザー質問を入力し、**「テスト」** ボタンをクリックすることで、リコール結果を右側の **「リコール段落」** で確認できます。

一般モードでは、各コンテンツは独立しており、右上に表示されるスコアは、そのコンテンツがキーワードとどれだけマッチしているかを示します。高いスコアは、質問のキーワードとコンテンツがより密接に一致していることを意味します。

コンテンツをクリックすると、詳しい情報を確認できます。各コンテンツの下には、その情報源が表示され、その内容が信頼できるかどうかを判断できます。

#### 

​

親子分割モード

**「ソーステキスト」** 入力欄に質問を入力し、**「テスト」** をクリックすると、右側の「検索結果段落」で結果を確認できます。親子分割モードでは、質問のキーワードが子コンテンツにヒットし、より精度の高い一致を得られます。右上のスコアは、子コンテンツとキーワード間の一致度を示します。

プレビューエリアでは、具体的にヒットした段落の内容を確認できます。一致後、子コンテンツが属する親コンテンツの全文脈を検索し、AIアプリケーションに完全な情報を提供します。

各コンテンツの下にある情報源を参照することで、引用された内容を確認できます。詳細ページでは、左側に親コンテンツ、右側にヒットした子コンテンツの情報が表示されます。キーワードは複数の子コンテンツにヒットする可能性があり、一致度スコアも表示されます。これに基づき、現在のコンテンツが適切かどうかを判断できます。

**「履歴」** では、過去の検索記録を確認できます。ナレッジベースがアプリケーションに関連付けられている場合、そのアプリケーションでの検索履歴もここで見ることができます。

**検索方法の変更**

ソーステキスト入力欄の右上にあるアイコンをクリックすると、現在のナレッジベースの検索方法と具体的なパラメータを変更することができます。変更後は、現在の検索テストのデバッグプロセス中にのみ適用されます。異なる検索手法の効果を比較したい場合は、「ナレッジベース設定」>「検索設定」で設定してください。

**リコールテストの推奨手順：**

  1. ユーザーの一般的な質問をカバーするテストケースやガイドラインの内容を設計・整理します。
  2. コンテンツの特徴や使用シーン（QAコンテンツか、多言語QAを含むかなど）に基づいて、適切な検索戦略を選択します。異なる検索手法の長所と短所については、拡張読み取り[検索強化生成（RAG）](/learn-more/extended-reading/retrieval-augment)を参照してください。
  3. 検索するコンテンツの数（TopK）と検索スコアの閾値（Score）を調整し、実際のアプリケーションシナリオや文書の品質を考慮して、適切なパラメータの組み合わせを選択します。



**TopK値と検索閾値（Score）の設定方法**

  * **TopKは、類似スコアの降順で検索されるコンテンツの最大数を指します。** TopK値を小さくすると、関連性の高いテキストが不足する可能性があります；TopK値を大きくすると、意味的に関連性の低いコンテンツが検索される可能性があり、LLMの応答品質が低下するかもしれません。

  * **検索閾値（Score）は、検索されるコンテンツの最低類似スコアを指します。** 閾値を下げると、関連性の低いコンテンツが検索される可能性があります；閾値を高く設定すると、関連するコンテンツが見逃される可能性があります。




* * *

### 

​

2 引用と帰属

アプリケーション内でナレッジベースの効果をテストする際、**スタジオ — 機能追加 — 引用と帰属** に進み、引用と帰属機能を有効にします。

機能を有効にすると、大規模言語モデルが質問に回答する際にナレッジベースからの内容を引用した場合、返信内容の下に具体的な引用段落情報を確認できます。これには**元のパラグラフテキスト、パラグラフ番号、マッチ度** などが含まれます。引用段落上部の**ナレッジベースにジャンプ** をクリックすると、開発者がデバッグ編集を行いやすいように、そのパラグラフが含まれるナレッジベースのパラグラフリストに簡単にアクセスできます。

* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/guides/knowledge-base/retrieval-test-and-citation.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20eval-test-and-citat&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/guides/knowledge-base%2Fretrieval-test-and-citation.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[アプリ内でのナレッジベース統合](/ja-jp/guides/knowledge-base/integrate-knowledge-within-application)[ナレッジベースの要求頻度制限](/ja-jp/guides/knowledge-base/knowledge-request-rate-limit)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * 1 リコールテスト
  * 2 引用と帰属



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/guides/management/app-management

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

管理

アプリの管理

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理

    * [アプリの管理](/ja-jp/guides/management/app-management)
    * [チームメンバーの管理](/ja-jp/guides/management/team-members-management)
    * [個人アカウントの管理](/ja-jp/guides/management/personal-account-management)
    * [サブスクリプション管理](/ja-jp/guides/management/subscription-management)
    * [バージョン管理](/ja-jp/guides/management/version-control)



##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




管理

# アプリの管理

Copy page

### 

​

アプリ情報の編集

アプリを作成した後に、アプリ名や説明を変更したい場合は、アプリの左上隅にある「情報の編集」をクリックしてください。これにより、アプリのアイコン、名前、または説明を修正できます。

### 

​

アプリの複製

すべてのアプリは複製が可能です。アプリの左上隅にある「複製」をクリックしてください。

### 

​

ワークフローのオーケストレーションに切り替える

TODO 🚧

### 

​

アプリのエクスポート

Difyで作成されたアプリはDSL形式でエクスポートをサポートしており、設定ファイルを任意のDifyチームに自由にインポートできます。 DSLファイルは次の2つの方法でエクスポートできます:

  * シナリオページ中のアプリカードの右下隅の”DSLをエクスポート”をクリックする。
  * アプリ内のオーケストレートページに入れるあど、左上隅の”DSLをエクスポート”のボタンをクリックする。



DSLファイルは以下の機密情報を含まれません:

  * APIキーなどの第三者ツールの認証情報
  * 環境変数に`Secret`が含まれる場合、DSLをエクスポートするときに機密情報のエクスポートを許可するかどうかを尋ねるメッセージが表示されます。



Dify DSLは、Dify.AIによってv0.6以降で定義されたAIアプリエンジニアリングファイル標準です。ファイル形式はYMLで、アプリの基本的な説明、モデルパラメータ、オーケストレーション構成などをカバーしています。

### 

​

アプリケーションのインポート

Difyアプリケーションをインポートする際は、まずDSLファイルをDifyプラットフォームにアップロードしてください。インポート中にバージョンチェックが行われ、DSLファイルのバージョンが古い場合には警告が表示されます。

  * SaaSユーザーの場合、SaaSプラットフォームからエクスポートされるDSLファイルは常に最新のバージョンです。
  * コミュニティユーザーの場合は、[Difyのアップグレード](/ja-jp/getting-started/install-self-hosted/docker-compose)を参照して、コミュニティエディションを最新に更新し、最新のDSLファイルをエクスポートすることをお勧めします。これにより、互換性の問題を防ぐことができます。



### 

​

アプリの削除

アプリを削除したい場合は、アプリの左上隅にある「削除」をクリックしてください。

⚠️アプリの削除は取り消すことができません。すべてのユーザーがあなたのアプリにアクセスできなくなり、アプリ内のすべてのプロンプト、オーケストレーション構成、ログが削除されます。

* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/guides/management/app-management.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20anagem&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/guides/management%2Fapp-management.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[メンバーの招待と管理](/ja-jp/guides/workspace/invite-and-manage-members)[チームメンバーの管理](/ja-jp/guides/management/team-members-management)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * アプリ情報の編集
  * アプリの複製
  * ワークフローのオーケストレーションに切り替える
  * アプリのエクスポート
  * アプリケーションのインポート
  * アプリの削除



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/guides/management/personal-account-management

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

管理

個人アカウントの管理

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理

    * [アプリの管理](/ja-jp/guides/management/app-management)
    * [チームメンバーの管理](/ja-jp/guides/management/team-members-management)
    * [個人アカウントの管理](/ja-jp/guides/management/personal-account-management)
    * [サブスクリプション管理](/ja-jp/guides/management/subscription-management)
    * [バージョン管理](/ja-jp/guides/management/version-control)



##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




管理

# 個人アカウントの管理

Copy page

## 

​

各バージョンでのログイン方法

Difyのバージョンによってサポートされるログイン方法は以下のようになっています：

バージョン| ログイン方法  
---|---  
コミュニティ版| メールアドレスとパスワード  
クラウド版| GitHubアカウント認証、Googleアカウント認証、メールアドレスと認証コード  
  
> 注意点：Difyのクラウドサービスでは、GitHubやGoogleアカウントに紐づくメールアドレスが、認証コードでログインする際のメールアドレスと一致している場合、システムが自動的にそれらを同一のアカウントとみなして紐づけます。これにより、手動でのアカウント連携を省略し、重複したアカウント作成を防ぎます。

## 

​

個人情報の変更

個人アカウント情報を更新するには、以下の手順に従ってください：

  1. Difyチームのホームページにアクセスします。
  2. 右上隅のアバターをクリックします。
  3. **「アカウント」**を選択します。



次の詳細を変更できます：

  * アバター
  * ユーザー名
  * メールアドレス
  * パスワード



### 

​

ログイン方法

Difyでは、3つのログイン方法を提供しています。それは、メールアドレスと認証コードによるログイン、Googleアカウントでの認証、そしてGitHubアカウントでの認証です。1つのDifyアカウントで、直接メールアドレスと認証コードを使ってログインすることも、同じメールアドレスを使用しているGoogleやGitHubのアカウントを通じてログインすることもできます。この場合、追加でアカウントを紐付ける必要はありません。

### 

​

表示言語の変更

表示言語を変更するには、Difyチームのホームページで右上隅のアバターをクリックし、**「言語」**を選択します。Difyは以下の言語をサポートしています：

  * 英語
  * 中国語(簡体字)
  * 中国語(繁体字)
  * ポルトガル語（ブラジル）
  * フランス語（フランス）
  * 日本語（日本）
  * 韓国語（韓国）
  * ロシア語（ロシア）
  * イタリア語（イタリア）
  * タイ語（タイ）
  * インドネシア語
  * ウクライナ語（ウクライナ）



Difyはコミュニティのボランティアによる追加の言語バージョンの提供を歓迎しています。貢献をご希望の方は、[GitHubリポジトリ](https://github.com/langgenius/dify/blob/main/CONTRIBUTING)をご覧ください。

### 

​

アカウントにリンクされたアプリを確認

**アカウント** ページで、現在のアカウントにリンクされているアプリを確認できます。

### 

​

個人アカウントの削除

⚠️ 危険な操作です。慎重に進めてください。

DifyのSaaS版のアカウントの削除を実行するには、右上隅にあるあなたのアバターをクリックし、ドロップダウンメニューから **「アカウント」** を選択した後、**「アカウントを削除」** ボタンをクリックしてください。

アカウントを削除すると、この操作は取り消しできません。同じメールアドレスは30日間再登録できません。アカウントが所有するすべてのワークスペースも削除され、共有ワークスペースからも自動的に削除されます。

削除したいアカウントのメールアドレスと、確認用の認証コードを入力する後、システムはアカウントに関連するすべての情報を完全に削除します。

### 

​

FAQ

**1\. アカウントを誤って削除した場合、削除を取り消すことはできますか？**  
アカウント削除は取り消しができません。特別な事情がある場合は、削除後20日以内に `support@dify.ai` に連絡し、詳細を説明してください。

**2\. アカウントを削除した後、チーム内での役割やデータはどうなりますか？**  
アカウント削除後：

  * **チームオーナー** として作成したワークスペースは解散され、そのワークスペース内のすべてのデータが削除されます。チームメンバーはそのワークスペースへのアクセスを失います。
  * **チームメンバーまたは管理者** として参加していたワークスペースは引き続きデータを保持し、アカウントで作成したアプリデータも保存されます。アカウントはそのワークスペースのメンバーリストから削除されます。



**3\. アカウントを削除した後、同じメールアドレスで新しいアカウントを再登録できますか？**  
アカウント削除後、30日間は同じメールアドレスで新しいアカウントを登録することはできません。

**4\. アカウントを削除した後、GoogleやGitHubなどのサードパーティサービスの認証は取り消されますか？**  
はい、アカウント削除後、GoogleやGitHubなどのすべてのサードパーティサービスの認証が自動的に取り消されます。

**5\. アカウントを削除した後、Difyのサブスクリプションは自動的にキャンセルされ、払い戻しされますか？**  
アカウント削除後、Difyのサブスクリプションは自動的にキャンセルされますが、サブスクリプション料金は払い戻されません。今後の課金は行われません。

* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/guides/management/personal-account-management.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20nal-account-managem&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/guides/management%2Fpersonal-account-management.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[チームメンバーの管理](/ja-jp/guides/management/team-members-management)[サブスクリプション管理](/ja-jp/guides/management/subscription-management)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * 各バージョンでのログイン方法
  * 個人情報の変更
  * ログイン方法
  * 表示言語の変更
  * アカウントにリンクされたアプリを確認
  * 個人アカウントの削除
  * FAQ



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/guides/management/subscription-management

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

管理

サブスクリプション管理

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理

    * [アプリの管理](/ja-jp/guides/management/app-management)
    * [チームメンバーの管理](/ja-jp/guides/management/team-members-management)
    * [個人アカウントの管理](/ja-jp/guides/management/personal-account-management)
    * [サブスクリプション管理](/ja-jp/guides/management/subscription-management)
    * [バージョン管理](/ja-jp/guides/management/version-control)



##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




管理

# サブスクリプション管理

Copy page

### 

​

Difyチームサブスクリプションのアップグレード

チームの所有者や管理者は、Difyチームのサブスクリプションプランをアップグレードできます。Difyチームのホームページ右上にある **「アップグレード」** ボタンをクリックし、希望のプランを選択して支払いを完了することで、サブスクリプションをアップグレードしてください。

### 

​

Difyチームサブスクリプションの管理

Difyの有料サービス（ProfessionalまたはTeamプラン）に加入後、チームの所有者や管理者は **「設定」** → **「請求」** にアクセスし、チームの請求とサブスクリプションの詳細を管理できます。

請求ページでは、さまざまなチームリソースの利用状況を確認できます。

### 

​

よくある質問

#### 

​

1\. チームプランのアップグレード/ダウングレードやサブスクリプションのキャンセル方法は？

チームの所有者や管理者は、**設定** → **請求** に移動し、**請求とサブスクリプションの管理** をクリックすることで、サブスクリプションプランを変更できます。

  * ProfessionalプランからTeamプランにアップグレードする際は、当月の差額を支払う必要があり、すぐに適用されます。
  * TeamプランからProfessionalプランにダウングレードする場合も、即座に適用されます。



サブスクリプションプランをキャンセルすると、**チームは現在の請求サイクルの終了時に自動的にサンドボックス/無料プランに移行** し、その後はサンドボックス/無料プランの制限に従った利用となります。

#### 

​

2\. サブスクリプションプランをアップグレードした後、チームの利用可能なリソースにどのような変更があるか？

リソース| 無料| Professional| Team  
---|---|---|---  
チームメンバー数の制限| 1| 3| 無制限  
アプリ数の制限| 10| 50| 無制限  
ベクトル空間の容量| 5MB| 200MB| 1GB  
アプリの[マーク付き返信](https://docs.dify.ai/v/ja-jp/guides/biao-zhu/logs)| 10| 2000| 5000  
ナレッジベースへのドキュメントアップロード数| 50| 500| 1000  
OpenAI会話クォータ| 200合計| 月間5000| 月間10000  
  
注：

  * 無料プランからProfessionalにアップグレードする場合、すべてのリソースが増加します。
  * ProfessionalからTeamにアップグレードすると、一部のリソースが無制限になるなど、さらなる拡張が行われます。



サブスクリプションプランをアップグレードした後は：

  * OpenAI会話クォータは、新しい請求サイクルに合わせてリセットされます。
  * 以前に使用したリソース（例：ベクトル空間の使用量やドキュメントのアップロード）はリセットされず、削除されません。



#### 

​

3\. サブスクリプションが期限切れになった場合はどうなりますか？

サブスクリプションが期限切れになると、チームは自動的にサンドボックス/無料プランにダウングレードされ、所有者以外はチームにアクセスできなくなります。また、チーム内の余剰リソース（ドキュメント、ベクトル空間など）もロックされます。

#### 

​

4\. チーム所有者のアカウントを削除するとチームに影響しますか？

チームは必ず1人の所有者に紐づいています。チームの所有権が他のメンバーに適切に移転されない場合、チームに関するすべてのデータが削除され、所有者のアカウントと共に消去されます。

#### 

​

5\. サブスクリプションプラン間の違いは何ですか？

詳細な機能の比較については、[Difyの価格設定](https://dify.ai/pricing)をご覧ください。

* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/guides/management/subscription-management.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20ription-managem&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/guides/management%2Fsubscription-management.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[個人アカウントの管理](/ja-jp/guides/management/personal-account-management)[バージョン管理](/ja-jp/guides/management/version-control)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * Difyチームサブスクリプションのアップグレード
  * Difyチームサブスクリプションの管理
  * よくある質問
  * 1\. チームプランのアップグレード/ダウングレードやサブスクリプションのキャンセル方法は？
  * 2\. サブスクリプションプランをアップグレードした後、チームの利用可能なリソースにどのような変更があるか？
  * 3\. サブスクリプションが期限切れになった場合はどうなりますか？
  * 4\. チーム所有者のアカウントを削除するとチームに影響しますか？
  * 5\. サブスクリプションプラン間の違いは何ですか？



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/guides/management/team-members-management

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

管理

チームメンバーの管理

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理

    * [アプリの管理](/ja-jp/guides/management/app-management)
    * [チームメンバーの管理](/ja-jp/guides/management/team-members-management)
    * [個人アカウントの管理](/ja-jp/guides/management/personal-account-management)
    * [サブスクリプション管理](/ja-jp/guides/management/subscription-management)
    * [バージョン管理](/ja-jp/guides/management/version-control)



##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




管理

# チームメンバーの管理

Copy page

このガイドでは、Difyチーム内のメンバーを管理する方法について説明します。異なるDifyバージョンにおけるチームメンバーの制限は以下の通りです。

サンドボックス / 無料| プロフェッショナル| チーム| コミュニティ| エンタープライズ  
---|---|---|---|---  
1| 3| 無制限| 無制限| 無制限  
  
### 

​

メンバーの追加

チームの所有者と管理人のみがチームメンバーを追加する権限を持っています。

メンバーを追加するには、チームの所有者や管理人は右上隅のアバターをクリックし、**“メンバー”** → **“追加”**を選択します。メールアドレスを入力し、メンバー権限を割り当ててプロセスを完了します。

> コミュニティエディションでメール機能を有効にするには、チームオーナーがシステムの[環境変数](/ja-jp/getting-started/install-self-hosted/environments)を設定してメールサービスをオンにする必要があります。

  * Difyに未登録の招待メンバーには、招待メールが送信されます。メール内のリンクをクリックすることで、登録を完了できます。
  * すでにDifyに登録済みの招待メンバーには、権限が自動で付与され、**招待メールは送信されません** 。招待されたメンバーは、右上のメニューから新しいワークスペースに切り替えることができます。



### 

​

メンバーの権限

チームメンバーは、所有者、管理者、編集者、メンバーに分類されます。

  * **所有者**
    * ロールの説明: チームの最初のメンバーで、最も高いレベルの権限を持ち、チーム全体の運営と管理を担当します。
    * 権限の概要: チームメンバーの管理、メンバー権限の調整、モデルプロバイダーの設定、アプリケーションの作成と削除、ナレッジベースの作成、ツールライブラリの設定などの権限を持ちます。
  * **管理者**
    * ロールの説明: チームの管理者で、チームメンバーとモデルプロバイダーの管理を担当します。
    * 権限の概要: メンバー権限を調整することはできませんが、チームメンバーの追加や削除、モデルプロバイダーの設定、アプリケーションの作成、編集、削除、ナレッジベースの作成、ツールライブラリの設定などの権限を持ちます。
  * **編集者**
    * ロールの説明: 通常のチームメンバーで、共同でアプリケーションの作成と編集を担当します。
    * 権限の概要: チームメンバーの管理、モデルプロバイダーの設定、ツールライブラリの設定はできません。アプリケーションの作成、編集、削除、ナレッジベースの作成などの権限を持ちます。
  * **メンバー**
    * ロールの説明: 通常のチームメンバーで、チーム内で作成されたアプリケーションの閲覧と使用のみが許可されます。
    * 権限の概要: チーム内でのアプリケーションの使用とツールの使用のみが許可されます。



### 

​

メンバーの削除

チームの所有者のみがチームメンバーを削除する権限を持っています。

メンバーを削除するには、Difyチームのホームページの右上隅のアバターをクリックし、**“設定”** → **“メンバー”**に移動し、削除するメンバーを選択して** ”チームから削除”**をクリックします。

### 

​

よくある質問

#### 

​

1\. チームの所有者権を譲渡するにはどうすればよいですか？

チームの所有者は最も高いレベルの権限を持ちます。チーム構造の安定性を維持するため、一度確立されたチームの所有者権は手動で譲渡することはできません。

#### 

​

2\. チームを削除するにはどうすればよいですか？

チームデータのセキュリティ上の理由から、チームの所有者は自分のチームを自分で削除することはできません。

#### 

​

3\. チームメンバーのアカウントを削除するにはどうすればよいですか？

チームの所有者も管理者もチームメンバーのアカウントを削除することはできません。アカウントの削除には、アカウントの所有者が積極的にリクエストする必要があり、他者が行うことはできません。アカウントの削除の代替手段として、チームからメンバーを削除することで、そのユーザーのチームへのアクセス権限が取り消されます。

* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/guides/management/team-members-management.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20members-managem&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/guides/management%2Fteam-members-management.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[アプリの管理](/ja-jp/guides/management/app-management)[個人アカウントの管理](/ja-jp/guides/management/personal-account-management)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * メンバーの追加
  * メンバーの権限
  * メンバーの削除
  * よくある質問
  * 1\. チームの所有者権を譲渡するにはどうすればよいですか？
  * 2\. チームを削除するにはどうすればよいですか？
  * 3\. チームメンバーのアカウントを削除するにはどうすればよいですか？



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/guides/management/version-control

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

管理

バージョン管理

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理

    * [アプリの管理](/ja-jp/guides/management/app-management)
    * [チームメンバーの管理](/ja-jp/guides/management/team-members-management)
    * [個人アカウントの管理](/ja-jp/guides/management/personal-account-management)
    * [サブスクリプション管理](/ja-jp/guides/management/subscription-management)
    * [バージョン管理](/ja-jp/guides/management/version-control)



##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




管理

# バージョン管理

Copy page

## 

​

はじめに

バージョン管理とは、**Difyのチャットフローやワークフロー管理インターフェース** の核となる機能です。この機能により、ユーザーはアプリの複数バージョンを効率的に管理および公開することができます。

バージョン管理機能を使用することで、ユーザーは**下書きバージョン** と**公開バージョン** を明確に区別し、必要に応じて**過去のバージョン** にロールバックすることが可能です。これにより、アプリの改良と管理がより簡単で直感的になり、継続的な更新と安定性が確保されます。

## 

​

関連用語の説明

  * **下書きバージョン（Current Draft）** ： Difyのチャットフローやワークフロー管理インターフェースにおいて、**現在の作業状態を示す唯一のバージョン** です。ユーザーはこのバージョンでチャットフローやワークフローの編集、修正、プレビューを行うことができます。


  * **公開バージョン（Published Version）** ： ユーザーがオンラインに公開したすべてのバージョンの総称です。最新の公開バージョンと過去の公開バージョンの総称です。公開操作を実行するたびに、新しい公開バージョンが生成されます。

  * **最新公開バージョン（Latest Version）** ： ユーザーが最後にオンラインに公開したバージョンです。Difyのバージョン管理インターフェースでは、これを`Latest`としてマークし、他の過去の公開バージョンと区別しています。



  * **過去の公開バージョン（Previous Version）** ： 以前に公開されたが、現在は最新ではなくなったバージョンを指します。


  * **バージョンの復元（Restore）** ： バージョン管理の復元機能を使用すると、アプリを特定の過去のバージョンに戻すことができます。



## 

​

主な機能

  * **バージョン一覧の表示** ： バージョン管理インターフェースで、公開されたすべてのバージョンとその詳細情報を確認できます。

  * **バージョンの検索** ： フィルター機能を使用して、必要なバージョンを素早く見つけることができます。

  * **新バージョンの公開** ： 新しいアプリバージョンを公開し、名前と説明を付けることができます。

  * **公開バージョン情報の編集** ： 公開済みバージョンの名前や説明を後から編集することができます。

  * **過去バージョンの削除** ： 不要になった過去のバージョンを削除し、バージョンリストを整理できます。

  * **過去バージョンへのロールバック** ： バージョン復元機能を使用して、過去のバージョンの内容を下書きに読み込み、必要に応じて修正することができます。




## 

​

バージョン一覧の表示方法

  1. 右上の**バージョン管理** ボタンをクリックして、バージョン管理インターフェースにアクセスします。


  2. バージョン管理インターフェースには、時系列の降順で並べられたバージョンリストが表示されます。各バージョンの**名前、説明情報、公開日時、公開者** を確認できます。

  3. _（オプション）_ バージョンリストが多数ある場合は、**さらに読み込む** ボタンをクリックすると、より多くのバージョン履歴を表示できます。




## 

​

特定のバージョンを検索する方法

  * **自分が公開したバージョンを探す** ： **フィルター** ボタンをクリックするとフィルターオプションが表示されます。以下の2つの選択肢があります：

    * **すべてのバージョン** ： あなた自身と他のユーザーが公開したすべてのバージョンを表示します。
    * **自分が公開したバージョン** ： あなたが公開したバージョンのみを表示します。 必要に応じて、適切なフィルターを選択して、対応するバージョンをご確認いただけます。
  * **名前付きバージョンを検索** : 名前が付けられたバージョンのみを表示したい場合は、**名前付きバージョンを検索** オプションをクリックしてください。このオプションを有効にすると、名前付きバージョンのみがバージョンリストに表示され、名前のないバージョンは非表示になります。




## 

​

新しいバージョンの公開方法

  1. チャットフロー/ワークフローの作成が完了したら、画面右上の**公開する > 公開更新**をクリックすると、現在のバージョンが公開されます。


  2. 公開後、この最新バージョンは`Latest`としてマークされ、関連情報がバージョン管理インターフェースに表示されます。



## 

​

公開済みバージョンの情報編集方法

  1. バージョン管理インターフェースで、編集したいバージョンを見つけ、そのバージョンの右上にあるアクションメニューをクリックします。


  * 以前にデフォルト名でバージョンを保存した場合は、**このバージョンに名前を付ける** をクリックします。


  * すでに名前を付けている場合は、**バージョン情報を編集** をクリックして、バージョン名と説明を修正できます。


  2. **公開する** をクリックして、バージョン情報を公開します。



## 

​

履歴バージョンを削除するには？

  1. バージョン管理画面で、削除したい公開済みバージョンを見つけ、そのバージョンの右上にある操作メニューをクリックします。

  2. **削除** を選択すると、確認ダイアログが表示されます。



  3. **削除** をクリックすると、そのバージョンがバージョン管理画面から削除されます。



  * **下書きバージョン** （Current Draft）は、現在のチャットフロー/ワークフロー画面で編集中のバージョンであり、削除できません。
  * **最新公開バージョン** （「Latest」とマークされているバージョン）は、ユーザーが最後に公開したバージョンであり、削除できません。



## 

​

特定の公開済みバージョンに戻すには？

  1. バージョン管理画面で、ロールバックしたい履歴バージョンを見つけ、そのバージョンの右上にある操作メニューをクリックします。

  2. **ロールバック** を選択すると、確認ダイアログが表示されます。



  3. **ロールバック** をクリックすると、現在の下書きバージョンがその履歴バージョンに置き換えられます。



## 

​

使用シナリオ

以下では、典型的なユースケースを通じて、各バージョン間の関係を説明します。

同じ色は同じバージョン内容を表します。

### 

​

ステージ1

  * システムが自動的に**下書きバージョン** Version Aを作成します。



### 

​

ステージ2：初回公開

  * Version Aが公開され、**最新公開バージョン** になります。
  * システムが自動的に**下書きバージョン** Version Bを作成します。



### 

​

ステージ3：再公開

  * Version Bが公開され、**最新公開バージョン** になります。
  * Version Aは**履歴公開バージョン** になります。
  * システムが自動的に**下書きバージョン** Version Cを作成します。



### 

​

ステージ4：ロールバック操作

  * Version Aが**下書きバージョン** として復元され、Version Cが上書きされます。
  * Version Bは引き続き**最新公開バージョン** です。



### 

​

ステージ5：ロールバック後の公開

  * 復元されたVersion Aが公開され、**最新公開バージョン** になります。
  * 以前のVersion AとVersion Bは**履歴公開バージョン** になります。
  * システムが自動的に**下書きバージョン** Version Dを作成します。



### 

​

全体フロー

## 

​

よくある質問

  * **下書きバージョン、公開済みバージョン、最新公開バージョン、履歴公開バージョンの違いは何ですか？**

定義| 操作方法| オンラインアクセス| 削除可能か| ロールバック可能か  
---|---|---|---|---  
下書きバージョン| 編集・修正を行い、公開（Publish）操作でオンライン環境に反映させることができます。| 不可（公開操作後のみアクセス可能）| 削除できません。| ロールバックできません。  
最新公開バージョン| 直接編集はできません。新しいドラフトバージョンを作成し、公開することで更新できます。| 可能（現在のオンラインバージョン）| 削除できません。| 可能  
過去の公開バージョン| ロールバック（Restore）操作で過去のバージョンをドラフトバージョンに読み込み、編集・公開できます。| 不可（バージョンリストにのみ存在）| 削除できません。| 可能  
公開済みバージョン| 最新公開バージョンと過去の公開バージョンの総称です。| -| -| -  
  
## 

​

よくある質問

  * **履歴バージョンへのロールバック後、現在の下書きは消えてしまいますか？**



履歴バージョンにロールバックすると、選択したバージョンが新しい下書きとして自動的に作成されます。この下書きで編集を行い、公開することができます。

そのため、ロールバック操作を行うと、既存の下書きは失われますのでご注意ください。

  * **バージョン管理機能は、どのタイプのアプリで利用できますか？**



現在、バージョン管理機能は**チャットフロー** と**ワークフロー** のみ対応しています。**チャットボット** 、**テキスト生成** 、**エージェント** には対応していません。

* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/guides/management/version-control.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20on-cont&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/guides/management%2Fversion-control.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[サブスクリプション管理](/ja-jp/guides/management/subscription-management)[初級編](/ja-jp/workshop/basic/README)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * はじめに
  * 関連用語の説明
  * 主な機能
  * バージョン一覧の表示方法
  * 特定のバージョンを検索する方法
  * 新しいバージョンの公開方法
  * 公開済みバージョンの情報編集方法
  * 履歴バージョンを削除するには？
  * 特定の公開済みバージョンに戻すには？
  * 使用シナリオ
  * ステージ1
  * ステージ2：初回公開
  * ステージ3：再公開
  * ステージ4：ロールバック操作
  * ステージ5：ロールバック後の公開
  * 全体フロー
  * よくある質問
  * よくある質問



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/guides/model-configuration/README

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

モデルの設定

モデル

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

    * [モデル](/ja-jp/guides/model-configuration/README)
    * [新しいプロバイダーの追加](/ja-jp/guides/model-configuration/new-provider)
    * [事前定義されたモデルの追加](/ja-jp/guides/model-configuration/predefined-model)
    * [カスタムモデルの追加](/ja-jp/guides/model-configuration/customizable-model)
    * [インターフェース方法](/ja-jp/guides/model-configuration/interfaces)
    * [設定ルール](/ja-jp/guides/model-configuration/schema)
    * [負荷分散](/ja-jp/guides/model-configuration/load-balancing)
  * アプリ・オーケストレーション

  * ワークフロー

  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




モデルの設定

# モデル

Copy page

Difyは大規模言語モデルに基づいたAIアプリケーション開発プラットフォームです。初めて使用する際には、Difyの**設定 — モデルプロバイダー** ページで必要なモデルを追加および設定してください。

Difyは現在、OpenAIのGPTシリーズやAnthropicのClaudeシリーズなど、主流のモデルプロバイダーをサポートしています。異なるモデルの能力やパラメータの種類が異なるため、アプリケーションのニーズに応じて適切なモデルプロバイダーを選択できます。**Difyで以下のモデル能力を使用する前に、各モデルプロバイダーの公式サイトでAPIキーを取得する必要があります。**

### 

​

モデルタイプ

Difyでは、モデルの使用シーンに応じて以下の4つのタイプに分類しています：

  1. **システム推論モデル** 。アプリケーション内で使用されるのはこのタイプのモデルです。チャット、会話名生成、次の質問の提案でもこの推論モデルが使用されます。

> サポートされているシステム推論モデルプロバイダー：[OpenAI](https://platform.openai.com/account/api-keys)、[Azure OpenAIサービス](https://azure.microsoft.com/en-us/products/ai-services/openai-service/)、[Anthropic](https://console.anthropic.com/account/keys)、Hugging Faceハブ、Replicate、Xinference、OpenLLM、[讯飞星火](https://www.xfyun.cn/solutions/xinghuoAPI)、[文心一言](https://console.bce.baidu.com/qianfan/ais/console/applicationConsole/application)、[通义千问](https://dashscope.console.aliyun.com/api-key_management?spm=a2c4g.11186623.0.0.3bbc424dxZms9k)、[Minimax](https://api.minimax.chat/user-center/basic-information/interface-key)、ZHIPU(ChatGLM)

  2. **Embeddingモデル** 。データセット内の分割された文書の埋め込みに使用されるのはこのタイプのモデルです。データセットを使用するアプリケーションでは、ユーザーの質問を埋め込み処理する際にもこのタイプのモデルが使用されます。

> サポートされている埋め込みモデルプロバイダー：OpenAI、ZHIPU(ChatGLM)、Jina AI([Jina Embeddings](https://jina.ai/embeddings/))

  3. [**Rerankモデル**](/ja-jp/learn-more/extended-reading/retrieval-augment/rerank)。**Rerankモデルは検索能力を強化し、LLMの検索結果を改善するために使用されます。**

> サポートされているRerankモデルプロバイダー：Cohere、Jina AI([Jina Reranker](https://jina.ai/reranker))

  4. **音声からテキストへのモデル** 。対話型アプリケーションで音声をテキストに変換する際に使用されるのはこのタイプのモデルです。

> サポートされている音声からテキストへのモデルプロバイダー：OpenAI




技術の進化とユーザーのニーズに応じて、今後もさらに多くのLLMプロバイダーをサポートしていきます。

### 

​

ホストモデル試用サービス

Difyクラウドサービスのユーザーには、異なるモデルの試用枠を提供しています。この枠が尽きる前に自分のモデルプロバイダーを設定してください。さもないと、アプリケーションの正常な使用に影響を及ぼす可能性があります。

  * **OpenAIホストモデル試用：** GPT3.5-turbo、GPT3.5-turbo-16k、text-davinci-003モデルの試用として200回の呼び出し回数を提供します。



### 

​

デフォルトモデルの設定

Difyは使用シーンに応じて設定されたデフォルトモデルを選択します。`設定 > モデルプロバイダー`でデフォルトモデルを設定します。

システム推論モデル：アプリケーションの作成に使用されるデフォルトの推論モデルを設定し、対話名の生成や次のステップの質問に関する提案などの機能も含まれます。

### 

​

モデルの接続設定

Difyの`設定 > モデルプロバイダー`で接続するモデルを設定します。

モデルプロバイダーは2種類に分かれます：

  1. 個人モデル。このタイプのモデルプロバイダーは個人で開発したモデルを提供します。例としてOpenAI、Anthropicなどがあります。
  2. ホストモデル。このタイプのモデルプロバイダーは第三者のモデルを提供します。例としてHugging Face、Replicateなどがあります。



Difyで異なるタイプのモデルプロバイダーを接続する方法は若干異なります。

**個人モデルのモデルプロバイダーの接続**

個人モデルのプロバイダーを接続すると、Difyはそのプロバイダーのすべてのモデルに自動的に接続します。

Difyで対応するモデルプロバイダーのAPIキーを設定するだけで、そのモデルプロバイダーに接続できます。

Difyは[PKCS1_OAEP](https://pycryptodome.readthedocs.io/en/latest/src/cipher/oaep.html)を使用してユーザーが管理するAPIキーを暗号化して保存しています。各テナントは独立した鍵ペアを使用して暗号化しており、APIキーの漏洩を防止します。

**ホストモデルのモデルプロバイダーの接続**

ホストタイプのプロバイダーには多くの第三者モデルがあります。モデルの接続には個別に追加が必要です。具体的な接続方法は以下の通りです：

  * [Hugging Face](/ja-jp/development/models-integration/hugging-face)
  * [Replicate](/ja-jp/development/models-integration/replicate)
  * [Xinference](/ja-jp/development/models-integration/xinference)
  * [OpenLLM](/ja-jp/development/models-integration/openllm)



### 

​

モデルの使用

モデルの設定が完了したら、アプリケーションでこれらのモデルを使用できます：

* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/guides/model-configuration/README.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/guides/model-configuration%2FREADME.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[APIアクセス](/ja-jp/openapi-api-access-readme)[新しいプロバイダーの追加](/ja-jp/guides/model-configuration/new-provider)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * モデルタイプ
  * ホストモデル試用サービス
  * デフォルトモデルの設定
  * モデルの接続設定
  * モデルの使用



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/guides/model-configuration/customizable-model

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

モデルの設定

カスタムモデルの追加

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

    * [モデル](/ja-jp/guides/model-configuration/README)
    * [新しいプロバイダーの追加](/ja-jp/guides/model-configuration/new-provider)
    * [事前定義されたモデルの追加](/ja-jp/guides/model-configuration/predefined-model)
    * [カスタムモデルの追加](/ja-jp/guides/model-configuration/customizable-model)
    * [インターフェース方法](/ja-jp/guides/model-configuration/interfaces)
    * [設定ルール](/ja-jp/guides/model-configuration/schema)
    * [負荷分散](/ja-jp/guides/model-configuration/load-balancing)
  * アプリ・オーケストレーション

  * ワークフロー

  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




モデルの設定

# カスタムモデルの追加

Copy page

### 

​

イントロダクション

ベンダー統合が完了した後、次にベンダーの下でモデルのインテグレーションを行います。ここでは、全体のプロセスを理解するために、例として`Xinference`を使用して、段階的にベンダーのインテグレーションを完了します。

注意が必要なのは、カスタムモデルの場合、各モデルのインテグレーションには完全なベンダークレデンシャルの記入が必要です。

事前定義モデルとは異なり、カスタムベンダーのインテグレーション時には常に以下の2つのパラメータが存在し、ベンダー yaml に定義する必要はありません。

前述したように、ベンダーは`validate_provider_credential`を実装する必要はなく、Runtimeがユーザーが選択したモデルタイプとモデル名に基づいて、対応するモデル層の`validate_credentials`を呼び出して検証を行います。

#### 

​

ベンダー yaml の作成

まず、インテグレーションを行うベンダーがどのタイプのモデルをサポートしているかを確認します。

現在サポートされているモデルタイプは以下の通りです：

  * `llm` テキスト生成モデル
  * `text_embedding` テキスト Embedding モデル
  * `rerank` Rerank モデル
  * `speech2text` 音声からテキスト変換
  * `tts` テキストから音声変換
  * `moderation` モデレーション



`Xinference`は`LLM`、`Text Embedding`、`Rerank`をサポートしているため、`xinference.yaml`を作成します。
    
    
    provider: xinference # Specify vendor identifier
    label: # Vendor display name, can be set in en_US (English) and zh_Hans (Simplified Chinese). If zh_Hans is not set, en_US will be used by default.
      en_US: Xorbits Inference
    icon_small: # Small icon, refer to other vendors' icons, stored in the _assets directory under the corresponding vendor implementation directory. Language strategy is the same as label.
      en_US: icon_s_en.svg
    icon_large: # Large icon
      en_US: icon_l_en.svg
    help: # Help
      title:
        en_US: How to deploy Xinference
        zh_Hans: 如何部署 Xinference
        ja_JP: Xinferenceのデプロイ方法
      url:
        en_US: https://github.com/xorbitsai/inference
    supported_model_types: # Supported model types. Xinference supports LLM/Text Embedding/Rerank
    - llm
    - text-embedding
    - rerank
    configurate_methods: # Since Xinference is a locally deployed vendor and does not have predefined models, you need to deploy the required models according to Xinference's documentation. Therefore, only custom models are supported here.
    - customizable-model
    provider_credential_schema:
      credential_form_schemas:

その後、Xinferenceでモデルを定義するために必要なクレデンシャルを考えます。

  * 3つの異なるモデルをサポートするため、`model_type`を使用してこのモデルのタイプを指定する必要があります。3つのタイプがあるので、次のように記述します。


    
    
    provider_credential_schema:
      credential_form_schemas:
      - variable: model_type
        type: select
        label:
          en_US: Model type
          zh_Hans: 模型类型
          ja_JP: モデルタイプ
        required: true
        options:
        - value: text-generation
          label:
            en_US: Language Model
            zh_Hans: 语言模型
            ja_JP: 言語モデル
        - value: embeddings
          label:
            en_US: Text Embedding
        - value: reranking
          label:
            en_US: Rerank

  * 各モデルには独自の名称`model_name`があるため、ここで定義する必要があります。


    
    
    - variable: model_name
        type: text-input
        label:
          en_US: Model name
          zh_Hans: 模型名称
          ja_JP: モデル名
        required: true
        placeholder:
          en_US: Input model name
          zh_Hans: 填写模型名称
          ja_JP: モデル名を入力してください

  * Xinferenceのローカルデプロイのアドレスを記入します。


    
    
    - variable: server_url
        label:
          en_US: Server url
          zh_Hans: 服务器URL
          ja_JP: サーバーURL
        type: text-input
        required: true
        placeholder:
          en_US: Enter the url of your Xinference, for example https://example.com/xxx
          zh_Hans: 在此输入Xinference的服务器地址，如 https://example.com/xxx
          ja_JP: Xinferenceのサーバーアドレスをここに入力してください、例えば https://example.com/xxx

  * 各モデルには一意の model_uid があるため、ここで定義する必要があります。


    
    
    - variable: model_uid
        label:
          en_US: Model uid
          zh_Hans: 模型 UID
          ja_JP: モデル UID
        type: text-input
        required: true
        placeholder:
          en_US: Enter the model uid
          zh_Hans: 在此输入你的 Model UID
          ja_JP: モデルUIDを入力してください

これで、ベンダーの基本定義が完了しました。

#### 

​

モデルコードの作成

次に、`llm`タイプを例にとって、`xinference.llm.llm.py`を作成します。

`llm.py`内で、Xinference LLM クラスを作成し、`XinferenceAILargeLanguageModel`（任意の名前）と名付けて、`__base.large_language_model.LargeLanguageModel`基底クラスを継承し、以下のメソッドを実装します：

  * LLM 呼び出し

LLM 呼び出しのコアメソッドを実装し、ストリームレスポンスと同期レスポンスの両方をサポートします。
        
        def _invoke(self, model: str, credentials: dict,
                    prompt_messages: list[PromptMessage], model_parameters: dict,
                    tools: Optional[list[PromptMessageTool]] = None, stop: Optional[List[str]] = None,
                    stream: bool = True, user: Optional[str] = None) \
                -> Union[LLMResult, Generator]:
            """
            Invoke large language model
        
            :param model: model name
            :param credentials: model credentials
            :param prompt_messages: prompt messages
            :param model_parameters: model parameters
            :param tools: tools for tool calling
            :param stop: stop words
            :param stream: is stream response
            :param user: unique user id
            :return: full response or stream response chunk generator result
            """

実装時には、同期レスポンスとストリームレスポンスを処理するために2つの関数を使用してデータを返す必要があります。Pythonは`yield`キーワードを含む関数をジェネレータ関数として認識し、返されるデータ型は固定でジェネレーターになります。そのため、同期レスポンスとストリームレスポンスは別々に実装する必要があります。以下のように実装します（例では簡略化されたパラメータを使用していますが、実際の実装では上記のパラメータリストに従って実装してください）：
        
        def _invoke(self, stream: bool, **kwargs) \
                -> Union[LLMResult, Generator]:
            if stream:
                  return self._handle_stream_response(**kwargs)
            return self._handle_sync_response(**kwargs)
        
        def _handle_stream_response(self, **kwargs) -> Generator:
            for chunk in response:
                  yield chunk
        def _handle_sync_response(self, **kwargs) -> LLMResult:
            return LLMResult(**response)

  * 予測トークン数の計算

モデルが予測トークン数の計算インターフェースを提供していない場合、直接0を返すことができます。
        
        def get_num_tokens(self, model: str, credentials: dict, prompt_messages: list[PromptMessage],
                         tools: Optional[list[PromptMessageTool]] = None) -> int:
          """
          Get number of tokens for given prompt messages
        
          :param model: model name
          :param credentials: model credentials
          :param prompt_messages: prompt messages
          :param tools: tools for tool calling
          :return:
          """

時には、直接0を返す必要がない場合もあります。その場合は`self._get_num_tokens_by_gpt2(text: str)`を使用して予測トークン数を取得することができます。このメソッドは`AIModel`基底クラスにあり、GPT2のTokenizerを使用して計算を行いますが、代替方法として使用されるものであり、完全に正確ではありません。

  * モデルクレデンシャル検証

ベンダークレデンシャル検証と同様に、ここでは個々のモデルについて検証を行います。
        
        def validate_credentials(self, model: str, credentials: dict) -> None:
            """
            Validate model credentials
        
            :param model: model name
            :param credentials: model credentials
            :return:
            """

  * モデルパラメータスキーマ

カスタムタイプとは異なり、yamlファイルでモデルがサポートするパラメータを定義していないため、動的にモデルパラメータのスキーマを生成する必要があります。

例えば、Xinferenceは`max_tokens`、`temperature`、`top_p`の3つのモデルパラメータをサポートしています。

しかし、ベンダーによっては異なるモデルに対して異なるパラメータをサポートしている場合があります。例えば、ベンダー`OpenLLM`は`top_k`をサポートしていますが、全てのモデルが`top_k`をサポートしているわけではありません。ここでは、例としてAモデルが`top_k`をサポートし、Bモデルが`top_k`をサポートしていない場合、以下のように動的にモデルパラメータのスキーマを生成します：
        
        def get_customizable_model_schema(self, model: str, credentials: dict) -> AIModelEntity | None:
            """
                used to define customizable model schema
            """
            rules = [
                ParameterRule(
                    name='temperature', type=ParameterType.FLOAT,
                    use_template='temperature',
                    label=I18nObject(
                        zh_Hans='温度', en_US='Temperature'
                    )
                ),
                ParameterRule(
                    name='top_p', type=ParameterType.FLOAT,
                    use_template='top_p',
                    label=I18nObject(
                        zh_Hans='Top P', en_US='Top P'
                    )
                ),
                ParameterRule(
                    name='max_tokens', type=ParameterType.INT,
                    use_template='max_tokens',
                    min=1,
                    default=512,
                    label=I18nObject(
                        zh_Hans='最大生成长度', en_US='Max Tokens'
                    )
                )
            ]
        
            # if model is A, add top_k to rules
            if model == 'A':
                rules.append(
                    ParameterRule(
                        name='top_k', type=ParameterType.INT,
                        use_template='top_k',
                        min=1,
                        default=50,
                        label=I18nObject(
                            zh_Hans='Top K', en_US='Top K'
                        )
                    )
                )
        
            """
                some NOT IMPORTANT code here
            """
        
            entity = AIModelEntity(
                model=model,
                label=I18nObject(
                    en_US=model
                ),
                fetch_from=FetchFrom.CUSTOMIZABLE_MODEL,
                model_type=model_type,
                model_properties={ 
                    ModelPropertyKey.MODE:  ModelType.LLM,
                },
                parameter_rules=rules
            )
        
            return entity

  * 呼び出しエラーマッピングテーブル

モデル呼び出し時にエラーが発生した場合、Runtimeが指定する`InvokeError`タイプにマッピングする必要があります。これにより、Difyは異なるエラーに対して異なる後続処理を行うことができます。

Runtime Errors：

    * `InvokeConnectionError` 呼び出し接続エラー
    * `InvokeServerUnavailableError` 呼び出しサービスが利用不可
    * `InvokeRateLimitError` 呼び出し回数制限に達した
    * `InvokeAuthorizationError` 認証エラー
    * `InvokeBadRequestError` 不正なリクエストパラメータ


    
    
    @property
    def _invoke_error_mapping(self) -> dict[type[InvokeError], list[type[Exception]]]:
        """
        Map model invoke error to unified error
        The key is the error type thrown to the caller
        The value is the error type thrown by the model,
        which needs to be converted into a unified error type for the caller.
    
        :return: Invoke error mapping
        """

インターフェース方法の詳細については：[インターフェース](https://github.com/langgenius/dify/blob/main/api/core/model_runtime/docs/en_US/interfaces)をご覧ください。具体的な実装例については、[llm.py](https://github.com/langgenius/dify-official-plugins/blob/main/models/anthropic/models/llm/llm.py)を参照してください。

* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/guides/model-configuration/customizable-model.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20mizable-mo&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/guides/model-configuration%2Fcustomizable-model.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[事前定義されたモデルの追加](/ja-jp/guides/model-configuration/predefined-model)[インターフェース方法](/ja-jp/guides/model-configuration/interfaces)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * イントロダクション
  * ベンダー yaml の作成
  * モデルコードの作成



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/guides/model-configuration/interfaces

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

モデルの設定

インターフェース方法

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

    * [モデル](/ja-jp/guides/model-configuration/README)
    * [新しいプロバイダーの追加](/ja-jp/guides/model-configuration/new-provider)
    * [事前定義されたモデルの追加](/ja-jp/guides/model-configuration/predefined-model)
    * [カスタムモデルの追加](/ja-jp/guides/model-configuration/customizable-model)
    * [インターフェース方法](/ja-jp/guides/model-configuration/interfaces)
    * [設定ルール](/ja-jp/guides/model-configuration/schema)
    * [負荷分散](/ja-jp/guides/model-configuration/load-balancing)
  * アプリ・オーケストレーション

  * ワークフロー

  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




モデルの設定

# インターフェース方法

Copy page

ここでは、サプライヤーと各モデルタイプが実装する必要があるインターフェース方法とそのパラメータについて説明します。

## 

​

サプライヤー

`__base.model_provider.ModelProvider`基本クラスを継承し、以下のインターフェースを実装する必要があります：
    
    
    def validate_provider_credentials(self, credentials: dict) -> None:
        """
        Validate provider credentials
        You can choose any validate_credentials method of model type or implement validate method by yourself,
        such as: get model list api
    
        if validate failed, raise exception
    
        :param credentials: provider credentials, credentials form defined in `provider_credential_schema`.
        """

  * `credentials` (object) 資格情報

資格情報のパラメータは、サプライヤーのYAML構成ファイルの `provider_credential_schema` で定義され、`api_key`などが渡されます。




検証に失敗した場合は、`errors.validate.CredentialsValidateFailedError`エラーをスローします。

**注：事前定義されたモデルはこのインターフェースを完全に実装する必要がありますが、カスタムモデルサプライヤーは以下の簡単な実装のみが必要です**
    
    
    class XinferenceProvider(Provider):
        def validate_provider_credentials(self, credentials: dict) -> None:
            pass

## 

​

モデル

モデルには5つの異なるモデルタイプがあり、異なる基底クラスを継承し、実装する必要があるメソッドも異なります。

### 

​

一般インターフェース

すべてのモデルには以下の2つのメソッドを実装する必要があります：

  * モデルの資格情報を検証する

サプライヤーの資格情報検証と同様に、ここでは個々のモデルに対して検証を行います。
        
        def validate_credentials(self, model: str, credentials: dict) -> None:
            """
            Validate model credentials
        
            :param model: model name
            :param credentials: model credentials
            :return:
            """

パラメータ：

    * `model` (string) モデル名

    * `credentials` (object) 資格情報

資格情報のパラメータは、供給業者の YAML 構成ファイルの provider_credential_schema または model_credential_schema で定義されており、api_key などの詳細が含まれます。

検証に失敗した場合は、`errors.validate.CredentialsValidateFailedError` エラーをスローします。

  * 例外エラーマッピングの呼び出し

モデルの呼び出しが例外をスローした場合、Runtimeが指定する `InvokeError` タイプにマッピングする必要があり、異なるエラーに対して異なる後続処理を行うためのDifyにとって便利です。

Runtime Errors:

    * `InvokeConnectionError` コール接続エラー
    * `InvokeServerUnavailableError ` コールサービスが利用できない
    * `InvokeRateLimitError ` コールが制限に達した
    * `InvokeAuthorizationError` コール認証エラー
    * `InvokeBadRequestError ` コールパラメータが誤っています
    
    @property
    def _invoke_error_mapping(self) -> dict[type[InvokeError], list[type[Exception]]]:
        """
        Map model invoke error to unified error
        The key is the error type thrown to the caller
        The value is the error type thrown by the model,
        which needs to be converted into a unified error type for the caller.
    
        :return: Invoke error mapping
        """

または、対応するエラーを直接スローし、以下のように定義することもできます。これにより、後続の呼び出しで `InvokeConnectionError` などの例外を直接スローできます。
    
    @property
    def _invoke_error_mapping(self) -> dict[type[InvokeError], list[type[Exception]]]:
        return {
            InvokeConnectionError: [
              InvokeConnectionError
            ],
            InvokeServerUnavailableError: [
              InvokeServerUnavailableError
            ],
            InvokeRateLimitError: [
              InvokeRateLimitError
            ],
            InvokeAuthorizationError: [
              InvokeAuthorizationError
            ],
            InvokeBadRequestError: [
              InvokeBadRequestError
            ],
        }




​ OpenAIの `_invoke_error_mapping` をご参照ください。

### 

​

LLM

`__base.large_language_model.LargeLanguageModel` 基本クラスを継承し、以下のインターフェースを実装します：

  * LLMの呼び出し

LLM呼び出しの核心メソッドを実装し、ストリーミングと同期応答の両方をサポートします。
        
        def _invoke(self, model: str, credentials: dict,
                    prompt_messages: list[PromptMessage], model_parameters: dict,
                    tools: Optional[list[PromptMessageTool]] = None, stop: Optional[list[str]] = None,
                    stream: bool = True, user: Optional[str] = None) \
                -> Union[LLMResult, Generator]:
            """
            Invoke large language model
        
            :param model: model name
            :param credentials: model credentials
            :param prompt_messages: prompt messages
            :param model_parameters: model parameters
            :param tools: tools for tool calling
            :param stop: stop words
            :param stream: is stream response
            :param user: unique user id
            :return: full response or stream response chunk generator result
            """

    * パラメータ：

      * `model` (string) モデル名

      * `credentials` (object) 資格情報

資格情報のパラメータは、供給業者の YAML 構成ファイルの provider_credential_schema または model_credential_schema で定義されており、api_key などの詳細が含まれます。

      * `prompt_messages` (array[[PromptMessage](/_sites/docs.dify.ai/ja-jp/guides/model-configuration/interfaces#PromptMessage)]) Prompt リスト

モデルのタイプが `Completion` の場合、リストには1つの[UserPromptMessage](/_sites/docs.dify.ai/ja-jp/guides/model-configuration/interfaces#UserPromptMessage) 要素のみを渡す必要があります；

モデルのタイプが `Chat` の場合、[SystemPromptMessage](/_sites/docs.dify.ai/ja-jp/guides/model-configuration/interfaces#SystemPromptMessage), [UserPromptMessage](/_sites/docs.dify.ai/ja-jp/guides/model-configuration/interfaces#UserPromptMessage), [AssistantPromptMessage](/_sites/docs.dify.ai/ja-jp/guides/model-configuration/interfaces#AssistantPromptMessage), [ToolPromptMessage](/_sites/docs.dify.ai/ja-jp/guides/model-configuration/interfaces#ToolPromptMessage) 要素のリストをメッセージに応じて渡す必要があります。

      * `model_parameters` (object) モデルのパラメータ

モデルのパラメータは、モデルのYAML設定における`parameter_rules`で定義されています。

      * `tools` (array[[PromptMessageTool](/_sites/docs.dify.ai/ja-jp/guides/model-configuration/interfaces#PromptMessageTool)]) [optional] ツールのリスト，`function calling` 内の `function` に相当します。

つまり、tool calling のためのツールリストを指定します。

      * `stop` (array[string]) [optional] ストップシーケンス

モデルが出力を返す際に、定義された文字列の前で出力を停止します。

      * `stream` (bool) ストリーム出力の有無、デフォルトはTrue

ストリーム出力の場合は Generator[[LLMResultChunk](/_sites/docs.dify.ai/ja-jp/guides/model-configuration/interfaces#LLMResultChunk)]，出力ではないの場合は [LLMResult](/_sites/docs.dify.ai/ja-jp/guides/model-configuration/interfaces#LLMResult)。

      * `user` (string) [optional] ユーザーの一意の識別子

供給業者が不正行為を監視および検出するのに役立ちます。

    * 返り値

ストリーム出力の場合は Generator[[LLMResultChunk](/_sites/docs.dify.ai/ja-jp/guides/model-configuration/interfaces#LLMResultChunk)]，出力ではないの場合は [LLMResult](/_sites/docs.dify.ai/ja-jp/guides/model-configuration/interfaces#LLMResult)。

  * 入力tokenの事前計算

モデルがtokenの事前計算インターフェースを提供していない場合、直接0を返すことができます。
        
        def get_num_tokens(self, model: str, credentials: dict, prompt_messages: list[PromptMessage],
                           tools: Optional[list[PromptMessageTool]] = None) -> int:
            """
            Get number of tokens for given prompt messages
        
            :param model: model name
            :param credentials: model credentials
            :param prompt_messages: prompt messages
            :param tools: tools for tool calling
            :return:
            """

パラメータの説明は上記の `LLMの呼び出し` を参照してください。

このインターフェースは、対応する`model`に基づいて適切な`tokenizer`を選択して計算する必要があります。対応するモデルが`tokenizer`を提供していない場合は、`AIModel`ベースクラスの`_get_num_tokens_by_gpt2(text: str)`メソッドを使用して計算できます。

  * カスタムモデルスキーマの取得 [オプション]
        
        def get_customizable_model_schema(self, model: str, credentials: dict) -> Optional[AIModelEntity]:
            """
            Get customizable model schema
        
            :param model: model name
            :param credentials: model credentials
            :return: model schema
            """




供給業者がカスタムLLMを追加することをサポートしている場合、このメソッドを実装してカスタムモデルがモデル規則を取得できるようにすることができます。デフォルトではNoneを返します。

ほとんどの微調整モデルは`OpenAI`供給業者の下で、微調整モデル名を使用してベースモデルを取得できます。例えば、`gpt-3.5-turbo-1106`のような微調整モデル名を使用して、基本モデルの事前定義されたパラメータルールを取得できます。具体的な実装については、[openai](https://github.com/langgenius/dify-official-plugins/blob/main/models/anthropic/models/llm/llm.py)を参照してください。

### 

​

TextEmbedding

`__base.text_embedding_model.TextEmbeddingModel`ベースクラスを継承し、次のインターフェースを実装します：

  * Embeddingの呼び出し
        
        def _invoke(self, model: str, credentials: dict,
                    texts: list[str], user: Optional[str] = None) \
                -> TextEmbeddingResult:
            """
            Invoke large language model
        
            :param model: model name
            :param credentials: model credentials
            :param texts: texts to embed
            :param user: unique user id
            :return: embeddings result
            """

    * パラメータ：

      * `model` (string) モデル名

      * `credentials` (object) 資格情報

資格情報のパラメータは、供給業者の YAML 構成ファイルの provider_credential_schema または model_credential_schema で定義されており、api_key などの詳細が含まれます。

      * `texts` (array[string]) テキストリスト，バッチで処理できる

      * `user` (string) [optional] ユーザーの一意の識別子

供給業者が不正行為を監視および検出するのに役立ちます。

    * 返り値：

[TextEmbeddingResult](/_sites/docs.dify.ai/ja-jp/guides/model-configuration/interfaces#TextEmbeddingResult) エンティティ。

  * tokensの事前計算
        
        def get_num_tokens(self, model: str, credentials: dict, texts: list[str]) -> int:
            """
            Get number of tokens for given prompt messages
        
            :param model: model name
            :param credentials: model credentials
            :param texts: texts to embed
            :return:
            """

パラメータの説明は上記の `Embeddingの呼び出し` を参照してください。

上記の`LargeLanguageModel`と同様に、このインターフェースは、対応する`model`に基づいて適切な`tokenizer`を選択して計算する必要があります。対応するモデルが`tokenizer`を提供していない場合は、`AIModel`ベースクラスの`_get_num_tokens_by_gpt2(text: str)`メソッドを使用して計算できます。




### 

​

Rerank

`__base.rerank_model.RerankModelベースクラスを継承し、次のインターフェースを実装します：

  * rerankの呼び出し
        
        def _invoke(self, model: str, credentials: dict,
                    query: str, docs: list[str], score_threshold: Optional[float] = None, top_n: Optional[int] = None,
                    user: Optional[str] = None) \
                -> RerankResult:
            """
            Invoke rerank model
        
            :param model: model name
            :param credentials: model credentials
            :param query: search query
            :param docs: docs for reranking
            :param score_threshold: score threshold
            :param top_n: top n
            :param user: unique user id
            :return: rerank result
            """

    * パラメータ：

      * `model` (string) モデル名

      * `credentials` (object) 資格情報

資格情報のパラメータは、供給業者の YAML 構成ファイルの provider_credential_schema または model_credential_schema で定義されており、api_key などの詳細が含まれます。

      * `query` (string) リクエスト内容をチェックする

      * `docs` (array[string]) 並べ替えが必要なセクションリスト

      * `score_threshold` (float) [optional] Scoreの閾値

      * `top_n` (int) [optional] トップのnセクションを取得します

      * `user` (string) [optional] ユーザーの一意の識別子

供給業者が不正行為を監視および検出するのに役立ちます。

    * 返り値：

[RerankResult](/_sites/docs.dify.ai/ja-jp/guides/model-configuration/interfaces#RerankResult) エンティティ。




### 

​

Speech2text

`__base.speech2text_model.Speech2TextModel`基底クラスを継承し、以下のインターフェースを実装します：

  * Invokeの呼び出し
        
        def _invoke(self, model: str, credentials: dict,
                    file: IO[bytes], user: Optional[str] = None) \
                -> str:
            """
            Invoke large language model
        
            :param model: model name
            :param credentials: model credentials
            :param file: audio file
            :param user: unique user id
            :return: text for given audio file
            """

    * パラメータ：

      * `model` (string) モデル名

      * `credentials` (object) 資格情報

資格情報のパラメータは、供給業者の YAML 構成ファイルの provider_credential_schema または model_credential_schema で定義されており、api_key などの詳細が含まれます。

      * `file` (File) ファイルストリーム

      * `user` (string) [optional] ユーザーの一意の識別子

供給業者が不正行為を監視および検出するのに役立ちます。

    * 返り値：

音声をテキストに変換した結果を返します。




### 

​

Text2speech

`__base.text2speech_model.Text2SpeechModel`基底クラスを継承し、以下のインターフェースを実装します：

  * Invokeの呼び出し
        
        def _invoke(self, model: str, credentials: dict, content_text: str, streaming: bool, user: Optional[str] = None):
            """
            Invoke large language model
        
            :param model: model name
            :param credentials: model credentials
            :param content_text: text content to be translated
            :param streaming: output is streaming
            :param user: unique user id
            :return: translated audio file
            """

    * パラメータ：

      * `model` (string) モデル名

      * `credentials` (object) 資格情報

資格情報のパラメータは、供給業者の YAML 構成ファイルの provider_credential_schema または model_credential_schema で定義されており、api_key などの詳細が含まれます。

      * `content_text` (string) 変換すべきテキストコンテンツ

      * `streaming` (bool) ストリーミング出力かどうか

      * `user` (string) [optional] ユーザーの一意の識別子

供給業者が不正行為を監視および検出するのに役立ちます。

    * 返り値：

テキストを音声に変換した結果を返します。




### 

​

Moderation

`__base.moderation_model.ModerationModel`基底クラスを継承し、以下のインターフェースを実装します：

  * Invokeの呼び出し
        
        def _invoke(self, model: str, credentials: dict,
                    text: str, user: Optional[str] = None) \
                -> bool:
            """
            Invoke large language model
        
            :param model: model name
            :param credentials: model credentials
            :param text: text to moderate
            :param user: unique user id
            :return: false if text is safe, true otherwise
            """

    * パラメータ：

      * `model` (string) モデル名

      * `credentials` (object) 資格情報

資格情報のパラメータは、供給業者の YAML 構成ファイルの provider_credential_schema または model_credential_schema で定義されており、api_key などの詳細が含まれます。

      * `text` (string) テキスト内容

      * `user` (string) [optional] ユーザーの一意の識別子

供給業者が不正行為を監視および検出するのに役立ちます。

    * 返り値：

False の場合は入力したテキストは安全であり、True の場合はその逆。




## 

​

エンティティ

### 

​

PromptMessageRole

メッセージロールを定義する列挙型。
    
    
    class PromptMessageRole(Enum):
        """
        Enum class for prompt message.
        """
        SYSTEM = "system"
        USER = "user"
        ASSISTANT = "assistant"
        TOOL = "tool"

### 

​

PromptMessageContentType

メッセージコンテンツのタイプを定義し、テキストと画像の2種類がある。
    
    
    class PromptMessageContentType(Enum):
        """
        Enum class for prompt message content type.
        """
        TEXT = 'text'
        IMAGE = 'image'

### 

​

PromptMessageContent

メッセージコンテンツの基底クラスであり、パラメータのみを宣言するため初期化は行えない。
    
    
    class PromptMessageContent(BaseModel):
        """
        Model class for prompt message content.
        """
        type: PromptMessageContentType
        data: str  # コンテンツデータ

現在、テキストと画像の2つのタイプがサポートされており、テキストと複数の画像を同時に渡すことができる。

テキストと画像を同時に渡す場合は、`TextPromptMessageContent` と `ImagePromptMessageContent` をそれぞれ初期化する必要がある。

### 

​

TextPromptMessageContent
    
    
    class TextPromptMessageContent(PromptMessageContent):
        """
        Model class for text prompt message content.
        """
        type: PromptMessageContentType = PromptMessageContentType.TEXT

画像とテキストを一緒に渡す場合、テキストは `content` リストの一部としてこのエンティティを構築する必要がある。

### 

​

ImagePromptMessageContent
    
    
    class ImagePromptMessageContent(PromptMessageContent):
        """
        Model class for image prompt message content.
        """
        class DETAIL(Enum):
            LOW = 'low'
            HIGH = 'high'
    
        type: PromptMessageContentType = PromptMessageContentType.IMAGE
        detail: DETAIL = DETAIL.LOW  # 解像度

画像とテキストを一緒に渡す場合、画像は `content` リストの一部としてこのエンティティを構築する必要がある。

`data` には `url` または画像の `base64` でエンコードされた文字列を指定することができる。

### 

​

PromptMessage

すべてのロールメッセージの基底クラスであり、パラメータのみを宣言するため初期化はできません。
    
    
    class PromptMessage(ABC, BaseModel):
        """
        Model class for prompt message.
        """
        role: PromptMessageRole  # メッセージロール
        content: Optional[str | list[PromptMessageContent]] = None  # 2つのタイプ、文字列とコンテンツリストをサポート。コンテンツリストはマルチモーダルのニーズを満たすために使用されます。PromptMessageContentの説明を参照してください。
        name: Optional[str] = None  # 名前、オプション

### 

​

UserPromptMessage

UserMessage ユーザーメッセージを表すクラス。
    
    
    class UserPromptMessage(PromptMessage):
        """
        Model class for user prompt message.
        """
        role: PromptMessageRole = PromptMessageRole.USER

### 

​

AssistantPromptMessage

モデルの返信メッセージを表し、通常は `few-shots` やチャット履歴が入力として使用されます。
    
    
    class AssistantPromptMessage(PromptMessage):
        """
        Model class for assistant prompt message.
        """
        class ToolCall(BaseModel):
            """
            Model class for assistant prompt message tool call.
            """
            class ToolCallFunction(BaseModel):
                """
                Model class for assistant prompt message tool call function.
                """
                name: str  # ツール名
                arguments: str  # ツールパラメータ
    
            id: str  # ツールID。OpenAI tool callの場合のみ有効で、ツール呼び出しのユニークIDです。同じツールを複数回呼び出すことができます。
            type: str  # デフォルト function
            function: ToolCallFunction  # ツール呼び出し情報
    
        role: PromptMessageRole = PromptMessageRole.ASSISTANT
        tool_calls: list[ToolCall] = []  # モデルの返信としてのツール呼び出し結果（`tools`を渡した場合のみ、モデルがツール呼び出しが必要と判断した場合に返されます）

`tool_calls` は、モデルに `tools` を渡した後、モデルが返す `tool call` のリストです。

### 

​

SystemPromptMessage

システムメッセージを表し、通常はモデルに与えられるシステム命令に使用されます。
    
    
    class SystemPromptMessage(PromptMessage):
        """
        Model class for system prompt message.
        """
        role: PromptMessageRole = PromptMessageRole.SYSTEM

### 

​

ToolPromptMessage

ツールメッセージを表し、ツールの実行結果をモデルに渡して次のステップの計画を行います。
    
    
    class ToolPromptMessage(PromptMessage):
        """
        Model class for tool prompt message.
        """
        role: PromptMessageRole = PromptMessageRole.TOOL
        tool_call_id: str  # ツール呼び出しID。OpenAI tool callをサポートしない場合、ツール名を渡すこともできます。

基类的 `content` 传入工具执行结果。

### 

​

PromptMessageTool
    
    
    class PromptMessageTool(BaseModel):
        """
        Model class for prompt message tool.
        """
        name: str  # ツール名
        description: str  # ツールの説明
        parameters: dict  # ツールパラメータ dict

* * *

### 

​

LLMResult
    
    
    class LLMResult(BaseModel):
        """
        Model class for llm result.
        """
        model: str  # 使用された実際のモデル
        prompt_messages: list[PromptMessage]  # プロンプトメッセージのリスト
        message: AssistantPromptMessage  # 返信メッセージ
        usage: LLMUsage  # 使用したtokenとコスト情報
        system_fingerprint: Optional[str] = None  # リクエスト指紋。OpenAIのこのパラメータの定義を参照。

### 

​

LLMResultChunkDelta

ストリーム化された各イテレーション内の `delta` エンティティ。
    
    
    class LLMResultChunkDelta(BaseModel):
        """
        Model class for llm result chunk delta.
        """
        index: int  # インデックス
        message: AssistantPromptMessage  # 返信メッセージ
        usage: Optional[LLMUsage] = None  # 使用したトークンとコスト情報（最後の1つのみ）
        finish_reason: Optional[str] = None  # 終了理由（最後の1つのみ）

### 

​

LLMResultChunk

ストリーム化された各イテレーションのエンティティ。
    
    
    class LLMResultChunk(BaseModel):
        """
        Model class for llm result chunk.
        """
        model: str  # 実際に使用したモデル
        prompt_messages: list[PromptMessage]  # プロンプトメッセージのリスト
        system_fingerprint: Optional[str] = None  # リクエスト指紋。OpenAIのこのパラメータの定義を参照。
        delta: LLMResultChunkDelta  # 各イテレーションの変更が存在する内容

### 

​

LLMUsage
    
    
    class LLMUsage(ModelUsage):
        """
        Model class for llm usage.
        """
        prompt_tokens: int  # プロンプトで使用したトークン数
        prompt_unit_price: Decimal  # プロンプトの単価
        prompt_price_unit: Decimal  # プロンプト料金の単位（単価が基づいているトークンの量）
        prompt_price: Decimal  # プロンプトの料金
        completion_tokens: int  # 返答で使用したトークン数
        completion_unit_price: Decimal  # 返答の単価
        completion_price_unit: Decimal  # 返答料金の単位（単価が基づいているトークンの量）
        completion_price: Decimal  # 返答の料金
        total_tokens: int  # 総使用トークン数
        total_price: Decimal  # 総料金
        currency: str  # 通貨単位
        latency: float  # リクエスト処理時間（秒）

* * *

### 

​

TextEmbeddingResult
    
    
    class TextEmbeddingResult(BaseModel):
        """
        Model class for text embedding result.
        """
        model: str  # 実際に使用したモデル
        embeddings: list[list[float]]  # テキストリストに対応するembeddingベクトルのリスト
        usage: EmbeddingUsage  # 使用した情報

### 

​

EmbeddingUsage
    
    
    class EmbeddingUsage(ModelUsage):
        """
        Model class for embedding usage.
        """
        tokens: int  # 使用した token 数
        total_tokens: int  # 総使用 token 数
        unit_price: Decimal  # 単価
        price_unit: Decimal  # 価格の単位（単価が基づいているトークンの量）
        total_price: Decimal  # 総料金
        currency: str  # 通貨単位
        latency: float  # リクエスト処理時間(s)

* * *

### 

​

RerankResult
    
    
    class RerankResult(BaseModel):
        """
        Model class for rerank result.
        """
        model: str  # 実際に使用したモデル
        docs: list[RerankDocument]  # Rerankされたセグメントリスト

### 

​

RerankDocument
    
    
    class RerankDocument(BaseModel):
        """
        Model class for rerank document.
        """
        index: int  # 元の文書の順番
        text: str  # 文書のテキスト内容
        score: float  # スコア

interfaces:
    
    
    def validate_provider_credentials(self, credentials: dict) -> None:
        """
        Validate provider credentials
        You can choose any validate_credentials method of model type or implement validate method by yourself,
        such as: get model list api
    
        if validate failed, raise exception
    
        :param credentials: provider credentials, credentials form defined in `provider_credential_schema`.
        """

  * `credentials` (object) Credential information

The parameters of credential information are defined by the `provider_credential_schema` in the provider’s YAML configuration file. Inputs such as `api_key` are included.




If verification fails, throw the `errors.validate.CredentialsValidateFailedError` error.

## 

​

Model

Models are divided into 5 different types, each inheriting from different base classes and requiring the implementation of different methods.

All models need to uniformly implement the following 2 methods:

  * Model Credential Verification

Similar to provider credential verification, this step involves verification for an individual model.
        
        def validate_credentials(self, model: str, credentials: dict) -> None:
            """
            Validate model credentials
        
            :param model: model name
            :param credentials: model credentials
            :return:
            """

Parameters:

    * `model` (string) Model name

    * `credentials` (object) Credential information

The parameters of credential information are defined by either the `provider_credential_schema` or `model_credential_schema` in the provider’s YAML configuration file. Inputs such as `api_key` are included.

If verification fails, throw the `errors.validate.CredentialsValidateFailedError` error.

  * Invocation Error Mapping Table

When there is an exception in model invocation, it needs to be mapped to the `InvokeError` type specified by Runtime. This facilitates Dify’s ability to handle different errors with appropriate follow-up actions.

Runtime Errors:

    * `InvokeConnectionError` Invocation connection error
    * `InvokeServerUnavailableError` Invocation service provider unavailable
    * `InvokeRateLimitError` Invocation reached rate limit
    * `InvokeAuthorizationError` Invocation authorization failure
    * `InvokeBadRequestError` Invocation parameter error
    
    @property
    def _invoke_error_mapping(self) -> dict[type[InvokeError], list[type[Exception]]]:
        """
        Map model invoke error to unified error
        The key is the error type thrown to the caller
        The value is the error type thrown by the model,
        which needs to be converted into a unified error type for the caller.
    
        :return: Invoke error mapping
        """




​ You can refer to OpenAI’s `_invoke_error_mapping` for an example.

### 

​

LLM

Inherit the `__base.large_language_model.LargeLanguageModel` base class and implement the following interfaces:

  * LLM Invocation

Implement the core method for LLM invocation, which can support both streaming and synchronous returns.
        
        def _invoke(self, model: str, credentials: dict,
                    prompt_messages: list[PromptMessage], model_parameters: dict,
                    tools: Optional[list[PromptMessageTool]] = None, stop: Optional[List[str]] = None,
                    stream: bool = True, user: Optional[str] = None) \
                -> Union[LLMResult, Generator]:
            """
            Invoke large language model
        
            :param model: model name
            :param credentials: model credentials
            :param prompt_messages: prompt messages
            :param model_parameters: model parameters
            :param tools: tools for tool calling
            :param stop: stop words
            :param stream: is stream response
            :param user: unique user id
            :return: full response or stream response chunk generator result
            """

    * Parameters:

      * `model` (string) Model name

      * `credentials` (object) Credential information

The parameters of credential information are defined by either the `provider_credential_schema` or `model_credential_schema` in the provider’s YAML configuration file. Inputs such as `api_key` are included.

      * `prompt_messages` (array[[PromptMessage](/_sites/docs.dify.ai/ja-jp/guides/model-configuration/interfaces#PromptMessage)]) List of prompts

If the model is of the `Completion` type, the list only needs to include one [UserPromptMessage](/_sites/docs.dify.ai/ja-jp/guides/model-configuration/interfaces#UserPromptMessage) element;

If the model is of the `Chat` type, it requires a list of elements such as [SystemPromptMessage](/_sites/docs.dify.ai/ja-jp/guides/model-configuration/interfaces#SystemPromptMessage), [UserPromptMessage](/_sites/docs.dify.ai/ja-jp/guides/model-configuration/interfaces#UserPromptMessage), [AssistantPromptMessage](/_sites/docs.dify.ai/ja-jp/guides/model-configuration/interfaces#AssistantPromptMessage), [ToolPromptMessage](/_sites/docs.dify.ai/ja-jp/guides/model-configuration/interfaces#ToolPromptMessage) depending on the message.

      * `model_parameters` (object) Model parameters

The model parameters are defined by the `parameter_rules` in the model’s YAML configuration.

      * `tools` (array[[PromptMessageTool](/_sites/docs.dify.ai/ja-jp/guides/model-configuration/interfaces#PromptMessageTool)]) [optional] List of tools, equivalent to the `function` in `function calling`.

That is, the tool list for tool calling.

      * `stop` (array[string]) [optional] Stop sequences

The model output will stop before the string defined by the stop sequence.

      * `stream` (bool) Whether to output in a streaming manner, default is True

Streaming output returns Generator[[LLMResultChunk](/_sites/docs.dify.ai/ja-jp/guides/model-configuration/interfaces#LLMResultChunk)], non-streaming output returns [LLMResult](/_sites/docs.dify.ai/ja-jp/guides/model-configuration/interfaces#LLMResult).

      * `user` (string) [optional] Unique identifier of the user

This can help the provider monitor and detect abusive behavior.

    * Returns

Streaming output returns Generator[[LLMResultChunk](/_sites/docs.dify.ai/ja-jp/guides/model-configuration/interfaces#LLMResultChunk)], non-streaming output returns [LLMResult](/_sites/docs.dify.ai/ja-jp/guides/model-configuration/interfaces#LLMResult).

  * Pre-calculating Input Tokens

If the model does not provide a pre-calculated tokens interface, you can directly return 0.
        
        def get_num_tokens(self, model: str, credentials: dict, prompt_messages: list[PromptMessage],
                           tools: Optional[list[PromptMessageTool]] = None) -> int:
            """
            Get number of tokens for given prompt messages
        
            :param model: model name
            :param credentials: model credentials
            :param prompt_messages: prompt messages
            :param tools: tools for tool calling
            :return:
            """

For parameter explanations, refer to the above section on `LLM Invocation`.

  * Fetch Custom Model Schema [Optional]
        
        def get_customizable_model_schema(self, model: str, credentials: dict) -> Optional[AIModelEntity]:
            """
            Get customizable model schema
        
            :param model: model name
            :param credentials: model credentials
            :return: model schema
            """

When the provider supports adding custom LLMs, this method can be implemented to allow custom models to fetch model schema. The default return null.




### 

​

TextEmbedding

Inherit the `__base.text_embedding_model.TextEmbeddingModel` base class and implement the following interfaces:

  * Embedding Invocation
        
        def _invoke(self, model: str, credentials: dict,
                    texts: list[str], user: Optional[str] = None) \
                -> TextEmbeddingResult:
            """
            Invoke large language model
        
            :param model: model name
            :param credentials: model credentials
            :param texts: texts to embed
            :param user: unique user id
            :return: embeddings result
            """

    * Parameters:

      * `model` (string) Model name

      * `credentials` (object) Credential information

The parameters of credential information are defined by either the `provider_credential_schema` or `model_credential_schema` in the provider’s YAML configuration file. Inputs such as `api_key` are included.

      * `texts` (array[string]) List of texts, capable of batch processing

      * `user` (string) [optional] Unique identifier of the user

This can help the provider monitor and detect abusive behavior.

    * Returns:

[TextEmbeddingResult](/_sites/docs.dify.ai/ja-jp/guides/model-configuration/interfaces#TextEmbeddingResult) entity.

  * Pre-calculating Tokens
        
        def get_num_tokens(self, model: str, credentials: dict, texts: list[str]) -> int:
            """
            Get number of tokens for given prompt messages
        
            :param model: model name
            :param credentials: model credentials
            :param texts: texts to embed
            :return:
            """

For parameter explanations, refer to the above section on `Embedding Invocation`.




### 

​

Rerank

Inherit the `__base.rerank_model.RerankModel` base class and implement the following interfaces:

  * Rerank Invocation
        
        def _invoke(self, model: str, credentials: dict,
                    query: str, docs: list[str], score_threshold: Optional[float] = None, top_n: Optional[int] = None,
                    user: Optional[str] = None) \
                -> RerankResult:
            """
            Invoke rerank model
        
            :param model: model name
            :param credentials: model credentials
            :param query: search query
            :param docs: docs for reranking
            :param score_threshold: score threshold
            :param top_n: top n
            :param user: unique user id
            :return: rerank result
            """

    * Parameters:

      * `model` (string) Model name

      * `credentials` (object) Credential information

The parameters of credential information are defined by either the `provider_credential_schema` or `model_credential_schema` in the provider’s YAML configuration file. Inputs such as `api_key` are included.

      * `query` (string) Query request content

      * `docs` (array[string]) List of segments to be reranked

      * `score_threshold` (float) [optional] Score threshold

      * `top_n` (int) [optional] Select the top n segments

      * `user` (string) [optional] Unique identifier of the user

This can help the provider monitor and detect abusive behavior.

    * Returns:

[RerankResult](/_sites/docs.dify.ai/ja-jp/guides/model-configuration/interfaces#RerankResult) entity.




### 

​

Speech2text

Inherit the `__base.speech2text_model.Speech2TextModel` base class and implement the following interfaces:

  * Invoke Invocation
        
        def _invoke(self, model: str, credentials: dict, file: IO[bytes], user: Optional[str] = None) -> str:
            """
            Invoke large language model
        
            :param model: model name
            :param credentials: model credentials
            :param file: audio file
            :param user: unique user id
            :return: text for given audio file
            """

    * Parameters:

      * `model` (string) Model name

      * `credentials` (object) Credential information

The parameters of credential information are defined by either the `provider_credential_schema` or `model_credential_schema` in the provider’s YAML configuration file. Inputs such as `api_key` are included.

      * `file` (File) File stream

      * `user` (string) [optional] Unique identifier of the user

This can help the provider monitor and detect abusive behavior.

    * Returns:

The string after speech-to-text conversion.




### 

​

Text2speech

Inherit the `__base.text2speech_model.Text2SpeechModel` base class and implement the following interfaces:

  * Invoke Invocation
        
        def _invoke(self, model: str, credentials: dict, content_text: str, streaming: bool, user: Optional[str] = None):
            """
            Invoke large language model
        
            :param model: model name
            :param credentials: model credentials
            :param content_text: text content to be translated
            :param streaming: output is streaming
            :param user: unique user id
            :return: translated audio file
            """

    * Parameters：

      * `model` (string) Model name

      * `credentials` (object) Credential information

The parameters of credential information are defined by either the `provider_credential_schema` or `model_credential_schema` in the provider’s YAML configuration file. Inputs such as `api_key` are included.

      * `content_text` (string) The text content that needs to be converted

      * `streaming` (bool) Whether to stream output

      * `user` (string) [optional] Unique identifier of the user

This can help the provider monitor and detect abusive behavior.

    * Returns：

Text converted speech stream。




### 

​

Moderation

Inherit the `__base.moderation_model.ModerationModel` base class and implement the following interfaces:

  * Invoke Invocation
        
        def _invoke(self, model: str, credentials: dict,
                    text: str, user: Optional[str] = None) \
                -> bool:
            """
            Invoke large language model
        
            :param model: model name
            :param credentials: model credentials
            :param text: text to moderate
            :param user: unique user id
            :return: false if text is safe, true otherwise
            """

    * Parameters:

      * `model` (string) Model name

      * `credentials` (object) Credential information

The parameters of credential information are defined by either the `provider_credential_schema` or `model_credential_schema` in the provider’s YAML configuration file. Inputs such as `api_key` are included.

      * `text` (string) Text content

      * `user` (string) [optional] Unique identifier of the user

This can help the provider monitor and detect abusive behavior.

    * Returns:

False indicates that the input text is safe, True indicates otherwise.




## 

​

Entities

### 

​

PromptMessageRole

Message role
    
    
    class PromptMessageRole(Enum):
        """
        Enum class for prompt message.
        """
        SYSTEM = "system"
        USER = "user"
        ASSISTANT = "assistant"
        TOOL = "tool"

### 

​

PromptMessageContentType

Message content types, divided into text and image.
    
    
    class PromptMessageContentType(Enum):
        """
        Enum class for prompt message content type.
        """
        TEXT = 'text'
        IMAGE = 'image'

### 

​

PromptMessageContent

Message content base class, used only for parameter declaration and cannot be initialized.
    
    
    class PromptMessageContent(BaseModel):
        """
        Model class for prompt message content.
        """
        type: PromptMessageContentType
        data: str

Currently, two types are supported: text and image. It’s possible to simultaneously input text and multiple images.

You need to initialize `TextPromptMessageContent` and `ImagePromptMessageContent` separately for input.

### 

​

TextPromptMessageContent
    
    
    class TextPromptMessageContent(PromptMessageContent):
        """
        Model class for text prompt message content.
        """
        type: PromptMessageContentType = PromptMessageContentType.TEXT

If inputting a combination of text and images, the text needs to be constructed into this entity as part of the `content` list.

### 

​

ImagePromptMessageContent
    
    
    class ImagePromptMessageContent(PromptMessageContent):
        """
        Model class for image prompt message content.
        """
        class DETAIL(Enum):
            LOW = 'low'
            HIGH = 'high'
    
        type: PromptMessageContentType = PromptMessageContentType.IMAGE
        detail: DETAIL = DETAIL.LOW  # Resolution

If inputting a combination of text and images, the images need to be constructed into this entity as part of the `content` list.

`data` can be either a `url` or a `base64` encoded string of the image.

### 

​

PromptMessage

The base class for all Role message bodies, used only for parameter declaration and cannot be initialized.
    
    
    class PromptMessage(ABC, BaseModel):
        """
        Model class for prompt message.
        """
        role: PromptMessageRole
        content: Optional[str | list[PromptMessageContent]] = None  # Supports two types: string and content list. The content list is designed to meet the needs of multimodal inputs. For more details, see the PromptMessageContent explanation.
        name: Optional[str] = None

### 

​

UserPromptMessage

UserMessage message body, representing a user’s message.
    
    
    class UserPromptMessage(PromptMessage):
        """
        Model class for user prompt message.
        """
        role: PromptMessageRole = PromptMessageRole.USER

### 

​

AssistantPromptMessage

Represents a message returned by the model, typically used for `few-shots` or inputting chat history.
    
    
    class AssistantPromptMessage(PromptMessage):
        """
        Model class for assistant prompt message.
        """
        class ToolCall(BaseModel):
            """
            Model class for assistant prompt message tool call.
            """
            class ToolCallFunction(BaseModel):
                """
                Model class for assistant prompt message tool call function.
                """
                name: str  # tool name
                arguments: str  # tool arguments
    
            id: str  # Tool ID, effective only in OpenAI tool calls. It's the unique ID for tool invocation and the same tool can be called multiple times.
            type: str  # default: function
            function: ToolCallFunction  # tool call information
    
        role: PromptMessageRole = PromptMessageRole.ASSISTANT
        tool_calls: list[ToolCall] = []  # The result of tool invocation in response from the model (returned only when tools are input and the model deems it necessary to invoke a tool).

Where `tool_calls` are the list of `tool calls` returned by the model after invoking the model with the `tools` input.

### 

​

SystemPromptMessage

Represents system messages, usually used for setting system commands given to the model.
    
    
    class SystemPromptMessage(PromptMessage):
        """
        Model class for system prompt message.
        """
        role: PromptMessageRole = PromptMessageRole.SYSTEM

### 

​

ToolPromptMessage

Represents tool messages, used for conveying the results of a tool execution to the model for the next step of processing.
    
    
    class ToolPromptMessage(PromptMessage):
        """
        Model class for tool prompt message.
        """
        role: PromptMessageRole = PromptMessageRole.TOOL
        tool_call_id: str  # Tool invocation ID. If OpenAI tool call is not supported, the name of the tool can also be inputted.

The base class’s `content` takes in the results of tool execution.

### 

​

PromptMessageTool
    
    
    class PromptMessageTool(BaseModel):
        """
        Model class for prompt message tool.
        """
        name: str
        description: str
        parameters: dict

* * *

### 

​

LLMResult
    
    
    class LLMResult(BaseModel):
        """
        Model class for llm result.
        """
        model: str  # Actual used modele
        prompt_messages: list[PromptMessage]  # prompt messages
        message: AssistantPromptMessage  # response message
        usage: LLMUsage  # usage info
        system_fingerprint: Optional[str] = None  # request fingerprint, refer to OpenAI definition

### 

​

LLMResultChunkDelta

In streaming returns, each iteration contains the `delta` entity.
    
    
    class LLMResultChunkDelta(BaseModel):
        """
        Model class for llm result chunk delta.
        """
        index: int
        message: AssistantPromptMessage  # response message
        usage: Optional[LLMUsage] = None  # usage info
        finish_reason: Optional[str] = None  # finish reason, only the last one returns

### 

​

LLMResultChunk

Each iteration entity in streaming returns.
    
    
    class LLMResultChunk(BaseModel):
        """
        Model class for llm result chunk.
        """
        model: str  # Actual used modele
        prompt_messages: list[PromptMessage]  # prompt messages
        system_fingerprint: Optional[str] = None  # request fingerprint, refer to OpenAI definition
        delta: LLMResultChunkDelta

### 

​

LLMUsage
    
    
    class LLMUsage(ModelUsage):
        """
        Model class for LLM usage.
        """
        prompt_tokens: int  # Tokens used for prompt
        prompt_unit_price: Decimal  # Unit price for prompt
        prompt_price_unit: Decimal  # Price unit for prompt, i.e., the unit price based on how many tokens
        prompt_price: Decimal  # Cost for prompt
        completion_tokens: int  # Tokens used for response
        completion_unit_price: Decimal  # Unit price for response
        completion_price_unit: Decimal  # Price unit for response, i.e., the unit price based on how many tokens
        completion_price: Decimal  # Cost for response
        total_tokens: int  # Total number of tokens used
        total_price: Decimal  # Total cost
        currency: str  # Currency unit
        latency: float  # Request latency (s)

* * *

### 

​

TextEmbeddingResult
    
    
    class TextEmbeddingResult(BaseModel):
        """
        Model class for text embedding result.
        """
        model: str  # Actual model used
        embeddings: list[list[float]]  # List of embedding vectors, corresponding to the input texts list
        usage: EmbeddingUsage  # Usage information

### 

​

EmbeddingUsage
    
    
    class EmbeddingUsage(ModelUsage):
        """
        Model class for embedding usage.
        """
        tokens: int  # Number of tokens used
        total_tokens: int  # Total number of tokens used
        unit_price: Decimal  # Unit price
        price_unit: Decimal  # Price unit, i.e., the unit price based on how many tokens
        total_price: Decimal  # Total cost
        currency: str  # Currency unit
        latency: float  # Request latency (s)

* * *

### 

​

RerankResult
    
    
    class RerankResult(BaseModel):
        """
        Model class for rerank result.
        """
        model: str  # Actual model used
        docs: list[RerankDocument]  # Reranked document list

### 

​

RerankDocument
    
    
    class RerankDocument(BaseModel):
        """
        Model class for rerank document.
        """
        index: int  # original index
        text: str
        score: float

* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/guides/model-configuration/interfaces.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20fa&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/guides/model-configuration%2Finterfaces.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[カスタムモデルの追加](/ja-jp/guides/model-configuration/customizable-model)[設定ルール](/ja-jp/guides/model-configuration/schema)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * サプライヤー
  * モデル
  * 一般インターフェース
  * LLM
  * TextEmbedding
  * Rerank
  * Speech2text
  * Text2speech
  * Moderation
  * エンティティ
  * PromptMessageRole
  * PromptMessageContentType
  * PromptMessageContent
  * TextPromptMessageContent
  * ImagePromptMessageContent
  * PromptMessage
  * UserPromptMessage
  * AssistantPromptMessage
  * SystemPromptMessage
  * ToolPromptMessage
  * PromptMessageTool
  * LLMResult
  * LLMResultChunkDelta
  * LLMResultChunk
  * LLMUsage
  * TextEmbeddingResult
  * EmbeddingUsage
  * RerankResult
  * RerankDocument
  * Model
  * LLM
  * TextEmbedding
  * Rerank
  * Speech2text
  * Text2speech
  * Moderation
  * Entities
  * PromptMessageRole
  * PromptMessageContentType
  * PromptMessageContent
  * TextPromptMessageContent
  * ImagePromptMessageContent
  * PromptMessage
  * UserPromptMessage
  * AssistantPromptMessage
  * SystemPromptMessage
  * ToolPromptMessage
  * PromptMessageTool
  * LLMResult
  * LLMResultChunkDelta
  * LLMResultChunk
  * LLMUsage
  * TextEmbeddingResult
  * EmbeddingUsage
  * RerankResult
  * RerankDocument



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/guides/model-configuration/load-balancing

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

モデルの設定

負荷分散

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

    * [モデル](/ja-jp/guides/model-configuration/README)
    * [新しいプロバイダーの追加](/ja-jp/guides/model-configuration/new-provider)
    * [事前定義されたモデルの追加](/ja-jp/guides/model-configuration/predefined-model)
    * [カスタムモデルの追加](/ja-jp/guides/model-configuration/customizable-model)
    * [インターフェース方法](/ja-jp/guides/model-configuration/interfaces)
    * [設定ルール](/ja-jp/guides/model-configuration/schema)
    * [負荷分散](/ja-jp/guides/model-configuration/load-balancing)
  * アプリ・オーケストレーション

  * ワークフロー

  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




モデルの設定

# 負荷分散

Copy page

モデルのレート制限（Rate limits）とは、モデルプロバイダーがユーザーまたは顧客に対し、指定された時間内にAPIサービスへアクセスする回数に対して設ける制限のことです。これにより、APIの乱用や誤用を防ぎ、すべてのユーザーが公平にAPIにアクセスできるようにし、インフラ全体の負荷を管理することができます。

企業レベルで大規模にモデルAPIを呼び出す際、高い同時リクエストがレート制限を超えてしまい、ユーザーのアクセスに影響を及ぼすことがあります。負荷分散は、複数のAPIエンドポイント間でAPIリクエストを分配することで、すべてのユーザーが最速の応答と最高のモデル呼び出しスループットを得られるようにし、ビジネスの安定した運用を保障します。

**モデルプロバイダー — モデルリスト — 負荷分散の設定** でこの機能を有効にし、同じモデルに複数の資格情報（APIキー）を追加することができます。

モデル負荷分散は有料機能です。[SaaS有料サービスのサブスクリプション](/ja-jp/getting-started/cloud)または企業版の購入を通じてこの機能を有効にすることができます。

デフォルト設定では、APIキーは初回設定時にモデルプロバイダーに追加された資格情報です。**設定の追加** をクリックして、同じモデルの異なるAPIキーを追加することで、負荷分散機能を正常に使用できます。

**少なくとも1つの追加モデル資格情報** を追加することで、保存し負荷分散を有効にできます。

既に設定されている資格情報を**一時的に無効化** または**削除** することも可能です。

設定完了後、モデルリスト内にすべての有効な負荷分散モデルが表示されます。

デフォルトでは、負荷分散はラウンドロビン戦略を使用します。レート制限を超えた場合、1分間のクールダウンタイムが適用されます。

**モデルの追加** からも負荷分散を設定することができ、設定手順は上記と同じです。

* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/guides/model-configuration/load-balancing.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20balanc&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/guides/model-configuration%2Fload-balancing.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[設定ルール](/ja-jp/guides/model-configuration/schema)[アプリ・オーケストレーション](/ja-jp/guides/application-orchestrate/README)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/guides/model-configuration/new-provider

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

モデルの設定

新しいプロバイダーの追加

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

    * [モデル](/ja-jp/guides/model-configuration/README)
    * [新しいプロバイダーの追加](/ja-jp/guides/model-configuration/new-provider)
    * [事前定義されたモデルの追加](/ja-jp/guides/model-configuration/predefined-model)
    * [カスタムモデルの追加](/ja-jp/guides/model-configuration/customizable-model)
    * [インターフェース方法](/ja-jp/guides/model-configuration/interfaces)
    * [設定ルール](/ja-jp/guides/model-configuration/schema)
    * [負荷分散](/ja-jp/guides/model-configuration/load-balancing)
  * アプリ・オーケストレーション

  * ワークフロー

  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




モデルの設定

# 新しいプロバイダーの追加

Copy page

### 

​

モデル設定方法

プロバイダーは三つのモデル設定方法に対応しています：

**事前定義モデル（predefined-model）**

ユーザーは統一されたプロバイダーのクレデンシャルを設定するだけで、プロバイダーの事前定義モデルを使用できます。

**カスタマイズ可能モデル（customizable-model）**

ユーザーは各モデルのクレデンシャル設定を追加する必要があります。例えば、XinferenceはLLMとテキスト埋め込みの両方に対応していますが、各モデルには一意の**モデルUID** があり、両方を同時に接続したい場合は、それぞれのモデルに対して**モデルUID** を設定する必要があります。

**リモートから取得（fetch-from-remote）**

`predefined-model`の設定方法と一致しており、統一されたプロバイダーのクレデンシャルを設定するだけで、モデルはクレデンシャル情報を通じてプロバイダーから取得されます。

例えばOpenAIの場合、gpt-turbo-3.5を基に複数のモデルを微調整することができ、それらはすべて同じ**APIキー** の下にあります。`fetch-from-remote`として設定すると、開発者は統一された**APIキー** を設定するだけで、Difyランタイムが開発者のすべての微調整モデルを取得してDifyに接続できます。

これら三つの設定方法は**共存可能** であり、例えばプロバイダーが`predefined-model`と`customizable-model`、または`predefined-model`と`fetch-from-remote`をサポートする場合があります。統一されたプロバイダーのクレデンシャルを設定することで、事前定義モデルとリモートから取得したモデルを使用でき、新しいモデルを追加することでカスタマイズ可能なモデルも使用できます。

### 

​

設定説明

**名詞解説**

  * `モジュール`: 一つの`モジュール`は一つのPythonパッケージ、または簡単に言えば一つのフォルダーであり、その中に`__init__.py`ファイルと他の`.py`ファイルが含まれます。



**手順**

新しいプロバイダーを追加するには主にいくつかのステップがあります。ここでは簡単に列挙し、具体的な手順は以下で詳しく説明します。

  * プロバイダーのYAMLファイルを作成し、[プロバイダースキーマ](https://github.com/langgenius/dify/blob/main/api/core/model_runtime/docs/en_US/schema.md)に基づいて記述します。
  * プロバイダーのコードを作成し、`class`を実装します。
  * モデルタイプに応じて、プロバイダーの`モジュール`内に対応するモデルタイプの`モジュール`を作成します。例えば`llm`や`text_embedding`。
  * モデルタイプに応じて、対応するモデル`モジュール`内に同名のコードファイルを作成し、例えば`llm.py`、`class`を実装します。
  * 事前定義モデルがある場合、モデル名と同名のyamlファイルをモデル`モジュール`内に作成し、[AIモデルエンティティ](https://github.com/langgenius/dify/blob/main/api/core/model_runtime/docs/en_US/schema.md#aimodelentity)に基づいて記述します。
  * テストコードを記述し、機能の有用性を確認します。



#### 

​

始めましょう

新しいプロバイダーを追加するには、まずプロバイダーの英語識別子を決めます。例えば`anthropic`、この識別子を使って`model_providers`内に同名の`module`を作成します。

この`module`内で、まずプロバイダーのYAML設定を準備する必要があります。

**プロバイダーYAMLの準備**

ここでは`Anthropic`を例に、プロバイダーの基本情報、対応するモデルタイプ、設定方法、クレデンシャルルールを設定します。
    
    
    provider: anthropic  # プロバイダーの識別子
    label:  # プロバイダーの表示名、en_US英語、zh_Hans中国語の二言語を設定できます。zh_Hansが設定されていない場合、en_USがデフォルトで使用されます。
      en_US: Anthropic
    icon_small:  # プロバイダーの小アイコン、対応するプロバイダーの実装ディレクトリ内の_assetsディレクトリに保存されます。labelと同じく二言語の設定が可能です。
      en_US: icon_s_en.png
    icon_large:  # プロバイダーの大アイコン、対応するプロバイダーの実装ディレクトリ内の_assetsディレクトリに保存されます。labelと同じく二言語の設定が可能です。
      en_US: icon_l_en.png
    supported_model_types:  # 対応するモデルタイプ、AnthropicはLLMのみ対応
    - llm
    configurate_methods:  # 対応する設定方法、Anthropicは事前定義モデルのみ対応
    - predefined-model
    provider_credential_schema:  # プロバイダーのクレデンシャルルール、Anthropicは事前定義モデルのみ対応するため、統一されたプロバイダーのクレデンシャルルールを定義する必要があります
      credential_form_schemas:  # クレデンシャルフォーム項目リスト
      - variable: anthropic_api_key  # クレデンシャルパラメーターの変数名
        label:  # 表示名
          en_US: API Key
        type: secret-input  # フォームタイプ、ここではsecret-inputは暗号化された情報入力フィールドを意味し、編集時にはマスクされた情報のみが表示されます。
        required: true  # 必須かどうか
        placeholder:  # プレースホルダー情報
          en_US: Enter your API Key
          zh_Hans: 在此输入你的 API Key
          ja_JP: API Keyを入力してください
      - variable: anthropic_api_url
        label:
          en_US: API URL
        type: text-input  # フォームタイプ、ここではtext-inputはテキスト入力フィールドを意味します
        required: false
        placeholder:
          en_US: Enter your API URL
          zh_Hans: 在此输入你的 API URL
          ja_JP: API URLを入力してください

カスタマイズ可能なモデルを提供するプロバイダー、例えば`OpenAI`が微調整モデルを提供する場合、[`model_credential_schema`](https://github.com/langgenius/dify/blob/main/api/core/model_runtime/docs/en_US/schema.md)を追加する必要があります。以下は`OpenAI`を例にしたものです：
    
    
    model_credential_schema:
      model: # 微調整モデル名
        label:
          en_US: Model Name
          zh_Hans: 模型名称
          ja_JP: モデル名
        placeholder:
          en_US: Enter your model name
          zh_Hans: 输入模型名称
          ja_JP: モデル名を入力ください
      credential_form_schemas:
      - variable: openai_api_key
        label:
          en_US: API Key
        type: secret-input
        required: true
        placeholder:
          en_US: Enter your API Key
          zh_Hans: 在此输入你的 API Key
          ja_JP: API keyを入力してください
      - variable: openai_organization
        label:
            en_US: Organization
            zh_Hans: 组织 ID
            ja_JP: 組織ID
        type: text-input
        required: false
        placeholder:
          en_US: Enter your Organization ID
          zh_Hans: 在此输入你的组织 ID
          ja_JP: 組織IDを入力してください
      - variable: openai_api_base
        label:
          en_US: API Base
          zh_Hans: API Base
          ja_JP: API Base
        type: text-input
        required: false
        placeholder:
          en_US: Enter your API Base
          zh_Hans: 在此输入你的 API Base
          ja_JP: API Baseを入力してください

`model_providers`ディレクトリ内の他のプロバイダーディレクトリの[YAML設定情報](https://github.com/langgenius/dify/blob/main/api/core/model_runtime/docs/en_US/schema.md)も参考にできます。

**プロバイダーコードの実装**

`model_providers`内に同名のPythonファイルを作成します。例えば`anthropic.py`を作成し、`class`を実装、`__base.provider.Provider`基クラスを継承します。例えば`AnthropicProvider`。

**カスタマイズ可能モデルプロバイダー**

プロバイダーがXinferenceなどのカスタマイズ可能モデルプロバイダーの場合、このステップをスキップし、空の`XinferenceProvider`クラスを作成し、空の`validate_provider_credentials`メソッドを実装するだけで済みます。このメソッドは実際には使用されず、抽象クラスのインスタンス化を避けるためにのみ存在します。
    
    
    class XinferenceProvider(Provider):
        def validate_provider_credentials(self, credentials: dict) -> None:
            pass

**事前定義モデルプロバイダー**

プロバイダーは`__base.model_provider.ModelProvider`基クラスを継承し、`validate_provider_credentials`プロバイダーの統一クレデンシャル検証メソッドを実装するだけで済みます。[AnthropicProvider](https://github.com/langgenius/dify/blob/main/api/core/model_runtime/model_providers/anthropic/anthropic.py)を参考にできます。
    
    
    def validate_provider_credentials(self, credentials: dict) -> None:
        """
        Validate provider credentials
        You can choose any validate_credentials method of model type or implement validate method by yourself,
        such as: get model list api
    
        if validate failed, raise exception
    
        :param credentials: provider credentials, credentials form defined in `provider_credential_schema`.
        """

もちろん、`validate_provider_credentials`の実装を先に予約し、モデルクレデンシャル検証メソッドの実装後に直接再利用することもできます。

**モデルの追加**

[**事前定義モデルの追加**](/ja-jp/guides/model-configuration/predefined-model)**👈🏻**

事前定義モデルの場合、単純にyamlを定義し、呼び出しコードを実装することで接続できます。

[**カスタマイズ可能モデルの追加**](/ja-jp/guides/model-configuration/customizable-model) **👈🏻**

カスタマイズ可能モデルの場合、呼び出しコードを実装するだけで接続できますが、処理するパラメーターはさらに複雑になる可能性があります。

* * *

#### 

​

テスト

プロバイダー/モデルの有用性を確保するため、実装した各メソッドには`tests`ディレクトリ内で対応する統合テストコードを記述する必要があります。

再び`Anthropic`を例にします。

テストコードを記述する前に、`.env.example`にテストプロバイダーが必要とするクレデンシャル環境変数を追加します。例えば：`ANTHROPIC_API_KEY`。

実行前に`.env.example`をコピーして`.env`にし、実行します。

**テストコードの記述**

`tests`ディレクトリ内にプロバイダーと同名の`module`を作成します：`anthropic`。このモジュール内に`test_provider.py`および対応するモデルタイプのtest pyファイルを作成します。以下のようになります：
    
    
    .
    ├── __init__.py
    ├── anthropic
    │   ├── __init__.py
    │   ├── test_llm.py       # LLMテスト
    │   └── test_provider.py  # プロバイダーテスト

上記で実装したコードの様々な状況に対してテストコードを記述し、テストを通過した後にコードを提出します。

* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/guides/model-configuration/new-provider.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20rovi&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/guides/model-configuration%2Fnew-provider.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[モデル](/ja-jp/guides/model-configuration/README)[事前定義されたモデルの追加](/ja-jp/guides/model-configuration/predefined-model)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * モデル設定方法
  * 設定説明
  * 始めましょう
  * テスト



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/guides/model-configuration/predefined-model

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

モデルの設定

事前定義されたモデルの追加

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

    * [モデル](/ja-jp/guides/model-configuration/README)
    * [新しいプロバイダーの追加](/ja-jp/guides/model-configuration/new-provider)
    * [事前定義されたモデルの追加](/ja-jp/guides/model-configuration/predefined-model)
    * [カスタムモデルの追加](/ja-jp/guides/model-configuration/customizable-model)
    * [インターフェース方法](/ja-jp/guides/model-configuration/interfaces)
    * [設定ルール](/ja-jp/guides/model-configuration/schema)
    * [負荷分散](/ja-jp/guides/model-configuration/load-balancing)
  * アプリ・オーケストレーション

  * ワークフロー

  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




モデルの設定

# 事前定義されたモデルの追加

Copy page

プロバイダー統合完了後、次にプロバイダーへのモデルの接続を行います。

まず、接続するモデルのタイプを決定し、対応するプロバイダーのディレクトリ内に対応するモデルタイプの`module`を作成する必要があります。

現在サポートされているモデルタイプは以下の通りです：

  * `LLM` テキスト生成モデル
  * `text_embedding` テキスト埋め込みモデル
  * `rerank` ランク付けモデル
  * `speech2text` 音声からテキストへの変換モデル
  * `TTS` テキストから音声への変換モデル
  * `moderation` 審査



ここでは`Anthropic`を例に挙げると、`Anthropic`はLLMのみをサポートしているため、`model_providers.anthropic`に`llm`という名前の`module`を作成します。

事前に定義されたモデルについては、`llm` `module` の下に、モデル名をファイル名とするYAMLファイルを作成する必要があります、例えば、`claude-2.1.yaml`。

#### 

​

モデルのYAMLファイルのサンプル
    
    
    model: claude-2.1  # モデル識別子
    # モデル表示名。en_US英語、zh_Hans中国語の二つの言語を設定できます。zh_Hansが設定されていない場合、デフォルトでen_USが使用されます。
    # ラベルを設定しない場合、モデル識別子が使用されます。
    label:
      en_US: claude-2.1
    model_type: llm  # モデルタイプ、claude-2.1はLLMです
    features:  # サポートする機能、agent-thoughtはエージェント推論、visionは画像理解をサポート
    - agent-thought
    model_properties:  # モデルプロパティ
      mode: chat  # LLMモード、completeはテキスト補完モデル、chatは対話モデル
      context_size: 200000  # 最大コンテキストサイズ
    parameter_rules:  # モデル呼び出しパラメータルール、LLMのみ提供が必要
    - name: temperature  # 呼び出しパラメータ変数名
      # デフォルトで5つの変数内容設定テンプレートが用意されています。temperature/top_p/max_tokens/presence_penalty/frequency_penalty
      # use_template内でテンプレート変数名を設定すると、entities.defaults.PARAMETER_RULE_TEMPLATE内のデフォルト設定が使用されます
      # 追加の設定パラメータを設定した場合、デフォルト設定を上書きします
      use_template: temperature
    - name: top_p
      use_template: top_p
    - name: top_k
      label:  # 呼び出しパラメータ表示名
        en_US: Top k
        zh_Hans: 取样数量
        ja_JP: サンプリング数
      type: int  # パラメータタイプ、float/int/string/booleanがサポートされています
      help:  # ヘルプ情報、パラメータの作用を説明
        en_US: Only sample from the top K options for each subsequent token.
        zh_Hans: 仅从每个后续标记的前 K 个选项中采样。
        ja_JP: 各後続マーカーの最初のKオプションからのみサンプリングする。
      required: false  # 必須かどうか、設定しない場合もあります
    - name: max_tokens_to_sample
      use_template: max_tokens
      default: 4096  # パラメータデフォルト値
      min: 1  # パラメータ最小値、float/intのみ使用可能
      max: 4096  # パラメータ最大値、float/intのみ使用可能
    pricing:  # 価格情報
      input: '8.00'  # 入力単価、つまりプロンプト単価
      output: '24.00'  # 出力単価、つまり返答内容単価
      unit: '0.000001'  # 価格単位、上記価格は100Kあたりの単価
      currency: USD  # 価格通貨

すべてのモデル構成が完了した後に、モデルコードの実装を開始することをお勧めします。

同様に、`model_providers`ディレクトリ内の他のサプライヤーの対応するモデル タイプ ディレクトリにあるYAML構成情報を参照することもできます。全てのYAMLルールについては、「Schema[1](/_sites/docs.dify.ai/ja-jp/guides/model-configuration/predefined-model#user-content-fn-1)」をご覧ください。

#### 

​

モデル呼び出しコードの実装

次に、`llm` `module`内に同名のPythonファイル`llm.py`を作成し、コード実装を行います。

`llm.py`内にAnthropic LLMクラスを作成し、`AnthropicLargeLanguageModel`(任意な名前)という名前を付けます。このクラスは`__base.large_language_model.LargeLanguageModel`基底クラスを継承し、以下のメソッドを実装します：

  * LLM呼び出し

LLM呼び出しの中核メソッドを実装し、ストリーミングと同期返り値の両方をサポートするメソッドを実装します。
        
        def _invoke(self, model: str, credentials: dict,
                    prompt_messages: list[PromptMessage], model_parameters: dict,
                    tools: Optional[list[PromptMessageTool]] = None, stop: Optional[List[str]] = None,
                    stream: bool = True, user: Optional[str] = None) \
                -> Union[LLMResult, Generator]:
            """
            Invoke large language model
        
            :param model: model name
            :param credentials: model credentials
            :param prompt_messages: prompt messages
            :param model_parameters: model parameters
            :param tools: tools for tool calling
            :param stop: stop words
            :param stream: is stream response
            :param user: unique user id
            :return: full response or stream response chunk generator result
            """

実装時には、同期返答とストリーミング返答を処理するために2つの関数を使用する必要があります。Pythonは`yield`キーワードを含む関数をジェネレータ関数として認識し、返されるデータタイプが固定されるため、同期返答とストリーミング返答を別々に実装する必要があります。以下のように（以下の例では簡略化されたパラメータを使用していますが、実際の実装では上記のパラメータリストに従う必要があります）：
        
        def _invoke(self, stream: bool, **kwargs) \
                -> Union[LLMResult, Generator]:
            if stream:
                  return self._handle_stream_response(**kwargs)
            return self._handle_sync_response(**kwargs)
        
        def _handle_stream_response(self, **kwargs) -> Generator:
            for chunk in response:
                  yield chunk
        def _handle_sync_response(self, **kwargs) -> LLMResult:
            return LLMResult(**response)

  * 事前計算入力トークン

モデルが事前計算トークンインターフェースを提供していない場合は、0を返しても構いません。
        
        def get_num_tokens(self, model: str, credentials: dict, prompt_messages: list[PromptMessage],
                           tools: Optional[list[PromptMessageTool]] = None) -> int:
            """
            Get number of tokens for given prompt messages
        
            :param model: model name
            :param credentials: model credentials
            :param prompt_messages: prompt messages
            :param tools: tools for tool calling
            :return:
            """

  * モデル認証情報検証

プロバイダーの認証情報検証と同様に、ここでは個別のモデルに対して検証を行います。
        
        def validate_credentials(self, model: str, credentials: dict) -> None:
            """
            Validate model credentials
        
            :param model: model name
            :param credentials: model credentials
            :return:
            """

  * 呼び出し異常エラーのマッピングテーブル

モデル呼び出し異常時に、Runtime時に指定の`InvokeError`タイプにマッピングする必要があります。これにより、Difyは異なるエラーに対して異なる後続処理を行うことができます。

ランタイムエラー(Runtime Errors)：

    * `InvokeConnectionError` 呼び出し接続エラー
    * `InvokeServerUnavailableError` 呼び出しサーバー利用不可エラー
    * `InvokeRateLimitError` 呼び出しレート制限エラー
    * `InvokeAuthorizationError` 認証エラー
    * `InvokeBadRequestError` 呼び出し不正リクエストエラー
    
    @property
    def _invoke_error_mapping(self) -> dict[type[InvokeError], list[type[Exception]]]:
        """
        Map model invoke error to unified error
        The key is the error type thrown to the caller
        The value is the error type thrown by the model,
        which needs to be converted into a unified error type for the caller.
    
        :return: Invoke error mapping
        """




インターフェースメソッドの説明については：[Interfaces](https://github.com/langgenius/dify/blob/main/api/core/model_runtime/docs/en_US/interfaces.md)をご覧ください。具体的な実装については：[llm.py](https://github.com/langgenius/dify-official-plugins/blob/main/models/anthropic/models/llm/llm.py)を参照してください。

* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/guides/model-configuration/predefined-model.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20fined-mo&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/guides/model-configuration%2Fpredefined-model.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

## Footnotes

  1. #### 

​

プロバイダー

     * `provider` (string) プロバイダー識別子、例：`openai`
     * `label` (object) プロバイダー表示名、i18n対応、`en_US`英語、`zh_Hans`中国語の二つの言語を設定可能
       * `zh_Hans` (string) [optional] 中国語ラベル名、`zh_Hans`が設定されていない場合、デフォルトで`en_US`が使用されます。
       * `en_US` (string) 英語ラベル名
     * `description` (object) [optional] プロバイダー説明、i18n対応
       * `zh_Hans` (string) [optional] 中国語説明
       * `en_US` (string) 英語説明
     * `icon_small` (string) [optional] プロバイダー小アイコン、対応するプロバイダー実装ディレクトリ内の`_assets`ディレクトリに保存、中英同様のポリシー
       * `zh_Hans` (string) [optional] 中国語アイコン
       * `en_US` (string) 英語アイコン
     * `icon_large` (string) [optional] プロバイダー大アイコン、対応するプロバイダー実装ディレクトリ内の_assetsディレクトリに保存、中英同様のポリシー
       * `zh_Hans` (string) [optional] 中国語アイコン
       * `en_US` (string) 英語アイコン
     * `background` (string) [optional] 背景色の色値、例：#FFFFFF、空白の場合はデフォルトの色が表示されます。
     * `help` (object) [optional] ヘルプ情報
       * `title` (object) ヘルプタイトル、i18n対応
         * `zh_Hans` (string) [optional] 中国語タイトル
         * `en_US` (string) 英語タイトル
       * `url` (object) ヘルプリンク、i18n対応
         * `zh_Hans` (string) [optional] 中国語リンク
         * `en_US` (string) 英語リンク
     * `supported_model_types` (array[ModelType]) 対応モデルタイプ
     * `configurate_methods` (array[ConfigurateMethod]) 設定方法
     * `provider_credential_schema` (ProviderCredentialSchema) プロバイダー認証情報スキーマ
     * `model_credential_schema` (ModelCredentialSchema) モデル認証情報スキーマ
[↩](/_sites/docs.dify.ai/ja-jp/guides/model-configuration/predefined-model#user-content-fnref-1)



Was this page helpful?

YesNo

[新しいプロバイダーの追加](/ja-jp/guides/model-configuration/new-provider)[カスタムモデルの追加](/ja-jp/guides/model-configuration/customizable-model)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * モデルのYAMLファイルのサンプル
  * モデル呼び出しコードの実装



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/guides/model-configuration/schema

[Dify Docs home page](/)

v1.0

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

モデルの設定

設定ルール

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

    * [モデル](/ja-jp/guides/model-configuration/README)
    * [新しいプロバイダーの追加](/ja-jp/guides/model-configuration/new-provider)
    * [事前定義されたモデルの追加](/ja-jp/guides/model-configuration/predefined-model)
    * [カスタムモデルの追加](/ja-jp/guides/model-configuration/customizable-model)
    * [インターフェース方法](/ja-jp/guides/model-configuration/interfaces)
    * [設定ルール](/ja-jp/guides/model-configuration/schema)
    * [負荷分散](/ja-jp/guides/model-configuration/load-balancing)
  * アプリ・オーケストレーション

  * ワークフロー

  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




モデルの設定

# 設定ルール

Copy page

  * 供給業者のルールは [Provider](/_sites/docs.dify.ai/ja-jp/guides/model-configuration/schema#provider) エンティティに基づいています。

  * モデルのルールは [AIModelEntity](/_sites/docs.dify.ai/ja-jp/guides/model-configuration/schema#aimodelentity) エンティティに基づいています。




> 以下のすべてのエンティティは `Pydantic BaseModel` に基づいており、対応するエンティティは `entities` モジュールで見つけることができます。

### 

​

Provider

  * `provider` (string) 供給業者の識別子、例：`openai`
  * `label` (object) 供給業者の表示名、i18n、`en_US` 英語、`zh_Hans` 中国語の2種類の言語を設定できます
    * `zh_Hans` (string) [optional] 中国語のラベル名、`zh_Hans` が設定されていない場合はデフォルトで `en_US` が使用されます。
    * `en_US` (string) 英語のラベル名
  * `description` (object) [optional] 供給業者の説明、i18n
    * `zh_Hans` (string) [optional] 中国語の説明
    * `en_US` (string) 英語の説明
  * `icon_small` (string) [optional] 供給業者の小さなアイコン、対応する供給業者の実装ディレクトリ内の `_assets` ディレクトリに保存されています。中国語と英語の方針は `label` と同じです。
    * `zh_Hans` (string) [optional] 中国語のアイコン
    * `en_US` (string) 英語のアイコン
  * `icon_large` (string) [optional] 供給業者の大きなアイコン、対応する供給業者の実装ディレクトリ内の `_assets` ディレクトリに保存されています。中国語と英語の方針は `label` と同じです。
    * `zh_Hans` (string) [optional] 中国語のアイコン
    * `en_US` (string) 英語のアイコン
  * `background` (string) [optional] 背景色の値、例：#FFFFFF、空白の場合はフロントエンドのデフォルトの色が表示されます。
  * `help` (object) [optional] ヘルプ情報
    * `title` (object) ヘルプのタイトル、i18n
      * `zh_Hans` (string) [optional] 中国語のタイトル
      * `en_US` (string) 英語のタイトル
    * `url` (object) ヘルプリンク、i18n
      * `zh_Hans` (string) [optional] 中国語のリンク
      * `en_US` (string) 英語のリンク
  * `supported_model_types` (array[[ModelType](/_sites/docs.dify.ai/ja-jp/guides/model-configuration/schema#modeltype)]) サポートされるモデルタイプ
  * `configurate_methods` (array[[ConfigurateMethod](/_sites/docs.dify.ai/ja-jp/guides/model-configuration/schema#configuratemethod)]) 設定方法
  * `provider_credential_schema` ([ProviderCredentialSchema](/_sites/docs.dify.ai/ja-jp/guides/model-configuration/schema#providercredentialschema)) 供給業者の資格情報スキーマ
  * `model_credential_schema` ([ModelCredentialSchema](/_sites/docs.dify.ai/ja-jp/guides/model-configuration/schema#modelcredentialschema)) モデルの資格情報スキーマ



### 

​

AIModelEntity

  * `model` (string) モデルの識別子、例：`gpt-3.5-turbo`
  * `label` (object) [optional] モデルの表示名、i18n、`en_US` 英語、`zh_Hans` 中国語の2種類の言語を設定できます
    * `zh_Hans `(string) [optional] 中国語のラベル名
    * `en_US` (string) 英語のラベル名
  * `model_type` ([ModelType](/_sites/docs.dify.ai/ja-jp/guides/model-configuration/schema#modeltype)) モデルのタイプ
  * `features` (array[[ModelFeature](/_sites/docs.dify.ai/ja-jp/guides/model-configuration/schema#modelfeature)]) [optional] サポートされる機能のリスト
  * `model_properties` (object) モデルのプロパティ
    * `mode` ([LLMMode](/_sites/docs.dify.ai/ja-jp/guides/model-configuration/schema#llmmode)) モード (モデルタイプ `llm` で使用可能)
    * `context_size` (int) コンテキストサイズ (モデルタイプ `llm` `text-embedding` で使用可能)
    * `max_chunks` (int) 最大チャンク数 (モデルタイプ `text-embedding` `moderation` で使用可能)
    * `file_upload_limit` (int) ファイルの最大アップロード制限、単位：MB。（モデルタイプ `speech2text` で使用可能）
    * `supported_file_extensions` (string) サポートされるファイルの拡張形式、例：mp3,mp4（モデルタイプ `speech2text` で使用可能）
    * `default_voice` (string) デフォルトの音声、必須：alloy,echo,fable,onyx,nova,shimmer（モデルタイプ `tts` で使用可能）
    * `voices` (list) 選択可能な音声のリスト。
      * `mode` (string) 音声モデル。（モデルタイプ `tts` で使用可能）
      * `name` (string) 音声モデルの表示名。（モデルタイプ `tts` で使用可能）
      * `language` (string) 音声モデルのサポート言語。（モデルタイプ `tts` で使用可能）
    * `word_limit` (int) 一度に変換できる単語数の制限、デフォルトでは段落ごとに分割されます（モデルタイプ `tts` で使用可能）
    * `audio_type` (string) サポートされるオーディオファイルの拡張形式、例：mp3,wav（モデルタイプ `tts` で使用可能）
    * `max_workers` (int) テキストオーディオ変換の並行タスク数をサポート（モデルタイプ `tts` で使用可能）
    * `max_characters_per_chunk` (int) チャンクあたりの最大文字数（モデルタイプ `moderation` で使用可能）
  * `parameter_rules` (array[[ParameterRule](/_sites/docs.dify.ai/ja-jp/guides/model-configuration/schema#parameterrule)]) [optional] モデル呼び出しパラメータのルール
  * `pricing` ([PriceConfig](/_sites/docs.dify.ai/ja-jp/guides/model-configuration/schema#priceconfig)) [optional] 価格情報
  * `deprecated` (bool) 廃止されていますか。廃止されると、モデルリストは表示されなくなりますが、すでに設定されているモデルは引き続き使用できます。デフォルトは False です。



### 

​

ModelType

  * `llm` テキスト生成モデル
  * `text-embedding` テキスト埋め込みモデル
  * `rerank` Rerank モデル
  * `speech2text` 音声からテキストへ
  * `tts` テキストから音声へ
  * `moderation` モデレーション



### 

​

ConfigurateMethod

  * `predefined-model` 事前定義モデル

ユーザーは、供給業者ごとに統一された資格情報を設定するだけで、供給業者の事前定義モデルを使用できます。

  * `customizable-model` カスタマイズ可能なモデル

ユーザーは、各モデルの資格情報を設定することができます。

  * `fetch-from-remote` リモートから取得

`predefined-model` の設定方法と同様に、統一されたベンダーの認証情報を設定すれば、モデルは認証情報を通じてベンダーから取得されます。




### 

​

ModelFeature

  * `agent-thought` エージェントの思考、一般的に70Bを超えると推論能力があります。
  * `vision` 視覚、例えば：画像理解。
  * `tool-call` ツールの呼び出し
  * `multi-tool-call` 複数ツールの呼び出し
  * `stream-tool-call` ストリーミングツール呼び出し



### 

​

FetchFrom

  * `predefined-model` 予め定義されたモデル
  * `fetch-from-remote` リモートモデル



### 

​

LLMMode

  * `completion` テキスト補完
  * `chat` チャット



### 

​

ParameterRule

  * `name` (string) モデル呼び出しの実際のパラメータ名

  * `use_template` (string) [optional] テンプレートを使用

デフォルトで5種類の変数内容設定テンプレートが用意されています：

    * `temperature`
    * `top_p`
    * `frequency_penalty`
    * `presence_penalty`
    * `max_tokens`

`use_template` にテンプレート変数名を直接設定することで、`entities.defaults.PARAMETER_RULE_TEMPLATE` に基づくデフォルト設定が使用されます。 `name` と `use_template` 以外のすべてのパラメータを設定する必要はありません。追加の設定パラメータを設定した場合、デフォルト設定が上書きされます。 `openai/llm/gpt-3.5-turbo.yaml`を参照してください。

  * `label` (object) [optional] ラベル，i18n

    * `zh_Hans`(string) [optional] 中国語ラベル名
    * `en_US` (string) 英語ラベル名
  * `type`(string) [optional] パラメータタイプ

    * `int` 整数
    * `float` 浮動小数点
    * `string` 文字列
    * `boolean` ブール型
  * `help` (string) [optional] ヘルプ情報

    * `zh_Hans` (string) [optional] 中国語ヘルプ情報
    * `en_US` (string) 英語ヘルプ情報
  * `required` (bool) 必須かどうか、デフォルトは False。

  * `default`(int/float/string/bool) [optional] デフォルト値

  * `min`(int/float) [optional] 最小値、数値型のみ適用

  * `max`(int/float) [optional] 最大値、数値型のみ適用

  * `precision`(int) [optional] 精度、小数点以下の桁数を保持、数値型のみ適用

  * `options` (array[string]) [optional] ドロップダウン選択肢、`type` が `string` の場合にのみ適用、設定しないか null の場合は選択肢に制限はありません。




### 

​

PriceConfig

  * `input` (float) 入力単価、すなわちプロンプト単価
  * `output` (float) 出力単価、すなわち返却内容単価
  * `unit` (float) 価格単位、例えば1Mトークン単位で計算する場合、単価に対応する単位トークン数は `0.000001`
  * `currency` (string) 通貨単位



### 

​

ProviderCredentialSchema

  * `credential_form_schemas` (array[[CredentialFormSchema](/_sites/docs.dify.ai/ja-jp/guides/model-configuration/schema#credentialformschema)]) 認証情報フォーム規範



### 

​

ModelCredentialSchema

  * `model` (object) モデル識別子、変数名はデフォルトで `model`
    * `label` (object) モデルフォーム項目の表示名
      * `en_US` (string) 英語
      * `zh_Hans` (string) [optional] 中国語
    * `placeholder` (object) モデルのヒント内容
      * `en_US` (string) 英語
      * `zh_Hans` (string) [optional] 中国語
  * `credential_form_schemas` (array[[CredentialFormSchema](/_sites/docs.dify.ai/ja-jp/guides/model-configuration/schema#credentialformschema)]) 認証情報フォーム規範



### 

​

CredentialFormSchema

  * `variable` (string) フォーム項目の変数名
  * `label` (object) フォーム項目のラベル
    * `en_US` (string) 英語のラベル
    * `zh_Hans` (string) [optional] 中国語のラベル
  * `type` ([FormType](/_sites/docs.dify.ai/ja-jp/guides/model-configuration/schema#formtype)) フォーム項目の種類
  * `required` (bool) この項目が必須かどうか
  * `default` (string) デフォルト値
  * `options` (array[[FormOption](/_sites/docs.dify.ai/ja-jp/guides/model-configuration/schema#formoption)]) フォーム項目が `select` または `radio` の場合に使用するドロップダウンの選択肢を定義
  * `placeholder` (object) フォーム項目が `text-input` の場合にのみ使用するプロパティ、入力フィールドに表示されるヒント
    * `en_US` (string) 英語のプレースホルダー
    * `zh_Hans` (string) [optional] 中国語のプレースホルダー
  * `max_length` (int) フォーム項目が `text-input` の場合に使用するプロパティ、入力可能な最大文字数を定義。0 は制限なしを意味する。
  * `show_on` (array[[FormShowOnObject](/_sites/docs.dify.ai/ja-jp/guides/model-configuration/schema#formshowonobject)]) 他のフォーム項目の値が条件に一致する場合に表示される。空の場合は常に表示される。



### 

​

FormType

  * `text-input` テキスト入力コンポーネント
  * `secret-input` パスワード入力コンポーネント
  * `select` 単一選択ドロップダウン
  * `radio` ラジオボタンコンポーネント
  * `switch` スイッチコンポーネント、`true` と `false` のみをサポート



### 

​

FormOption

  * `label` (object) ラベル
    * `en_US` (string) 英語のラベル
    * `zh_Hans` (string) [optional] 中国語のラベル
  * `value` (string) ドロップダウンの選択肢の値
  * `show_on` (array[[FormShowOnObject](/_sites/docs.dify.ai/ja-jp/guides/model-configuration/schema#formshowonobject)]) 他のフォーム項目の値が条件に一致する場合に表示される。空の場合は常に表示される。



### 

​

FormShowOnObject

  * `variable` (string) 他のフォーム項目の変数名
  * `value` (string) 他のフォーム項目の変数値



* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/guides/model-configuration/schema.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/guides/model-configuration%2Fschema.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[インターフェース方法](/ja-jp/guides/model-configuration/interfaces)[負荷分散](/ja-jp/guides/model-configuration/load-balancing)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * Provider
  * AIModelEntity
  * ModelType
  * ConfigurateMethod
  * ModelFeature
  * FetchFrom
  * LLMMode
  * ParameterRule
  * PriceConfig
  * ProviderCredentialSchema
  * ModelCredentialSchema
  * CredentialFormSchema
  * FormType
  * FormOption
  * FormShowOnObject



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/guides/monitoring/analysis

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

モニタリング

データ分析

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

    * [データ分析](/ja-jp/guides/monitoring/analysis)
    * 外部Opsツール統合

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




モニタリング

# データ分析

Copy page

**監視 — 分析** では、使用量、アクティブユーザー数、大規模言語モデル (LLM) のコール消費などを表示します。これにより、アプリケーションの運営効果、活性度、経済性を継続的に改善できます。さらに多くの有用な可視化能力を段階的に提供していきますので、ぜひご要望をお知らせください。

* * *

**合計メッセージ数（Total Messages）**

AIとの毎日会話した総回数を反映します。ユーザーの質問に AI が回答するごとに1回と数える。プロンプトエンジニアリング(prompt engineering)とデバッグの会話は含まれません。

**活躍ユーザー数（Active Users）**

AI と有効にインタラクションしたユニークユーザー数を表します。少なくとも一問一答以上のやり取りをしたユーザーが含まれます。プロンプトエンジニアリング(prompt engineering)とデバッグの会話は含まれません。

**平均会話インタラクション数（Average Session Interactions）**

各会話ユーザーの継続的なコミュニケーション回数を反映します。ユーザーが AI と 10 ラウンドの質問と回答を行った場合、その数値は 10 になります。この指標はユーザーの粘着性を反映します。対話型アプリケーションでのみ提供されます。

**トークン出力速度（Token Output Speed）**

毎秒のトークン出力数を示し、モデルの生成速度およびアプリケーションの使用頻度を間接的に反映します。

**ユーザー満足度（User Satisfaction Rate）**

1000 メッセージごとの「いいね」数を示します。ユーザーが回答に非常に満足している割合を反映します。

**トークン消費数（Token Usage）**

そのアプリケーションが毎日言語モデルにリクエストしたトークンの消費量を反映し、コスト管理に役立ちます。

**合計会話数 (Total Conversation)**

毎日のAI会話数。数え方は：会話を1回と数える、毎回の会話には複数のメッセージ交換できます。プロンプトエンジニアリング(prompt engineering)とデバッグの会話は含まれません。

* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/guides/monitoring/analysis.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/guides/monitoring%2Fanalysis.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[アノテーションリプライ](/ja-jp/guides/annotation/annotation-reply)[LangFuseとの統合](/ja-jp/guides/monitoring/integrate-external-ops-tools/integrate-langfuse)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/guides/monitoring/integrate-external-ops-tools/integrate-langfuse

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

外部Opsツール統合

LangFuseとの統合

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

    * [データ分析](/ja-jp/guides/monitoring/analysis)
    * 外部Opsツール統合

      * [LangFuseとの統合](/ja-jp/guides/monitoring/integrate-external-ops-tools/integrate-langfuse)
      * [LangSmithの統合](/ja-jp/guides/monitoring/integrate-external-ops-tools/integrate-langsmith)
      * [Opikの統合](/ja-jp/guides/monitoring/integrate-external-ops-tools/integrate-opik)
      * [W&B Weaveの統合](/ja-jp/guides/monitoring/integrate-external-ops-tools/integrate-weave)
  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




外部Opsツール統合

# LangFuseとの統合

Copy page

### 

​

Langfuseとは

LangfuseはLLMアプリケーションの開発者がデバッグ、分析、イテレーション等を使用してアプリケーションのパフォーマンスを向上させるためのツールです。

Langfuseの公式サイト：<https://langfuse.com/>

* * *

### 

​

Langfuseの使い方

  1. Langfuseの[公式サイト](https://langfuse.com/)から登録し、ログインする。
  2. Langfuseからプロジェクトを作成します ログイン後、ホームページの **New** をクリックし、新たな**プロジェクト** を作成します。このプロジェクトは、Dify内の**アプリ** と連動したデータモニタリングに使用されます。



* * *

### 

​

監視データのリスト

#### 

​

ワークフローとチャットフローの情報を追跡

**ワークフローとチャットフローの追跡**

Workflow| LangFuse Trace  
---|---  
workflow_app_log_id/workflow_run_id| id  
user_session_id| user_id  
workflow_| name  
start_time| start_time  
end_time| end_time  
inputs| input  
outputs| output  
Model token consumption| usage  
metadata| metadata  
error| level  
error| status_message  
[workflow]| tags  
[“message”, conversation_mode]| session_id  
conversion_id| parent_observation_id  
  
**Workflow Trace Info**

  * workflow_id - ワークフローのユニークID
  * conversation_id - 会話ID
  * workflow_run_id - このランタイムのワークフローID
  * tenant_id - テナントID
  * elapsed_time - このランタイムの経過時間
  * status - ランタイムのステータス
  * version - ワークフローのバージョン
  * total_tokens - このランタイムで使用されたトークンの合計
  * file_list - 処理されたファイルのリスト
  * triggered_from - このランタイムをトリガしたソース
  * workflow_run_inputs - このワークフローの入力
  * workflow_run_outputs - このワークフローの出力
  * error - エラーメッセージ
  * query - ランタイムで使用されるクエリ
  * workflow_app_log_id - ワークフローアプリケーションログID
  * message_id - 関連するメッセージID
  * start_time - このランタイムの開始時刻
  * end_time - このランタイムの終了時刻
  * workflow node executions - ワークフローノードのランタイム情報
  * Metadata
    * workflow_id - ワークフローのユニークID
    * conversation_id - 会話ID
    * workflow_run_id - このランタイムのワークフローID
    * tenant_id - テナントID
    * elapsed_time - このランタイムの経過時間
    * status - 運用状態
    * version - ワークフローのバージョン
    * total_tokens - このランタイムで使用されたトークンの合計
    * file_list - 処理されたファイルのリスト
    * triggered_from - このランタイムをトリガしたソース



#### 

​

Message Trace 情報

**LLM会話を追跡するため**

Message| LangFuse Generation/Trace  
---|---  
message_id| id  
user_session_id| user_id  
message_| name  
start_time| start_time  
end_time| end_time  
inputs| input  
outputs| output  
Model token consumption| usage  
metadata| metadata  
error| level  
error| status_message  
[“message”, conversation_mode]| tags  
conversation_id| session_id  
conversion_id| parent_observation_id  
  
**Message Trace Info**

  * message_id - メッセージID
  * message_data - メッセージデータ
  * user_session_id - ユーザーのセッションID
  * conversation_model - 会話モデル
  * message_tokens - メッセージトークン
  * answer_tokens - 回答トークン
  * total_tokens - メッセージと回答のトータルトークン
  * error - エラーメッセージ
  * inputs - 入力データ
  * outputs - 出力データ
  * file_list - 処理されたファイルのリスト
  * start_time - 開始時刻
  * end_time - 終了時刻
  * message_file_data - 関連ファイルデータのメッセージ
  * conversation_mode - 会話モード
  * Metadata
    * conversation_id - 会話ID
    * ls_provider - モデルプロバイダ
    * ls_model_name - モデルID
    * status - メッセージステータス
    * from_end_user_id - 送信ユーザーID
    * from_account_id - 送信アカウントID
    * agent_based - エージェントベースか
    * workflow_run_id - このランタイムのワークフローID
    * from_source - メッセージのソース
    * message_id - メッセージID



#### 

​

Moderation Trace 情報

**会話モデレーションを追跡するため**

Moderation| LangFuse Generation/Trace  
---|---  
user_id| user_id  
moderation| name  
start_time| start_time  
end_time| end_time  
inputs| input  
outputs| output  
metadata| metadata  
[moderation]| tags  
message_id| parent_observation_id  
  
**Message Trace Info**

  * message_id - メッセージID
  * user_id - ユーザーID
  * workflow_app_log_id - ワークフローアプリケーションログID
  * inputs - レビュー用の入力データ
  * message_data - メッセージデータ
  * flagged - 注目対象としてフラグが立てられているか
  * action - 実行すべき具体的なアクション
  * preset_response - 事前設定の応答
  * start_time - レビューの開始時刻
  * end_time - レビューの終了時刻
  * Metadata
    * message_id - メッセージID
    * action - 実行すべき具体的なアクション
    * preset_response - 事前設定の応答



#### 

​

提案された質問トレース情報

**提案された質問を追跡するため**

Suggested Question| LangFuse Generation/Trace  
---|---  
user_id| user_id  
suggested_question| name  
start_time| start_time  
end_time| end_time  
inputs| input  
outputs| output  
metadata| metadata  
[suggested_question]| tags  
message_id| parent_observation_id  
  
**Message Trace Info**

  * message_id - メッセージID
  * message_data - メッセージデータ
  * inputs - 入力データ
  * outputs - 出力データ
  * start_time - 開始時刻
  * end_time - 終了時刻
  * total_tokens - トータルトークン
  * status - メッセージの状態
  * error - エラーメッセージ
  * from_account_id - 送信元アカウントのID
  * agent_based - エージェントベースであるかどうか
  * from_source - メッセージの発信元
  * model_provider - モデルの提供者
  * model_id - モデルのID
  * suggested_question - 提案された質問
  * level - ステータスのレベル
  * status_message - ステータスメッセージ
  * Metadata
    * message_id - メッセージのID
    * ls_provider - モデルの提供者
    * ls_model_name - モデルの名前
    * status - メッセージの状態
    * from_end_user_id - 送信元ユーザーのID
    * from_account_id - 送信元アカウントのID
    * workflow_run_id - このランタイムにおけるワークフローのID
    * from_source - メッセージの発信元



#### 

​

Dataset Retrieval Trace 情報

**ナレッジベースの取得を追跡するために使用**

データセットの取得| LangFuse生成/トレース  
---|---  
user_id| user_id  
dataset_retrieval| name  
start_time| start_time  
end_time| end_time  
inputs| input  
outputs| output  
metadata| metadata  
[dataset_retrieval]| tags  
message_id| parent_observation_id  
  
**Dataset Retrieval Trace Info**

  * message_id - メッセージのID
  * inputs - 入力メッセージ
  * documents - ドキュメントデータ
  * start_time - 開始時間
  * end_time - 終了時間
  * message_data - 消息数据
  * Metadata
    * message_id - メッセージのID
    * ls_provider - モデルの提供者
    * ls_model_name - モデルの名前
    * status - モデルの状態
    * from_end_user_id - 送信元ユーザーのID
    * from_account_id - 送信元アカウントのID
    * agent_based - エージェントベースであるかどうか
    * workflow_run_id - このランタイムにおけるワークフローのID
    * from_source - メッセージの発信元



#### 

​

Tool Trace 情報

**ツールの呼び出しを追跡するために使用**

ツール| LangFuse生成/トレース  
---|---  
user_id| user_id  
tool_name| name  
start_time| start_time  
end_time| end_time  
inputs| input  
outputs| output  
metadata| metadata  
[“tool”, tool_name]| tags  
message_id| parent_observation_id  
  
**Tool Trace Info**

  * message_id - メッセージのID
  * tool_name - ツール名
  * start_time - 開始時間
  * end_time - 終了時間
  * tool_inputs - ツールの入力
  * tool_outputs - ツールの出力
  * error - エラーメッセージ（存在する場合）
  * inputs - メッセージの入力
  * outputs - メッセージの出力
  * tool_config - ツールの構成
  * tool_parameters - ツールのパラメータ
  * file_url - 関連ファイルのURL
  * Metadata
    * message_id - メッセージのID
    * tool_name - ツール名
    * tool_inputs - ツールの入力
    * tool_outputs - ツールの出力
    * tool_config - ツールの構成
    * error - エラーメッセージ
    * tool_parameters - ツールのパラメータ
    * message_file_id - メッセージファイルのID
    * created_by_role - 作成者の役割
    * created_user_id - 作成ユーザーのID



#### 

​

Generate Name Trace 情報

**会話タイトル生成の追跡に使用**

Generate Name| LangFuse Generation/Trace  
---|---  
user_id| user_id  
generate_name| name  
start_time| start_time  
end_time| end_time  
inputs| input  
outputs| output  
metadata| metadata  
[generate_name]| tags  
  
**Generate Name Trace Info**

  * conversation_id - 会話のID
  * inputs - 入力データ
  * outputs - 生成されたセッション名
  * start_time - 開始時間
  * end_time - 終了時間
  * tenant_id - テナントID
  * Metadata
    * conversation_id - 会話のID
    * tenant_id - テナントID



* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/guides/monitoring/integrate-external-ops-tools/integrate-langfuse.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20rate-langf&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/guides/monitoring/integrate-external-ops-tools%2Fintegrate-langfuse.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[データ分析](/ja-jp/guides/monitoring/analysis)[LangSmithの統合](/ja-jp/guides/monitoring/integrate-external-ops-tools/integrate-langsmith)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * Langfuseとは
  * Langfuseの使い方
  * 監視データのリスト
  * ワークフローとチャットフローの情報を追跡
  * Message Trace 情報
  * Moderation Trace 情報
  * 提案された質問トレース情報
  * Dataset Retrieval Trace 情報
  * Tool Trace 情報
  * Generate Name Trace 情報



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/guides/monitoring/integrate-external-ops-tools/integrate-langsmith

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

外部Opsツール統合

LangSmithの統合

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

    * [データ分析](/ja-jp/guides/monitoring/analysis)
    * 外部Opsツール統合

      * [LangFuseとの統合](/ja-jp/guides/monitoring/integrate-external-ops-tools/integrate-langfuse)
      * [LangSmithの統合](/ja-jp/guides/monitoring/integrate-external-ops-tools/integrate-langsmith)
      * [Opikの統合](/ja-jp/guides/monitoring/integrate-external-ops-tools/integrate-opik)
      * [W&B Weaveの統合](/ja-jp/guides/monitoring/integrate-external-ops-tools/integrate-weave)
  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




外部Opsツール統合

# LangSmithの統合

Copy page

### 

​

1 LangSmithとは

LangSmithはLLMアプリケーションの開発、コラボレーション、テスト、デプロイ、監視などのツールを提供するプラットフォームです。

LangSmithの公式サイト：<https://www.langchain.com/langsmith>

* * *

### 

​

2 LangSmithの使い方

#### 

​

1\. LangSmithの[公式サイト](https://www.langchain.com/langsmith)から登録し、ログインする。

#### 

​

2\. LangSmithからプロジェクトを作成します

ログイン後、ホームページの **New Project** をクリックし、新たな**プロジェクト** を作成します。このプロジェクトは、Dify内の**アプリ** と連動したデータモニタリングに使用されます。

作成する後、プロジェクトの中にチェクできます。

#### 

​

3\. プロジェクト認証情報の作成

左のサイドバーでプロジェクト **設定** を見つける。

**Create API Key** をクリックし，新たな認証情報を作ります。

**Personal Access Token** を選び，のちほとのAPI身分証明の時使えます。

新たなAPI keyをコピーし、保存します。

#### 

​

4\. Dify アプリの中に LangSmith を設定します

監視用のアプリのサイトメニューの**監視** ボタンをクリックし，**設定** をクリックします。

それから，LangSmith から作った **API Key** と**プロジェクト名** を**設定** の中に貼り付け、保存します。

設定したプロジェクト名は LangSmith のいるプロジェクト名と必ず一致します。一致しない場合、データの同期時に LangSmith は自動的に新しいプロジェクトを作成します。

保存に成功すると、現在のページで監視状態を見ることができます。

### 

​

LangSmithでのモニタリングデータの表示

Dify内のアプリケーションからデバッグや製品データを設定することで、LangSmithにてそのデータをモニタリングすることができます。

LangSmithに切り替えると、ダッシュボード上でDifyアプリケーションの詳細な操作ログを見ることができます。

LangSmithを通じて得られる詳細な大規模言語モデル（LLM）の操作ログは、Difyアプリケーションのパフォーマンスを最適化するために役立ちます。

### 

​

モニタリングデータリスト

#### 

​

ワークフロー/チャットフローのトレース情報

ワークフローやチャットフローを追跡するために使用されます。

ワークフロー| LangSmith Chain  
---|---  
workflow_app_log_id/workflow_run_id| ID  
user_session_id| \- メタデータに配置  
workflow_| 名前  
start_time| 開始時間  
end_time| 終了時間  
inputs| 入力  
outputs| 出力  
モデルトークン消費| 使用メタデータ  
metadata| 追加情報  
エラー| エラー  
[workflow]| タグ  
”conversation_id/none for workflow”| メタデータ内のconversation_id  
conversion_id| 親実行ID  
  
**ワークフロートレース情報**

  * workflow_id：ワークフローの固有識別子
  * conversation_id：会話ID
  * workflow_run_id：現在の実行ID
  * tenant_id：テナントID
  * elapsed_time：現在の実行にかかった時間
  * status：実行ステータス
  * version：ワークフローのバージョン
  * total_tokens：現在の実行で使用されるトークンの合計数
  * file_list：処理されたファイルのリスト
  * triggered_from：現在の実行を引き起こしたソース
  * workflow_run_inputs：現在の実行の入力データ
  * workflow_run_outputs：現在の実行の出力データ
  * error：現在の実行中に発生したエラー
  * query：実行中に使用されたクエリ
  * workflow_app_log_id：ワークフローアプリケーションログID
  * message_id：関連メッセージID
  * start_time：実行の開始時間
  * end_time：実行の終了時間
  * workflow node executions：ワークフローノード実行に関する情報
  * メタデータ
    * workflow_id：ワークフローの固有識別子
    * conversation_id：会話ID
    * workflow_run_id：現在の実行ID
    * tenant_id：テナントID
    * elapsed_time：現在の実行にかかった時間
    * status：実行ステータス
    * version：ワークフローのバージョン
    * total_tokens：現在の実行で使用されるトークンの合計数
    * file_list：処理されたファイルのリスト
    * triggered_from：現在の実行を引き起こしたソース



#### 

​

メッセージトレース情報

大規模言語モデル（LLM）関連の会話を追跡するために使用されます。

チャット| LangSmith LLM  
---|---  
message_id| ID  
user_session_id| \- メタデータに配置  
“message_“| 名前  
start_time| 開始時間  
end_time| 終了時間  
inputs| 入力  
outputs| 出力  
モデルトークン消費| 使用メタデータ  
metadata| 追加情報  
エラー| エラー  
[“message”, conversation_mode]| タグ  
conversation_id| メタデータ内のconversation_id  
conversion_id| 親実行ID  
  
**メッセージトレース情報**

  * message_id：メッセージID
  * message_data：メッセージデータ
  * user_session_id：ユーザーセッションID
  * conversation_model：会話モード
  * message_tokens：メッセージ中のトークン数
  * answer_tokens：回答のトークン数
  * total_tokens：メッセージと回答の合計トークン数
  * error：エラー情報
  * inputs：入力データ
  * outputs：出力データ
  * file_list：処理されたファイルのリスト
  * start_time：開始時間
  * end_time：終了時間
  * message_file_data：メッセージに関連付けられたファイルデータ
  * conversation_mode：会話モード
  * メタデータ
    * conversation_id：会話ID
    * ls_provider：モデルプロバイダ
    * ls_model_name：モデルID
    * status：メッセージステータス
    * from_end_user_id：送信ユーザーのID
    * from_account_id：送信アカウントのID
    * agent_based：メッセージがエージェントベースかどうか
    * workflow_run_id：ワークフロー実行ID
    * from_source：メッセージのソース



#### 

​

モデレーショントレース情報

会話のモデレーションを追跡するために使用されます。

モデレーション| LangSmith Tool  
---|---  
user_id| \- メタデータに配置  
“moderation”| 名前  
start_time| 開始時間  
end_time| 終了時間  
inputs| 入力  
outputs| 出力  
metadata| 追加情報  
[moderation]| タグ  
message_id| 親実行ID  
  
**モデレーショントレース情報**

  * message_id：メッセージID
  * user_id：ユーザーID
  * workflow_app_log_id：ワークフローアプリケーションログID
  * inputs：モデレーションの入力データ
  * message_data：メッセージデータ
  * flagged：コンテンツに注意が必要かどうか
  * action：実行された具体的なアクション
  * preset_response：プリセット応答
  * start_time：モデレーション開始時間
  * end_time：モデレーション終了時間
  * メタデータ
    * message_id：メッセージID
    * action：実行された具体的なアクション
    * preset_response：プリセット応答



#### 

​

提案された質問トレース情報

提案された質問を追跡するために使用されます。

* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/guides/monitoring/integrate-external-ops-tools/integrate-langsmith.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20rate-langsm&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/guides/monitoring/integrate-external-ops-tools%2Fintegrate-langsmith.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[LangFuseとの統合](/ja-jp/guides/monitoring/integrate-external-ops-tools/integrate-langfuse)[Opikの統合](/ja-jp/guides/monitoring/integrate-external-ops-tools/integrate-opik)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * 1 LangSmithとは
  * 2 LangSmithの使い方
  * 1\. LangSmithの公式サイトから登録し、ログインする。
  * 2\. LangSmithからプロジェクトを作成します
  * 3\. プロジェクト認証情報の作成
  * 4\. Dify アプリの中に LangSmith を設定します
  * LangSmithでのモニタリングデータの表示
  * モニタリングデータリスト
  * ワークフロー/チャットフローのトレース情報
  * メッセージトレース情報
  * モデレーショントレース情報
  * 提案された質問トレース情報



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/guides/monitoring/integrate-external-ops-tools/integrate-opik

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

外部Opsツール統合

Opikの統合

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

    * [データ分析](/ja-jp/guides/monitoring/analysis)
    * 外部Opsツール統合

      * [LangFuseとの統合](/ja-jp/guides/monitoring/integrate-external-ops-tools/integrate-langfuse)
      * [LangSmithの統合](/ja-jp/guides/monitoring/integrate-external-ops-tools/integrate-langsmith)
      * [Opikの統合](/ja-jp/guides/monitoring/integrate-external-ops-tools/integrate-opik)
      * [W&B Weaveの統合](/ja-jp/guides/monitoring/integrate-external-ops-tools/integrate-weave)
  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




外部Opsツール統合

# Opikの統合

Copy page

## 

​

Opikの概要

Opikは、大規模言語モデル（LLM）アプリケーションを評価、テスト、および監視するためのオープンソースプラットフォームです。LLMベースのアプリケーション開発において、直感的な評価・テスト・監視機能を提供し、開発効率の向上を支援します。

詳細については、[Opik](https://www.comet.com/site/products/opik/)をご参照ください。

* * *

## 

​

Opikの導入ガイド

### 

​

1\. [Opik](https://www.comet.com/signup?from=llm) に登録/ログイン

### 

​

2\. Opik APIキーの取得

右上のユーザーメニューから**API Key** を選択し、APIキーを取得・コピーしてください。

### 

​

3\. OpikとDifyを統合

DifyアプリケーションでOpikを設定します。監視するアプリケーションを開き、サイドメニューで**監視** を選択し、ページ上の**アプリケーションパフォーマンスを追跡** をクリックします。

設定後、Opikで作成した**API Key** と**プロジェクト名** を設定ページに貼り付けて保存します。

保存に成功すると、現在のページで監視ステータスを確認できます。

## 

​

監視データの確認

設定が完了すると、Difyアプリケーションを通常通りデバッグまたは使用できます。すべての使用履歴はOpikで監視可能です。

Opikに切り替えると、ダッシュボードでDifyアプリケーションの詳細な操作ログを確認できます。

Opikの詳細なLLM操作ログにより、Difyアプリケーションのパフォーマンスを最適化できます。

## 

​

モニタリングデータリスト

### 

​

**ワークフロー/会話フロートラッキング情報**

**ワークフローと会話フローの追跡に使用**

ワークフロー| Opikトラッキング  
---|---  
workflow_app_log_id/workflow_run_id| id  
user_session_id| \- メタデータに配置  
workflow_| name  
start_time| start_time  
end_time| end_time  
inputs| inputs  
outputs| outputs  
モデルトークン消費| usage_metadata  
metadata| metadata  
error| error  
[workflow]| tags  
”conversation_id/none for workflow”| conversation_id in metadata  
  
**ワークフロートラッキング情報**

  * workflow_id - ワークフローの一意識別子
  * conversation_id - 会話ID
  * workflow_run_id - 現在の実行ID
  * tenant_id - テナントID
  * elapsed_time - 現在の実行にかかった時間
  * status - 実行ステータス
  * version - ワークフローバージョン
  * total_tokens - 現在の実行で使用されたトークン総数
  * file_list - 処理されたファイルのリスト
  * triggered_from - 実行をトリガーしたソース
  * workflow_run_inputs - 現在の実行の入力データ
  * workflow_run_outputs - 現在の実行の出力データ
  * error - 実行中に発生したエラー
  * query - 実行中に使用されたクエリ
  * workflow_app_log_id - ワークフローアプリケーションログID
  * message_id - 関連するメッセージID
  * start_time - 実行開始時間
  * end_time - 実行終了時間
  * workflow node executions - ワークフローノードの実行情報
  * メタデータ
    * workflow_id - ワークフローの一意識別子
    * conversation_id - 会話ID
    * workflow_run_id - 現在の実行ID
    * tenant_id - テナントID
    * elapsed_time - 現在の実行にかかった時間
    * status - 実行ステータス
    * version - ワークフローバージョン
    * total_tokens - 現在の実行で使用されたトークン総数
    * file_list - 処理されたファイルのリスト
    * triggered_from - 実行をトリガーしたソース



* * *

### 

​

**メッセージトラッキング情報**

**LLM関連の会話を追跡するために使用**

チャット| Opik LLM  
---|---  
message_id| id  
user_session_id| \- メタデータに配置  
”llm”| name  
start_time| start_time  
end_time| end_time  
inputs| inputs  
outputs| outputs  
モデルトークン消費| usage_metadata  
metadata| metadata  
[“message”, conversation_mode]| tags  
conversation_id| conversation_id in metadata  
  
**メッセージトラッキング情報**

  * message_id - メッセージID
  * message_data - メッセージデータ
  * user_session_id - ユーザーセッションID
  * conversation_model - 会話モード
  * message_tokens - メッセージ内のトークン数
  * answer_tokens - 回答内のトークン数
  * total_tokens - メッセージと回答のトークン総数
  * error - エラー情報
  * inputs - 入力データ
  * outputs - 出力データ
  * file_list - 処理されたファイルリスト
  * start_time - 開始時間
  * end_time - 終了時間
  * message_file_data - メッセージ関連のファイルデータ
  * conversation_mode - 会話モード
  * メタデータ
    * conversation_id - 会話ID
    * ls_provider - モデルプロバイダー
    * ls_model_name - モデルID
    * status - メッセージステータス
    * from_end_user_id - 送信ユーザーID
    * from_account_id - 送信アカウントID
    * agent_based - エージェントベースかどうか
    * workflow_run_id - ワークフロー実行ID
    * from_source - メッセージソース



### 

​

**レビュー追跡情報**

**会話のレビューを追跡するために使用**

レビュー| Opik Tool  
---|---  
user_id| \- メタデータに配置  
”moderation”| name  
start_time| start_time  
end_time| end_time  
inputs| inputs  
outputs| outputs  
metadata| metadata  
[“moderation”]| tags  
  
**レビュー追跡情報**

  * message_id - メッセージID
  * user_id - ユーザーID
  * workflow_app_log_id - ワークフローアプリケーションログID
  * inputs - レビュー入力データ
  * message_data - メッセージデータ
  * flagged - 注意が必要とマークされたかどうか
  * action - 実施された具体的なアクション
  * preset_response - プリセットレスポンス
  * start_time - レビュー開始時間
  * end_time - レビュー終了時間
  * メタデータ
    * message_id - メッセージID
    * action - 実施されたアクション
    * preset_response - プリセットレスポンス



* * *

### 

​

**提案質問追跡情報**

**提案質問を追跡するために使用**

提案質問| Opik LLM  
---|---  
user_id| \- メタデータに配置  
”suggested_question”| name  
start_time| start_time  
end_time| end_time  
inputs| inputs  
outputs| outputs  
metadata| metadata  
[“suggested_question”]| tags  
  
**提案質問追跡情報**

  * message_id - メッセージID
  * message_data - メッセージデータ
  * inputs - 入力データ
  * outputs - 出力データ
  * start_time - 開始時間
  * end_time - 終了時間
  * total_tokens - トークン総数
  * status - メッセージステータス
  * error - エラー情報
  * from_account_id - 送信アカウントID
  * agent_based - エージェントベースかどうか
  * from_source - メッセージの送信元
  * model_provider - モデルプロバイダー
  * model_id - モデルID
  * suggested_question - 提案された質問
  * level - ステータスレベル
  * status_message - ステータスメッセージ
  * メタデータ
    * message_id - メッセージID
    * ls_provider - モデルプロバイダー
    * ls_model_name - モデルID
    * status - メッセージステータス
    * from_end_user_id - 送信ユーザーID
    * from_account_id - 送信アカウントID
    * workflow_run_id - ワークフロー実行ID
    * from_source - メッセージの送信元



* * *

### 

​

**データセット検索追跡情報**

**ナレッジベース検索を追跡するために使用**

データセット検索| Opik Retriever  
---|---  
user_id| \- メタデータに配置  
”dataset_retrieval”| name  
start_time| start_time  
end_time| end_time  
inputs| inputs  
outputs| outputs  
metadata| metadata  
[“dataset_retrieval”]| tags  
message_id| parent_run_id  
  
**データセット検索追跡情報**

  * message_id - メッセージID
  * inputs - 入力データ
  * documents - ドキュメントデータ
  * start_time - 開始時間
  * end_time - 終了時間
  * message_data - メッセージデータ
  * メタデータ
    * message_id - メッセージID
    * ls_provider - モデルプロバイダー
    * ls_model_name - モデルID
    * status - メッセージステータス
    * from_end_user_id - 送信ユーザーID
    * from_account_id - 送信アカウントID
    * agent_based - エージェントベースかどうか
    * workflow_run_id - ワークフロー実行ID
    * from_source - メッセージの送信元



* * *

### 

​

**ツール追跡情報**

**ツールの呼び出しを追跡するために使用**

ツール| Opik Tool  
---|---  
user_id| \- メタデータに配置  
tool_name| name  
start_time| start_time  
end_time| end_time  
inputs| inputs  
outputs| outputs  
metadata| metadata  
[“tool”, tool_name]| tags  
  
**ツール追跡情報**

  * message_id - メッセージID
  * tool_name - ツール名
  * start_time - 開始時間
  * end_time - 終了時間
  * tool_inputs - ツール入力
  * tool_outputs - ツール出力
  * message_data - メッセージデータ
  * error - エラー情報（該当する場合）
  * inputs - メッセージの入力
  * outputs - メッセージの出力
  * tool_config - ツール設定
  * time_cost - 時間コスト
  * tool_parameters - ツールパラメーター
  * file_url - 関連するファイルのURL
  * メタデータ
    * message_id - メッセージID
    * tool_name - ツール名
    * tool_inputs - ツール入力
    * tool_outputs - ツール出力
    * tool_config - ツール設定
    * time_cost - 時間コスト
    * error - エラー情報（該当する場合）
    * tool_parameters - ツールパラメーター
    * message_file_id - メッセージファイルID
    * created_by_role - 作成者の役割
    * created_user_id - 作成者ユーザーID



* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/guides/monitoring/integrate-external-ops-tools/integrate-opik.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20rate-o&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/guides/monitoring/integrate-external-ops-tools%2Fintegrate-opik.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[LangSmithの統合](/ja-jp/guides/monitoring/integrate-external-ops-tools/integrate-langsmith)[W&B Weaveの統合](/ja-jp/guides/monitoring/integrate-external-ops-tools/integrate-weave)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * Opikの概要
  * Opikの導入ガイド
  * 1\. Opik に登録/ログイン
  * 2\. Opik APIキーの取得
  * 3\. OpikとDifyを統合
  * 監視データの確認
  * モニタリングデータリスト
  * ワークフロー/会話フロートラッキング情報
  * メッセージトラッキング情報
  * レビュー追跡情報
  * 提案質問追跡情報
  * データセット検索追跡情報
  * ツール追跡情報



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/guides/monitoring/integrate-external-ops-tools/integrate-weave

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

外部Opsツール統合

W&B Weaveの統合

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

    * [データ分析](/ja-jp/guides/monitoring/analysis)
    * 外部Opsツール統合

      * [LangFuseとの統合](/ja-jp/guides/monitoring/integrate-external-ops-tools/integrate-langfuse)
      * [LangSmithの統合](/ja-jp/guides/monitoring/integrate-external-ops-tools/integrate-langsmith)
      * [Opikの統合](/ja-jp/guides/monitoring/integrate-external-ops-tools/integrate-opik)
      * [W&B Weaveの統合](/ja-jp/guides/monitoring/integrate-external-ops-tools/integrate-weave)
  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




外部Opsツール統合

# W&B Weaveの統合

Copy page

Dify Cloud | コミュニティ版 ≥ v1.3.1

### 

​

W&B Weaveとは

Weights & Biases (W&B) Weaveは、LLMベースのアプリケーションの追跡、実験、評価、デプロイ、改善のためのフレームワークです。柔軟性とスケーラビリティを考慮して設計されたWeaveは、LLMアプリケーション開発ワークフローのあらゆる段階をサポートします。

詳細については、[Weave](https://weave-docs.wandb.ai/)を参照してください。

* * *

### 

​

Weaveの設定方法

#### 

​

1\. [W&B Weave](https://wandb.ai/signup)に登録/ログイン

APIキーを取得する

次に、<https://wandb.ai> でWeights & Biases (W&B)アカウントを作成し、<https://wandb.ai/authorize> からAPIキーをコピーします

#### 

​

2\. W&B WeaveをDifyと統合する

DifyアプリケーションでWeaveを設定します。監視が必要なアプリケーションを開き、サイドメニューの**モニタリング** を開き、ページ上の**アプリケーションパフォーマンスの追跡** を選択します。

設定をクリックした後、**APIキー** と**プロジェクト名** を貼り付け、**W &Bエンティティ**（オプション、デフォルトはユーザー名）も指定して設定を保存します。

正常に保存されると、現在のページで監視状態を確認できます。

### 

​

Weaveでモニタリングデータを表示する

設定が完了すると、Dify内のアプリケーションからのデバッグまたは本番データをWeaveで監視できます。

Weaveに切り替えると、ダッシュボードでDifyアプリケーションの詳細な操作ログを確認できます。

Weaveを通じた詳細なLLM操作ログは、Difyアプリケーションのパフォーマンスを最適化するのに役立ちます。

### 

​

モニタリングデータリスト

#### 

​

**ワークフロー/チャットフロートレース情報**

**ワークフローとチャットフローを追跡するために使用**

ワークフロー| Weaveトレース  
---|---  
workflow_app_log_id/workflow_run_id| id  
user_session_id| メタデータに配置  
workflow_| name  
start_time| start_time  
end_time| end_time  
inputs| inputs  
outputs| outputs  
モデルトークン消費量| usage_metadata  
metadata| extra  
error| error  
workflow| tags  
”conversation_id/none for workflow”| メタデータ内のconversation_id  
conversion_id| parent_run_id  
  
**ワークフロートレース情報**

  * workflow_id - ワークフローの一意の識別子
  * conversation_id - 会話ID
  * workflow_run_id - 現在の実行のID
  * tenant_id - テナントID
  * elapsed_time - 現在の実行にかかった時間
  * status - 実行ステータス
  * version - ワークフローバージョン
  * total_tokens - 現在の実行で使用されたトークンの総数
  * file_list - 処理されたファイルのリスト
  * triggered_from - 現在の実行をトリガーしたソース
  * workflow_run_inputs - 現在の実行の入力データ
  * workflow_run_outputs - 現在の実行の出力データ
  * error - 現在の実行中に発生したエラー
  * query - 実行中に使用されたクエリ
  * workflow_app_log_id - ワークフローアプリケーションログID
  * message_id - 関連するメッセージID
  * start_time - 実行の開始時間
  * end_time - 実行の終了時間
  * workflow node executions - ワークフローノード実行に関する情報
  * メタデータ
    * workflow_id - ワークフローの一意の識別子
    * conversation_id - 会話ID
    * workflow_run_id - 現在の実行のID
    * tenant_id - テナントID
    * elapsed_time - 現在の実行にかかった時間
    * status - 実行ステータス
    * version - ワークフローバージョン
    * total_tokens - 現在の実行で使用されたトークンの総数
    * file_list - 処理されたファイルのリスト
    * triggered_from - 現在の実行をトリガーしたソース



#### 

​

**メッセージトレース情報**

**LLM関連の会話を追跡するために使用**

チャット| Weaveトレース  
---|---  
message_id| id  
user_session_id| メタデータに配置  
”message_“| name  
start_time| start_time  
end_time| end_time  
inputs| inputs  
outputs| outputs  
モデルトークン消費量| usage_metadata  
metadata| extra  
error| error  
”message”, conversation_mode| tags  
conversation_id| メタデータ内のconversation_id  
conversion_id| parent_run_id  
  
**メッセージトレース情報**

  * message_id - メッセージID
  * message_data - メッセージデータ
  * user_session_id - ユーザーセッションID
  * conversation_model - 会話モード
  * message_tokens - メッセージ内のトークン数
  * answer_tokens - 回答内のトークン数
  * total_tokens - メッセージと回答内のトークンの総数
  * error - エラー情報
  * inputs - 入力データ
  * outputs - 出力データ
  * file_list - 処理されたファイルのリスト
  * start_time - 開始時間
  * end_time - 終了時間
  * message_file_data - メッセージに関連するファイルデータ
  * conversation_mode - 会話モード
  * メタデータ
    * conversation_id - 会話ID
    * ls_provider - モデルプロバイダー
    * ls_model_name - モデルID
    * status - メッセージステータス
    * from_end_user_id - 送信ユーザーのID
    * from_account_id - 送信アカウントのID
    * agent_based - メッセージがエージェントベースかどうか
    * workflow_run_id - ワークフロー実行ID
    * from_source - メッセージソース



#### 

​

**モデレーショントレース情報**

**会話モデレーションを追跡するために使用**

モデレーション| Weaveトレース  
---|---  
user_id| メタデータに配置  
”moderation”| name  
start_time| start_time  
end_time| end_time  
inputs| inputs  
outputs| outputs  
metadata| extra  
[moderation]| tags  
message_id| parent_run_id  
  
**モデレーショントレース情報**

  * message_id - メッセージID
  * user_id: ユーザーID
  * workflow_app_log_id - ワークフローアプリケーションログID
  * inputs - モデレーション入力データ
  * message_data - メッセージデータ
  * flagged - コンテンツが注意対象としてフラグ付けされているかどうか
  * action - 取られた特定のアクション
  * preset_response - プリセット応答
  * start_time - モデレーション開始時間
  * end_time - モデレーション終了時間
  * メタデータ
    * message_id - メッセージID
    * action - 取られた特定のアクション
    * preset_response - プリセット応答



#### 

​

**提案質問トレース情報**

**提案された質問を追跡するために使用**

提案質問| Weaveトレース  
---|---  
user_id| メタデータに配置  
suggested_question| name  
start_time| start_time  
end_time| end_time  
inputs| inputs  
outputs| outputs  
metadata| extra  
suggested_question| tags  
message_id| parent_run_id  
  
**メッセージトレース情報**

  * message_id - メッセージID
  * message_data - メッセージデータ
  * inputs - 入力内容
  * outputs - 出力内容
  * start_time - 開始時間
  * end_time - 終了時間
  * total_tokens - トークン数
  * status - メッセージステータス
  * error - エラー情報
  * from_account_id - 送信アカウントのID
  * agent_based - メッセージがエージェントベースかどうか
  * from_source - メッセージソース
  * model_provider - モデルプロバイダー
  * model_id - モデルID
  * suggested_question - 提案された質問
  * level - ステータスレベル
  * status_message - ステータスメッセージ
  * メタデータ
    * message_id - メッセージID
    * ls_provider - モデルプロバイダー
    * ls_model_name - モデルID
    * status - メッセージステータス
    * from_end_user_id - 送信ユーザーのID
    * from_account_id - 送信アカウントのID
    * workflow_run_id - ワークフロー実行ID
    * from_source - メッセージソース



#### 

​

**データセット検索トレース情報**

**ナレッジベース検索を追跡するために使用**

データセット検索| Weaveトレース  
---|---  
user_id| メタデータに配置  
dataset_retrieval| name  
start_time| start_time  
end_time| end_time  
inputs| inputs  
outputs| outputs  
metadata| extra  
dataset_retrieval| tags  
message_id| parent_run_id  
  
**データセット検索トレース情報**

  * message_id - メッセージID
  * inputs - 入力内容
  * documents - ドキュメントデータ
  * start_time - 開始時間
  * end_time - 終了時間
  * message_data - メッセージデータ
  * メタデータ
    * message_id - メッセージID
    * ls_provider - モデルプロバイダー
    * ls_model_name - モデルID
    * status - メッセージステータス
    * from_end_user_id - 送信ユーザーのID
    * from_account_id - 送信アカウントのID
    * agent_based - メッセージがエージェントベースかどうか
    * workflow_run_id - ワークフロー実行ID
    * from_source - メッセージソース



#### 

​

**ツールトレース情報**

**ツール呼び出しを追跡するために使用**

ツール| Weaveトレース  
---|---  
user_id| メタデータに配置  
tool_name| name  
start_time| start_time  
end_time| end_time  
inputs| inputs  
outputs| outputs  
metadata| extra  
[“tool”, tool_name]| tags  
message_id| parent_run_id  
  
#### 

​

**ツールトレース情報**

  * message_id - メッセージID
  * tool_name - ツール名
  * start_time - 開始時間
  * end_time - 終了時間
  * tool_inputs - ツール入力
  * tool_outputs - ツール出力
  * message_data - メッセージデータ
  * error - エラー情報（もしあれば）
  * inputs - メッセージの入力
  * outputs - メッセージの出力
  * tool_config - ツール設定
  * time_cost - 時間コスト
  * tool_parameters - ツールパラメータ
  * file_url - 関連ファイルのURL
  * メタデータ
    * message_id - メッセージID
    * tool_name - ツール名
    * tool_inputs - ツール入力
    * tool_outputs - ツール出力
    * tool_config - ツール設定
    * time_cost - 時間コスト
    * error - エラー情報（もしあれば）
    * tool_parameters - ツールパラメータ
    * message_file_id - メッセージファイルID
    * created_by_role - 作成者のロール
    * created_user_id - 作成者のユーザーID



**名前生成トレース情報**

**会話タイトル生成を追跡するために使用**

名前生成| Weaveトレース  
---|---  
user_id| メタデータに配置  
generate_name| name  
start_time| start_time  
end_time| end_time  
inputs| inputs  
outputs| outputs  
metadata| extra  
generate_name| tags  
  
**名前生成トレース情報**

  * conversation_id - 会話ID
  * inputs - 入力データ
  * outputs - 生成された会話名
  * start_time - 開始時間
  * end_time - 終了時間
  * tenant_id - テナントID
  * メタデータ
    * conversation_id - 会話ID
    * tenant_id - テナントID



* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/guides/monitoring/integrate-external-ops-tools/integrate-weave.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20rate-we&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/guides/monitoring/integrate-external-ops-tools%2Fintegrate-weave.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[Opikの統合](/ja-jp/guides/monitoring/integrate-external-ops-tools/integrate-opik)[API 拡張](/ja-jp/guides/extension/api-based-extension/README)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * W&B Weaveとは
  * Weaveの設定方法
  * 1\. W&B Weaveに登録/ログイン
  * 2\. W&B WeaveをDifyと統合する
  * Weaveでモニタリングデータを表示する
  * モニタリングデータリスト
  * ワークフロー/チャットフロートレース情報
  * メッセージトレース情報
  * モデレーショントレース情報
  * 提案質問トレース情報
  * データセット検索トレース情報
  * ツールトレース情報
  * ツールトレース情報



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/guides/workflow/additional-feature

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

ワークフロー

追加機能

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

    * [キーコンセプト](/ja-jp/guides/workflow/concepts)
    * [変数](/ja-jp/guides/workflow/variables)
    * ノードの説明

    * [ショートカットキー](/ja-jp/guides/workflow/shortcut-key)
    * [オーケストレートノード](/ja-jp/guides/workflow/orchestrate-node)
    * [ファイルアップロード](/ja-jp/guides/workflow/file-upload)
    * エラー処理

    * [追加機能](/ja-jp/guides/workflow/additional-feature)
    * プレビューとデバッグ

    * [アプリケーション公開](/ja-jp/guides/workflow/publish)
    * [JSON形式での出力](/ja-jp/guides/workflow/structured-outputs)
    * [変更のお知らせ：画像アップロードがファイルアップロードに統合されました](/ja-jp/guides/workflow/bulletin)
  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




ワークフロー

# 追加機能

Copy page

ワークフローとチャットフローアプリは、ユーザーのインタラクション体験を向上させるためにさまざまな機能を追加しています。たとえば、ファイルのアップロード機能を追加したり、LLMアプリに自己紹介セクションを組み込んだり、ウェルカムメッセージを活用することで、ユーザはより充実したインタラクションを楽しむことができます。

アプリの右上隅にある **「機能」** ボタンをクリックすると、追加機能を利用できます。

## [追加機能の設定方法追加機能の設定方法の動画ガイド](https://www.motionshot.app/walkthrough/6773d34ad27e58127b913945/embed?fullscreen=1&hideAsSteps=1&hideCopy=1&hideDownload=1&hideSteps=1)

### 

​

ワークフロー

この方法でのWorkflowアプリへのファイルアップロード機能の追加はもはや推奨されていません。代わりに、アプリ開発者にはカスタムファイル変数を活用して、Workflowアプリにファイルアップロード機能を追加することが推奨されています。

ワークフロータイプのアプリは、**「画像のアップロード」**機能のみをサポートしています。この機能を有効にすると、ワークフローアプリの使用ページに画像のアップロードエントリが表示されます。

## [画像アップロード機能の追加方法画像アップロード機能の追加方法の動画ガイド](https://www.motionshot.app/walkthrough/6773d3d86a0c3ed534f24da9/embed?fullscreen=1&hideAsSteps=1&hideCopy=1&hideDownload=1&hideSteps=1)

**使用方法：**

**ユーザー向け：** 画像のアップロード機能が有効化されたアプリの使用ページには、アップロードボタンが表示されます。このボタンをクリックするか、ファイルのリンクを貼り付けることで画像をアップロードし、LLMから画像に関する回答を受け取ることができます。

**開発者向け：** 画像のアップロード機能を有効化すると、使用者がアップロードした画像ファイルは`sys.files`変数に保存されます。次に、LLMノードを追加し、視覚能力を持つ大規模モデルを選択してVISION機能を有効化し、`sys.files`変数を選択することで、LLMがその画像ファイルを読み取れるようになります。

最後に、ENDノードでLLMノードの出力変数を選択し、設定を完了させます。

### 

​

チャットフロー

チャットフロータイプのアプリは、以下の機能をサポートしています：

  * **冒頭の対話**

AIが自動的に一文を送信し、歓迎メッセージやAIの自己紹介などで使用者との距離を縮めます。

  * **次の質問の提案**

対話が完了した後に、自動的に次の質問の提案を追加することで、対話のトピックの深さと頻度を向上させます。

  * **テキストから音声への変換**

テキストボックスに音声再生ボタンを追加し、TTSサービス（[モデルプロバイダ](/ja-jp/getting-started/readme/model-providers)が提供）を利用してテキストを読み上げます。

  * **ファイルのアップロード**

ドキュメント、画像、音声、ビデオ、その他のファイル形式をサポートしています。この機能を有効にすると、アプリの使用者は対話の過程でいつでもファイルをアップロードおよび更新できます。最大10個のファイルを同時にアップロードでき、各ファイルのサイズ上限は15MBです。

  * **引用と帰属**

[「知識検索」](/ja-jp/guides/workflow/nodes/knowledge-retrieval)ノードと組み合わせることで、LLMが応答した際の参照元ドキュメントと帰属部分を表示します。

  * **コンテンツの審査**

審査APIを利用して適切な単語リストを維持し、LLMが安全なコンテンツを応答および出力できるようにします。詳細については[適切なコンテンツの審査](/ja-jp/guides/application-orchestrate/app-toolkits/moderation-tool)を参照してください。




**使用方法：**

**ファイルのアップロード** 機能以外のチャットフローアプリ内の機能は比較的簡単に使用できます。有効化すると、直感的にアプリのインタラクションページで利用可能です。

このセクションでは、主に**ファイルのアップロード** 機能の具体的な使用方法に焦点を当てます：

**ユーザー向け：** ファイルのアップロード機能が有効化されたチャットフローアプリでは、対話ボックスの右側に「クリップ」アイコンが表示されます。このアイコンをクリックすることでファイルをアップロードし、LLMと対話できます。

**アプリ開発者向け：**

ファイルアップロード機能を有効にすると、ユーザーがアップロードしたファイルは `sys.files` 変数に保存されます。この変数は、ユーザーが同じ会話ラウンドで新しいメッセージを送信した後に更新されます。

アップロードされるファイルの種類に応じて、アプリケーションの設定方法が異なります。

  * **ドキュメントファイル**



LLMは直接ドキュメントファイルを読み取る機能を持っていないため、[ドキュメント抽出機](/ja-jp/guides/workflow/nodes/doc-extractor) ノードを使用して `sys.files` 変数内のファイルを前処理する必要があります。設定手順は以下の通りです：

  1. Features 機能を有効にし、ファイルタイプで “ドキュメント” のみを選択します。
  2. [ドキュメント抽出機](/ja-jp/guides/workflow/nodes/doc-extractor) ノードの入力変数で `sys.files` 変数を選択します。
  3. LLM ノードを追加し、システムプロンプトでドキュメント抽出機ノードの出力変数を選択します。
  4. 最後に “回答” ノードを追加し、LLM ノードの出力変数を記入します。



この方法で構築された チャットフロー アプリは、アップロードされたファイルの内容を記憶しません。アプリの使用者は毎回チャットボックスでドキュメントファイルをアップロードする必要があります。アプリがアップロードされたファイルを記憶する場合は、[「ファイルアップロード：開始ノードに変数を追加」](/ja-jp/guides/workflow/file-upload)を参照してください。

  * **画像ファイル**



一部のLLMは画像から情報を直接取得できるため、画像を処理するための追加ノードは不要です。

設定手順は以下の通りです：

  1. Features 機能を有効にし、ファイルタイプで “画像” のみを選択します。
  2. LLM ノードを追加し、VISION 機能を有効にして `sys.files` 変数を選択します。
  3. 最後に “回答” ノードを追加し、LLM ノードの出力変数を記入します。


  * **複合ファイルタイプ**



ドキュメントファイルと画像ファイルを同時に処理したい場合は、[リスト操作](/ja-jp/guides/workflow/nodes/list-operator) ノードを使用して `sys.files` 変数内のファイルを前処理し、より詳細な変数を抽出して対応する処理ノードに送信する必要があります。設定手順は以下の通りです：

  1. Features 機能を有効にし、ファイルタイプで “画像” および “ドキュメントファイル” を選択します。
  2. 二つのリスト操作ノードを追加し、“フィルタリング” 条件で画像とドキュメント変数を抽出します。
  3. ドキュメントファイル変数を抽出し、“ドキュメント抽出機” ノードに渡し、画像ファイル変数を抽出し、LLM ノードに渡します。
  4. 最後に “回答” ノードを追加し、LLM ノードの出力変数を記入します。



アプリ使用者が文書ファイルと画像を同時にアップロードした場合、文書ファイルは自動的に文書抽出機ノードに送られ、画像ファイルはLLMノードに送られて、ファイルを共同で処理することができます。

  * **音声・動画ファイル**



LLMは音声・動画ファイルを直接読み取る機能をサポートしておらず、Difyプラットフォームにも関連するファイル処理ツールは組み込まれていません。アプリ開発者は[外部データツール](/ja-jp/guides/extension/code-based-extension/external-data-tool)を参照して、ファイル情報を自分で処理することができます。

* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/guides/workflow/additional-feature.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20ional-feat&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/guides/workflow%2Fadditional-feature.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[エラータイプの概要](/ja-jp/guides/workflow/error-handling/error-type)[ステップ実行](/ja-jp/guides/workflow/debug-and-preview/step-run)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * ワークフロー
  * チャットフロー



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/guides/workflow/bulletin

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

ワークフロー

変更のお知らせ：画像アップロードがファイルアップロードに統合されました

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

    * [キーコンセプト](/ja-jp/guides/workflow/concepts)
    * [変数](/ja-jp/guides/workflow/variables)
    * ノードの説明

    * [ショートカットキー](/ja-jp/guides/workflow/shortcut-key)
    * [オーケストレートノード](/ja-jp/guides/workflow/orchestrate-node)
    * [ファイルアップロード](/ja-jp/guides/workflow/file-upload)
    * エラー処理

    * [追加機能](/ja-jp/guides/workflow/additional-feature)
    * プレビューとデバッグ

    * [アプリケーション公開](/ja-jp/guides/workflow/publish)
    * [JSON形式での出力](/ja-jp/guides/workflow/structured-outputs)
    * [変更のお知らせ：画像アップロードがファイルアップロードに統合されました](/ja-jp/guides/workflow/bulletin)
  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




ワークフロー

# 変更のお知らせ：画像アップロードがファイルアップロードに統合されました

Copy page

作者：Evanchen , Allen.

今後、画像ファイルのアップロード機能がより全面的な「ファイルアップロード」機能に統合されます。重複な機能を避けるため、チャットフローとワークフローの「機能」をアップグレードし、調整しました：

  * チャットフローの「機能」から画像アップロードオプションを削除し、新たに「ファイルアップロード」機能を追加します。この機能は、画像ファイルタイプを選択できます。また、アプリのダイアログボックス内の画像アップロードアイコンもファイルアップロードアイコンに変更されました。


  * **ワークフローの機能および`sys.files`[変数](./variables)にあった画像アップロードオプションは、将来的に廃止されます。** 両方とも`LEGACY`としてマークされ、開発者にはワークフローにファイルアップロード機能を追加するためにカスタムファイル変数の使用が推奨されています。



### 

​

「画像アップロード」機能を統合する理由

以前、Difyは画像ファイルのアップロードのみをサポートしていましたが、最新バージョンでは文書、画像、音声、映像、カスタムファイル形式をサポートする包括的なファイルアップロード機能が導入されました。画像アップロードは、より包括的な「ファイルアップロード」機能に統合されました。 ファイルアップロード機能を追加する際、開発者は「画像」ファイルタイプを選択するだけで画像のアップロードを有効にできます。

冗長な機能による混乱を避けるため、チャットフローにおける単独の画像アップロード機能を包括的なファイルアップロード機能に置き換え、ワークフローにおいて画像アップロードを推奨しないことに決定しました。

### 

​

より全面的な機能：ファイルアップロード

アプリの情報処理能力を向上させるために、このアップデートで「ファイルアップロード」機能が導入されました。チャットテキストとは異なり、文書ファイルは学術レポートや法的契約など多くの情報を運搬することができます。

  * ファイルアップロード機能により、ファイルはワークフロー内でファイル変数としてアップロード、解析、参照、ダウンロードされます。
  * 開発者は、画像、音声、映像を含む複雑なタスクの理解と処理が可能なアプリを簡単に構築できます。



単独の「画像アップロード」機能の使用を推奨せず、アプリ体験を向上させるために包括的な「ファイルアップロード」機能への移行をお勧めします。

### 

​

あなたがするべきことは？

#### 

​

Dify Cloudユーザーの場合：

  * **チャットフロー**



すでに「画像アップロード」機能が有効になっているチャットフローを作成した場合、LLMノードでビジョン機能を有効にすると、システムは機能を自動的に切り替え、アプリの画像アップロード機能に影響を与えません。アプリを更新して再公開する必要がある場合は、LLMノードのビジョン変数選択ボックスでファイル変数を選択し、チェックリストからアイテムをクリアしてアプリを再公開してください。

チャットフローに「画像アップロード」機能を追加したい場合は、機能で「ファイルアップロード」を有効にし、「画像」ファイルタイプのみを選択してください。その後、LLMノードでビジョン機能を有効にし、sys.files変数を指定してください。アップロードエントリは「ペーパークリップ」アイコンとして表示されます。詳細な手順については、追加機能を参照してください。

  * **ワークフロー**



すでに「画像アップロード」機能が有効になっているワークフローを作成し、LLMノードでビジョン機能を有効にした場合、この変更は直ちには影響しませんが、公式の廃止前に手動で移行を完了する必要があります。

ワークフローに「画像アップロード」機能を有効にしたい場合は、[開始](./node/start)ノードにファイル変数を追加してください。その後、`sys.files`変数を使用せずに後続ノードでこのファイル変数を参照してください。

#### 

​

Dify Community Editionまたは自己ホストのエンタープライズユーザーの場合：

バージョンv0.10.0にアップグレードすると、「ファイルアップロード」機能が表示されます。

  * チャットフロー：



「画像アップロード」機能が有効になっているチャットフローは、変更を加えることなくファイルアップロード機能に自動的に切り替わります。

チャットフローに「画像アップロード」機能を追加したい場合は、詳細な手順については追加機能セクションを参照してください。

  * ワークフロー：



既存のワークフローには影響がありませんが、公式の廃止前に手動で移行を完了する必要があります。

### 

​

よくある質問：

#### 

​

1\. このアップデートは既存のアプリに影響しますか？

  * 既存のチャットフローは自動的に移行され、画像のアップロード機能はファイルのアップロード機能にスムーズに切り替わります。`sys.files`変数は引き続きデフォルトのVision入力として使用されます。アプリインターフェース内の画像アップロードエントリは、ファイルアップロードエントリに置き換えられます。
  * 現時点では既存のワークフローには影響はありません。`sys.files`変数および画像アップロード機能は「LEGACY」としてマークされていますが、引き続き使用可能です。ただし、これらの「LEGACY」機能は将来的に廃止される予定で、その際には手動でのアップデートが必要になります。



#### 

​

2\. アプリをすぐにアップデートする必要がありますか？

  * チャットフローはシステムが自動的に移行するため、手動でのアップデートは必要ありません。
  * ワークフローについては、すぐにアップデートする必要はありませんが、将来の移行に備えて新しいファイルアップロード機能に慣れておくことをお勧めします。



#### 

​

3\. 新しいファイルアップロード機能と互換性のあるアプリを確認する方法は？

チャットフローの場合：

• 機能構成でファイルのアップロードオプションが有効になっているか確認してください。

• Vision機能を備えたLLMを使用していることを確認し、Visionトグルをオンにしてください。

• Visionボックスで、`sys.files`が入力アイテムとして正しく選択されていることを確認してください。

ワークフローの場合：

• 「開始」ノードでファイルタイプの変数を作成してください。

• 後続のノードでは、このファイル変数を参照し、LEGACYの`sys.files`変数は使用しないでください。

#### 

​

4\. 以前公開された Chatflow アプリケーションで画像アップロードアイコンが消えた場合、どうすればよいですか？

アプリケーションを再公開することをお勧めします。チャットボックスにファイルアップロードアイコンが表示されます。

#### 

​

皆様のフィードバックを大切にしています

Difyコミュニティの重要なメンバーとして、皆様の経験とフィードバックは私たちにとって非常に重要です。ぜひ以下の方法でご意見をお寄せください：

• 新しいファイルアップロード機能をお試しいただき、その利便性と柔軟性を体験してください。

• 次のチャンネルを通じてお考えやご提案を共有してください：

• [GitHub discussions](https://github.com/langgenius/dify)

• [Discordチャンネル](https://discord.gg/X8r5WgWzJV)

皆様のフィードバックは製品の継続的な改善と、コミュニティ全体により良い体験を提供するために役立ちます。

* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/guides/workflow/bulletin.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/guides/workflow%2Fbulletin.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[JSON形式での出力](/ja-jp/guides/workflow/structured-outputs)[ナレッジベース](/ja-jp/guides/knowledge-base/readme)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * 「画像アップロード」機能を統合する理由
  * より全面的な機能：ファイルアップロード
  * あなたがするべきことは？
  * Dify Cloudユーザーの場合：
  * Dify Community Editionまたは自己ホストのエンタープライズユーザーの場合：
  * よくある質問：
  * 1\. このアップデートは既存のアプリに影響しますか？
  * 2\. アプリをすぐにアップデートする必要がありますか？
  * 3\. 新しいファイルアップロード機能と互換性のあるアプリを確認する方法は？
  * 4\. 以前公開された Chatflow アプリケーションで画像アップロードアイコンが消えた場合、どうすればよいですか？
  * 皆様のフィードバックを大切にしています



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/guides/workflow/concepts

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

ワークフロー

キーコンセプト

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

    * [キーコンセプト](/ja-jp/guides/workflow/concepts)
    * [変数](/ja-jp/guides/workflow/variables)
    * ノードの説明

    * [ショートカットキー](/ja-jp/guides/workflow/shortcut-key)
    * [オーケストレートノード](/ja-jp/guides/workflow/orchestrate-node)
    * [ファイルアップロード](/ja-jp/guides/workflow/file-upload)
    * エラー処理

    * [追加機能](/ja-jp/guides/workflow/additional-feature)
    * プレビューとデバッグ

    * [アプリケーション公開](/ja-jp/guides/workflow/publish)
    * [JSON形式での出力](/ja-jp/guides/workflow/structured-outputs)
    * [変更のお知らせ：画像アップロードがファイルアップロードに統合されました](/ja-jp/guides/workflow/bulletin)
  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




ワークフロー

# キーコンセプト

Copy page

### 

​

ノード

**ノードはワークフローの重要な構成要素** であり、異なる機能を持つノードを接続することで、ワークフローの一連の操作を実行します。

ワークフローの主要なノードについては[ノード説明](./nodes/start)を参照してください。

* * *

### 

​

変数

変数はワークフロー内のノードの入力と出力をリンクするために使用され、プロセス全体で複雑な処理ロジックを可能にします。詳細については、[変数](./variables)を参照してください。

* * *

### 

​

チャットフローとワークフロー

**アプリケーションシナリオ**

  * **チャットフロー** ：顧客サービスや意味検索、その他の応答を構築する際に、対話型シナリオに適した複数段階のロジックが必要なアプリケーションです。
  * **ワークフロー** ：自動化やバッチ処理のシナリオに適しており、高品質な翻訳、データ分析、コンテンツ生成、電子メールの自動化などに利用されます。



**使用エントリーポイント**

**利用可能なノードの違い**

  1. **終了ノード** はワークフローの終了を示すもので、プロセスが完了した後にのみ選択可能です。
  2. **回答ノード** はチャットフローに属し、テキストコンテンツを柔軟に出力でき、プロセスの途中でも出力が可能です。
  3. チャットフローにはチャットメモリ（Memory）が組み込まれており、多段階の対話履歴を保存・転送するために利用されます。この機能は、LLMや問題分類などのノード内で有効です。一方、ワークフローにはMemoryに関連する構成がなく、利用することはできません。
  4. チャットフローの開始ノードには、`sys.query`、`sys.files`、`sys.conversation_id`、`sys.user_id`といった組み込み変数が含まれています。ワークフローの開始ノードには、`sys.files`と`sys.user_id`の組み込み変数が含まれています。



* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/guides/workflow/concepts.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/guides/workflow%2Fconcepts.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[コンテンツモデレーション](/ja-jp/guides/application-orchestrate/app-toolkits/moderation-tool)[変数](/ja-jp/guides/workflow/variables)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * ノード
  * 変数
  * チャットフローとワークフロー



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/guides/workflow/debug-and-preview/checklist

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

プレビューとデバッグ

チェックリスト

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

    * [キーコンセプト](/ja-jp/guides/workflow/concepts)
    * [変数](/ja-jp/guides/workflow/variables)
    * ノードの説明

    * [ショートカットキー](/ja-jp/guides/workflow/shortcut-key)
    * [オーケストレートノード](/ja-jp/guides/workflow/orchestrate-node)
    * [ファイルアップロード](/ja-jp/guides/workflow/file-upload)
    * エラー処理

    * [追加機能](/ja-jp/guides/workflow/additional-feature)
    * プレビューとデバッグ

      * [ステップ実行](/ja-jp/guides/workflow/debug-and-preview/step-run)
      * [対話/実行ログ](/ja-jp/guides/workflow/debug-and-preview/log)
      * [チェックリスト](/ja-jp/guides/workflow/debug-and-preview/checklist)
      * [実行履歴](/ja-jp/guides/workflow/debug-and-preview/history)
    * [アプリケーション公開](/ja-jp/guides/workflow/publish)
    * [JSON形式での出力](/ja-jp/guides/workflow/structured-outputs)
    * [変更のお知らせ：画像アップロードがファイルアップロードに統合されました](/ja-jp/guides/workflow/bulletin)
  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




プレビューとデバッグ

# チェックリスト

Copy page

調整動作に入る前に、未完了の設定や接続されていないノードがないかチェックリストで確認できます。

* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/guides/workflow/debug-and-preview/checklist.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20l&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/guides/workflow/debug-and-preview%2Fchecklist.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[対話/実行ログ](/ja-jp/guides/workflow/debug-and-preview/log)[実行履歴](/ja-jp/guides/workflow/debug-and-preview/history)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/guides/workflow/debug-and-preview/history

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

プレビューとデバッグ

実行履歴

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

    * [キーコンセプト](/ja-jp/guides/workflow/concepts)
    * [変数](/ja-jp/guides/workflow/variables)
    * ノードの説明

    * [ショートカットキー](/ja-jp/guides/workflow/shortcut-key)
    * [オーケストレートノード](/ja-jp/guides/workflow/orchestrate-node)
    * [ファイルアップロード](/ja-jp/guides/workflow/file-upload)
    * エラー処理

    * [追加機能](/ja-jp/guides/workflow/additional-feature)
    * プレビューとデバッグ

      * [ステップ実行](/ja-jp/guides/workflow/debug-and-preview/step-run)
      * [対話/実行ログ](/ja-jp/guides/workflow/debug-and-preview/log)
      * [チェックリスト](/ja-jp/guides/workflow/debug-and-preview/checklist)
      * [実行履歴](/ja-jp/guides/workflow/debug-and-preview/history)
    * [アプリケーション公開](/ja-jp/guides/workflow/publish)
    * [JSON形式での出力](/ja-jp/guides/workflow/structured-outputs)
    * [変更のお知らせ：画像アップロードがファイルアップロードに統合されました](/ja-jp/guides/workflow/bulletin)
  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




プレビューとデバッグ

# 実行履歴

Copy page

「実行履歴」では、現在のワークフローのデバッグ履歴の実行結果およびログ情報を確認できます。

* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/guides/workflow/debug-and-preview/history.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/guides/workflow/debug-and-preview%2Fhistory.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[チェックリスト](/ja-jp/guides/workflow/debug-and-preview/checklist)[アプリケーション公開](/ja-jp/guides/workflow/publish)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/guides/workflow/debug-and-preview/log

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

プレビューとデバッグ

対話/実行ログ

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

    * [キーコンセプト](/ja-jp/guides/workflow/concepts)
    * [変数](/ja-jp/guides/workflow/variables)
    * ノードの説明

    * [ショートカットキー](/ja-jp/guides/workflow/shortcut-key)
    * [オーケストレートノード](/ja-jp/guides/workflow/orchestrate-node)
    * [ファイルアップロード](/ja-jp/guides/workflow/file-upload)
    * エラー処理

    * [追加機能](/ja-jp/guides/workflow/additional-feature)
    * プレビューとデバッグ

      * [ステップ実行](/ja-jp/guides/workflow/debug-and-preview/step-run)
      * [対話/実行ログ](/ja-jp/guides/workflow/debug-and-preview/log)
      * [チェックリスト](/ja-jp/guides/workflow/debug-and-preview/checklist)
      * [実行履歴](/ja-jp/guides/workflow/debug-and-preview/history)
    * [アプリケーション公開](/ja-jp/guides/workflow/publish)
    * [JSON形式での出力](/ja-jp/guides/workflow/structured-outputs)
    * [変更のお知らせ：画像アップロードがファイルアップロードに統合されました](/ja-jp/guides/workflow/bulletin)
  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




プレビューとデバッグ

# 対話/実行ログ

Copy page

「ログを表示—詳細」をクリックすると、詳細情報、入力/出力、メタデータ情報などの実行概要を見ることができます。

「ログを表示-追跡」をクリックすると、ワークフローの各ノードの入力/出力、トークン消費、実行時間などの完全な実行過程を見ることができます。

* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/guides/workflow/debug-and-preview/log.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/guides/workflow/debug-and-preview%2Flog.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[ステップ実行](/ja-jp/guides/workflow/debug-and-preview/step-run)[チェックリスト](/ja-jp/guides/workflow/debug-and-preview/checklist)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/guides/workflow/debug-and-preview/step-run

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

プレビューとデバッグ

ステップ実行

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

    * [キーコンセプト](/ja-jp/guides/workflow/concepts)
    * [変数](/ja-jp/guides/workflow/variables)
    * ノードの説明

    * [ショートカットキー](/ja-jp/guides/workflow/shortcut-key)
    * [オーケストレートノード](/ja-jp/guides/workflow/orchestrate-node)
    * [ファイルアップロード](/ja-jp/guides/workflow/file-upload)
    * エラー処理

    * [追加機能](/ja-jp/guides/workflow/additional-feature)
    * プレビューとデバッグ

      * [ステップ実行](/ja-jp/guides/workflow/debug-and-preview/step-run)
      * [対話/実行ログ](/ja-jp/guides/workflow/debug-and-preview/log)
      * [チェックリスト](/ja-jp/guides/workflow/debug-and-preview/checklist)
      * [実行履歴](/ja-jp/guides/workflow/debug-and-preview/history)
    * [アプリケーション公開](/ja-jp/guides/workflow/publish)
    * [JSON形式での出力](/ja-jp/guides/workflow/structured-outputs)
    * [変更のお知らせ：画像アップロードがファイルアップロードに統合されました](/ja-jp/guides/workflow/bulletin)
  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




プレビューとデバッグ

# ステップ実行

Copy page

ワークフローはノードのステップの実行をサポートしており、ステップを実行中に現在のノードの実行が期待通りかどうかを繰り返しテストすることができます。

ステップテスト実行後、実行ステータス、入力/出力、メタデータ情報を確認することができます。

* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/guides/workflow/debug-and-preview/step-run.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/guides/workflow/debug-and-preview%2Fstep-run.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[追加機能](/ja-jp/guides/workflow/additional-feature)[対話/実行ログ](/ja-jp/guides/workflow/debug-and-preview/log)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/guides/workflow/error-handling/README

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

エラー処理

エラー処理

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

    * [キーコンセプト](/ja-jp/guides/workflow/concepts)
    * [変数](/ja-jp/guides/workflow/variables)
    * ノードの説明

    * [ショートカットキー](/ja-jp/guides/workflow/shortcut-key)
    * [オーケストレートノード](/ja-jp/guides/workflow/orchestrate-node)
    * [ファイルアップロード](/ja-jp/guides/workflow/file-upload)
    * エラー処理

      * [エラー処理](/ja-jp/guides/workflow/error-handling/README)
      * [事前定義されたエラー処理ロジック](/ja-jp/guides/workflow/error-handling/predefined-nodes-failure-logic)
      * [エラータイプの概要](/ja-jp/guides/workflow/error-handling/error-type)
    * [追加機能](/ja-jp/guides/workflow/additional-feature)
    * プレビューとデバッグ

    * [アプリケーション公開](/ja-jp/guides/workflow/publish)
    * [JSON形式での出力](/ja-jp/guides/workflow/structured-outputs)
    * [変更のお知らせ：画像アップロードがファイルアップロードに統合されました](/ja-jp/guides/workflow/bulletin)
  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




エラー処理

# エラー処理

Copy page

著者：アレン、エヴァン

ワークフローアプリは通常、複数の連携する部分（ノード）から成り立っています。どこか一つの部分で発生したエラー（APIリクエストの失敗やLLM出力の問題など）が全体の動作を止めてしまうことがあり、その場合、開発者は故障箇所を見つけて修正するのに大きな労力を費やす必要があります。これは、特に複雑なワークフローの場合には一層の課題となります。

エラー処理メカニズムによって、部分的な問題を様々な方法でうまく対処できるようになります。これにより、一部で問題が発生しても、全体の処理を止めることなくエラー情報を記録したり、別の方法でタスクを完了させることが可能です。アプリケーションの重要な部分にこのメカニズムを取り入れることで、全体の柔軟性と強靭さが大きく向上します。

開発者は、複雑なエラー対応コードを各ノードに書き込む必要がなくなります。また、エラー処理用の追加部分を設けることもなくなります。このメカニズムは、ワークフローの設計をシンプルにし、様々な戦略を用いて実行ロジックを整理します。

## 

​

実践シナリオ

  1. **ネットワークエラーの対応** 例えば、あるワークフローが天気情報、ニュース要約、ソーシャルメディア分析の3つのAPIサービスからデータを取得し、それらを統合する必要があるとします。リクエスト制限により一部のサービスが応答しない場合があります。エラー処理を利用して、メインの処理は他のデータソースの処理を続けつつ、失敗したAPI呼び出しの詳細を記録します。これにより開発者は後からこれらの情報を分析し、サービス呼び出しの戦略を改善することができます。
  2. **ワークフローの代替ルート** たとえば、あるLLMノードが詳細なドキュメントの要約を行う際に、入力が長すぎてトークン制限を超えてしまい、エラーが発生することがあります。エラー処理メカニズムを設定することで、このような状況に遭遇した際には、内容を小分けにして処理を続ける代替ルートを自動的に選択でき、処理の中断を避けることができます。
  3. **エラー情報の明確化** 実行中にあいまいなエラーメッセージ（「呼び出し失敗」など）が返されると、問題の特定が難しくなることがあります。エラー処理メカニズムにより、開発者はエラーメッセージを事前に定義することができ、デバッグ時により明確で正確な情報を提供することが可能になります。



## 

​

エラー処理メカニズムの活用

以下の4つのノードタイプにエラー処理メカニズムを組み込むことで、より詳細なドキュメントを参照し、アプリを強化することができます：

  * [LLM](/ja-jp/guides/workflow/nodes/llm)
  * [HTTP](/ja-jp/guides/workflow/nodes/http-request)
  * [コード](/ja-jp/guides/workflow/nodes/code)
  * [ツール](/ja-jp/guides/workflow/nodes/tools)



**失敗後の再試行**

特定の例外状況では、ノードの再試行操作によって問題を解決できる場合があります。このような場合には、ノードの「失敗後の再試行」機能を有効化し、再試行の最大回数と間隔を指定することが可能です。

もしノードの再試行を行ってもエラーが続く場合、エラー処理機能が予め定められた対策に従って次の手順を進めます。

**エラー処理**

異常処理の仕組みには、次の3つの選択肢があります：

  * **処理なし** ：エラーを処理せずに、ノードからのエラーメッセージをそのまま返し、フロー全体を停止します。
  * **デフォルト値** ：開発者がエラー情報をあらかじめ定義できるようにします。エラーが発生した場合、定義された値によって元のノードが返すエラー情報を置き換えます。
  * **エラーブランチ** ：エラーが発生した場合、あらかじめ設定されたエラー処理のブランチを実行します。



各処理方法の詳細と設定方法については、[事前定義されたエラー処理ロジック](/ja-jp/guides/workflow/error-handling/predefined-nodes-failure-logic)をご覧ください。

## 

​

スタートアップガイド

**シナリオ：ワークフローアプリにエラー処理メカニズムを追加する**

以下は、ワークフローアプリで異常処理メカニズムを設定し、ノードの異常に備えて代替処理を行う方法の簡単な例です。

**アプリのロジック** ：LLMノードは入力された指示に従って、正しい形式や間違った形式のJSONコードを生成します。その後、Aコードノードがこのコードを実行し結果を出力します。Aコードノードが誤った形式のJSONコンテンツを受け取った場合には、設定された異常処理メカニズムに基づいて、代替パスを実行しメインプロセスを継続します。

**1\. JSONコード生成ノードの設定**

新しいワークフローアプリを作成し、LLMノードとコードノードを追加します。プロンプトを使ってLLMが指示に従い、正しい形式や間違った形式のJSONコンテンツを生成し、それがAコードノードで検証されます。

**LLMノードでのプロンプト例：**
    
    
    You are a teaching assistant. According to the user's requirements, you only output a correct or incorrect sample code in json format.

**コードノードでのJSON検証コード：**
    
    
    def main(json_str: str) -> dict:
        obj = json.loads(json_str)
        return {'result': obj}

**2\. Aコードノードにエラー処理機能を追加する**

Aコードノードは、JSONコンテンツを検証する役割を持ち、受け取ったJSONコンテンツがフォーマットに合わない場合には、エラー処理機能を通じて代替の手順を踏み、エラーを修正するために次のLLMノードに渡します。その後、JSONを再度検証し、メインの処理フローを再開します。Aコードノードの「エラー処理」タブから「エラー分岐」の設定を行い、新たなLLMノードを設定しましょう。

**3\. Aコードノードが出力するエラーの内容を修正**

新設したLLMノードでは、プロンプトに指示を記述し、変数を用いてAコードノードが出力したエラー内容を参照・修正します。次に、Bコードノードを追加し、JSONコンテンツの再検証を行います。

**4\. プロセスの完了**

変数を集約するノードを追加して、正常な処理結果とエラー処理結果をまとめ、終了ノードで出力します。これでフロー全体のプロセスが完了します。

> デモ用のDSLファイルはこちらから[ダウンロード](https://assets-docs.dify.ai/2024/12/087861aa20e06bb4f8a2bef7e7ae0522.yml)できます。

## 

​

ステータス説明

この文書では、ノードとプロセスの状態について説明します。状態を明確にすることで、開発者は現在のワークフローアプリケーションの動作状況を理解しやすくなり、問題解決や迅速な意思決定に役立ちます。エラー処理機能を導入したことにより、ノードとプロセスの状態には以下のような分類があります：

**ノードの状態**

  * **成功** ノードが正常に動作して正確な情報を出力しました。
  * **失敗** エラー処理が行われず、ノードの動作が失敗し、エラー情報が出力されました。
  * **エラー** ノードでエラーが発生しましたが、処理が継続されました。



**ワークフローの状態**

  * **成功** プロセスの全ノードが正常に動作し、終了ノードが適切に情報を出力し、ステータスが成功として設定されました。
  * **失敗** ノードでエラーが発生し、プロセス全体が停止し、ステータスが失敗として設定されました。
  * **部分成功** ノードでエラーが発生しましたが、エラー処理機能によってプロセス全体が最終的に正常に動作しました。ステータスは部分成功として設定されました。



## 

​

よくある質問

**1\. エラー処理機構を導入することで何が変わりますか？**

**エラー処理機構がない場合:**

  * **作業フローが中断する** ：外部のサービス呼び出しに失敗する、ネットワークに問題がある、ツールにエラーが存在するなどの理由で、一つのエラーが発生すると、作業フローが即座に停止します。開発者はエラーを手動で探し出し、修正後に作業フローを再開する必要があります。
  * **対応策の制約** ：開発者は異なるエラータイプや事象に応じて特別な対応策を講じることができません。たとえば、エラーが発生した場合にもフローを継続する、または別の処理へ切り替えるといったことができなくなります。
  * **冗長なノードの手動追加が必要** ：エラーがフロー全体に影響を与えないようにするためには、エラーを捉えて処理するために多くの追加ノードを設計する必要があり、これが作業フローの複雑さや開発コストを増加させます。
  * **限られたログ情報** ：エラーログは通常、内容が簡素であったり、必要な情報が不足していたりします。これでは問題の迅速な診断が難しくなります。



**エラー処理機構を導入した後:**

  * **フローが中断されることがない** ：あるノードでエラーが発生しても、事前に定めたルールに従って作業フローを継続することができ、一点の障害が全体に影響することが少なくなります。
  * **エラー処理を柔軟にカスタマイズ可能** ：開発者はそれぞれのノードごとにエラー対応の戦略を設定できます。例えば、フローを継続したり、ログを残したり、別のルートに切り替えたりすることができます。
  * **作業フローの設計をシンプルに** ：一般的なエラー処理機構により、開発者が冗長なノードを手動で設計する必要が減り、作業フローがよりシンプルで明瞭になります。
  * **詳細なエラーログを提供** ：カスタマイズ可能なエラー情報の整理メカニズムを提供し、開発者が問題を迅速に特定し、フローを最適化するのに役立ちます。



**2\. 代替ルートの実行状況をどうやってデバッグしますか？**

作業フローの実行ログをチェックすることで、条件分岐やルート選択の状況を確認できます。エラー処理のブランチは黄色でハイライトされ、開発者が計画通りに代替ルートが実行されているかどうかを簡単に確認できます。

* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/guides/workflow/error-handling/README.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/guides/workflow/error-handling%2FREADME.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[ファイルアップロード](/ja-jp/guides/workflow/file-upload)[事前定義されたエラー処理ロジック](/ja-jp/guides/workflow/error-handling/predefined-nodes-failure-logic)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * 実践シナリオ
  * エラー処理メカニズムの活用
  * スタートアップガイド
  * ステータス説明
  * よくある質問



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/guides/workflow/error-handling/error-type

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

エラー処理

エラータイプの概要

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

    * [キーコンセプト](/ja-jp/guides/workflow/concepts)
    * [変数](/ja-jp/guides/workflow/variables)
    * ノードの説明

    * [ショートカットキー](/ja-jp/guides/workflow/shortcut-key)
    * [オーケストレートノード](/ja-jp/guides/workflow/orchestrate-node)
    * [ファイルアップロード](/ja-jp/guides/workflow/file-upload)
    * エラー処理

      * [エラー処理](/ja-jp/guides/workflow/error-handling/README)
      * [事前定義されたエラー処理ロジック](/ja-jp/guides/workflow/error-handling/predefined-nodes-failure-logic)
      * [エラータイプの概要](/ja-jp/guides/workflow/error-handling/error-type)
    * [追加機能](/ja-jp/guides/workflow/additional-feature)
    * プレビューとデバッグ

    * [アプリケーション公開](/ja-jp/guides/workflow/publish)
    * [JSON形式での出力](/ja-jp/guides/workflow/structured-outputs)
    * [変更のお知らせ：画像アップロードがファイルアップロードに統合されました](/ja-jp/guides/workflow/bulletin)
  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




エラー処理

# エラータイプの概要

Copy page

本記事では、さまざまなノードで発生可能なトラブルと、それに伴うエラーの種類について解説します。

## 

​

チャットフロー／ワークフロー

  * **システムエラー** システム関連の問題が原因で発生するエラーです。例えば、サービスが正しく起動していない、ネットワーク接続に問題がある場合などが該当します。

  * **操作エラー** 開発者がノードの設定や操作に失敗した際に生じるエラーです。




## 

​

コードノード

[コードノード](/ja-jp/guides/workflow/nodes/code)を使用することで、PythonやJavaScriptのコードを実行し、データ変換を行うことができます。ここでは、よくある4つのエラーを紹介します：

  1. **コードエラー（CodeNodeError）** 開発者のコード内で例外が発生した場合にこのエラーが起きます。変数が不足している、計算ロジックが間違っている、文字列として扱うべき配列を誤って変数として扱っている場合などがあります。エラーメッセージや具体的な行番号で問題を特定できます。

  2. **サンドボックスのネットワーク問題（System Error）** ネットワークのトラフィック異常や接続問題によって生じるエラーです。サンドボックスサービスが停止している、プロキシがネットワークをブロックしている場合などです。この問題は次の手順で解決可能です： a. ネットワークの品質を確認する b. サンドボックスサービスを再起動する c. プロキシ設定を見直す

  3. **ネスト制限エラー（DepthLimitError）** 現在のノードは、最大で5層までのネスト構造をサポートしています。これを超えるとエラーが発生します。

  4. **出力検証エラー（OutputValidationError）** 選択した出力変数の型と実際の出力変数の型が一致しない場合に生じるエラーです。開発者は適切な出力変数の型を選択し直すことで、この問題を回避することができます。




## 

​

LLMノード

[LLMノード](/ja-jp/guides/workflow/nodes/llm)は、チャットフローやワークフローの中核をなすコンポーネントであり、大規模言語モデルを用いて様々なタスクを処理します。

以下は、実行時に遭遇する可能性のある6つの一般的なエラーです：

  1. **変数が見つからない（VariableNotFoundError）** システムプロンプトやコンテキストで指定された変数がLLMによって見つけられない場合にこのエラーが発生します。開発者は、補足となる変数を設定することで問題を解決できます。

  2. **コンテキスト構造の無効 (InvalidContextStructureError)** LLMノードが不正なデータ構造を受け取った場合に報告されます。コンテキストは文字列データ構造のみをサポートします。

  3. **無効な変数タイプ（InvalidVariableTypeError）** システムプロンプトの形式が一般的なテキストやJinja syntaxでない場合にこのエラーが生じます。

  4. **モデルが存在しない（ModelNotExistError）** 各LLMノードにはモデルの指定が必要です。モデルが選択されていない場合には、このエラーが発生します。

  5. **LLMの認証が必要（LLMModeRequiredError）** 選択されたモデルにAPIキーが設定されていない場合にこのエラーが報告されます。ドキュメントの指示に従ってモデルを認証してください。

  6. **プロンプトが見つからない（NoPromptFoundError）** LLMノードのプロンプトが空の場合、エラーが生じます。




## 

​

HTTPノード

[HTTPノード](/ja-jp/guides/workflow/nodes/http-request)は、HTTPリクエストを送信してデータを取得、Webhookを発火、画像を生成、ファイルをダウンロードするなどの操作を可能にし、カスタマイズ可能なリクエストによって外部サービスとのシームレスな統合を実現します。ここでは、このノードで頻繁に発生する5つの一般的なエラーを紹介します：

  1. **認証設定エラー（AuthorizationConfigError）**  
認証情報が設定されていない場合に発生するエラーです。

  2. **ファイル取得エラー（FileFetchError）**  
ファイル変数が取得できない場合に発生するエラーです。

  3. **不正なHTTPリクエストメソッド（InvalidHttpMethodError）**  
リクエストメソッドがGET、HEAD、POST、PUT、PATCH、DELETEのいずれにも該当しない場合にエラーが発生します。

  4. **レスポンスサイズ超過（ResponseSizeError）**  
HTTPレスポンスが10MBの制限を超えると、このエラーが発生します。

  5. **HTTPレスポンスコードエラー（HTTPResponseCodeError）**  
レスポンスコードが200系以外（例：400、404、500など）の場合にエラーが報告されます。例外処理が有効であれば、これらのステータスコードによるエラーが報告されますが、それ以外ではエラーは報告されません。




## 

​

ツールノード

ランタイムでよく遭遇する3つのエラーは以下のとおりです：

  1. **ツール実行エラー（ToolNodeError）**  
ツール自体の実行に問題があった場合に報告されるエラーです。たとえば、目指すAPIのリクエスト制限に達した場合などがこれに該当します。

  2. **ツールパラメータエラー（ToolParameterError）**  
ツールノードの設定パラメータに問題がある場合、つまりツールノードが要求するパラメータと異なる値が入力された場合にこのエラーが発生します。

  3. **ツールファイル処理エラー（ToolFileError）**  
ツールノードの処理に必要なファイルが見つからない場合にこのエラーが発生します。




* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/guides/workflow/error-handling/error-type.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20-t&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/guides/workflow/error-handling%2Ferror-type.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[事前定義されたエラー処理ロジック](/ja-jp/guides/workflow/error-handling/predefined-nodes-failure-logic)[追加機能](/ja-jp/guides/workflow/additional-feature)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * チャットフロー／ワークフロー
  * コードノード
  * LLMノード
  * HTTPノード
  * ツールノード



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/guides/workflow/error-handling/predefined-nodes-failure-logic

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

エラー処理

事前定義されたエラー処理ロジック

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

    * [キーコンセプト](/ja-jp/guides/workflow/concepts)
    * [変数](/ja-jp/guides/workflow/variables)
    * ノードの説明

    * [ショートカットキー](/ja-jp/guides/workflow/shortcut-key)
    * [オーケストレートノード](/ja-jp/guides/workflow/orchestrate-node)
    * [ファイルアップロード](/ja-jp/guides/workflow/file-upload)
    * エラー処理

      * [エラー処理](/ja-jp/guides/workflow/error-handling/README)
      * [事前定義されたエラー処理ロジック](/ja-jp/guides/workflow/error-handling/predefined-nodes-failure-logic)
      * [エラータイプの概要](/ja-jp/guides/workflow/error-handling/error-type)
    * [追加機能](/ja-jp/guides/workflow/additional-feature)
    * プレビューとデバッグ

    * [アプリケーション公開](/ja-jp/guides/workflow/publish)
    * [JSON形式での出力](/ja-jp/guides/workflow/structured-outputs)
    * [変更のお知らせ：画像アップロードがファイルアップロードに統合されました](/ja-jp/guides/workflow/bulletin)
  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




エラー処理

# 事前定義されたエラー処理ロジック

Copy page

以下の4つのノードは、エラー状況に対応するためのロジックを構築する機能を提供しています：

  * [LLM](/ja-jp/guides/workflow/nodes/llm)
  * [HTTP](/ja-jp/guides/workflow/nodes/http-request)
  * [コード](/ja-jp/guides/workflow/nodes/code)
  * [ツール](/ja-jp/guides/workflow/nodes/tools)



エラー処理のためには、次の3つの事前に定義されたロジックオプションがあります：

  * **処理なし** ：エラーを処理せずに、ノードからのエラーメッセージをそのまま返し、フロー全体を停止します。
  * **デフォルト値** ：開発者がエラー情報をあらかじめ定義できるようにします。エラーが発生した場合、定義された値によって元のノードが返すエラー情報を置き換えます。
  * **エラーブランチ** ：エラーが発生した場合、あらかじめ設定されたエラー処理のブランチを実行します。



### 

​

処理ロジック：処理なし

これはノードのエラー処理のデフォルト設定であり、タイムアウトやエラーが発生した場合には直接エラーメッセージをスローし、全体の処理フローを中断します。この場合、ワークフローアプリケーションは実行失敗として記録されます。

### 

​

処理ロジック：デフォルト値

開発者はデフォルト値エディタを使用して、ノードのエラー出力情報をカスタマイズできます。これは、プログラミングにおけるステップバイステップ（逐次的な）デバッグに似ており、アプリケーションのデバッグプロセスをより明確にします。

例えば：

  * `object`や`array`型には、直観的な`JSON`エディタを用意しています。
  * `number`や`string`型には、それぞれの型に合わせたエディタを用意しています。



ノードの実行が失敗した場合、フローは自動的に開発者が設定したデフォルト値を使用し、オリジナルのエラー出力情報の代わりとして処理を続行します。これにより、より明確なエラーメッセージが得られ、開発者はアプリケーションのフローデザインの最適化に注力できます。

> デフォルト値のデータ構造は、ノードの出力変数と一致します。例えば、コードノードの出力変数をarray[number]データタイプに設定した場合、デフォルト値のデータタイプも同様にarray[number]になります。

### 

​

処理ロジック：エラーブランチ

現在のノードの実行でエラーが発生した場合、予め設定されたエラーブランチがトリガーされます。この選択を行うと、新たな接続点が現在のノードに追加され、開発者はキャンバス上で次の処理フローを構築するか、ノード詳細の右下隅で下流ノードを追加することができます。

> エラーブランチはオレンジ色の線で示されます。

一般的な戦略としては、エラーブランチ内でエラーに対応するノードを配置し、修正されたデータを変数集約ノードを介して元のフローにリンクし、結果を集約して出力します。例えば、メールツールノードを接続してエラー情報を送信することができます。

**エラー変数**

ノードのエラー処理を「デフォルト値」または「エラーブランチ」に設定した場合、エラー状況が発生すると、`error_type`および`error_message`といった変数を通じて下流ノードにエラー情報が伝えられます。

変数名| 説明  
---|---  
`error_type`| エラーのタイプ。ノードの種類によって異なるエラータイプがあり、開発者はそれぞれのエラーに対して適切な対処法を選択できます。  
`error_message`| 具体的なエラーメッセージ。これはエラー発生元のノードが出力する詳細な障害情報であり、開発者はこれを利用してエラーを修正したり、メールツールを通じて情報を送信したりできます。  
  
* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/guides/workflow/error-handling/predefined-nodes-failure-logic.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20fined-nodes-failure-lo&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/guides/workflow/error-handling%2Fpredefined-nodes-failure-logic.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[エラー処理](/ja-jp/guides/workflow/error-handling/README)[エラータイプの概要](/ja-jp/guides/workflow/error-handling/error-type)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * 処理ロジック：処理なし
  * 処理ロジック：デフォルト値
  * 処理ロジック：エラーブランチ



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/guides/workflow/file-upload

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

ワークフロー

ファイルアップロード

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

    * [キーコンセプト](/ja-jp/guides/workflow/concepts)
    * [変数](/ja-jp/guides/workflow/variables)
    * ノードの説明

    * [ショートカットキー](/ja-jp/guides/workflow/shortcut-key)
    * [オーケストレートノード](/ja-jp/guides/workflow/orchestrate-node)
    * [ファイルアップロード](/ja-jp/guides/workflow/file-upload)
    * エラー処理

    * [追加機能](/ja-jp/guides/workflow/additional-feature)
    * プレビューとデバッグ

    * [アプリケーション公開](/ja-jp/guides/workflow/publish)
    * [JSON形式での出力](/ja-jp/guides/workflow/structured-outputs)
    * [変更のお知らせ：画像アップロードがファイルアップロードに統合されました](/ja-jp/guides/workflow/bulletin)
  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




ワークフロー

# ファイルアップロード

Copy page

多くの専門的なコンテンツは文書ファイルに保存されており、学術報告書や法的契約などが含まれます。LLMは入力源としてテキストや画像に限定されており、ファイル内の豊富なコンテキスト情報を取得することが難しいため、多くのユーザーは大量の情報を手動でコピー＆ペーストしてLLMと対話しなければならず、適用範囲は制限されます。

ファイルアップロード機能を利用することで、ファイルをFile変数の形式でワークフローアプリにアップロード、解析、参照、ダウンロードすることができます。**これにより、開発者は画像、音声、映像を理解し処理する複雑なタスクを簡単に構築できるようになります。**

### 

​

適用シーン

  1. **文書分析** : 学術研究報告書をアップロードすると、LLMは迅速にポイントを要約し、ファイルの内容に基づいて関連する質問に回答します。
  2. **コードレビュー** : 開発者がコードファイルをアップロードし、最適化の提案やバグの検出を受けることができます。
  3. **学習サポート** : 学生が課題や学習資料をアップロードし、個別の説明やガイダンスを得ることができます。
  4. **法的支援** : 完全な契約書のテキストをアップロードし、LLMが条項をレビューし、潜在的なリスクを指摘します。



### 

​

ファイルのアップロードとナレッジベースの違い

ファイルのアップロードとナレッジベースは、言語モデル（LLM）に追加のコンテキスト情報を提供する手段ですが、それぞれの使用シーンや機能には明確な違いがあります。

  1. **情報のソース** ：


  * ファイルのアップロード：エンドユーザーは対話中に動的にファイルをアップロードし、即座に個別化されたコンテキストを提供します。
  * ナレッジベース：アプリケーション開発者が事前に設定・管理した、比較的固定された情報セットを含みます。


  2. **柔軟性** ：


  * ファイルのアップロード：柔軟性が高く、ユーザーは特定のニーズに応じて様々なタイプのファイルをアップロードできます。
  * ナレッジベース：内容は比較的固定されていますが、複数のセッションで再利用が可能です。


  3. **情報処理** ：


  * ファイルのアップロード：ファイルの内容をLLMが理解できるテキストに変換するためには、ドキュメントエクストラクターなどのツールが必要です。このツールは、ファイルから必要な情報を抽出し、モデルが処理できる形式に整えます。
  * ナレッジベース：通常、前処理とインデックス作業が完了しているため、直接検索して情報を取得できます。


  4. **アプリケーションシーン** ：


  * ファイルのアップロード：ユーザー固有の文書を処理する必要があるシーンで非常に有効です。例えば、文書分析やパーソナライズされた学習支援などが挙げられます。
  * ナレッジベース：大量の事前設定情報にアクセスする必要がある場合に適しています。たとえば、カスタマーサービスや製品相談などです。


  5. **データの永続性** ：


  * ファイルのアップロード：通常は一時的な使用であり、システムに長期間保存されることはありません。
  * ナレッジベース：アプリケーションの一部として長期間存在し、継続的に更新・メンテナンスされることが可能です。



### 

​

はじめに

Difyは、[チャットフロー](/ja-jp/guides/workflow/concepts) と [ワークフロー](/ja-jp/guides/workflow/concepts) タイプのアプリでファイルをアップロードし、LLMに処理させる[変数](/ja-jp/guides/workflow/variables)をサポートしています。アプリ開発者は、以下の2つの方法でアプリにファイルアップロード機能を追加できます：

  * ワークフローアプリの場合
    * [開始ノード](/ja-jp/guides/workflow/nodes/start)にファイル変数を追加する
  * チャットフローアプリの場合
    * [追加機能](/en/guides/workflow/additional-features)でファイルアップロードを有効にする（チャットフローのみ対応）
    * [開始ノード](/ja-jp/guides/workflow/nodes/start)にファイル変数を追加する
    * これらの機能は同時に設定可能で、お互いに独立して動作します。ファイルアップロード機能（アップロード方法や数量制限を含む）は、開始ノードのファイル変数に影響を与えません。例えば、開始ノードでのみファイル変数を作成したい場合は、ファイルアップロード機能を追加で有効にする必要はありません。



これらの方法は、さまざまなシーンの要件を満たすために、アプリケーションに柔軟なファイルアップロードオプションを提供します。

#### 

​

ファイルタイプ

以下のファイルタイプとフォーマットがサポートされています：

|   
---|---  
ファイルタイプ| サポートされるフォーマット  
文書| TXT, MARKDOWN, PDF, HTML, XLSX, XLS, DOCX, CSV, EML, MSG, PPTX, PPT, XML, EPUB.  
画像| JPG, JPEG, PNG, GIF, WEBP, SVG.  
音声| MP3, M4A, WAV, WEBM, AMR.  
映像| MP4, MOV, MPEG, MPGA.  
その他| カスタム拡張子がサポートされます。  
  
#### 

​

方法1：チャットボックスでファイルアップロードを有効にする（チャットフローのみ対応）

  1. チャットフローアプリの右上隅にある **「機能」** ボタンをクリックして、アプリにさらに機能を追加できます。

この機能を有効にすると、アプリユーザーは対話中にいつでもファイルをアップロードおよび更新できます。最大10個のファイルを同時にアップロードでき、各ファイルのサイズ上限は15MBです。




ファイルアップロード機能

機能を有効にしても、LLM（大規模言語モデル）がファイルを直接読み取ることはできません。ファイルをLLMが理解できるテキスト形式に変換するには、が必要です。

  * 音声ファイルについては、`gpt-4o-audio-preview`などのマルチモーダル入力に対応したモデルを使用することで、音声を直接処理できます。この場合、追加のエクストラクタは必要ありません。
  * 映像やその他のファイルタイプについては、対応するエクストラクタがまだ用意されておらず、外部ツールを統合するためには開発者が外部ツールにアクセスする必要があります。[外部ツール](/ja-jp/guides/workflow/nodes/iteration)を接続して処理する必要があります。


  2. [テキスト抽出ツール](/ja-jp/guides/workflow/nodes/doc-extractor)ノードを追加し、入力変数で `sys.files` 変数を選択します。
  3. LLMノードを追加し、システムプロンプトでテキスト抽出ツールノードの出力変数を選択します。
  4. 最後に「直接応答」ノードを追加し、LLMノードの出力変数を入力します。



ファイルアップロードののワークフロー

有効にすると、ユーザーは対話ボックスでファイルをアップロードして対話できます。ただし、この方法では、LLMアプリはファイルの内容を記憶する能力を持ちません。各対話ごとにファイルをアップロードする必要があります。

会話ボックスでのファイルのアップロード

LLMが対話中にファイル内容を記憶する機能を追加したい場合は、方法2を参照してください。

#### 

​

方法2：ファイル変数を追加してファイルアップロード機能を有効にする

#### 

​

1\. 「開始」ノードにファイル変数を追加する

アプリの[「開始」](/ja-jp/guides/workflow/nodes/start)ノードに、**「単一ファイル」**または **「ファイルリスト」** といったフィールドタイプの変数を追加します。

  * **単一ファイル**

ユーザーが1つのファイルだけをアップロードできるようにします。

  * **ファイルリスト**

ユーザーが複数のファイルを一度にアップロードできるようにします。




> 操作を簡単にするため、ここでは「単一ファイル」変数の例を用います。

#### 

​

ファイルの解析方法

ファイル変数の使用方法には主に2つのアプローチがあります：

  1. ツールノードを利用してファイルの内容を変換する：
     * ドキュメント形式のファイルの場合、「ドキュメントエクストラクタ」ノードを使ってファイルの内容をテキスト形式に変換できます。
     * この方法は、ファイルの内容をモデルが理解できる形式（例: string、array[string]など）に変換する必要がある場合に適しています。
  2. LLMノード内でファイル変数を直接使用する：
     * 特定の種類のファイル（例: 画像）の場合、LLMノード内でファイル変数を直接使用することができます。
     * たとえば、画像形式のファイル変数を使用する場合、LLMノードで視覚機能を有効にし、変数セレクターで該当するファイル変数を直接参照できます。



どちらの方法を選ぶかは、ファイルの種類と具体的な要件によります。以下で、これら2つの方法の具体的な手順について詳しく説明します。

#### 

​

2\. テキスト抽出ツールノードの追加

ファイルをアップロードすると、そのファイルは「単一ファイル」変数に保存されます。しかし、LLMは変数内のファイルを直接読み込むことができないため、まず[**「テキスト抽出ツール」**](/ja-jp/guides/workflow/nodes/doc-extractor)ノードを追加する必要があります。

「開始」ノード内のファイル変数を **「テキスト抽出ツール」** ノードの入力変数として使用します。

入力変数を追加する

「テキスト抽出ツール」ノードの出力変数をLLMノードのシステムプロンプトに貼り付けます。

システムプロンプトの単語を貼り付けます

これらの設定が完了すると、ユーザーはWebApp内でファイルのURLを貼り付けるか、ローカルファイルをアップロードでき、その後、ドキュメントの内容に基づいてLLMとの対話が可能になります。ユーザーは対話の過程でいつでもファイルを置き換えることができ、LLMは常に最新のファイル内容を取得します。

URL を貼り付けて会話を開始します

**LLMノードでファイル変数を参照する方法**

特定の種類のファイル（例: 画像）の場合、LLMノード内でファイル変数を直接使用できます。この方法は、視覚的解析が必要な場面に特に適しています。具体的な手順は以下の通りです：

  1. LLMノードで視覚機能を有効にします。これにより、モデルが画像入力を処理できるようになります（モデルが視覚機能をサポートしている必要があります）。
  2. LLMノードの変数セレクターで、以前に作成したファイル変数を直接参照します。ファイルのアップロードによって作成されたファイル変数を選択する場合は、sys.files変数を選択します。
  3. システムプロンプトで、モデルに画像入力の処理方法を指示します。たとえば、モデルに画像の内容を説明させたり、画像に関する質問に答えさせたりできます。



以下は設定の例です：

LLM ノードでファイル変数を直接使用する

LLMノード内でファイル変数を直接使用する際は、そのファイル変数が画像ファイルのみを含むようにする必要があります。それ以外の場合、エラーが発生する可能性があります。ユーザーが異なる種類のファイルをアップロードする可能性がある場合は、フィルタリングを行うためにリスト操作を使用することが重要です。

#### 

​

ファイルのダウンロード方法

ファイル変数をanswerノードまたはendノードに配置すると、アプリケーションがそのノードに到達した際に、セッションボックスにファイルダウンロードカードが表示されます。このカードをクリックすることで、ファイルをダウンロードできます。

ファイルダンロード

### 

​

上級者向けの使用方法

アプリが複数のファイル形式に対応できるようにしたい場合、例えば、ユーザーがドキュメントファイル、画像、音声、動画ファイルを同時にアップロードできるようにするには、「開始」ノードに「ファイルリスト」変数を追加し、「リスト操作」ノードを使用して異なるファイルタイプを処理する必要があります。詳細については、[リスト操作](/ja-jp/guides/workflow/nodes/list-operator)ノードを参照してください。

複数のファイルタイプの処理

* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/guides/workflow/file-upload.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20upl&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/guides/workflow%2Ffile-upload.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[オーケストレートノード](/ja-jp/guides/workflow/orchestrate-node)[エラー処理](/ja-jp/guides/workflow/error-handling/README)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * 適用シーン
  * ファイルのアップロードとナレッジベースの違い
  * はじめに
  * ファイルタイプ
  * 方法1：チャットボックスでファイルアップロードを有効にする（チャットフローのみ対応）
  * 方法2：ファイル変数を追加してファイルアップロード機能を有効にする
  * 1\. 「開始」ノードにファイル変数を追加する
  * ファイルの解析方法
  * 2\. テキスト抽出ツールノードの追加
  * ファイルのダウンロード方法
  * 上級者向けの使用方法



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/guides/workflow/node/agent

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

ノードの説明

エージェント

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

    * [キーコンセプト](/ja-jp/guides/workflow/concepts)
    * [変数](/ja-jp/guides/workflow/variables)
    * ノードの説明

      * [開始](/ja-jp/guides/workflow/node/start)
      * [終了](/ja-jp/guides/workflow/node/end)
      * [回答](/ja-jp/guides/workflow/node/answer)
      * [LLM](/ja-jp/guides/workflow/node/llm)
      * [知識検索](/ja-jp/guides/workflow/node/knowledge-retrieval)
      * [質問分類](/ja-jp/guides/workflow/node/question-classifier)
      * [条件分岐](/ja-jp/guides/workflow/node/ifelse)
      * [コード](/ja-jp/guides/workflow/node/code)
      * [テンプレート](/ja-jp/guides/workflow/node/template)
      * [テキスト抽出ツール](/ja-jp/guides/workflow/node/doc-extractor)
      * [リスト処理](/ja-jp/guides/workflow/node/list-operator)
      * [変数集約](/ja-jp/guides/workflow/node/variable-aggregator)
      * [変数代入](/ja-jp/guides/workflow/node/variable-assigner)
      * [反復処理（イテレーション）](/ja-jp/guides/workflow/node/iteration)
      * [パラメータ抽出](/ja-jp/guides/workflow/node/parameter-extractor)
      * [HTTPリクエスト](/ja-jp/guides/workflow/node/http-request)
      * [エージェント](/ja-jp/guides/workflow/node/agent)
      * [ツール](/ja-jp/guides/workflow/node/tools)
      * [ループ処理（繰り返し処理）](/ja-jp/guides/workflow/node/loop)
    * [ショートカットキー](/ja-jp/guides/workflow/shortcut-key)
    * [オーケストレートノード](/ja-jp/guides/workflow/orchestrate-node)
    * [ファイルアップロード](/ja-jp/guides/workflow/file-upload)
    * エラー処理

    * [追加機能](/ja-jp/guides/workflow/additional-feature)
    * プレビューとデバッグ

    * [アプリケーション公開](/ja-jp/guides/workflow/publish)
    * [JSON形式での出力](/ja-jp/guides/workflow/structured-outputs)
    * [変更のお知らせ：画像アップロードがファイルアップロードに統合されました](/ja-jp/guides/workflow/bulletin)
  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




ノードの説明

# エージェント

Copy page

## 

​

定義

エージェントノードは、Difyチャットフローやワークフローにおいて自律的なツール呼び出しを実現するコンポーネントです。異なるエージェント推論戦略を統合することで、大規模言語モデル（LLM）が実行時に動的にツールを選択・実行し、多段階推論を可能にします。

## 

​

設定手順

### 

​

ノードの追加

チャットフローやワークフローのエディタで、コンポーネントパネルからエージェントノードをキャンバスにドラッグします。

### 

​

エージェント戦略の選択

ノード設定パネルで **エージェント戦略** をクリックします。

ドロップダウンメニューから推論戦略を選択します。Difyは **Function Calling と ReAct** を標準装備しており、**Marketplace → エージェント戦略** カテゴリから追加インストール可能です。

#### 

​

1\. Function Calling

ユーザー指示を事前定義された関数/ツールにマッピングし、LLMが意図を識別→適切な関数を選択→パラメータ抽出という明確なツール呼び出しメカニズムです。

特徴:

**• 高精度** : 明確なタスクに直結するツールを直接呼び出し

**• 外部連携容易** : API/ツールを関数化して統合可能

**• 構造化出力** : 下流ノード処理向けの定型化された情報出力

#### 

​

2\. ReAct（Reason + Act）

思考（Reason）と行動（Act）を交互に繰り返す戦略です。LLMが現状分析→ツール選択→実行→結果評価のサイクルを問題解決まで継続します。

特徴:

**• 外部リソース活用** : モデル単体では困難なタスクを実行可能

**• 処理追跡性** : 思考プロセスが可視化され説明性が向上

**• 広範な適用** : Q&A/情報検索/タスク実行など多様なシナリオに対応

開発者は公開[リポジトリ](https://github.com/langgenius/dify-plugins)へ戦略プラグインを提供可能で、審査後Marketplaceで公開されます。

### 

​

ノードパラメータ設定

選択した戦略に応じた設定項目が表示されます。標準装備のFunction Calling/ReActでは以下を設定：

  1. **モデル** : エージェントを駆動するLLMを選択
  2. **ツールリスト** : 「+」で呼び出し可能ツールを追加
     * 検索: インストール済みツールから選択
     * 認証: APIキーなどの認証情報を入力
     * 説明とパラメータ: ツールの用途説明とパラメータ設定
  3. **指示文** : タスク目標とコンテキストを定義（Jinja構文で上位ノード変数参照可）
  4. **クエリ** : ユーザー入力を受け取る変数
  5. **最大実行ステップ数** : 処理サイクルの上限値
  6. **出力変数** : ノードが出力するデータ構造



## 

​

ログ確認

実行時には詳細なログが生成されます。基本情報（入出力/トークン使用量/処理時間/状態）に加え、「詳細」から各処理ステップの出力を確認可能です。

## 

​

メモリ機能

メモリスイッチを有効にすると、エージェントに会話コンテキストを記憶する能力が付与されます。メモリウィンドウサイズスライダーを調整することで、エージェントが「記憶」できる過去の会話メッセージ数を制御できます。これにより、エージェントは以前のやり取りを理解して参照し、一貫性のある文脈に沿った応答を提供することができ、複数ターンの対話体験を大幅に向上させます。

例えば、ユーザーが後続のメッセージで代名詞（「それ」、「これ」、「彼ら」など）を使用する場合、メモリ機能が有効になっているエージェントは、ユーザーが完全な情報を繰り返し述べなくても、これらの代名詞が前のコンテキストから何を指しているかを理解できます。

* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/guides/workflow/node/agent.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/guides/workflow/node%2Fagent.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[HTTPリクエスト](/ja-jp/guides/workflow/node/http-request)[ツール](/ja-jp/guides/workflow/node/tools)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * 定義
  * 設定手順
  * ノードの追加
  * エージェント戦略の選択
  * 1\. Function Calling
  * 2\. ReAct（Reason + Act）
  * ノードパラメータ設定
  * ログ確認
  * メモリ機能



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/guides/workflow/node/answer

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

ノードの説明

回答

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

    * [キーコンセプト](/ja-jp/guides/workflow/concepts)
    * [変数](/ja-jp/guides/workflow/variables)
    * ノードの説明

      * [開始](/ja-jp/guides/workflow/node/start)
      * [終了](/ja-jp/guides/workflow/node/end)
      * [回答](/ja-jp/guides/workflow/node/answer)
      * [LLM](/ja-jp/guides/workflow/node/llm)
      * [知識検索](/ja-jp/guides/workflow/node/knowledge-retrieval)
      * [質問分類](/ja-jp/guides/workflow/node/question-classifier)
      * [条件分岐](/ja-jp/guides/workflow/node/ifelse)
      * [コード](/ja-jp/guides/workflow/node/code)
      * [テンプレート](/ja-jp/guides/workflow/node/template)
      * [テキスト抽出ツール](/ja-jp/guides/workflow/node/doc-extractor)
      * [リスト処理](/ja-jp/guides/workflow/node/list-operator)
      * [変数集約](/ja-jp/guides/workflow/node/variable-aggregator)
      * [変数代入](/ja-jp/guides/workflow/node/variable-assigner)
      * [反復処理（イテレーション）](/ja-jp/guides/workflow/node/iteration)
      * [パラメータ抽出](/ja-jp/guides/workflow/node/parameter-extractor)
      * [HTTPリクエスト](/ja-jp/guides/workflow/node/http-request)
      * [エージェント](/ja-jp/guides/workflow/node/agent)
      * [ツール](/ja-jp/guides/workflow/node/tools)
      * [ループ処理（繰り返し処理）](/ja-jp/guides/workflow/node/loop)
    * [ショートカットキー](/ja-jp/guides/workflow/shortcut-key)
    * [オーケストレートノード](/ja-jp/guides/workflow/orchestrate-node)
    * [ファイルアップロード](/ja-jp/guides/workflow/file-upload)
    * エラー処理

    * [追加機能](/ja-jp/guides/workflow/additional-feature)
    * プレビューとデバッグ

    * [アプリケーション公開](/ja-jp/guides/workflow/publish)
    * [JSON形式での出力](/ja-jp/guides/workflow/structured-outputs)
    * [変更のお知らせ：画像アップロードがファイルアップロードに統合されました](/ja-jp/guides/workflow/bulletin)
  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




ノードの説明

# 回答

Copy page

### 

​

定義

チャットフローアプリのプロセス内で返信内容を定義します。

テキストエディタを使用して返信フォーマットを自由に定義できます。固定のテキスト内容をカスタマイズしたり、前のステップで出力された変数を返信内容として使用したり、カスタマイズしたテキストと変数を組み合わせて返信することができます。

ノードを随時追加して内容をストリーミング形式で会話に返信し、所見即所得の設定モードをサポートし、テキストと画像の混在も可能です。例えば：

  1. LLMノードの返信内容を出力
  2. 生成された画像を出力
  3. 純テキストを出力



直接返信ノードは最終出力ノードとして使用しなくてもよく、プロセスの中間ステップでストリーミング出力結果を出力することができます。

* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/guides/workflow/node/answer.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/guides/workflow/node%2Fanswer.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[終了](/ja-jp/guides/workflow/node/end)[LLM](/ja-jp/guides/workflow/node/llm)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * 定義



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/guides/workflow/node/code

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

ノードの説明

コード

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

    * [キーコンセプト](/ja-jp/guides/workflow/concepts)
    * [変数](/ja-jp/guides/workflow/variables)
    * ノードの説明

      * [開始](/ja-jp/guides/workflow/node/start)
      * [終了](/ja-jp/guides/workflow/node/end)
      * [回答](/ja-jp/guides/workflow/node/answer)
      * [LLM](/ja-jp/guides/workflow/node/llm)
      * [知識検索](/ja-jp/guides/workflow/node/knowledge-retrieval)
      * [質問分類](/ja-jp/guides/workflow/node/question-classifier)
      * [条件分岐](/ja-jp/guides/workflow/node/ifelse)
      * [コード](/ja-jp/guides/workflow/node/code)
      * [テンプレート](/ja-jp/guides/workflow/node/template)
      * [テキスト抽出ツール](/ja-jp/guides/workflow/node/doc-extractor)
      * [リスト処理](/ja-jp/guides/workflow/node/list-operator)
      * [変数集約](/ja-jp/guides/workflow/node/variable-aggregator)
      * [変数代入](/ja-jp/guides/workflow/node/variable-assigner)
      * [反復処理（イテレーション）](/ja-jp/guides/workflow/node/iteration)
      * [パラメータ抽出](/ja-jp/guides/workflow/node/parameter-extractor)
      * [HTTPリクエスト](/ja-jp/guides/workflow/node/http-request)
      * [エージェント](/ja-jp/guides/workflow/node/agent)
      * [ツール](/ja-jp/guides/workflow/node/tools)
      * [ループ処理（繰り返し処理）](/ja-jp/guides/workflow/node/loop)
    * [ショートカットキー](/ja-jp/guides/workflow/shortcut-key)
    * [オーケストレートノード](/ja-jp/guides/workflow/orchestrate-node)
    * [ファイルアップロード](/ja-jp/guides/workflow/file-upload)
    * エラー処理

    * [追加機能](/ja-jp/guides/workflow/additional-feature)
    * プレビューとデバッグ

    * [アプリケーション公開](/ja-jp/guides/workflow/publish)
    * [JSON形式での出力](/ja-jp/guides/workflow/structured-outputs)
    * [変更のお知らせ：画像アップロードがファイルアップロードに統合されました](/ja-jp/guides/workflow/bulletin)
  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




ノードの説明

# コード

Copy page

## 

​

紹介

コードノードは、Python / NodeJSコードを実行してワークフロー内でデータ変換を行うことをサポートします。これにより、Arithmetic、JSON変換、テキスト処理などのシナリオでワークフローが簡素化されます。

このノードは開発者の柔軟性を大幅に向上させ、ワークフロー内にカスタムPythonまたはJavascriptスクリプトを埋め込んで、事前設定されたノードでは達成できない方法で変数を操作することができます。設定オプションを使用して、必要な入力変数と出力変数を指定し、対応する実行コードを記述できます。

## 

​

設定

他のノードの変数をコードノードで使用する必要がある場合は、`入力変数`で変数名を定義し、これらの変数を参照する必要があります。[変数参照](/ja-jp/guides/workflow/concepts)を参考にしてください。

## 

​

使用シナリオ

コードノードを使用して、以下の一般的な操作を実行できます：

### 

​

構造化データ処理

ワークフローでは、しばしば非構造化データの処理が必要です。例えば、JSON文字列の解析、抽出、変換などです。典型的な例として、HTTPノードのデータ処理があります。一般的なAPI応答構造では、データが多層のJSONオブジェクトにネストされていることがあり、特定のフィールドを抽出する必要があります。コードノードはこれらの操作を支援します。以下は、HTTPノードから返されたJSON文字列から`data.name`フィールドを抽出する簡単な例です：
    
    
    def main(http_response: str) -> str:
        import json
        data = json.loads(http_response)
        return {
            # 出力変数にresultを宣言することに注意
            'result': data['data']['name'] 
        }

### 

​

数学計算

ワークフロー内で複雑な数学計算を行う必要がある場合、コードノードを使用できます。例えば、複雑な数学公式の計算やデータの統計分析です。以下は、配列の平方差を計算する簡単な例です：
    
    
    def main(x: list) -> float:
        return {
            # 出力変数にresultを宣言することに注意
            'result' : sum([(i - sum(x) / len(x)) ** 2 for i in x]) / len(x)
        }

### 

​

データの結合

時には、複数のデータソースを結合する必要がある場合があります。例えば、複数の知識検索、データサーチ、API呼び出しなどです。コードノードはこれらのデータソースを統合するのに役立ちます。以下は、2つのナレッジベースのデータを結合する簡単な例です：
    
    
    def main(knowledge1: list, knowledge2: list) -> list:
        return {
            # 出力変数にresultを宣言することに注意
            'result': knowledge1 + knowledge2
        }

## 

​

ローカルデプロイ

ローカルデプロイのユーザーである場合、悪意のあるコードが実行されないようにするためのサンドボックスサービスを起動する必要があります。このサービスを起動するにはDockerサービスを使用します。サンドボックスサービスの詳細は[こちら](https://github.com/langgenius/dify/tree/main/docker/docker-compose.middleware.yaml)から確認できます。また、`docker-compose`を使用してサービスを直接起動することもできます：
    
    
    docker-compose -f docker-compose.middleware.yaml up -d

> システムにDocker Compose V2がインストールされている場合は、`docker compose`を使用し；V1の場合、`docker-compose`を使用しください。`$docker compose version` でこれに該当するかどうかを確認してください。詳細は[こちら](https://docs.docker.com/compose/#compose-v2-and-the-new-docker-compose-command)をご覧ください。

## 

​

セキュリティポリシー

Python3とJavascriptのいずれであっても、その実行環境は安全性を確保するために厳密に隔離（サンドボックス化）されています。これにより、ファイルシステムへの直接アクセス、ネットワークリクエストの実行、OSレベルのコマンドの実行など、システムリソースを大量に消費する可能性がある機能を使用することはできません。これらの制限により、コードの安全な実行が保証され、システムリソースの過剰消費が防止されます。

### 

​

よくある質問

**コード ノードにコードを入力した後にコードを保存できないのはなぜですか?**

コードに危険な動作がないか確認してください。例えば：
    
    
    def main() -> dict:
        return {
            "result": open("/etc/passwd").read(),
        }

このコードには次の問題が含まれています。

  * **不正なファイル アクセス:** コードは、ユーザー アカウント情報を保存する Unix/Linux システムの重要なシステム ファイルである`/etc/passwd`ファイルを読み取ろうとしました。
  * **機密情報の漏洩:** `/etc/passwd`ファイルには、ユーザー名、ユーザー ID、グループ ID、ホーム ディレクトリのパスなど、システム ユーザーの重要な情報が含まれています。直接アクセスすると情報が漏洩する可能性があります。



危険なコードはCloudflare WAFによって自動的にブロックされます。ブロックされているかどうかは、「Webデバッグツール」の「ネットワーク」から確認できます。

* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/guides/workflow/node/code.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/guides/workflow/node%2Fcode.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[条件分岐](/ja-jp/guides/workflow/node/ifelse)[テンプレート](/ja-jp/guides/workflow/node/template)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * 紹介
  * 設定
  * 使用シナリオ
  * 構造化データ処理
  * 数学計算
  * データの結合
  * ローカルデプロイ
  * セキュリティポリシー
  * よくある質問



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/guides/workflow/node/doc-extractor

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

ノードの説明

テキスト抽出ツール

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

    * [キーコンセプト](/ja-jp/guides/workflow/concepts)
    * [変数](/ja-jp/guides/workflow/variables)
    * ノードの説明

      * [開始](/ja-jp/guides/workflow/node/start)
      * [終了](/ja-jp/guides/workflow/node/end)
      * [回答](/ja-jp/guides/workflow/node/answer)
      * [LLM](/ja-jp/guides/workflow/node/llm)
      * [知識検索](/ja-jp/guides/workflow/node/knowledge-retrieval)
      * [質問分類](/ja-jp/guides/workflow/node/question-classifier)
      * [条件分岐](/ja-jp/guides/workflow/node/ifelse)
      * [コード](/ja-jp/guides/workflow/node/code)
      * [テンプレート](/ja-jp/guides/workflow/node/template)
      * [テキスト抽出ツール](/ja-jp/guides/workflow/node/doc-extractor)
      * [リスト処理](/ja-jp/guides/workflow/node/list-operator)
      * [変数集約](/ja-jp/guides/workflow/node/variable-aggregator)
      * [変数代入](/ja-jp/guides/workflow/node/variable-assigner)
      * [反復処理（イテレーション）](/ja-jp/guides/workflow/node/iteration)
      * [パラメータ抽出](/ja-jp/guides/workflow/node/parameter-extractor)
      * [HTTPリクエスト](/ja-jp/guides/workflow/node/http-request)
      * [エージェント](/ja-jp/guides/workflow/node/agent)
      * [ツール](/ja-jp/guides/workflow/node/tools)
      * [ループ処理（繰り返し処理）](/ja-jp/guides/workflow/node/loop)
    * [ショートカットキー](/ja-jp/guides/workflow/shortcut-key)
    * [オーケストレートノード](/ja-jp/guides/workflow/orchestrate-node)
    * [ファイルアップロード](/ja-jp/guides/workflow/file-upload)
    * エラー処理

    * [追加機能](/ja-jp/guides/workflow/additional-feature)
    * プレビューとデバッグ

    * [アプリケーション公開](/ja-jp/guides/workflow/publish)
    * [JSON形式での出力](/ja-jp/guides/workflow/structured-outputs)
    * [変更のお知らせ：画像アップロードがファイルアップロードに統合されました](/ja-jp/guides/workflow/bulletin)
  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




ノードの説明

# テキスト抽出ツール

Copy page

### 

​

定義

LLM（大規模言語モデル）は文書の内容を直接読み取ることができません。そのため、ユーザーがアップロードした文書を”テキスト抽出ツールノード”を介して解析し、文書ファイルの情報を読み取り、テキストに変換して内容をLLMに送信する必要があります。

### 

​

適用シナリオ

  * ファイルに対話できるLLMアプリを構築する、例えばChatPDFやChatWord；
  * ユーザーがアップロードしたファイルの内容を分析およびチェックする；



### 

​

ノードの機能

テキスト抽出ツールノードは、情報を処理する中心的な役割を果たします。入力変数内のファイルを識別して読み取り、情報を抽出し、string型の出力変数に変換して、下流のノードが呼び出すために提供します。

テキスト抽出ツールノードは、入力変数と出力変数に分かれています。

#### 

​

入力変数

テキスト抽出ツールは以下のデータ構造の変数のみを受け入れます：

  * `File`，1つのファイル
  * `Array[File]`，複数のファイル



テキスト抽出ツールは、テキスト、Markdown、PDF、HTML、DOCX形式のファイルなどの文書タイプから情報を抽出できますが、画像、音声、映像などの形式のファイルは処理できません。

#### 

​

出力変数

出力変数は`text`という固定の名前です。出力変数の型は入力変数に依存します：

  * 入力変数が`File`の場合、出力変数は`string`です。
  * 入力変数が`Array[File]`の場合、出力変数は`array[string]`です。



> Array配列変数は通常、リスト操作ノードと組み合わせて使用されます。詳細については、[リスト操作](./list-operator)を参照してください。

### 

​

設定例

典型的なファイルインタラクションの質疑応答シナリオでは、テキスト抽出ツールはLLMノードの前段階として機能し、アプリのファイル情報を抽出し、LLMノードに渡してユーザーのファイルに関する質問に回答します。

このセクションでは、典型的なChatPDFサンプルワークフローテンプレートを用いて、テキスト抽出ツールノードの使用方法を説明します。

**設定手順：**

  1. アプリでファイルアップロード機能を有効にします。 [“スタート”](./start) ノードで**単一ファイル変数** を追加し、`pdf`と名付けます。
  2. テキスト抽出ツールノードを追加し、入力変数で`pdf`変数を選択します。
  3. LLMノードを追加し、システムプロンプトでテキスト抽出ツールノードの出力変数を選択します。LLMはこの出力変数を使用してファイルの内容を読み取ることができます。



  4. エンドノードを設定し、LLMノードの出力変数を選択します。



設定が完了すると、アプリケーションはファイルアップロード機能を持ち、ユーザーはPDFファイルをアップロードして対話を展開できるようになります。

チャット対話でファイルをアップロードしLLMと対話する方法については、[追加機能](/ja-jp/guides/workflow/additional-feature)を参照してください。

* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/guides/workflow/node/doc-extractor.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20xtrac&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/guides/workflow/node%2Fdoc-extractor.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[テンプレート](/ja-jp/guides/workflow/node/template)[リスト処理](/ja-jp/guides/workflow/node/list-operator)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * 定義
  * 適用シナリオ
  * ノードの機能
  * 入力変数
  * 出力変数
  * 設定例



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/guides/workflow/node/end

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

ノードの説明

終了

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

    * [キーコンセプト](/ja-jp/guides/workflow/concepts)
    * [変数](/ja-jp/guides/workflow/variables)
    * ノードの説明

      * [開始](/ja-jp/guides/workflow/node/start)
      * [終了](/ja-jp/guides/workflow/node/end)
      * [回答](/ja-jp/guides/workflow/node/answer)
      * [LLM](/ja-jp/guides/workflow/node/llm)
      * [知識検索](/ja-jp/guides/workflow/node/knowledge-retrieval)
      * [質問分類](/ja-jp/guides/workflow/node/question-classifier)
      * [条件分岐](/ja-jp/guides/workflow/node/ifelse)
      * [コード](/ja-jp/guides/workflow/node/code)
      * [テンプレート](/ja-jp/guides/workflow/node/template)
      * [テキスト抽出ツール](/ja-jp/guides/workflow/node/doc-extractor)
      * [リスト処理](/ja-jp/guides/workflow/node/list-operator)
      * [変数集約](/ja-jp/guides/workflow/node/variable-aggregator)
      * [変数代入](/ja-jp/guides/workflow/node/variable-assigner)
      * [反復処理（イテレーション）](/ja-jp/guides/workflow/node/iteration)
      * [パラメータ抽出](/ja-jp/guides/workflow/node/parameter-extractor)
      * [HTTPリクエスト](/ja-jp/guides/workflow/node/http-request)
      * [エージェント](/ja-jp/guides/workflow/node/agent)
      * [ツール](/ja-jp/guides/workflow/node/tools)
      * [ループ処理（繰り返し処理）](/ja-jp/guides/workflow/node/loop)
    * [ショートカットキー](/ja-jp/guides/workflow/shortcut-key)
    * [オーケストレートノード](/ja-jp/guides/workflow/orchestrate-node)
    * [ファイルアップロード](/ja-jp/guides/workflow/file-upload)
    * エラー処理

    * [追加機能](/ja-jp/guides/workflow/additional-feature)
    * プレビューとデバッグ

    * [アプリケーション公開](/ja-jp/guides/workflow/publish)
    * [JSON形式での出力](/ja-jp/guides/workflow/structured-outputs)
    * [変更のお知らせ：画像アップロードがファイルアップロードに統合されました](/ja-jp/guides/workflow/bulletin)
  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




ノードの説明

# 終了

Copy page

### 

​

定義

ワークフローの最終出力内容を定義します。すべてのワークフローは、完全に実行された後、最終結果を出力するための少なくとも1つの終了ノードを必要とします。

終了ノードはプロセスの終了ノードであり、その後に他のノードを追加することはできません。ワークフローアプリケーションでは、終了ノードに到達して初めて実行結果が出力されます。プロセスに条件分岐がある場合、複数の終了ノードを定義する必要があります。

終了ノードは1つ以上の出力変数を宣言する必要があります。この宣言の際、任意の上流ノードの出力変数を参照することができます。

* * *

### 

​

シナリオ

以下の[長編ストーリー生成ワークフロー](./iteration#1)では、終了ノードで宣言された変数 `Output` は上流のコードノードの出力です。つまり、このワークフローはCode3ノードが実行された後に終了し、Code3の実行結果を出力します。

**単一ルートの実行例：**

**複数ルートの実行例：**

* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/guides/workflow/node/end.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/guides/workflow/node%2Fend.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[開始](/ja-jp/guides/workflow/node/start)[回答](/ja-jp/guides/workflow/node/answer)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * 定義
  * シナリオ



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/guides/workflow/node/http-request

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

ノードの説明

HTTPリクエスト

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

    * [キーコンセプト](/ja-jp/guides/workflow/concepts)
    * [変数](/ja-jp/guides/workflow/variables)
    * ノードの説明

      * [開始](/ja-jp/guides/workflow/node/start)
      * [終了](/ja-jp/guides/workflow/node/end)
      * [回答](/ja-jp/guides/workflow/node/answer)
      * [LLM](/ja-jp/guides/workflow/node/llm)
      * [知識検索](/ja-jp/guides/workflow/node/knowledge-retrieval)
      * [質問分類](/ja-jp/guides/workflow/node/question-classifier)
      * [条件分岐](/ja-jp/guides/workflow/node/ifelse)
      * [コード](/ja-jp/guides/workflow/node/code)
      * [テンプレート](/ja-jp/guides/workflow/node/template)
      * [テキスト抽出ツール](/ja-jp/guides/workflow/node/doc-extractor)
      * [リスト処理](/ja-jp/guides/workflow/node/list-operator)
      * [変数集約](/ja-jp/guides/workflow/node/variable-aggregator)
      * [変数代入](/ja-jp/guides/workflow/node/variable-assigner)
      * [反復処理（イテレーション）](/ja-jp/guides/workflow/node/iteration)
      * [パラメータ抽出](/ja-jp/guides/workflow/node/parameter-extractor)
      * [HTTPリクエスト](/ja-jp/guides/workflow/node/http-request)
      * [エージェント](/ja-jp/guides/workflow/node/agent)
      * [ツール](/ja-jp/guides/workflow/node/tools)
      * [ループ処理（繰り返し処理）](/ja-jp/guides/workflow/node/loop)
    * [ショートカットキー](/ja-jp/guides/workflow/shortcut-key)
    * [オーケストレートノード](/ja-jp/guides/workflow/orchestrate-node)
    * [ファイルアップロード](/ja-jp/guides/workflow/file-upload)
    * エラー処理

    * [追加機能](/ja-jp/guides/workflow/additional-feature)
    * プレビューとデバッグ

    * [アプリケーション公開](/ja-jp/guides/workflow/publish)
    * [JSON形式での出力](/ja-jp/guides/workflow/structured-outputs)
    * [変更のお知らせ：画像アップロードがファイルアップロードに統合されました](/ja-jp/guides/workflow/bulletin)
  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




ノードの説明

# HTTPリクエスト

Copy page

### 

​

定義

HTTP プロトコルを介してサーバーにリクエストを送信することを可能にし、外部データの取得、ウェブフック、画像生成、ファイルのダウンロードなどのシナリオに適用されます。指定されたネットワークアドレスにカスタマイズされたHTTPリクエストを送信し、さまざまな外部サービスとの連携を実現します。

このノードは一般的なHTTPリクエストメソッドをサポートしています：

  * **GET** 、リソースをサーバーにリクエストするために使用されます。
  * **POST** 、データをサーバーに送信するために使用され、通常はフォームの送信やファイルのアップロードに使用されます。
  * **HEAD** 、GETリクエストに似ていますが、サーバーはリソースの本体を返さず、レスポンスヘッダーのみを返します。
  * **PATCH** 、リクエスト-レスポンスチェーンの各ノードで伝送経路を取得するために使用されます。
  * **PUT** 、リソースをサーバーにアップロードするために使用され、通常は既存のリソースの更新や新しいリソースの作成に使用されます。
  * **DELETE** 、指定されたリソースをサーバーに削除するようにリクエストするために使用されます。



HTTPリクエストのURL、リクエストヘッダー、クエリパラメータ、リクエストボディの内容、および認証情報などを設定することができます。

HTTP リクエスト設定

* * *

### 

​

シナリオ

このノードの便利な特性の一つは、シナリオに応じてリクエストの異なる部分に動的に変数を挿入できることです。例えば、カスタマーレビュープロセスを処理する際に、ユーザー名や顧客ID、レビュー内容などの変数をリクエストに埋め込むことで、カスタマイズされた自動返信情報を作成したり、特定の顧客情報を取得して関連リソースを特定のサーバーに送信したりすることができます。

カスタマーレビューの分類

HTTPリクエストの戻り値には、レスポンスボディ、ステータスコード、レスポンスヘッダー、ファイルが含まれます。特に、レスポンスにファイル（現在は画像タイプのみ）が含まれている場合、このノードはファイルを自動的に保存し、後続のプロセスで使用できるようにします。この設計により、処理効率が向上し、ファイルを含むレスポンスの処理がシンプルで直接的になります。

* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/guides/workflow/node/http-request.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20requ&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/guides/workflow/node%2Fhttp-request.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[パラメータ抽出](/ja-jp/guides/workflow/node/parameter-extractor)[エージェント](/ja-jp/guides/workflow/node/agent)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * 定義
  * シナリオ



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/guides/workflow/node/ifelse

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

ノードの説明

条件分岐

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

    * [キーコンセプト](/ja-jp/guides/workflow/concepts)
    * [変数](/ja-jp/guides/workflow/variables)
    * ノードの説明

      * [開始](/ja-jp/guides/workflow/node/start)
      * [終了](/ja-jp/guides/workflow/node/end)
      * [回答](/ja-jp/guides/workflow/node/answer)
      * [LLM](/ja-jp/guides/workflow/node/llm)
      * [知識検索](/ja-jp/guides/workflow/node/knowledge-retrieval)
      * [質問分類](/ja-jp/guides/workflow/node/question-classifier)
      * [条件分岐](/ja-jp/guides/workflow/node/ifelse)
      * [コード](/ja-jp/guides/workflow/node/code)
      * [テンプレート](/ja-jp/guides/workflow/node/template)
      * [テキスト抽出ツール](/ja-jp/guides/workflow/node/doc-extractor)
      * [リスト処理](/ja-jp/guides/workflow/node/list-operator)
      * [変数集約](/ja-jp/guides/workflow/node/variable-aggregator)
      * [変数代入](/ja-jp/guides/workflow/node/variable-assigner)
      * [反復処理（イテレーション）](/ja-jp/guides/workflow/node/iteration)
      * [パラメータ抽出](/ja-jp/guides/workflow/node/parameter-extractor)
      * [HTTPリクエスト](/ja-jp/guides/workflow/node/http-request)
      * [エージェント](/ja-jp/guides/workflow/node/agent)
      * [ツール](/ja-jp/guides/workflow/node/tools)
      * [ループ処理（繰り返し処理）](/ja-jp/guides/workflow/node/loop)
    * [ショートカットキー](/ja-jp/guides/workflow/shortcut-key)
    * [オーケストレートノード](/ja-jp/guides/workflow/orchestrate-node)
    * [ファイルアップロード](/ja-jp/guides/workflow/file-upload)
    * エラー処理

    * [追加機能](/ja-jp/guides/workflow/additional-feature)
    * プレビューとデバッグ

    * [アプリケーション公開](/ja-jp/guides/workflow/publish)
    * [JSON形式での出力](/ja-jp/guides/workflow/structured-outputs)
    * [変更のお知らせ：画像アップロードがファイルアップロードに統合されました](/ja-jp/guides/workflow/bulletin)
  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




ノードの説明

# 条件分岐

Copy page

### 

​

定義

if/else 条件に基づいてチャットフローとワークフローを2つの分岐に分けることができます。

### ノードの機能

条件分岐の動作メカニズムには、次の6つのパスが含まれます：

  * IFの条件：変数を選び、条件と満たすべき値を設定します；
  * IFの条件が `True` と判断された場合、IFパスを実行します；
  * IFの条件が `False` と判断された場合、ELSEパスを実行します；
  * ELIFの条件が `True` と判断された場合, ELIFパスを実行します;
  * ELIFの条件が `False` と判断された場合, 次のELIFパスを判断します、もしくは最後のELIFパスを実行します;



**条件の種類**

次の条件タイプの設定をサポートします：

  * 含む（Contains）
  * 含まない（Not contains）
  * ..から始まる（Start with）
  * ..から終わる（End with）
  * である（Is）
  * ではない（Is not）
  * 空である（Is empty）
  * 空ではない（Is not empty）



* * *

### 

​

シナリオ

**テキスト要約ワークフロー** を例に、各条件を説明します。

  * IFの条件：開始ノードの`summarystyle`変数を選び、条件を **含む** として `技術` を設定します；
  * IFの条件が `True` と判断された場合、IFパスを実行し、技術関連の知識をナレッジ検索ノードを通じて問い合わせ、その後大規模言語モデル（LLM）ノードを介して応答します。（上図の下半部分に示されるように）；
  * IFの条件が `False` と判断され、さらにELIF条件が加えられた場合、`summarystyle` 変数の入力に `技術` は含まれず、ELIFの条件に `科学` が含まれている場合は、ELIFの条件が `True` であるかどうかを確認し、該当する手順を実行します。
  * ELIFの条件が `False` で、かつ入力変数に `技術` や `科学` が含まれていない場合は、次のELIFの条件の評価を続けるか、もしくはELSEパスを実行します。
  * IFの条件が `False` と判断された場合、つまり`summarystyle`変数の入力が **含まない** として `技術` を設定し、ELSEパスを実行し、LLM2ノードで返信します（上図の下半部分に示されるように）；



**複数条件の判断**

複雑な条件判断が必要な場合、複数条件を設定し、条件間に **AND** または **OR** を設定することができます。これは条件間に**交集** または**并集** を取ることを意味します。

複数条件の判断

* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/guides/workflow/node/ifelse.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/guides/workflow/node%2Fifelse.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[質問分類](/ja-jp/guides/workflow/node/question-classifier)[コード](/ja-jp/guides/workflow/node/code)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * 定義
  * シナリオ



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/guides/workflow/node/iteration

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

ノードの説明

反復処理（イテレーション）

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

    * [キーコンセプト](/ja-jp/guides/workflow/concepts)
    * [変数](/ja-jp/guides/workflow/variables)
    * ノードの説明

      * [開始](/ja-jp/guides/workflow/node/start)
      * [終了](/ja-jp/guides/workflow/node/end)
      * [回答](/ja-jp/guides/workflow/node/answer)
      * [LLM](/ja-jp/guides/workflow/node/llm)
      * [知識検索](/ja-jp/guides/workflow/node/knowledge-retrieval)
      * [質問分類](/ja-jp/guides/workflow/node/question-classifier)
      * [条件分岐](/ja-jp/guides/workflow/node/ifelse)
      * [コード](/ja-jp/guides/workflow/node/code)
      * [テンプレート](/ja-jp/guides/workflow/node/template)
      * [テキスト抽出ツール](/ja-jp/guides/workflow/node/doc-extractor)
      * [リスト処理](/ja-jp/guides/workflow/node/list-operator)
      * [変数集約](/ja-jp/guides/workflow/node/variable-aggregator)
      * [変数代入](/ja-jp/guides/workflow/node/variable-assigner)
      * [反復処理（イテレーション）](/ja-jp/guides/workflow/node/iteration)
      * [パラメータ抽出](/ja-jp/guides/workflow/node/parameter-extractor)
      * [HTTPリクエスト](/ja-jp/guides/workflow/node/http-request)
      * [エージェント](/ja-jp/guides/workflow/node/agent)
      * [ツール](/ja-jp/guides/workflow/node/tools)
      * [ループ処理（繰り返し処理）](/ja-jp/guides/workflow/node/loop)
    * [ショートカットキー](/ja-jp/guides/workflow/shortcut-key)
    * [オーケストレートノード](/ja-jp/guides/workflow/orchestrate-node)
    * [ファイルアップロード](/ja-jp/guides/workflow/file-upload)
    * エラー処理

    * [追加機能](/ja-jp/guides/workflow/additional-feature)
    * プレビューとデバッグ

    * [アプリケーション公開](/ja-jp/guides/workflow/publish)
    * [JSON形式での出力](/ja-jp/guides/workflow/structured-outputs)
    * [変更のお知らせ：画像アップロードがファイルアップロードに統合されました](/ja-jp/guides/workflow/bulletin)
  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




ノードの説明

# 反復処理（イテレーション）

Copy page

### 

​

定義

配列に対して複数のステップを実行し、すべての結果を出力すること。

イテレーションステップはリスト中の各項目に対して同じステップを実行します。イテレーションを使用する条件は、入力値がリストオブジェクトとしてフォーマットされていることを確認することです。イテレーションノードは、AIワークフローにより複雑な処理ロジックを取り入れることを可能にします。イテレーションノードはループノードの親しみやすいバージョンであり、非技術ユーザーが迅速に始められるようにカスタマイズの程度を調整しています。

* * *

### 

​

シナリオ

#### 

​

**例1：長文イテレーション生成器**

长故事生成器

  1. **開始ノード** 内にタイトルとアウトラインを入力
  2. **コードノード** を使用してユーザー入力から完全な内容を抽出
  3. **パラメータ抽出ノード** を使用して完全な内容を配列形式に変換
  4. **イテレーションノード** でラップされた **LLM ノード** を通じて各章の内容を複数回生成
  5. イテレーションノード内に **直接応答ノード** を追加して、各イテレーション生成の後にストリーム出力を行う



**具体的な設定ステップ**

  1. **開始ノード** にタイトル（title）とアウトライン（outline）を設定；



開始ノードの設定

  2. **Jinja-2 テンプレートノード** を使用してタイトルとアウトラインを完全なテキストに変換；



テンプレートノード

  3. **パラメータ抽出ノード** を使用して、ストーリーテキストを配列（Array）構造に変換。抽出パラメータは `sections`、パラメータタイプは `Array[Object]`



パラメータ抽出

パラメータ抽出の効果はモデル推論能力と指示に影響されます。推論能力が高いモデルを使用し、**指示** 内に例を追加することでパラメータ抽出の効果を向上させることができます。

  4. ストーリーアウトラインの配列形式をイテレーションノードの入力として使用し、イテレーションノード内で **LLM ノード** を使用して処理



イテレーションノードの設定

LLM ノード内で入力変数 `GenerateOverallOutline/output` と `Iteration/item` を設定

LLMノードの設定

イテレーションの組み込み変数：`items[object]` と `index[number]`

`items[object]` は各イテレーションの入力項目を表します；

`index[number]` は現在のイテレーションのラウンドを表します；

  5. イテレーションノード内に **直接応答ノード** を設定して、各イテレーション生成の後にストリーム出力を実現。



Answerノードの設定

  6. 完全なデバッグとプレビュー



ストーリー章ごとの多段イテレーション生成

#### 

​

**例2：長文イテレーション生成器（別の編成方法）**

長文イテレーション生成器（別の編成方法）

  * **開始ノード** にタイトルとアウトラインを入力
  * **LLM ノード** を使用して小見出しと対応する内容を生成
  * **コードノード** を使用して完全な内容を配列形式に変換
  * **イテレーションノード** でラップされた **LLM ノード** を通じて各章の内容を複数回生成
  * **テンプレート変換ノード** を使用してイテレーションノードが出力する文字列配列を文字列に変換
  * 最後に **直接応答ノード** を追加して変換後の文字列を直接出力



### 

​

配列の内容とは

リストは特定のデータ型であり、要素はコンマで区切られ、 `[` で始まり `]` で終わります。例えば：

**数値型：**
    
    
    [0,1,2,3,4,5]

**文字列型：**
    
    
    ["monday", "Tuesday", "Wednesday", "Thursday"]

**JSON オブジェクト：**
    
    
    [
        {
            "name": "Alice",
            "age": 30,
            "email": "alice@example.com"
        },
        {
            "name": "Bob",
            "age": 25,
            "email": "bob@example.com"
        },
        {
            "name": "Charlie",
            "age": 35,
            "email": "charlie@example.com"
        }
    ]

* * *

### 

​

配列を返すノード

  * コードノード
  * パラメータ抽出
  * ナレッジベース検索
  * イテレーション
  * ツール
  * HTTPリクエスト



### 

​

配列形式の内容を取得する方法

**CODE ノードを使用して返す**

コードノード出力Array

**パラメータ抽出ノードを使用して返す**

パラメータ抽出ノード出力array

### 

​

配列をテキストに変換する方法

イテレーションノードの出力変数は配列形式であり、直接出力することはできません。配列をテキストに戻すための簡単なステップを実行することができます。

**コードノードを使用した変換**

コードノード変換

コード例：
    
    
    def main(articleSections: list):
        data = articleSections
        return {
            "result": "\n".join(data)
        }

**テンプレートノードを使用した変換**

テンプレートノード変換

コード例:
    
    
    {{ articleSections | join("\n") }}

* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/guides/workflow/node/iteration.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20t&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/guides/workflow/node%2Fiteration.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[変数代入](/ja-jp/guides/workflow/node/variable-assigner)[パラメータ抽出](/ja-jp/guides/workflow/node/parameter-extractor)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * 定義
  * シナリオ
  * 例1：長文イテレーション生成器
  * 例2：長文イテレーション生成器（別の編成方法）
  * 配列の内容とは
  * 配列を返すノード
  * 配列形式の内容を取得する方法
  * 配列をテキストに変換する方法



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/guides/workflow/node/knowledge-retrieval

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

ノードの説明

知識検索

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

    * [キーコンセプト](/ja-jp/guides/workflow/concepts)
    * [変数](/ja-jp/guides/workflow/variables)
    * ノードの説明

      * [開始](/ja-jp/guides/workflow/node/start)
      * [終了](/ja-jp/guides/workflow/node/end)
      * [回答](/ja-jp/guides/workflow/node/answer)
      * [LLM](/ja-jp/guides/workflow/node/llm)
      * [知識検索](/ja-jp/guides/workflow/node/knowledge-retrieval)
      * [質問分類](/ja-jp/guides/workflow/node/question-classifier)
      * [条件分岐](/ja-jp/guides/workflow/node/ifelse)
      * [コード](/ja-jp/guides/workflow/node/code)
      * [テンプレート](/ja-jp/guides/workflow/node/template)
      * [テキスト抽出ツール](/ja-jp/guides/workflow/node/doc-extractor)
      * [リスト処理](/ja-jp/guides/workflow/node/list-operator)
      * [変数集約](/ja-jp/guides/workflow/node/variable-aggregator)
      * [変数代入](/ja-jp/guides/workflow/node/variable-assigner)
      * [反復処理（イテレーション）](/ja-jp/guides/workflow/node/iteration)
      * [パラメータ抽出](/ja-jp/guides/workflow/node/parameter-extractor)
      * [HTTPリクエスト](/ja-jp/guides/workflow/node/http-request)
      * [エージェント](/ja-jp/guides/workflow/node/agent)
      * [ツール](/ja-jp/guides/workflow/node/tools)
      * [ループ処理（繰り返し処理）](/ja-jp/guides/workflow/node/loop)
    * [ショートカットキー](/ja-jp/guides/workflow/shortcut-key)
    * [オーケストレートノード](/ja-jp/guides/workflow/orchestrate-node)
    * [ファイルアップロード](/ja-jp/guides/workflow/file-upload)
    * エラー処理

    * [追加機能](/ja-jp/guides/workflow/additional-feature)
    * プレビューとデバッグ

    * [アプリケーション公開](/ja-jp/guides/workflow/publish)
    * [JSON形式での出力](/ja-jp/guides/workflow/structured-outputs)
    * [変更のお知らせ：画像アップロードがファイルアップロードに統合されました](/ja-jp/guides/workflow/bulletin)
  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




ノードの説明

# 知識検索

Copy page

### 

​

定義

ナレッジベースからユーザーの質問に関連するテキスト内容を検索し、それを下流のLLMノードのコンテキストとして使用することができます。

* * *

### 

​

シナリオ

一般的なシナリオ：外部データ/ナレッジに基づくAI質問応答システム（RAG）を構築。RAGの[基本概念](/ja-jp/learn-more/extended-reading/retrieval-augment/README)についてもっと知る。

下図は最も基本的なナレッジベース質問応答アプリケーションの例です。このプロセスの実行ロジックは、ユーザーの質問がLLMノードに渡される前に、ナレッジ検索ノードでユーザーの質問に最も関連するテキスト内容を検索し、召喚することです。その後、LLMノード内でユーザーの質問と検索されたコンテキストを一緒に入力し、LLMが検索内容に基づいて質問に答えるようにします。

ナレッジベース質問応答アプリケーションの例

* * *

### 

​

設定方法

**設定プロセス：**

  1. クエリ変数を選択し、ナレッジベース内の関連するテキストセグメントを検索するための入力として使用します。一般的な対話型アプリケーションでは、開始ノードの`sys.query`をクエリ変数として使用します。ナレッジ ベースが受け入れることができる最大クエリ コンテンツは 200 文字です。
  2. 検索するナレッジベースを選択します。オプションとして選択可能なナレッジベースは、Difyナレッジベース内で事前に[作成](/ja-jp/guides/knowledge-base/create-knowledge-and-upload-documents/chunking-and-cleaning-text)する必要があります。
  3. [リコールモード](/ja-jp/learn-more/extended-reading/retrieval-augment/retrieval)と[ナレッジベース設定](/ja-jp/guides/knowledge-base/knowledge-and-documents-maintenance/introduction)を設定します。
  4. 下流ノードを接続し設定します。一般的にはLLMノードです。



ナレッジ検索の設定

**出力変数**

出力変数

ナレッジ検索の出力変数`result`は、ナレッジベースから検索された関連テキストセグメントです。この変数のデータ構造には、セグメント内容、タイトル、リンク、アイコン、メタデータ情報が含まれています。

**下流ノードの設定**

一般的な対話型アプリケーションでは、ナレッジベース検索の下流ノードは通常LLMノードであり、ナレッジ検索の**出力変数**`result`はLLMノード内の**コンテキスト変数** に関連付けられて設定されます。関連付け後、プロンプトの適切な位置に**コンテキスト変数** を挿入することができます。

コンテキスト変数は、LLMノード内で定義された特殊な変数タイプで、プロンプト内に外部検索されたテキスト内容を挿入するために使用されます。

ユーザーが質問すると、関連するテキストがナレッジ検索で召喚された場合、そのテキスト内容がコンテキスト変数の値としてプロンプトに挿入され、LLMが質問に答えます。関連するテキストが検索されなかった場合、コンテキスト変数の値は空となり、LLMは直接ユーザーの質問に答えます。

下流LLMノードの設定

この変数は、LLMが質問に答える際のプロンプトコンテキストとして外部ナレッジの参照に使用されるだけでなく、そのデータ構造にセグメントの引用情報が含まれているため、アプリケーション側の[**引用と帰属**](/ja-jp/guides/knowledge-base/retrieval-test-and-citation)機能もサポートします。

* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/guides/workflow/node/knowledge-retrieval.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20edge-retrie&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/guides/workflow/node%2Fknowledge-retrieval.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[LLM](/ja-jp/guides/workflow/node/llm)[質問分類](/ja-jp/guides/workflow/node/question-classifier)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * 定義
  * シナリオ
  * 設定方法



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/guides/workflow/node/list-operator

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

ノードの説明

リスト処理

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

    * [キーコンセプト](/ja-jp/guides/workflow/concepts)
    * [変数](/ja-jp/guides/workflow/variables)
    * ノードの説明

      * [開始](/ja-jp/guides/workflow/node/start)
      * [終了](/ja-jp/guides/workflow/node/end)
      * [回答](/ja-jp/guides/workflow/node/answer)
      * [LLM](/ja-jp/guides/workflow/node/llm)
      * [知識検索](/ja-jp/guides/workflow/node/knowledge-retrieval)
      * [質問分類](/ja-jp/guides/workflow/node/question-classifier)
      * [条件分岐](/ja-jp/guides/workflow/node/ifelse)
      * [コード](/ja-jp/guides/workflow/node/code)
      * [テンプレート](/ja-jp/guides/workflow/node/template)
      * [テキスト抽出ツール](/ja-jp/guides/workflow/node/doc-extractor)
      * [リスト処理](/ja-jp/guides/workflow/node/list-operator)
      * [変数集約](/ja-jp/guides/workflow/node/variable-aggregator)
      * [変数代入](/ja-jp/guides/workflow/node/variable-assigner)
      * [反復処理（イテレーション）](/ja-jp/guides/workflow/node/iteration)
      * [パラメータ抽出](/ja-jp/guides/workflow/node/parameter-extractor)
      * [HTTPリクエスト](/ja-jp/guides/workflow/node/http-request)
      * [エージェント](/ja-jp/guides/workflow/node/agent)
      * [ツール](/ja-jp/guides/workflow/node/tools)
      * [ループ処理（繰り返し処理）](/ja-jp/guides/workflow/node/loop)
    * [ショートカットキー](/ja-jp/guides/workflow/shortcut-key)
    * [オーケストレートノード](/ja-jp/guides/workflow/orchestrate-node)
    * [ファイルアップロード](/ja-jp/guides/workflow/file-upload)
    * エラー処理

    * [追加機能](/ja-jp/guides/workflow/additional-feature)
    * プレビューとデバッグ

    * [アプリケーション公開](/ja-jp/guides/workflow/publish)
    * [JSON形式での出力](/ja-jp/guides/workflow/structured-outputs)
    * [変更のお知らせ：画像アップロードがファイルアップロードに統合されました](/ja-jp/guides/workflow/bulletin)
  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




ノードの説明

# リスト処理

Copy page

リスト変数は、文章、画像、音声、映像など、さまざまなファイルを同時にアップロードすることができます。ユーザーがファイルをアップロードすると、すべてのファイルが同じ `Array[File]` 配列変数に保存されますが、**その後の個別ファイルの処理が難しくなります。**

> `Array` データ型は、変数の実際の値が [1.mp3、2.png、3.doc] である可能性があることを意味します。LLM は、入力変数として画像やテキストなどの単一の値の読み取りのみをサポートしており、配列変数を直接読み取ることはできません。

### 

​

ノード機能

リストフィルタは、ファイルの形式のタイプ、名、サイズなどの属性に基づいてフィルターして抽出し、異なる形式のファイルをそれぞれの処理ノードに渡すことで、ファイル処理の流れを正確に制御します。

例えば、あるアプリでは、ユーザーが文章と画像を同時にアップロードすることを許可しています。異なるファイルは**リスト操作ノード** を通じて分類され、異なる処理フローに引き渡されます。

異なるファイルタイプのフロー分岐

リスト操作ノードは通常、配列変数から情報を抽出するために使用され、条件を設定して、下流ノードが受け入れることのできる変数タイプに変換します。その構造は、入力変数、フィルタ条件、ソート、上位 N 項目、および出力変数に分かれています。

リスト操作ノード

#### 

​

入力変数

リスト操作ノードは以下のデータ構造変数のみを受け入れます：

  * Array[string]
  * Array[number]
  * Array[file]



#### 

​

フィルタ条件

入力変数の配列を処理し、フィルタ条件を追加します。条件に合致するすべての配列変数を選択し、その属性をフィルタリングします。

例：ファイルにはファイル名、ファイルタイプ、ファイルサイズなど、複数の属性が含まれる可能性があります。フィルタ条件では、特定のファイルを配列変数から選択し抽出するための条件を設定します。

以下の変数を抽出できます：

  * type：ファイルのタイプ（画像、文章、音声、映像など）

  * size：ファイルサイズ

  * name：ファイル名

  * url：ユーザーがURL経由でアップロードしたファイルを指し、完全なURLを入力してフィルタリングできます。

  * extension：ファイルの拡張子

  * mime_type：

[MIMEタイプ](https://datatracker.ietf.org/doc/html/rfc2046)は、ファイルのコンテンツタイプを識別するための標準化された文字列です。例: “text/html” はHTMLドキュメントを示します。

  * transfer_method：

ファイルのアップロード方法（ローカルアップロードまたはURL経由でのアップロード）を示します。




#### 

​

ソート

入力変数の配列をファイルの属性に基づいて並べ替える機能を提供します。

  * 昇順ソート：

デフォルトの並べ替えオプションで、値が小さい順に並べ替えます。文字やテキストの場合はアルファベット順（A - Z）に並べ替えます。

  * 降順ソート：

値が大きい順に並べ替えます。文字やテキストの場合は逆アルファベット順（Z - A）に並べ替えます。




このオプションは通常、出力変数の first_record および last_record と組み合わせて使用されます。

#### 

​

上位 N 項目

1から20の値を選択し、配列変数の上位 n 項目を選択します。

#### 

​

出力変数

すべてのフィルタ条件を満たす配列要素。フィルタ条件、ソート、制限は個別に有効にできます。すべての条件を同時に有効にした場合、すべての条件を満たす配列要素が返されます。

  * Result：フィルタリング結果で、データ型は配列変数です。配列に1つのファイルしか含まれていない場合、出力変数には1つの要素のみが含まれます。
  * first_record：フィルタリングされた配列の最初の要素、すなわち result[0]；
  * last_record：フィルタリングされた配列の最後の要素、すなわち result[array.length-1]。



* * *

### 

​

設定例

ファイルのインタラクティブな質疑応答シナリオでは、アプリのユーザーが文章や画像ファイルを同時にアップロードする可能性があります。LLMは画像ファイルを認識できる能力しか持たず、文章を読み取ることができません。その場合、[リスト操作](/ja-jp/guides/workflow/nodes/list-operator)ノードを使用して、ファイル変数の配列を事前処理し、異なるファイルタイプをそれぞれの処理ノードに送信する必要があります。手順は以下の通りです：

  1. [機能](/en/guides/workflow/additional-features)を有効にし、ファイルタイプで「画像」および「文章」を選択します。
  2. フィルタ条件で、画像変数とドキュメント変数をそれぞれ抽出するための2つのリスト操作ノードを追加します。
  3. 文章変数を抽出し、「ドキュメントエクストラクタ」ノードに渡し、画像ファイル変数を抽出してLLMノードに渡します。
  4. 最後に「直接返信」ノードを追加し、LLMノードの出力変数を記入します。



アプリのユーザーが文章と画像ファイルを同時にアップロードした場合、文章は自動的にドキュメントエクストラクタノードに、画像ファイルは自動的にLLMノードに分流され、混合ファイルの共通処理が実現されます。

* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/guides/workflow/node/list-operator.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20opera&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/guides/workflow/node%2Flist-operator.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[テキスト抽出ツール](/ja-jp/guides/workflow/node/doc-extractor)[変数集約](/ja-jp/guides/workflow/node/variable-aggregator)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * ノード機能
  * 入力変数
  * フィルタ条件
  * ソート
  * 上位 N 項目
  * 出力変数
  * 設定例



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/guides/workflow/node/llm

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

ノードの説明

LLM

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

    * [キーコンセプト](/ja-jp/guides/workflow/concepts)
    * [変数](/ja-jp/guides/workflow/variables)
    * ノードの説明

      * [開始](/ja-jp/guides/workflow/node/start)
      * [終了](/ja-jp/guides/workflow/node/end)
      * [回答](/ja-jp/guides/workflow/node/answer)
      * [LLM](/ja-jp/guides/workflow/node/llm)
      * [知識検索](/ja-jp/guides/workflow/node/knowledge-retrieval)
      * [質問分類](/ja-jp/guides/workflow/node/question-classifier)
      * [条件分岐](/ja-jp/guides/workflow/node/ifelse)
      * [コード](/ja-jp/guides/workflow/node/code)
      * [テンプレート](/ja-jp/guides/workflow/node/template)
      * [テキスト抽出ツール](/ja-jp/guides/workflow/node/doc-extractor)
      * [リスト処理](/ja-jp/guides/workflow/node/list-operator)
      * [変数集約](/ja-jp/guides/workflow/node/variable-aggregator)
      * [変数代入](/ja-jp/guides/workflow/node/variable-assigner)
      * [反復処理（イテレーション）](/ja-jp/guides/workflow/node/iteration)
      * [パラメータ抽出](/ja-jp/guides/workflow/node/parameter-extractor)
      * [HTTPリクエスト](/ja-jp/guides/workflow/node/http-request)
      * [エージェント](/ja-jp/guides/workflow/node/agent)
      * [ツール](/ja-jp/guides/workflow/node/tools)
      * [ループ処理（繰り返し処理）](/ja-jp/guides/workflow/node/loop)
    * [ショートカットキー](/ja-jp/guides/workflow/shortcut-key)
    * [オーケストレートノード](/ja-jp/guides/workflow/orchestrate-node)
    * [ファイルアップロード](/ja-jp/guides/workflow/file-upload)
    * エラー処理

    * [追加機能](/ja-jp/guides/workflow/additional-feature)
    * プレビューとデバッグ

    * [アプリケーション公開](/ja-jp/guides/workflow/publish)
    * [JSON形式での出力](/ja-jp/guides/workflow/structured-outputs)
    * [変更のお知らせ：画像アップロードがファイルアップロードに統合されました](/ja-jp/guides/workflow/bulletin)
  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




ノードの説明

# LLM

Copy page

### 

​

定義

大規模言語モデルを活用して質問に回答したり、自然言語を処理したりします。

LLMノード

* * *

### 

​

シナリオ

LLM は チャットフロー/ワークフロー の中心的なノードであり、大規模言語モデルの会話/生成/分類/処理などの能力を活用して、多様なタスクを提示されたプロンプトに基づいて処理し、ワークフローのさまざまな段階で使用することができます。

  * **意図識別** ：カスタマーサービスの対話シナリオにおいて、ユーザーの質問を意図識別および分類し、異なるフローに誘導します。
  * **テキスト生成** ：記事生成シナリオにおいて、テーマやキーワードに基づいて適切なテキスト内容を生成するノードとして機能します。
  * **内容分類** ：メールのバッチ処理シナリオにおいて、メールの種類を自動的に分類します（例：問い合わせ/苦情/スパム）。
  * **テキスト変換** ：テキスト翻訳シナリオにおいて、ユーザーが提供したテキスト内容を指定された言語に翻訳します。
  * **コード生成** ：プログラミング支援シナリオにおいて、ユーザーの要求に基づいて指定のビジネスコードやテストケースを生成します。
  * **RAG** ：ナレッジベースの質問応答シナリオにおいて、検索した関連知識とユーザーの質問を再構成して回答します。
  * **画像理解** ：ビジョン能力を持つマルチモーダルモデルを使用し、画像内の情報を理解して質問に回答します。



適切なモデルを選択し、プロンプトを記述することで、チャットフロー/ワークフロー で強力で信頼性の高いソリューションを構築できます。

* * *

### 

​

設定方法

エディットページで、前のノードの末尾を右クリックするか、+ボタンを軽くタップして新しいノードを追加し、LLM（大規模言語モデル）を選択します。

LLM ノード設定 - モデル選択

**設定手順：**

  1. **モデルの選択** ：Difyでは、OpenAIのGPTシリーズ、AnthropicのClaudeシリーズ、GoogleのGeminiシリーズなど、世界中で広く使用されているさまざまなモデルを[サポート](/ja-jp/getting-started/readme/model-providers)しています。モデルの選択は、推論能力、コスト、応答速度、コンテキストウィンドウのサイズなどの要因に基づいて行います。使用するシーンやタスクの種類に応じて、適切なモデルを選ぶことが重要です。



Difyを初めて使用する場合は、LLMノードでモデルを選択する前に、**システム設定 - モデルプロバイダ** で[モデルの設定](/ja-jp/guides/model-configuration/readme)を事前に行う必要があります。

  2. **モデルパラメータの設定** ：モデルパラメータは、生成される結果を調整するために使用されます。これには、温度、TopP、最大トークン数、応答形式などが含まれます。選択肢を簡素化するために、3つの事前設定されたパラメータ（クリエイティブ、バランス、精密）が用意されています。これらのパラメータに不慣れな場合は、デフォルト設定を選択することをお勧めします。画像解析機能を利用したい場合は、視覚能力を持つモデルを選んでください。
  3. **コンテキストの入力（オプション）** ：コンテキストとは、LLMに提供される背景情報のことを指します。通常は、[知識検索](./knowledge-retrieval)の出力変数を記入するために使用されます。
  4. **プロンプトの作成** ：LLMノードには使いやすいプロンプト編集ページがあり、チャットモデルまたはコンプリートモデルを選択することで異なるプロンプト編集構造が表示されます。チャットモデル（Chat model）を選択した場合、システムプロンプト（SYSTEM）、ユーザー（USER）、アシスタント（ASSISTANT）の3つのセクションをカスタマイズできます。



プロンプトの作成

システムプロンプト（SYSTEM）を作成する際にアイデアが浮かばない場合は、プロンプトジェネレーター機能を使用して、実際のビジネスシナリオに適したプロンプトを迅速に生成することができます。

プロンプトジェネレーター

プロンプトエディターでは、**“/”** を入力することで **変数挿入メニュー** を呼び出し、**特殊変数ブロック** や **上流ノードの変数** をプロンプトに挿入してコンテキスト内容として使用できます。

変数挿入メニューを呼び出す

  5. **上級的な設定** ：メモリ機能をオンにしたり、メモリウィンドウを設定したり、ビジョン機能を有効にしたり、Jinja-2テンプレート言語を使ってより複雑なプロンプトを作成したりできます。



* * *

### 

​

**特殊変数の説明**

**コンテキスト変数**

コンテキスト変数とは、言語モデル（LLM）に背景情報を提供するための特別な変数の一種で、特に知識検索のシナリオでよく利用されます。詳細については、[知識検索ノード](/ja-jp/guides/workflow/nodes/knowledge-retrieval)を参照してください。

**画像ファイル変数**

視覚機能を備えた言語モデル（LLM）は、アプリケーションユーザーがアップロードした画像をこの変数を通じて読み取ることができます。VISION機能を有効にした後、画像ファイルの出力変数を選択して設定を完了させてください。

ビジョンアップロード機能

**会話履歴**

テキスト補完モデル（例：gpt-3.5-turbo-Instruct）内でチャット型アプリケーションの対話記憶を実現するために、Dify は元の[プロンプト専門モード（廃止）](/zh-hans/learn-more/extended-reading/prompt-engineering)内で会話履歴変数を設計しました。この変数はチャットフローのLLMノード内でも使用され、プロンプト内に AI とユーザーの対話履歴を挿入して、LLM が対話の文脈を理解するのを助けます。

会話履歴変数の使用は広範ではなく、チャットフロー内でテキスト補完モデルを選択した場合にのみ使用できます。

会話履歴変数の挿入

**モデルパラメーター**

モデルのパラメータはモデルの出力に影響を与えます。異なるモデルには異なるパラメータがあります。以下の図は`gpt-4`のパラメータリストです。

モデルパラメータリスト

主要なパラメータ用語は以下のように説明されています：

  * **Temperature(温度)** : 通常は0-1の値で、ランダム性を制御します。温度が0に近いほど、結果はより確定的で繰り返しになり、温度が1に近いほど、結果はよりランダムになります。
  * **Top P** : 結果の多様性を制御します。モデルは確率に基づいて候補語から選択し、累積確率が設定された閾値Pを超えないようにします。
  * **Presence Penalty(存在ペナルティ)** : 既に生成された内容にペナルティを課すことにより、同じエンティティや情報の繰り返し生成を減少させるために使用されます。パラメータ値が増加するにつれて、既に生成された内容に対して後続の生成でより大きなペナルティが課され、内容の繰り返しの可能性が低くなります。
  * **Frequency Penalty(頻度ペナルティ)** : 頻繁に出現する単語やフレーズにペナルティを課し、これらの単語の生成確率を低下させます。パラメータ値が増加すると、頻繁に出現する単語やフレーズにより大きなペナルティが課されます。パラメータ値が高いほど、これらの単語の出現頻度が減少し、テキストの語彙の多様性が増加します。



これらのパラメータが何であるか理解できない場合は、プリセットを読み込んで、「クリエイティブ」、「バランス」、「正確」の3つのプリセットから選択することができます。

加载预设参数

* * *

### 

​

高級機能

**記憶** ：記憶をオンにすると、問題分類器の各入力に対話履歴が含まれ、LLM が文脈を理解しやすくなり、対話の理解能力が向上します。

**記憶ウィンドウ** ：記憶ウィンドウが閉じている場合、システムはモデルのコンテキストウィンドウに基づいて対話履歴の伝達数を動的にフィルタリングします。開いている場合、ユーザーは対話履歴の伝達数を正確に制御できます（対数）。

**対話役割名の設定** ：モデルのトレーニング段階の違いにより、異なるモデルは役割名のプロンプト遵守度が異なります（例：Human/Assistant、Human/AI、人間/助手など）。複数のモデルに対応するために、システムは対話役割名の設定を提供しており、対話役割名を変更すると会話履歴の役割プレフィックスも変更されます。

**Jinja-2 テンプレート** ：LLM のプロンプトエディター内で Jinja-2 テンプレート言語をサポートしており、Jinja2 の強力な Python テンプレート言語を使用して軽量なデータ変換やロジック処理を実現できます。詳細は[公式ドキュメント](https://jinja.palletsprojects.com/en/3.1.x/templates/)を参照してください。

**失敗後の再試行** ：ノードで起きる例外的な状況の中には、そのノードをもう一度試すだけで対応できるものがあります。エラーが発生した際に自動的に再試行をする機能が有効になっていれば、事前に設定された方針に従って再試行が行われます。再試行の最大回数や再試行間の時間を調整することで、再試行の方針を設定することが可能です。

  * 再試行は最大で10回まで可能です
  * 再試行の間隔は最長で5秒まで設定できます



**エラー処理** ：異なるエラー対応戦略を提供し、現在のノードが失敗してもメインプロセスを止めずにエラー通知を行うか、バックアップ経路を使ってタスクを継続できるようにします。詳細は、[エラー処理](../error-handling/README)をご覧ください。

**構造化された出力** : LLM が返すデータ形式の可用性、安定性、予測可能性を高め、エラー処理や形式変換の手間を削減します。

JSONスキーマエディタ

LLMノードのJSONスキーマエディタを使用すると、LLM が返すデータ構造を定義し、出力の解析性、再利用性、制御性を保証できます。ビジュアル編集モードによる直感的な編集、コード編集モードによる詳細な調整により、様々な複雑度のニーズに対応できます。

ノードレベルの機能であるJSONスキーマは、すべてのモデルの構造化出力の定義と制約に利用できます。

  * 構造化出力をネイティブでサポートするモデル: JSONスキーマを使用して構造化変数を直接定義できます。

  * 構造化出力をサポートしていないモデル: システムはJSONスキーマをプロンプトとして使用します。構造に基づいたコンテンツ生成をモデルに促せますが、出力の正しい解析は保証されません。




**JSONスキーマエディタの開き方**

LLMノードの出力変数をクリックし、構造化スイッチの設定を開くと、JSONスキーマエディタが表示されます。JSONスキーマエディタはビジュアル編集ウィンドウとコード編集ウィンドウを備え、シームレスに切り替えられます。

 _**ビジュアル編集**_

**使用シーン**

  * ネスト構造を含まない、いくつかの単純なフィールドを定義する場合。

  * JSONスキーマの構文に慣れていない場合、コードを書かずに、直感的なインターフェースでドラッグアンドドロップしてフィールドを追加できます。

  * フィールド構造を素早く繰り返し変更したい場合。JSONコードを毎回変更する必要はありません。




**フィールドの追加**

構造化出力枠内でフィールドを追加ボタンをクリックし、フィールドのパラメータを設定します。

  * *（必須）*フィールド名

  * *（必須）*フィールドタイプ: string、number、object、arrayなどのフィールドタイプをサポートしています。

> オブジェクトまたは配列フィールドには、子フィールドを追加できます。

  * 説明: LLMがフィールドの意味を理解し、出力精度を向上させます。

  * 必須: オンにすると、LLMはこのフィールド値を必ず返します。

  * 列挙型: フィールド値の選択範囲を制限するために使用します。モデルは、あらかじめ設定された列挙値のみを返します。たとえば、`red`、`green`、`blue` のみを許可する場合は、次のようになります。



    
    
    {
      "type": "string",
      "enum": ["red", "green", "blue"]
    }

> このルールでは、入力値は `red`、`green`、`blue` のいずれかでなければなりません。

**フィールドの編集・削除**

  * フィールドの編集：フィールドカードにマウスオーバーして、「編集」アイコンをクリックし、フィールドのタイプ、説明、デフォルト値などの項目を変更します。

  * フィールドの削除：フィールドカードにマウスオーバーして、「削除」アイコンをクリックすると、フィールドがリストから削除されます。

> オブジェクトまたは配列フィールドを削除すると、そのすべての子フィールドも削除されます。




**JSONデータのインポート**

  1. 「JSONをインポート」ボタンをクリックし、表示されるダイアログボックスにJSONデータを貼り付けるか、アップロードします。例（JSONデータ）：


    
    
    {
     "comment": "This is great!",
     "rating": 5
    }

  2. 「送信」ボタンをクリックすると、システムがJSONデータを自動的に解析し、JSONスキーマに変換します。



**AIでJSONスキーマを生成する**

  1. 「AI生成」アイコンをクリックし、モデル（GPT-4など）を選択します。入力ボックスにJSONスキーマの説明を入力します。例：



> 「ユーザー名、年齢、および趣味を含むJSONスキーマが必要です。」

  2. 「生成」をクリックすると、システムが自動的にJSONスキーマを生成します。


    
    
    {
      "type": "object",
      "properties": {
        "username": {
          "type": "string"
        },
        "age": {
          "type": "number"
        },
        "interests": {
          "type": "array",
          "items": {
            "type": "string"
          }
        }
      },
      "required": [
        "username",
        "age",
        "interests"
      ]
    }

_**コードエディタ**_

**使用シーン**

  * 複雑なデータ構造で、ネストされたオブジェクトや配列をサポートする必要がある場合（例：注文詳細、商品一覧など）。

  * 既存のJSONスキーマ（または API レスポンス例）を直接貼り付けて手動で調整したい場合。

  * `pattern`（正規表現）や `oneOf`（複数タイプ）などの高度なスキーマ機能を使用したい場合。

  * LLMで作成したスキーマを元に、フィールドのタイプや構造をビジネスニーズに合わせて変更したい場合。




**フィールドの追加**

  1. コードエディタを開きます。

  2. 「フィールドを追加」をクリックし、フィールドを入力します。例：



    
    
    {
      "name": "username",
      "type": "string",
      "description": "user's name",
      "required": true
    }

  3. 「保存」をクリックすると、システムがJSONスキーマを自動的に検証し、保存します。



**フィールドの編集・削除** ：JSONコードボックスで、フィールドのタイプ、説明、デフォルト値などの項目を直接編集・削除し、「保存」をクリックします。

**JSONデータのインポート**

  1. 「JSONをインポート」ボタンをクリックし、表示されるダイアログボックスにJSONデータを貼り付けるか、アップロードします。例（JSONデータ）：


    
    
    {
     "comment": "This is great!",
     "rating": 5
    }

  2. 「送信」ボタンをクリックすると、システムがJSONデータを自動的に解析し、JSONスキーマに変換します。



**AIでJSONスキーマを生成する**

  1. 「AI生成」アイコンをクリックし、モデル（GPT-4など）を選択します。入力ボックスにJSONスキーマの説明を入力します。例：



> 「ユーザー名、年齢、および趣味を含むJSONスキーマが必要です。」

  2. 「生成」をクリックすると、システムが自動的にJSONスキーマを生成します。


    
    
    {
      "type": "object",
      "properties": {
        "username": {
          "type": "string"
        },
        "age": {
          "type": "number"
        },
        "interests": {
          "type": "array",
          "items": {
            "type": "string"
          }
        }
      },
      "required": [
        "username",
        "age",
        "interests"
      ]
    }

* * *

### 

​

活用事例

  * **ナレッジベースの内容を検索する**



ワークフローアプリケーションが[「ナレッジベース」](../../knowledge-base/)の内容を検索できるようにしたい場合、例えばインテリジェントカスタマーサービスアプリケーションを構築する場合は、以下の手順を参考にしてください。

  1. LLMノードの上流に知識検索ノードを追加します；
  2. 知識検索ノードの **出力変数** `result` をLLMノードの **コンテキスト変数** に入力します；
  3. **コンテキスト変数** をアプリケーションのプロンプトに挿入し、LLMがナレッジベース内のテキスト内容を読み取れるようにします。



![コンテキスト変数](../../../../en/.gitbook/assets/image (135).png)

[知識検索ノード](knowledge-retrieval) の出力変数 `result` には引用情報も含まれており、[**引用と帰属**](../../knowledge-base/retrieval-test-and-citation.md#id-2-yin-yong-yu-gui-shu) 機能を使用して情報の出所を確認できます。

通常のノードの変数もコンテキスト変数に入力可能ですが、例えば開始ノードの文字列型変数など、**引用と帰属** 機能は機能しません。

  * **ドキュメントファイルの取り込み**



ワークフローアプリケーションでドキュメントの内容を取り込むことを可能にする場合、例えばChatPDFアプリケーションを開発する際には、以下の手順を踏んでください：

  * 「スタート」ノードへファイル変数を設定する；
  * LLMノードの前段階にドキュメント抽出ノードを設置し、ファイル変数を入力として利用する；
  * 抽出ノードからの**出力変数** `text` をLLMノードへの入力プロンプトとして設定する。



さらなる情報は、[ファイルアップロード](../file-upload)を参照してください。

![入力システムプロンプト](../../../.gitbook/assets/image (137).png)

  * **エラー処理**



情報処理中に、LLMノードでは入力テキストがトークンの制限を超えたり、必要なパラメータが欠けているなどのエラーに遭遇することがあります。開発者は以下の手順に従い、エラー処理の枝を設定してノードエラーが発生した際の対処方針を構築することで、フローの中断を避けることができます：

  1. LLMノードで「エラー処理」を有効化する
  2. エラー処理戦略を選択して設定する



エラー処理の詳細は、[エラー処理](https://docs.dify.ai/guides/workflow/error-handling)をご覧ください。

  * **構造化出力**



以下の動画を通じて、構造化出力機能を使用して顧客情報を収集する方法を理解することができます：

* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/guides/workflow/node/llm.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/guides/workflow/node%2Fllm.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[回答](/ja-jp/guides/workflow/node/answer)[知識検索](/ja-jp/guides/workflow/node/knowledge-retrieval)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * 定義
  * シナリオ
  * 設定方法
  * 特殊変数の説明
  * 高級機能
  * 活用事例



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/guides/workflow/node/loop

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

ノードの説明

ループ処理（繰り返し処理）

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

    * [キーコンセプト](/ja-jp/guides/workflow/concepts)
    * [変数](/ja-jp/guides/workflow/variables)
    * ノードの説明

      * [開始](/ja-jp/guides/workflow/node/start)
      * [終了](/ja-jp/guides/workflow/node/end)
      * [回答](/ja-jp/guides/workflow/node/answer)
      * [LLM](/ja-jp/guides/workflow/node/llm)
      * [知識検索](/ja-jp/guides/workflow/node/knowledge-retrieval)
      * [質問分類](/ja-jp/guides/workflow/node/question-classifier)
      * [条件分岐](/ja-jp/guides/workflow/node/ifelse)
      * [コード](/ja-jp/guides/workflow/node/code)
      * [テンプレート](/ja-jp/guides/workflow/node/template)
      * [テキスト抽出ツール](/ja-jp/guides/workflow/node/doc-extractor)
      * [リスト処理](/ja-jp/guides/workflow/node/list-operator)
      * [変数集約](/ja-jp/guides/workflow/node/variable-aggregator)
      * [変数代入](/ja-jp/guides/workflow/node/variable-assigner)
      * [反復処理（イテレーション）](/ja-jp/guides/workflow/node/iteration)
      * [パラメータ抽出](/ja-jp/guides/workflow/node/parameter-extractor)
      * [HTTPリクエスト](/ja-jp/guides/workflow/node/http-request)
      * [エージェント](/ja-jp/guides/workflow/node/agent)
      * [ツール](/ja-jp/guides/workflow/node/tools)
      * [ループ処理（繰り返し処理）](/ja-jp/guides/workflow/node/loop)
    * [ショートカットキー](/ja-jp/guides/workflow/shortcut-key)
    * [オーケストレートノード](/ja-jp/guides/workflow/orchestrate-node)
    * [ファイルアップロード](/ja-jp/guides/workflow/file-upload)
    * エラー処理

    * [追加機能](/ja-jp/guides/workflow/additional-feature)
    * プレビューとデバッグ

    * [アプリケーション公開](/ja-jp/guides/workflow/publish)
    * [JSON形式での出力](/ja-jp/guides/workflow/structured-outputs)
    * [変更のお知らせ：画像アップロードがファイルアップロードに統合されました](/ja-jp/guides/workflow/bulletin)
  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




ノードの説明

# ループ処理（繰り返し処理）

Copy page

## 

​

概要

ループノード（繰り返し処理）は、前回の結果に依存する反復タスクを実行し、終了条件を満たすか最大繰り返し回数に達するまで継続します。

## 

​

繰り返し処理ノードと反復処理ノードの違い

タイプ| 特徴| 用途  
---|---|---  
**ループ（繰り返し処理）**|  各回の処理が前回の結果に依存する。| 前回の計算結果を必要とする処理に適している。  
**反復処理（イテレーション）**|  各回の処理は独立しており、前回の結果に依存しない。| データの一括処理など、各処理を独立して実行できるタスクに適している。  
  
## 

​

ループ（繰り返し処理）ノードの設定方法

パラメータ| 説明| 例  
---|---|---  
ループ終了条件| ループを終了するタイミングを決定する式| `x < 50`、`error_rate < 0.01`  
最大ループ回数| 無限ループを防ぐための繰り返し回数の上限| 10、100、1000  
ループ変数| 反復ごとにデータが受け渡され、ループ終了後も後続ノードで利用可能です。| 変数 `x < 50` はループごとに1ずつ増加し、ループ内では `x < 50` の値に基づいて計算を実行できます。ループ終了後、`x < 50` の最終値は後続の処理で利用可能です。  
ループ終了ノード| ループ内でこのノードに到達すると、ループが終了します。| 終了条件に関係なく、最大10回ループします。  
  
**ループ終了ノード** と**ループ終了条件** はどちらもループの終了トリガーとして機能し、いずれかの条件が満たされるとループは早期に終了します。

終了条件が設定されていない場合、ループは**最大ループ回数** に達するまで継続して実行されます（`while (true)`と同等です）。

## 

​

サンプル1：ループノードの使い方

**要件：1〜100の乱数を生成し、乱数が50未満になったら停止します。**

**実装手順：**

  1. **ループ** ノードで、**ループ終了条件** を**テンプレートノード** の出力が`done`になるように設定します。

  2. **コード実行ノード** を使用して、`1〜100`の乱数を生成します。

  3. **条件分岐ノード** を使用して、乱数が`50`より大きいかどうかを判断します。



  * 50以上の場合、`現在の数字`を出力し、ループを継続して新しい乱数を生成します。

  * 50未満の場合、`最終出力数字`を出力し、**テンプレートノード** を経由して`done`を出力し、ループを終了します。



  4. 乱数が`50`未満になると、ループは自動的に停止します。



## 

​

サンプル2：ループ変数とループ終了ノードの使い方

**要件：ループワークフローを使用して詩を生成し、段階的に書き直し、各出力は前のループの結果に基づきます。ループは4回実行された後に自動的に停止します。**

**実装手順：**

  1. **ループ** ノードで、各イテレーションでデータを渡すために使用する **ループ変数** を設定します。


  * num（ループ回数）：初期値は0で、ループごとに+1されます。

  * verse（詩の内容）：初期値は `I haven't started creating yet` で、後続の各ループで更新されます。



  2. **条件分岐ノード** を使用して、ループ回数が`3`より大きいかどうかを判断します。


  * 3 より大きい場合、**ループ終了ノード** に到達し、ループを終了します。

  * 3 以下の場合、**LLMノード** に到達し、ループを継続します。



  3. **LLMノード** を使用して、ユーザーの入力と過去の作品に基づいて詩の内容を出力するようにモデルに指示します。



プロンプト例：

  * ユーザーの入力`sys.query`をもとに、ヨーロッパの長詩を作成してください。

  * 前回の作成結果`verse`を参考に、新しい詩句で進歩と革新を示してください。

  * 詩句がヨーロッパ文学のスタイルと伝統に合致し、韻律と意境に注意してください。




最初のループでは、verseは`I haven't started creating yet`です。それ以降の各ループでは、前のループの出力に基づいて詩が更新されます。モデルが生成した新しい詩は毎回verse変数を上書きし、次のループで使用されます。

  4. **変数設定ノード** を使用して、各ループの後にループ内の変数を更新します。


  * num変数を更新し、ループごとに+1します。

  * verse変数をモデルが新しく生成した詩の内容に更新し、前のループの詩の内容を直接上書きします。



  5. 詩のインスピレーションを入力すると、モデルは4つのバージョンの詩を出力します。各詩は前の詩に基づいて生成されます。



* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/guides/workflow/node/loop.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/guides/workflow/node%2Floop.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[ツール](/ja-jp/guides/workflow/node/tools)[ショートカットキー](/ja-jp/guides/workflow/shortcut-key)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * 概要
  * 繰り返し処理ノードと反復処理ノードの違い
  * ループ（繰り返し処理）ノードの設定方法
  * サンプル1：ループノードの使い方
  * サンプル2：ループ変数とループ終了ノードの使い方



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/guides/workflow/node/parameter-extractor

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

ノードの説明

パラメータ抽出

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

    * [キーコンセプト](/ja-jp/guides/workflow/concepts)
    * [変数](/ja-jp/guides/workflow/variables)
    * ノードの説明

      * [開始](/ja-jp/guides/workflow/node/start)
      * [終了](/ja-jp/guides/workflow/node/end)
      * [回答](/ja-jp/guides/workflow/node/answer)
      * [LLM](/ja-jp/guides/workflow/node/llm)
      * [知識検索](/ja-jp/guides/workflow/node/knowledge-retrieval)
      * [質問分類](/ja-jp/guides/workflow/node/question-classifier)
      * [条件分岐](/ja-jp/guides/workflow/node/ifelse)
      * [コード](/ja-jp/guides/workflow/node/code)
      * [テンプレート](/ja-jp/guides/workflow/node/template)
      * [テキスト抽出ツール](/ja-jp/guides/workflow/node/doc-extractor)
      * [リスト処理](/ja-jp/guides/workflow/node/list-operator)
      * [変数集約](/ja-jp/guides/workflow/node/variable-aggregator)
      * [変数代入](/ja-jp/guides/workflow/node/variable-assigner)
      * [反復処理（イテレーション）](/ja-jp/guides/workflow/node/iteration)
      * [パラメータ抽出](/ja-jp/guides/workflow/node/parameter-extractor)
      * [HTTPリクエスト](/ja-jp/guides/workflow/node/http-request)
      * [エージェント](/ja-jp/guides/workflow/node/agent)
      * [ツール](/ja-jp/guides/workflow/node/tools)
      * [ループ処理（繰り返し処理）](/ja-jp/guides/workflow/node/loop)
    * [ショートカットキー](/ja-jp/guides/workflow/shortcut-key)
    * [オーケストレートノード](/ja-jp/guides/workflow/orchestrate-node)
    * [ファイルアップロード](/ja-jp/guides/workflow/file-upload)
    * エラー処理

    * [追加機能](/ja-jp/guides/workflow/additional-feature)
    * プレビューとデバッグ

    * [アプリケーション公開](/ja-jp/guides/workflow/publish)
    * [JSON形式での出力](/ja-jp/guides/workflow/structured-outputs)
    * [変更のお知らせ：画像アップロードがファイルアップロードに統合されました](/ja-jp/guides/workflow/bulletin)
  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




ノードの説明

# パラメータ抽出

Copy page

### 

​

定義

大規模言語モデル（LLM）を利用して自然言語から推論し、構造化パラメータを抽出し、ツール呼び出しやHTTPリクエストに用いる。

Difyワークフロー内には豊富な[ツール](/ja-jp/introduction)が用意されており、その多くは構造化パラメータを入力として要求します。パラメータ抽出器は、ユーザーの自然言語をツールが認識できるパラメータに変換し、ツールの呼び出しを容易にします。

ワークフロー内の一部のノードは特定のデータ形式を入力として要求します。例えば[イテレーション](./iteration)ノードの入力は配列形式である必要があり、パラメータ抽出器は[構造化パラメータの変換](./iteration#1)を容易に実現します。

* * *

### 

​

シナリオ

  1. **自然言語からツールが必要とするキー・パラメーターを抽出する** 例として、簡単な対話形式のArxiv論文検索アプリを構築する場合を考えます。



この例では、Arxiv論文検索ツールの入力パラメータとして「論文の著者」または「論文番号」が要求されます。パラメータ抽出器は「この論文の内容は何ですか：2405.10739」という質問から論文番号**2405.10739** を抽出し、ツールのパラメータとして正確に検索します。

Arxiv論文検索ツール

  2. **テキストを構造化データに変換する** 例として、長い物語のイテレーション生成アプリの前工程として、テキスト形式の章内容を配列形式に変換し、[イテレーションノード](./iteration)でのマルチラウンド生成処理を容易にします。



テキストを構造化データに変換する

  3. **構造化データを抽出して**[**HTTPリクエスト**](./http-request)**を使用する** ことで、任意のアクセス可能なURLにリクエストを送信し、外部検索結果の取得やウェブフック、画像生成などのシナリオに適用できます。



* * *

### 

​

設定方法

パラメータ抽出の設定

**設定手順**

  1. 入力変数を選択。通常はパラメータ抽出のための変数入力を選びます。ファイルタイプもサポートします。
  2. モデルを選択。パラメータ抽出器の抽出はLLMの推論と構造化生成能力に依存します。
  3. 抽出パラメータを定義。必要なパラメータを手動で追加するか、**既存のツールから簡単にインポート** できます。
  4. コマンド作成。複雑なパラメータの抽出時には、例を作成することでLLMの生成効果と安定性を向上させることができます。



**高度な設定**

**推論モード**

一部のモデルは関数/ツール呼び出しや純プロンプトの方法でパラメータ抽出を実現する2つの推論モードをサポートしており、コマンドの遵守能力に違いがあります。例えば、あるモデルが関数呼び出しに不向きな場合、プロンプト推論に切り替えることができます。

  * Function Call/Tool Call
  * プロンプト



**メモリ**

メモリを有効にすると、問題分類器の各入力にチャット履歴が含まれ、LLMが前文を理解し、対話の中での問題理解能力を向上させます。

**画像**

画像をオープンする。

**出力変数**

  * 定義された変数を抽出
  * ノード組み込み変数



`__is_success 数値` 抽出が成功した場合は1、失敗した場合は0となります。

`__reason 文字列` 抽出エラーの原因

* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/guides/workflow/node/parameter-extractor.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20eter-extrac&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/guides/workflow/node%2Fparameter-extractor.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[反復処理（イテレーション）](/ja-jp/guides/workflow/node/iteration)[HTTPリクエスト](/ja-jp/guides/workflow/node/http-request)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * 定義
  * シナリオ
  * 設定方法



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/guides/workflow/node/question-classifier

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

ノードの説明

質問分類

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

    * [キーコンセプト](/ja-jp/guides/workflow/concepts)
    * [変数](/ja-jp/guides/workflow/variables)
    * ノードの説明

      * [開始](/ja-jp/guides/workflow/node/start)
      * [終了](/ja-jp/guides/workflow/node/end)
      * [回答](/ja-jp/guides/workflow/node/answer)
      * [LLM](/ja-jp/guides/workflow/node/llm)
      * [知識検索](/ja-jp/guides/workflow/node/knowledge-retrieval)
      * [質問分類](/ja-jp/guides/workflow/node/question-classifier)
      * [条件分岐](/ja-jp/guides/workflow/node/ifelse)
      * [コード](/ja-jp/guides/workflow/node/code)
      * [テンプレート](/ja-jp/guides/workflow/node/template)
      * [テキスト抽出ツール](/ja-jp/guides/workflow/node/doc-extractor)
      * [リスト処理](/ja-jp/guides/workflow/node/list-operator)
      * [変数集約](/ja-jp/guides/workflow/node/variable-aggregator)
      * [変数代入](/ja-jp/guides/workflow/node/variable-assigner)
      * [反復処理（イテレーション）](/ja-jp/guides/workflow/node/iteration)
      * [パラメータ抽出](/ja-jp/guides/workflow/node/parameter-extractor)
      * [HTTPリクエスト](/ja-jp/guides/workflow/node/http-request)
      * [エージェント](/ja-jp/guides/workflow/node/agent)
      * [ツール](/ja-jp/guides/workflow/node/tools)
      * [ループ処理（繰り返し処理）](/ja-jp/guides/workflow/node/loop)
    * [ショートカットキー](/ja-jp/guides/workflow/shortcut-key)
    * [オーケストレートノード](/ja-jp/guides/workflow/orchestrate-node)
    * [ファイルアップロード](/ja-jp/guides/workflow/file-upload)
    * エラー処理

    * [追加機能](/ja-jp/guides/workflow/additional-feature)
    * プレビューとデバッグ

    * [アプリケーション公開](/ja-jp/guides/workflow/publish)
    * [JSON形式での出力](/ja-jp/guides/workflow/structured-outputs)
    * [変更のお知らせ：画像アップロードがファイルアップロードに統合されました](/ja-jp/guides/workflow/bulletin)
  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




ノードの説明

# 質問分類

Copy page

### 

​

**定義**

分類記述を定義することにより、問題分類子は LLM を使用してユーザー入力に基づいて一致する分類を推測し、分類結果を出力し、より正確な情報を下流ノードに提供できます。

* * *

### 

​

**シナリオ**

よくある使用シナリオには、**カスタマーサービス対話意図分類、製品評価分類、メールのバッチ分類** などがあります。

典型的な製品カスタマーサービスのシナリオでは、問題分類器はナレッジベース検索の前段階として機能し、ユーザーの質問の意図を分類します。分類後、異なるナレッジベースに誘導され、ユーザーの質問に正確に回答します。

以下の図は製品カスタマーサービスシナリオのサンプルワークフローテンプレートです：

このシナリオでは、3つの分類ラベル/説明を設定しています：

  * 分類 1：**アフターサービスに関する問題**
  * 分類 2：**製品の操作に関する問題**
  * 分類 3：**その他の問題**



ユーザーが異なる質問を入力すると、問題分類器は設定された分類ラベル/説明に基づいて自動的に分類を行います：

  * “**iPhone 14で連絡先を設定する方法は？** ” —> “**製品の操作に関する問題** ”
  * “**保証期間はどれくらいですか？** ” —> “**アフターサービスに関する問題** ”
  * “**今日の天気はどうですか？** ” —> “**その他の問題** ”



* * *

### 

​

設定方法

質問分類器の設定

**設定手順：**

  1. **入力変数を選択する** 、分類に使用する入力内容を指します、[ファイルのアップロード](/ja-jp/guides/workflow/file-upload)もサポートします。カスタマーサービスのシナリオでは一般的にユーザーの質問 `sys.query` が対象です。
  2. **推論モデルを選択する** 、問題分類器は大規模言語モデル (LLM) の自然言語分類と推論能力に基づいており、適切なモデルを選ぶことで分類効果を向上させることができます。
  3. **分類ラベル/説明を作成する** 、複数の分類を手動で追加し、分類のキーワードや説明文を作成することで、大規模言語モデルが分類基準をよりよく理解できるようにします。
  4. **分類に対応する下流ノードを選択する** 、問題分類ノードが分類を完了した後、分類と下流ノードの関係に基づいて後続のプロセスパスを選択します。



#### 

​

**高度な設定：**

**指示：** **高度な設定-指示** では、例えばより豊富な分類基準など、追加の指示を補足することができます。これにより問題分類器の分類能力が強化されます。

**メモリー：** メモリーをオンにすると、問題分類器の各入力には対話のチャット履歴が含まれ、LLM が前文を理解しやすくなり、対話の中での問題理解能力が向上します。

**画像分析：** 画像認識機能を備えた LLM でのみ利用可能で、画像変数の入力が可能です。

**メモリウィンドウ：** メモリウィンドウがオフの時、システムはモデルのコンテキストウィンドウに基づいてチャット履歴の伝達量を動的にフィルタリングします。オンの時、ユーザーはチャット履歴の伝達量を正確に制御できます（対数表示）。

**出力変数：**

`class_name`

分類後に出力される分類名です。必要に応じて下流ノードで分類結果変数を使用することができます。

* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/guides/workflow/node/question-classifier.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20ion-classif&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/guides/workflow/node%2Fquestion-classifier.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[知識検索](/ja-jp/guides/workflow/node/knowledge-retrieval)[条件分岐](/ja-jp/guides/workflow/node/ifelse)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * 定義
  * シナリオ
  * 設定方法
  * 高度な設定：



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/guides/workflow/node/start

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

ノードの説明

開始

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

    * [キーコンセプト](/ja-jp/guides/workflow/concepts)
    * [変数](/ja-jp/guides/workflow/variables)
    * ノードの説明

      * [開始](/ja-jp/guides/workflow/node/start)
      * [終了](/ja-jp/guides/workflow/node/end)
      * [回答](/ja-jp/guides/workflow/node/answer)
      * [LLM](/ja-jp/guides/workflow/node/llm)
      * [知識検索](/ja-jp/guides/workflow/node/knowledge-retrieval)
      * [質問分類](/ja-jp/guides/workflow/node/question-classifier)
      * [条件分岐](/ja-jp/guides/workflow/node/ifelse)
      * [コード](/ja-jp/guides/workflow/node/code)
      * [テンプレート](/ja-jp/guides/workflow/node/template)
      * [テキスト抽出ツール](/ja-jp/guides/workflow/node/doc-extractor)
      * [リスト処理](/ja-jp/guides/workflow/node/list-operator)
      * [変数集約](/ja-jp/guides/workflow/node/variable-aggregator)
      * [変数代入](/ja-jp/guides/workflow/node/variable-assigner)
      * [反復処理（イテレーション）](/ja-jp/guides/workflow/node/iteration)
      * [パラメータ抽出](/ja-jp/guides/workflow/node/parameter-extractor)
      * [HTTPリクエスト](/ja-jp/guides/workflow/node/http-request)
      * [エージェント](/ja-jp/guides/workflow/node/agent)
      * [ツール](/ja-jp/guides/workflow/node/tools)
      * [ループ処理（繰り返し処理）](/ja-jp/guides/workflow/node/loop)
    * [ショートカットキー](/ja-jp/guides/workflow/shortcut-key)
    * [オーケストレートノード](/ja-jp/guides/workflow/orchestrate-node)
    * [ファイルアップロード](/ja-jp/guides/workflow/file-upload)
    * エラー処理

    * [追加機能](/ja-jp/guides/workflow/additional-feature)
    * プレビューとデバッグ

    * [アプリケーション公開](/ja-jp/guides/workflow/publish)
    * [JSON形式での出力](/ja-jp/guides/workflow/structured-outputs)
    * [変更のお知らせ：画像アップロードがファイルアップロードに統合されました](/ja-jp/guides/workflow/bulletin)
  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




ノードの説明

# 開始

Copy page

## 

​

定義

**“開始”** ノードは、すべてのワークフローアプリ（チャットフロー / ワークフロー）に必須のデフォルトノードであり、後続のワークフローノードやアプリの正常なプロセスに必要な初期情報を提供します。これには、アプリの使用者が入力した内容や、[アップロードされたファイル](/ja-jp/guides/workflow/file-upload)などが含まれます。

### 

​

ノードの設定

開始ノードの設定ページでは、**“入力フィールド”**とデフォルトの[**システム変数**](/ja-jp/guides/workflow/variables)という二つの設定部分が見られます。

チャットフローとワークフロー

### 

​

入力フィールド

入力フィールドの機能はアプリ開発者によって設定され、通常はアプリの使用者がさらに情報を提供するために使用されます。例えば、週次報告アプリでは、使用者に対して名前、作業期間、作業内容などの背景情報をあらかじめフォーマットに従って提供するよう求めることがあります。これらの前提情報は、LLM（大規模言語モデル）がより質の高い回答を生成するのに役立ちます。

以下の6種類の入力変数をサポートしており、すべての変数は必須項目として設定可能です：

  * **テキスト**

短いテキストで、アプリ使用者が自分で内容を入力します。最大文字数は256文字です。

  * **段落**

長文で、アプリ使用者が長いテキストを入力することができます。

  * **ドロップダウンオプション**

アプリ開発者によって固定された選択肢で、アプリ使用者は設定された選択肢の中からのみ選ぶことができ、自由に内容を入力することはできません。

  * **数字**

数字のみの入力を許可します。

  * **単一ファイル**

アプリ使用者が単独でファイルをアップロードできる機能で、サポートされるファイルタイプは文書、画像、音声、動画、その他のファイルです。ローカルからのファイルアップロードやファイルのURLを貼り付けてのアップロードが可能です。詳細な使い方については[ファイルアップロード](/ja-jp/guides/workflow/file-upload)を参照してください。

  * **ファイルリスト**

アプリ使用者が複数のファイルを一括でアップロードできる機能で、サポートされるファイルタイプは文書、画像、音声、動画、その他のファイルです。ローカルからのファイルアップロードやファイルのURLを貼り付けてのアップロードが可能です。詳細な使い方については[ファイルアップロード](/ja-jp/guides/workflow/file-upload)を参照してください。




Difyに組み込まれているファイル抽出ノードは、特定のフォーマットファイルのみを処理できます。画像、音声、動画ファイルを処理する必要がある場合は、[外部データツール](/ja-jp/guides/extension/code-based-extension/external-data-tool)を参照し、対応するファイル処理ノードを構築してください。

設定が完了した後、使用者はアプリを使用する前に、入力項目に従ってLLMに必要な情報を提供します。より多くの情報がLLMの質問応答効率を向上させるのに役立ちます。

### 

​

システム変数

システム変数は、チャットフロー / ワークフローアプリ内であらかじめ設定されたシステムレベルのパラメータであり、アプリ内の他のノードからグローバルに読み取ることができます。通常は、高度な開発シナリオで使用され、たとえば多段階対話アプリの構築、アプリのログ収集と監視、異なるアプリや使用者の使用行動の記録などに利用されます。

**ワークフロー**

ワークフロータイプのアプリは以下のシステム変数を提供します：

変数名| データタイプ| 説明| メモ  
---|---|---|---  
`sys.files`| Array[File]| ファイルパラメータで、ユーザーがアプリを使用する際にアップロードした画像を保存します。複数の画像をアップロードできます。このパラメータは今後廃止予定であり、「入力フィールド」内のファイル変数の使用を推奨します。| 画像アップロード機能は、アプリの編成ページの右上にある「機能」で有効にする必要があります。  
`sys.user_id`| String| ユーザーIDで、各ユーザーがワークフローアプリを使用する際に、システムが自動的に一意の識別子を割り当てて、異なる対話ユーザーを区別します。|   
`sys.app_id`| String| アプリIDで、システムが各ワークフローアプリに一意の識別子を割り当て、異なるアプリを区別し、このパラメータを通じて現在のアプリの基本情報を記録します。| 開発能力のあるユーザー向けで、このパラメータを通じて異なるワークフローアプリを区別・特定できます。  
`sys.workflow_id`| String| ワークフローIDで、現在のワークフローアプリに含まれるすべてのノード情報を記録します。| 開発能力のあるユーザー向けで、このパラメータを通じてワークフロー内のノード情報を追跡・記録できます。  
`sys.workflow_run_id`| String| ワークフローアプリの実行IDで、ワークフローアプリの運用状況を記録します。| 開発能力のあるユーザー向けで、このパラメータを通じてアプリの過去の実行状況を追跡できます。  
  
ワークフロータイプアプリのシステム変数

**チャットフロー**

チャットフロータイプのアプリケーションは、以下のシステム変数を提供しています：

変数名| データ型| 説明| メモ  
---|---|---|---  
`sys.query`| String| ユーザーが最初に入力した内容|   
`sys.files`| Array[File]| ユーザーがアップロードした画像| 画像のアップロード機能は、アプリケーションの編成ページ右上の「機能」で有効化する必要があります  
`sys.dialogue_count`| Number| チャットフロータイプのアプリケーションとの対話中にユーザーが行った対話のラウンド数です。各対話の後に自動的に数が増加し、if-elseノードと組み合わせて複雑な分岐ロジックを構築できます。たとえば、Xラウンド目に達したときに、対話履歴を振り返って分析が可能です|   
`sys.conversation_id`| String| ダイアログの対話セッションの一意の識別子で、関連するすべてのメッセージを同じ対話にグループ化し、LLMが同じトピックとコンテキストで継続的に対話できるようにします|   
`sys.user_id`| String| 各アプリケーションユーザーに割り当てられた一意の識別子で、異なる対話ユーザーを区別するために使用されます|   
`sys.app_id`| String| アプリケーションのIDで、システムは各ワークフローアプリケーションに一意の識別子を割り当て、異なるアプリケーションを識別します。このパラメータを使用して現在のアプリケーションの基本情報を記録します| 開発者向けで、このパラメータを使用して異なるワークフローアプリケーションを区別します  
`sys.workflow_id`| String| ワークフローIDで、現在のワークフローアプリケーションに含まれるすべてのノード情報を記録するために使用されます| 開発者向けで、このパラメータを使用してワークフロー内のノード情報を追跡および記録できます  
`sys.workflow_run_id`| String| ワークフローアプリケーションの実行IDで、アプリケーションの実行状況を記録するために使用されます| 開発者向けで、このパラメータを使用してアプリケーションの過去の実行状況を追跡できます  
  
* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/guides/workflow/node/start.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/guides/workflow/node%2Fstart.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[変数](/ja-jp/guides/workflow/variables)[終了](/ja-jp/guides/workflow/node/end)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * 定義
  * ノードの設定
  * 入力フィールド
  * システム変数



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/guides/workflow/node/template

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

ノードの説明

テンプレート

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

    * [キーコンセプト](/ja-jp/guides/workflow/concepts)
    * [変数](/ja-jp/guides/workflow/variables)
    * ノードの説明

      * [開始](/ja-jp/guides/workflow/node/start)
      * [終了](/ja-jp/guides/workflow/node/end)
      * [回答](/ja-jp/guides/workflow/node/answer)
      * [LLM](/ja-jp/guides/workflow/node/llm)
      * [知識検索](/ja-jp/guides/workflow/node/knowledge-retrieval)
      * [質問分類](/ja-jp/guides/workflow/node/question-classifier)
      * [条件分岐](/ja-jp/guides/workflow/node/ifelse)
      * [コード](/ja-jp/guides/workflow/node/code)
      * [テンプレート](/ja-jp/guides/workflow/node/template)
      * [テキスト抽出ツール](/ja-jp/guides/workflow/node/doc-extractor)
      * [リスト処理](/ja-jp/guides/workflow/node/list-operator)
      * [変数集約](/ja-jp/guides/workflow/node/variable-aggregator)
      * [変数代入](/ja-jp/guides/workflow/node/variable-assigner)
      * [反復処理（イテレーション）](/ja-jp/guides/workflow/node/iteration)
      * [パラメータ抽出](/ja-jp/guides/workflow/node/parameter-extractor)
      * [HTTPリクエスト](/ja-jp/guides/workflow/node/http-request)
      * [エージェント](/ja-jp/guides/workflow/node/agent)
      * [ツール](/ja-jp/guides/workflow/node/tools)
      * [ループ処理（繰り返し処理）](/ja-jp/guides/workflow/node/loop)
    * [ショートカットキー](/ja-jp/guides/workflow/shortcut-key)
    * [オーケストレートノード](/ja-jp/guides/workflow/orchestrate-node)
    * [ファイルアップロード](/ja-jp/guides/workflow/file-upload)
    * エラー処理

    * [追加機能](/ja-jp/guides/workflow/additional-feature)
    * プレビューとデバッグ

    * [アプリケーション公開](/ja-jp/guides/workflow/publish)
    * [JSON形式での出力](/ja-jp/guides/workflow/structured-outputs)
    * [変更のお知らせ：画像アップロードがファイルアップロードに統合されました](/ja-jp/guides/workflow/bulletin)
  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




ノードの説明

# テンプレート

Copy page

### 

​

定義

Jinja2のPythonテンプレート言語を使って、データ変換やテキスト処理などを柔軟に行うことができます。

### 

​

Jinjaとは？

> [Jinja](https://jinja.palletsprojects.com/en/3.1.x/) は、速く、表現力があり、拡張可能なテンプレートエンジンです。

### 

​

シーン

テンプレートノードを使うことで、強力なPythonテンプレート言語であるJinja2を用いて、ワークフロー内で軽量かつ柔軟なデータ変換が可能になります。これは、テキスト処理やJSON変換などのシナリオに適しています。例えば、前のステップからの変数を柔軟にフォーマットして結合し、単一のテキスト出力を作成することができます。これは、複数のデータソースの情報を特定のフォーマットにまとめ、後続のステップの要件を満たすのに非常に適しています。

**例1：**複数の入力（記事のタイトル、紹介、内容）を一つの完全なテキストに結合する

**例2：** ナレッジリトリーバルノードで取得した情報およびその関連メタデータを、構造化されたMarkdown形式にまとめる
    
    
    {% raw %}
    {% for item in chunks %}
    ### Chunk {{ loop.index }}. 
    ### Similarity: {{ item.metadata.score | default('N/A') }}
    
    #### {{ item.title }}
    
    ##### Content
    {{ item.content | replace('\n', '\n\n') }}
    
    ---
    {% endfor %}
    {% endraw %}

Jinjaの[公式ドキュメント](https://jinja.palletsprojects.com/en/3.1.x/templates/)を参考にして、さまざまなタスクを実行するためのより複雑なテンプレートを作成することができます。

**例3：** HTMLフォームのレンダリングをサポート
    
    
    <form data-format="json"> // Default to text
      <label for="username">Username:</label>
      <input type="text" name="username" />
      <label for="password">Password:</label>
      <input type="password" name="password" />
      <label for="content">Content:</label>
      <textarea name="content"></textarea>
      <label for="date">Date:</label>
      <input type="date" name="date" />
      <label for="time">Time:</label>
      <input type="time" name="time" />
      <label for="datetime">Datetime:</label>
      <input type="datetime" name="datetime" />
      <label for="select">Select:</label>
      <input type="select" name="select" data-options='["hello","world"]'/>
      <input type="checkbox" name="check" data-tip="By checking this means you agreed"/>
      <button data-size="small" data-variant="primary">Login</button>
    </form>

* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/guides/workflow/node/template.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/guides/workflow/node%2Ftemplate.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[コード](/ja-jp/guides/workflow/node/code)[テキスト抽出ツール](/ja-jp/guides/workflow/node/doc-extractor)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * 定義
  * Jinjaとは？
  * シーン



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/guides/workflow/node/tools

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

ノードの説明

ツール

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

    * [キーコンセプト](/ja-jp/guides/workflow/concepts)
    * [変数](/ja-jp/guides/workflow/variables)
    * ノードの説明

      * [開始](/ja-jp/guides/workflow/node/start)
      * [終了](/ja-jp/guides/workflow/node/end)
      * [回答](/ja-jp/guides/workflow/node/answer)
      * [LLM](/ja-jp/guides/workflow/node/llm)
      * [知識検索](/ja-jp/guides/workflow/node/knowledge-retrieval)
      * [質問分類](/ja-jp/guides/workflow/node/question-classifier)
      * [条件分岐](/ja-jp/guides/workflow/node/ifelse)
      * [コード](/ja-jp/guides/workflow/node/code)
      * [テンプレート](/ja-jp/guides/workflow/node/template)
      * [テキスト抽出ツール](/ja-jp/guides/workflow/node/doc-extractor)
      * [リスト処理](/ja-jp/guides/workflow/node/list-operator)
      * [変数集約](/ja-jp/guides/workflow/node/variable-aggregator)
      * [変数代入](/ja-jp/guides/workflow/node/variable-assigner)
      * [反復処理（イテレーション）](/ja-jp/guides/workflow/node/iteration)
      * [パラメータ抽出](/ja-jp/guides/workflow/node/parameter-extractor)
      * [HTTPリクエスト](/ja-jp/guides/workflow/node/http-request)
      * [エージェント](/ja-jp/guides/workflow/node/agent)
      * [ツール](/ja-jp/guides/workflow/node/tools)
      * [ループ処理（繰り返し処理）](/ja-jp/guides/workflow/node/loop)
    * [ショートカットキー](/ja-jp/guides/workflow/shortcut-key)
    * [オーケストレートノード](/ja-jp/guides/workflow/orchestrate-node)
    * [ファイルアップロード](/ja-jp/guides/workflow/file-upload)
    * エラー処理

    * [追加機能](/ja-jp/guides/workflow/additional-feature)
    * プレビューとデバッグ

    * [アプリケーション公開](/ja-jp/guides/workflow/publish)
    * [JSON形式での出力](/ja-jp/guides/workflow/structured-outputs)
    * [変更のお知らせ：画像アップロードがファイルアップロードに統合されました](/ja-jp/guides/workflow/bulletin)
  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




ノードの説明

# ツール

Copy page

### 

​

定義

ワークフロー内で豊富なツール選択が提供されており、ツールは3つのタイプに分かれています：

  * **ビルトインツール** 、Difyファーストパーティが提供するツール
  * **カスタムツール** 、OpenAPI/Swagger標準フォーマットでインポートまたは設定されたツール
  * **ワークフロー** 、ツールとして公開されたワークフロー



ビルトインツールを使用する前に、ツールに **認可** を行う必要があるかもしれません。

ビルトインツールが使用要求を満たさない場合は、**Dify メニュー ナビゲーション —ツール** でカスタムツールを作成できます。

また、より複雑なワークフローを編成し、それをツールとして公開することもできます。

ツール選択

ツールノードは他のノードと接続でき、[変数](/ja-jp/guides/workflow/variables)を通じてデータを処理および受け渡しすることができます。

Google 検索ツールで外部知識を検索

### 

​

ワークフローをツールとして公開する

カスタムツールの作成とツールの設定方法については[ツール設定説明](/ja-jp/introduction)を参照してください。

* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/guides/workflow/node/tools.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/guides/workflow/node%2Ftools.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[エージェント](/ja-jp/guides/workflow/node/agent)[ループ処理（繰り返し処理）](/ja-jp/guides/workflow/node/loop)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * 定義
  * ワークフローをツールとして公開する



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/guides/workflow/node/variable-aggregator

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

ノードの説明

変数集約

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

    * [キーコンセプト](/ja-jp/guides/workflow/concepts)
    * [変数](/ja-jp/guides/workflow/variables)
    * ノードの説明

      * [開始](/ja-jp/guides/workflow/node/start)
      * [終了](/ja-jp/guides/workflow/node/end)
      * [回答](/ja-jp/guides/workflow/node/answer)
      * [LLM](/ja-jp/guides/workflow/node/llm)
      * [知識検索](/ja-jp/guides/workflow/node/knowledge-retrieval)
      * [質問分類](/ja-jp/guides/workflow/node/question-classifier)
      * [条件分岐](/ja-jp/guides/workflow/node/ifelse)
      * [コード](/ja-jp/guides/workflow/node/code)
      * [テンプレート](/ja-jp/guides/workflow/node/template)
      * [テキスト抽出ツール](/ja-jp/guides/workflow/node/doc-extractor)
      * [リスト処理](/ja-jp/guides/workflow/node/list-operator)
      * [変数集約](/ja-jp/guides/workflow/node/variable-aggregator)
      * [変数代入](/ja-jp/guides/workflow/node/variable-assigner)
      * [反復処理（イテレーション）](/ja-jp/guides/workflow/node/iteration)
      * [パラメータ抽出](/ja-jp/guides/workflow/node/parameter-extractor)
      * [HTTPリクエスト](/ja-jp/guides/workflow/node/http-request)
      * [エージェント](/ja-jp/guides/workflow/node/agent)
      * [ツール](/ja-jp/guides/workflow/node/tools)
      * [ループ処理（繰り返し処理）](/ja-jp/guides/workflow/node/loop)
    * [ショートカットキー](/ja-jp/guides/workflow/shortcut-key)
    * [オーケストレートノード](/ja-jp/guides/workflow/orchestrate-node)
    * [ファイルアップロード](/ja-jp/guides/workflow/file-upload)
    * エラー処理

    * [追加機能](/ja-jp/guides/workflow/additional-feature)
    * プレビューとデバッグ

    * [アプリケーション公開](/ja-jp/guides/workflow/publish)
    * [JSON形式での出力](/ja-jp/guides/workflow/structured-outputs)
    * [変更のお知らせ：画像アップロードがファイルアップロードに統合されました](/ja-jp/guides/workflow/bulletin)
  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




ノードの説明

# 変数集約

Copy page

### 

​

定義

マルチブランチの変数を一つの変数に集約し、ダウンズトリームノードの統一設定を実現します。

変数集約ノード（元変数割り当てノード）はワークフローの重要なノードであり、異なるブランチの出力結果を統合し、どのブランチが実行されても、その結果を一つの統一された変数を通じて参照およびアクセスできるようにします。これはマルチブランチの状況で非常に有用で、異なるブランチで同じ役割を果たす変数を一つの出力変数にマッピングし、ダウンズトリームノードでの重複定義を避けます。

* * *

### 

​

シナリオ

変数集約を通じて、問題分類や条件ブランチなどのマルチ出力をシングル出力に集約し、プロセスのダウンズトリームノードが使用および操作できるようにします。これによりデータフローの管理が簡素化されます。

**問題分類後のマルチ集約**

変数集約を追加しない場合、分類1と分類2のブランチは異なるナレッジベース検索を経て、ダウンズトリームの大規模言語モデルおよび直接返信ノードを繰り返し定義する必要があります。

問題分類（変数集約なし）

変数集約を追加することで、二つのナレッジベース検索ノードの出力を一つの変数に集約できます。

問題分類後のマルチ集約

**IF/ELSE 条件ブランチ後のマルチ集約**

IF/ELSE 問題分類後のマルチ集約

### 

​

フォーマットに要求

変数集約器は文字列（`String`）、数値（`Number`）、ファイル(`File`)、オブジェクト（`Object`）、および配列（`Array`）など、さまざまなデータ型の集約をサポートします。

**変数集約器は同一データ型の変数しか集約できません** 。最初に変数集約ノードに追加された変数データ形式が `String` である場合、後続の接続では追加可能な変数が `String` タイプに自動的にフィルタリングされます。

**アグリゲートグループ**

アグリゲートグループを有効にすると、変数集約器は複数のグループの変数を集約でき、各グループ内の集約時には同一データ型が求められます。

* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/guides/workflow/node/variable-aggregator.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20ble-aggrega&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/guides/workflow/node%2Fvariable-aggregator.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[リスト処理](/ja-jp/guides/workflow/node/list-operator)[変数代入](/ja-jp/guides/workflow/node/variable-assigner)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * 定義
  * シナリオ
  * フォーマットに要求



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/guides/workflow/node/variable-assigner

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

ノードの説明

変数代入

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

    * [キーコンセプト](/ja-jp/guides/workflow/concepts)
    * [変数](/ja-jp/guides/workflow/variables)
    * ノードの説明

      * [開始](/ja-jp/guides/workflow/node/start)
      * [終了](/ja-jp/guides/workflow/node/end)
      * [回答](/ja-jp/guides/workflow/node/answer)
      * [LLM](/ja-jp/guides/workflow/node/llm)
      * [知識検索](/ja-jp/guides/workflow/node/knowledge-retrieval)
      * [質問分類](/ja-jp/guides/workflow/node/question-classifier)
      * [条件分岐](/ja-jp/guides/workflow/node/ifelse)
      * [コード](/ja-jp/guides/workflow/node/code)
      * [テンプレート](/ja-jp/guides/workflow/node/template)
      * [テキスト抽出ツール](/ja-jp/guides/workflow/node/doc-extractor)
      * [リスト処理](/ja-jp/guides/workflow/node/list-operator)
      * [変数集約](/ja-jp/guides/workflow/node/variable-aggregator)
      * [変数代入](/ja-jp/guides/workflow/node/variable-assigner)
      * [反復処理（イテレーション）](/ja-jp/guides/workflow/node/iteration)
      * [パラメータ抽出](/ja-jp/guides/workflow/node/parameter-extractor)
      * [HTTPリクエスト](/ja-jp/guides/workflow/node/http-request)
      * [エージェント](/ja-jp/guides/workflow/node/agent)
      * [ツール](/ja-jp/guides/workflow/node/tools)
      * [ループ処理（繰り返し処理）](/ja-jp/guides/workflow/node/loop)
    * [ショートカットキー](/ja-jp/guides/workflow/shortcut-key)
    * [オーケストレートノード](/ja-jp/guides/workflow/orchestrate-node)
    * [ファイルアップロード](/ja-jp/guides/workflow/file-upload)
    * エラー処理

    * [追加機能](/ja-jp/guides/workflow/additional-feature)
    * プレビューとデバッグ

    * [アプリケーション公開](/ja-jp/guides/workflow/publish)
    * [JSON形式での出力](/ja-jp/guides/workflow/structured-outputs)
    * [変更のお知らせ：画像アップロードがファイルアップロードに統合されました](/ja-jp/guides/workflow/bulletin)
  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




ノードの説明

# 変数代入

Copy page

### 

​

定義

変数代入ノードは、書き込み可能な変数に他の変数を代入するために使用されます。現在、サポートされている可書き入れの変数は：

  * [会話変数](/ja-jp/guides/workflow/concepts)



使用方法：このノードを使用することで、ワークフローの中で変数の値を会話変数に一時的に保存し、後続の会話でその値を参照することができます。

変数代入の例

* * *

### 

​

使用シナリオの例

変数代入ノードを活用することで、会話中の**コンテキスト、ダイアログにアップロードされたファイル（近々配布予定）、ユーザーの好みの情報** などを会話変数に書き込み、保存された情報は後続の会話で参照され、異なる処理フローに誘導したり、返答を行ったりすることができます。

**シナリオ 1**

**会話中の記録を自動的に抽出し保存します** 、会話変数配列を使用してユーザーの重要な情報を記録します。その後の会話ではこれらの記録を活用し、個別の返信を行います。

例えば：会話が始まると、LLMはユーザーの入力に必要な情報や好み、またはチャット履歴が含まれているかを自動的に判断します。情報が存在する場合、LLMはそれを先に抽出して保存し、コンテキストとして利用して応答します。もし新しい情報を覚える必要がない場合、LLMは以前の関連する記録を用いて個性化な応答を出します。

会話から情報を自動的に判断、抽出、保存します

**設定手順：**

  1. **会話変数を設定** ：まず、会話変数配列 `memories` を設定し、array[object]型を持たせてユーザーの事実、好み、会話記録を保存します。
  2. **記録の判断と抽出** ：
     * 条件判断ノードを追加し、LLMを使用してユーザーの入力に新しい情報が含まれているかを判断します。
     * 新しい情報がある場合は上流に進み、LLMノードを使用してこれらの情報を抽出します。
     * 新しい情報がない場合は下流に進み、既存の記憶を直接使用して返答します。
  3. **変数の代入と書き込み** ：
     * 上流に進んだ後、変数代入ノードを用いて抽出した新しい情報を `memories` 配列に追加(append)します。
     * LLMの出力テキスト文字列を適切な array[object] 形式に変換するためにエスケープ機能を使用します。
  4. **変数の読み取りと利用** ：
     * 後続のLLMノードで、`memories` 配列の内容を文字列に変換し、LLMのプロンプトにコンテキストとして挿入します。
     * LLMはこれらの記憶を使用して個別の返信を生成します。



図中のcodeノードのコードは以下の通りです：

  1. 文字列をオブジェクトに変換する


    
    
    import json
    
    def main(arg1: str) -> object:
        try:
            # Parse the input JSON string
            input_data = json.loads(arg1)
            
            # Extract the memory object
            memory = input_data.get("memory", {})
            
            # Construct the return object
            result = {
                "facts": memory.get("facts", []),
                "preferences": memory.get("preferences", []),
                "memories": memory.get("memories", [])
            }
            
            return {
                "mem": result
            }
        except json.JSONDecodeError:
            return {
                "result": "Error: Invalid JSON string"
            }
        except Exception as e:
            return {
                "result": f"Error: {str(e)}"
            }

  2. オブジェクトを文字列に変換する


    
    
    import json
    
    def main(arg1: list) -> str:
        try:
            # Assume arg1[0] is the dictionary we need to process
            context = arg1[0] if arg1 else {}
            
            # Construct the memory object
            memory = {"memory": context}
            
            # Convert the object to a JSON string
            json_str = json.dumps(memory, ensure_ascii=False, indent=2)
            
            # Wrap the JSON string in <answer> tags
            result = f"<answer>{json_str}</answer>"
            
            return {
                "result": result
            }
        except Exception as e:
            return {
                "result": f"<answer>Error: {str(e)}</answer>"
            }

**シナリオ 2**

**ユーザーの初期の好み情報を記録** し，会話中にユーザーが入力した言語の好みを記憶し、後続の会話でその言語を使用して返信します。

例：ユーザーが会話を始める前に、`language`入力欄に「日本語」と指定した場合、その言語は会話変数に書き込まれ、LLMは後続の返信時に会話変数の情報を参照し、継続的に「日本語」を使用して返信します。

ユーザーの初期設定情報を記録する

**設定手順：**

**会話変数の設定** ：まず、会話変数 `language` を設定し、会話の開始時にこの変数の値が空かどうかを判断する条件分岐ノードを追加します。

**変数の書き込み/代入** ：最初の会話が開始された際、 `language` 変数の値が空であれば、LLMノードを使用してユーザーの言語入力を抽出し、その言語タイプを会話変数 `language` に書き込みます。

**変数の読み取り** ：後続の会話ラウンドでは、`language` 変数にユーザーの好みの言語が保存されています。以降の会話では、LLMノードがこの変数を参照し、ユーザーの好みの言語タイプを用いて返信します。

**シナリオ 3**

**Checklistのチェックを補助** し、会話中に会話変数にユーザーの入力項目を記録し、Checklistの内容を更新し、後続の会話で抜け漏れ項目を確認します。

例：会話を始める際、LLMはユーザーにチェックリストに関連するアイテムの入力を求めます。ユーザーがチェックリストの内容を一度述べると、その内容は会話変数に更新され、及び保存されます。LLMは各会話の後に、ユーザーに不足しているアイテムの追加を促します。

Checklistのチェックを補助

**配置流程：**

  * **会話変数の設定** ：最初に会話変数 `ai_checklist` を設定し、これをLLM内でチェックのコンテクストとして参照します。
  * **変数の書き込み/代入** ：各会話のラウンドごとに、LLMノード内の `ai_checklist` の値を確認し、ユーザーの入力と比較します。ユーザーが新しい情報を提供した場合、チェックリストを更新し、変数代入ノードを使用して出力内容を `ai_checklist` に書き込みます。
  * **変数の読み取り** ：`ai_checklist`の値を読み取り、すべてのチェックリストアイテムが完了するまで、各会話のラウンドでユーザーの入力と比較します。



* * *

### 

​

3 操作方法

**変数代入の使用：**

ノードの右側の `＋` マークをクリックし、「変数代入」 ノードを選択し、「代入られた変数」 と 「設定する変数」 を入力します。

変数代入ノードの設定

**変数の設定：**

代入られた変数：代入された変数を選択し、対象の会話変数を指定します

設定する変数：変換する必要のあるソース変数を選択します

上図の代入ロジック：`Language Recognition/text` を `language` に代入します。

**書き込みモード：**

  * Overwrite (上書き)：ソース変数の内容を対象の会話変数に上書きします
  * Append (追加)：指定された変数が配列型の場合に使用します
  * Clear (クリア)：対象の会話変数内の内容をクリアします
  * Remove（削除）：配列から要素を削除します。先頭から削除（First）または末尾から削除（Last）を選択できます。デフォルトは「先頭から削除」です



* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/guides/workflow/node/variable-assigner.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20ble-assig&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/guides/workflow/node%2Fvariable-assigner.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[変数集約](/ja-jp/guides/workflow/node/variable-aggregator)[反復処理（イテレーション）](/ja-jp/guides/workflow/node/iteration)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * 定義
  * 使用シナリオの例
  * 3 操作方法



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/guides/workflow/orchestrate-node

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

ワークフロー

オーケストレートノード

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

    * [キーコンセプト](/ja-jp/guides/workflow/concepts)
    * [変数](/ja-jp/guides/workflow/variables)
    * ノードの説明

    * [ショートカットキー](/ja-jp/guides/workflow/shortcut-key)
    * [オーケストレートノード](/ja-jp/guides/workflow/orchestrate-node)
    * [ファイルアップロード](/ja-jp/guides/workflow/file-upload)
    * エラー処理

    * [追加機能](/ja-jp/guides/workflow/additional-feature)
    * プレビューとデバッグ

    * [アプリケーション公開](/ja-jp/guides/workflow/publish)
    * [JSON形式での出力](/ja-jp/guides/workflow/structured-outputs)
    * [変更のお知らせ：画像アップロードがファイルアップロードに統合されました](/ja-jp/guides/workflow/bulletin)
  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




ワークフロー

# オーケストレートノード

Copy page

チャットフローおよびワークフローアプリケーションは、ビジュアルなドラッグアンドドロップ機能を通じてノードのオーケストレーションをサポートしており、シリアルおよびパラレルの2つのオーケストレーションデザインパターンがあります。

## 

​

シリアルノードのデザインパターン

このパターンでは、ノードはあらかじめ定義された順序で順次実行されます。各ノードは、前のノードがタスクを完了し、出力を生成した後にのみ操作を開始します。これにより、タスクが論理的な順序で実行されることが保証されます。

シリアルパターンを実装した「小説生成」ワークフローアプリケーションを考えてみましょう。ユーザーが小説のスタイル、リズム、キャラクターを入力した後、LLMが順番に小説の概要、プロット、エンディングを完成させます。各ノードは前のノードの出力に基づいて動作し、小説のスタイルに一貫性をもたらします。

### 

​

シリアル構造の作り方

  1. 2つのノードの間にある「+」アイコンをクリックして新しいシリアルノードを挿入します。
  2. ノードを順次リンクします。
  3. すべてのパスを「終了」ノード（ワークフロー）/「直接回答」ノード（チャットフロー）に収束させて、ワークフローを最終承認します。



### 

​

シリアル構造のアプリのログをチェックする

シリアル構造のアプリは、ログが順次ノードの操作を表示します。会話ボックスの右上にある “View Logs - Tracing” を順にクリックすると、各ノードの入力、出力、トークン消費、実行時間を含む完全なワークフロープロセスが表示されます。

## 

​

パラレルノードのデザインパターン

このアーキテクチャパターンは、複数のノードを並行して実行することを可能にします。前のノードは、パラレル構造内の複数のノードを同時にトリガーできます。これらのパラレルノードは独立して動作し、タスクを同時に実行することで、全体のワークフロー効率を大幅に向上させます。

パラレルアーキテクチャを実装した翻訳ワークフローアプリケーションを考えてみましょう。ユーザーがソーステキストを入力してワークフローをトリガーすると、パラレル構造内のすべてのノードが前のノードから同時に命令を受け取ります。これにより、複数の言語への同時翻訳が可能となり、全体の処理時間が大幅に短縮されます。

### 

​

パラレルノードのデザインパターン

次の4つの方法は、ノードの追加やビジュアル操作を通じてパラレル構造を作成する方法を示しています：

**方法1**  
ノードの上にカーソルを合わせると「+」ボタンが表示されます。クリックすると、複数のノードが追加され、自動的にパラレル構造が形成されます。

**方法2**  
ノードから接続を延長するには、ノードの「+」ボタンをドラッグしてパラレル構造を作成します。

**方法3**  
キャンバス上に複数のノードがある場合は、ビジュアルにドラッグしてリンクし、パラレル構造を形成します。

**方法4**  
キャンバスベースの方法に加えて、ノードの右側パネルの「Next Step」セクションからノードを追加することで、パラレル構造を生成することもできます。このアプローチにより、自動的にパラレル構成が作成されます。

**注意:**

  * 任意のノードがパラレル構造の下流ノードとして機能します。
  * ワークフローアプリケーションには、単一かつ一意な「end」ノードが必要です。
  * チャットフローアプリケーションでは複数の「answer」ノードがサポートされます。これらのアプリケーションの各パラレル構造は、適切なコンテンツの出力を確保するために「answer」ノードで終了する必要があります。
  * すべてのパラレル構造は同時に実行されます。パラレル構造内のノードは、タスクを完了した後に結果を出力し、出力には順序関係がありません。パラレル構造が単純であればあるほど、結果の出力が速くなります。



### 

​

パラレル構造の作り方

以下の4つのパターンは、一般的なパラレル構造デザインを示しています：

#### 

​

1\. 通常のパラレル

通常のパラレルは、「開始 | パラレルノード | 終了」の3階層関係を指します。この構造は直感的で、ユーザー入力後に複数のタスクを同時に実行できます。

パラレルブランチの上限は10です。

#### 

​

2\. ネストされたパラレル

ネストされたパラレルは、「開始 | 複数のパラレル構造 | 終了」の多階層関係を指します。これは、外部APIを要求する必要があるノード内で同時に複数のタスクを処理し、結果を下流ノードに渡す必要があるような、より複雑なワークフローに適しています。

ワークフローは、最大3層までのネスト関係をサポートします。

#### 

​

3\. 条件分岐 + パラレル

パラレル構造は条件分岐と組み合わせて使用することもできます。

#### 

​

4\. イテレーション + パラレル

このパターンは、イテレーションとパラレル構造を組み合わせたものです。

### 

​

パラレル構造のアプリのログをチェックする

パラレル構造をもつアプリケーションは、ツリーのような形式でログを生成します。折りたたみ可能なパラレルノード グループにより、個々のノード ログを簡単に表示できます。

* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/guides/workflow/orchestrate-node.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20strate-n&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/guides/workflow%2Forchestrate-node.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[ショートカットキー](/ja-jp/guides/workflow/shortcut-key)[ファイルアップロード](/ja-jp/guides/workflow/file-upload)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * シリアルノードのデザインパターン
  * シリアル構造の作り方
  * シリアル構造のアプリのログをチェックする
  * パラレルノードのデザインパターン
  * パラレルノードのデザインパターン
  * パラレル構造の作り方
  * 1\. 通常のパラレル
  * 2\. ネストされたパラレル
  * 3\. 条件分岐 + パラレル
  * 4\. イテレーション + パラレル
  * パラレル構造のアプリのログをチェックする



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/guides/workflow/publish

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

ワークフロー

アプリケーション公開

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

    * [キーコンセプト](/ja-jp/guides/workflow/concepts)
    * [変数](/ja-jp/guides/workflow/variables)
    * ノードの説明

    * [ショートカットキー](/ja-jp/guides/workflow/shortcut-key)
    * [オーケストレートノード](/ja-jp/guides/workflow/orchestrate-node)
    * [ファイルアップロード](/ja-jp/guides/workflow/file-upload)
    * エラー処理

    * [追加機能](/ja-jp/guides/workflow/additional-feature)
    * プレビューとデバッグ

    * [アプリケーション公開](/ja-jp/guides/workflow/publish)
    * [JSON形式での出力](/ja-jp/guides/workflow/structured-outputs)
    * [変更のお知らせ：画像アップロードがファイルアップロードに統合されました](/ja-jp/guides/workflow/bulletin)
  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




ワークフロー

# アプリケーション公開

Copy page

デバッグが完了したら、右上の「公開する」をクリックして、このワークフローを保存し、さまざまなタイプのアプリとして素早く公開することができます。

対話型アプリは以下の形式で公開できます：

  * 直接実行
  * Webサイトに埋め込む
  * APIアクセス



ワークフローアプリは以下の形式で公開できます：

  * 直接実行
  * バッチ処理
  * APIアクセス
  * ツールとして公開



複数バージョンのチャットフローやワークフローを管理する場合は、[バージョン管理](/ja-jp/guides/management/version-control)を参照してください。

* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/guides/workflow/publish.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/guides/workflow%2Fpublish.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[実行履歴](/ja-jp/guides/workflow/debug-and-preview/history)[JSON形式での出力](/ja-jp/guides/workflow/structured-outputs)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/guides/workflow/shortcut-key

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

ワークフロー

ショートカットキー

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

    * [キーコンセプト](/ja-jp/guides/workflow/concepts)
    * [変数](/ja-jp/guides/workflow/variables)
    * ノードの説明

    * [ショートカットキー](/ja-jp/guides/workflow/shortcut-key)
    * [オーケストレートノード](/ja-jp/guides/workflow/orchestrate-node)
    * [ファイルアップロード](/ja-jp/guides/workflow/file-upload)
    * エラー処理

    * [追加機能](/ja-jp/guides/workflow/additional-feature)
    * プレビューとデバッグ

    * [アプリケーション公開](/ja-jp/guides/workflow/publish)
    * [JSON形式での出力](/ja-jp/guides/workflow/structured-outputs)
    * [変更のお知らせ：画像アップロードがファイルアップロードに統合されました](/ja-jp/guides/workflow/bulletin)
  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




ワークフロー

# ショートカットキー

Copy page

チャットフロー / ワークフロー アプリのオーケストレーションページでは、ノードのアッランジの効率を向上させるために次のショートカットキーがサポートされています。

Windows| macOS| 説明   
---|---|---  
Ctrl + C| Command + C| ノードをコピーする  
Ctrl + V| Command + V| ノードを貼り付ける  
Ctrl + D| Command + D| ノードを重複する   
Ctrl + O| Command + O| ノードを整理する   
Ctrl + Z| Command + Z| 操作を元に戻す   
Ctrl + Y| Command + Y| 元に戻した操作をやり直す  
Ctrl + Shift + Z| Command + Shift + Z| 元に戻した操作をやり直す  
Ctrl + 1| Command + 1| キャンバスフィットビュー  
Ctrl + (-)| Command + (-)| キャンバスが縮小されます  
Ctrl + (=)| Command + (=)| キャンバスが拡大されます  
Shift + 1| Shift + 1| キャンバスを100%にリセットします   
Shift + 5| Shift + 5| キャンバスを50%に縮小されます   
H| H| ハンドモードに切り替わります  
V| V| ポインターモードに切り替わります   
Delete/Backspace| Delete/Backspace| 選択したノードを削除します  
Alt + R| Option + R| ワークフローを実行します   
  
* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/guides/workflow/shortcut-key.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20cut-&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/guides/workflow%2Fshortcut-key.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[ループ処理（繰り返し処理）](/ja-jp/guides/workflow/node/loop)[オーケストレートノード](/ja-jp/guides/workflow/orchestrate-node)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/guides/workflow/structured-outputs

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

ワークフロー

JSON形式での出力

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

    * [キーコンセプト](/ja-jp/guides/workflow/concepts)
    * [変数](/ja-jp/guides/workflow/variables)
    * ノードの説明

    * [ショートカットキー](/ja-jp/guides/workflow/shortcut-key)
    * [オーケストレートノード](/ja-jp/guides/workflow/orchestrate-node)
    * [ファイルアップロード](/ja-jp/guides/workflow/file-upload)
    * エラー処理

    * [追加機能](/ja-jp/guides/workflow/additional-feature)
    * プレビューとデバッグ

    * [アプリケーション公開](/ja-jp/guides/workflow/publish)
    * [JSON形式での出力](/ja-jp/guides/workflow/structured-outputs)
    * [変更のお知らせ：画像アップロードがファイルアップロードに統合されました](/ja-jp/guides/workflow/bulletin)
  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




ワークフロー

# JSON形式での出力

Copy page

DifyはLLMツールチェーンプラットフォームとして、JSON形式での出力機能をサポートしています。この機能により、LLMから返されるデータの形式が利用しやすく、安定し、予測可能になります。エラー処理やフォーマット変換の手間を削減できます。

## 

​

利点

  * **データ形式の整合性確保** : LLMがコンテンツを生成する場合でも、事前に設定された形式に準拠し、データの不整合を防ぎます。

  * **後続処理の簡素化** : データベース、APIまたはフロントエンドは、追加のデータクレンジングなしでJSONスキーマを直接解析できます。

  * **ローコード開発の効率化** : 開発者は複雑なデータ検証ロジックを手書きする必要がなく、JSONスキーマを使用して出力を制限できます。




## 

​

JSON形式での出力の実装方法

Difyの操作画面では、次の2つの方法でJSON形式での出力を実装できます。

  * **方法1: ツール設定を直接行う**

  * **方法2: LLMノードのJSONスキーマエディタを使用する**




### 

​

方法1: ツール設定を直接行う

**[Tool(ツール)](https://docs.dify.ai/ja-jp/plugins/schema-definition/tool) > データ構造 > 出力変数の定義**を参照してください。

### 

​

方法2: LLMノードのJSONスキーマエディタを使用する

**[LLM](https://docs.dify.ai/ja-jp/guides/workflow/node/llm) > 高級機能 > 構造化出力** と **[LLM](https://docs.dify.ai/ja/guides/workflow/node/llm) > 活用事例 > 構造化出力**を参照してください。

## 

​

例外処理

**例外状況**

JSONスキーマエディタを使用して構造化出力を行う際に、以下の制限や例外状況が発生する可能性があります。

  * **モデルの能力制限** : 一部のLLM(特に70B以下のモデル、またはGPT-3.5Turbo相当のモデル)は、指示への追従性が低いため、JSONスキーマの解析に失敗する可能性があります。

  * **形式の互換性** : 一部のLLMはJSONモードのみをサポートし、JSONスキーマをサポートしていないため、厳密なスキーマ解析に失敗する可能性があります。

  * **エラーメッセージ** : `Failed to parse structured output: output is not a valid json str`というエラーが発生します。この種のエラーは、主にモデルがJSONの生成に失敗したことが原因です。




**推奨される対処方法**

  1. **JSONスキーマをサポートするモデルを優先的に使用する** : 推奨リストは以下のとおりです。

     * Gemini2.0Flash/Flash-Lite
     * Gemini1.5Flash8B(0827/0924)
     * Gemini-1.5pro
     * GPT-4o
     * GPT-4o-mini
     * o1-mini/o3-miniシリーズ
  2. **システムプロンプトを適切に調整する** : 指示への追従性を高め、LLMの出力がスキーマ規範に準拠するように、システムプロンプトを調整してください。例えば、JSONスキーマが数式の構造化を目的としているのに、法律条文の解析を指示すると、モデルがタスクを正しく理解できず、出力の精度が低下する可能性があります。

  3. **例外処理ポリシーを設定する** : 解析に失敗した場合、以下の対策を検討できます。

     1. **再試行設定** : ノード内で**再試行設定** を有効にし、最大再試行回数と再試行間隔を設定して、解析エラーの影響を軽減します。

     2. **エラー時の処理を設定する** : ノード内の**例外処理** で**エラー時の処理** を設定します。ノードで例外が発生すると、エラー時の処理が自動的に実行されます。




[エラー処理](https://docs.dify.ai/ja-jp/guides/workflow/error-handling)を参照してください。

* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/guides/workflow/structured-outputs.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20tured-outp&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/guides/workflow%2Fstructured-outputs.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[アプリケーション公開](/ja-jp/guides/workflow/publish)[変更のお知らせ：画像アップロードがファイルアップロードに統合されました](/ja-jp/guides/workflow/bulletin)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * 利点
  * JSON形式での出力の実装方法
  * 方法1: ツール設定を直接行う
  * 方法2: LLMノードのJSONスキーマエディタを使用する
  * 例外処理



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/guides/workflow/variables

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

ワークフロー

変数

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

    * [キーコンセプト](/ja-jp/guides/workflow/concepts)
    * [変数](/ja-jp/guides/workflow/variables)
    * ノードの説明

    * [ショートカットキー](/ja-jp/guides/workflow/shortcut-key)
    * [オーケストレートノード](/ja-jp/guides/workflow/orchestrate-node)
    * [ファイルアップロード](/ja-jp/guides/workflow/file-upload)
    * エラー処理

    * [追加機能](/ja-jp/guides/workflow/additional-feature)
    * プレビューとデバッグ

    * [アプリケーション公開](/ja-jp/guides/workflow/publish)
    * [JSON形式での出力](/ja-jp/guides/workflow/structured-outputs)
    * [変更のお知らせ：画像アップロードがファイルアップロードに統合されました](/ja-jp/guides/workflow/bulletin)
  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




ワークフロー

# 変数

Copy page

**ワークフロー** や**チャットフロー** は、単独ノードで構成されています。多くのノードは入力と出力のアイテムを持っていますが、各ノードの入力および出力情報は一貫性がなく、ダイナミックに変化します。

**固定のシンボルを用いて、ダイナミックなコンテンツをどのように参照するのでしょうか？** 変数はダイナミックなデータコンテナとして、さまざまな内容を格納・送信し、異なるノードの間で相互に参照され、お互いに情報を移動することができます。

### 

​

**システム変数**

システム変数とは、チャットフロー/ワークフロー内でグローバルに使用される事前設定されたシステムレベルのパラメータです。すべてのシステムレベルの変数は`sys.`で始まります。

#### 

​

ワークフロー

ワークフローは、以下のシステム変数を提供します：

変数名| データタイプ| 说明| メモ  
---|---|---|---  
`sys.files``[LEGACY]`| Array[File]| ファイルパラメータで、ユーザーがアプリを初めて使用する際にアップロードした画像を保存します。| 画像のアップロード機能は、アプリケーションの編成ページ右上の「機能」から開始する必要があります。  
`sys.user_id`| String| ユーザーIDです。ワークフローアプリを使用する際、システムが自動的にユーザーに一意の識別子を割り当て、異なるユーザーを区別するために使用します。|   
`sys.app_id`| String| アプリIDで、システムが各ワークフローアプリに一意の識別子を割り当て、異なるアプリを区別します。このパラメータは現在のアプリの基本情報を記録するために使用されます。| 開発能力を持つユーザー向けで、このパラメータを使用して異なるワークフローアプリを区別し、特定できます。  
`sys.workflow_id`| String| ワークフローIDで、現在のワークフローアプリに含まれるすべてのノード情報を記録するために使用されます。| 開発能力を持つユーザー向けで、このパラメータを使用してワークフロー内のノード情報を追跡および記録できます。  
`sys.workflow_run_id`| String| ワークフローアプリ実行IDで、ワークフローアプリ内の実行状況を記録するために使用されます。| 開発能力を持つユーザー向けで、このパラメータを使用してアプリの過去の実行状況を追跡できます。  
  
ワークフロー内のシステム変数

#### 

​

チャットフロー

チャットフローは、以下のシステム変数を提供します：

変数名| データタイプ| 説明| メモ  
---|---|---|---  
`sys.query`| String| ユーザーが最初に入力したダイアログボックスの内容|   
`sys.files`| Array[File]| ユーザーがダイアログボックス内でアップロードした画像| 画像のアップロード機能は、アプリケーションの構築ページ右上隅の「機能」で有効にする必要があります  
`sys.dialogue_count`| Number| チャットフロー形式のアプリとの対話中にユーザーが持つ対話のラウンド数。各対話の後、自動的に1つのカウントが増加します。if-elseノードと組み合わせて豊富な分岐ロジックを作成できます。例えば、Xラウンド目に到達したとき、対話履歴を振り返り分析を提供します。|   
`sys.conversation_id`| String| 対話ボックスのインタラクションセッションの一意の識別子で、すべての関連メッセージを同じ対話にグループ化し、LLMが同じトピックとコンテキストに対して持続的な対話を行うことを確認します。|   
`sys.user_id`| String| 各アプリユーザーに割り当てられた一意の識別子で、異なる対話ユーザーを区別するために使用されます。|   
`sys.app_id`| String| アプリIDで、システムは各ワークフローアプリケーションに一意の識別子を割り当て、異なるアプリを区別し、このパラメータを使用して現在のアプリの基本情報を記録します。| 開発能力を持つユーザー向けで、このパラメータを使用して異なるワークフローアプリを特定および位置付けることができます。  
`sys.workflow_id`| String| ワークフローIDで、現在のワークフローアプリ内に含まれるすべてのノード情報を記録するために使用されます。| 開発能力を持つユーザー向けで、このパラメータを使用してワークフロー内のすべてのノード情報を追跡および記録できます。  
`sys.workflow_run_id`| String| ワークフローアプリケーションの実行IDで、ワークフローアプリケーション内の実行状況を記録するために使用されます。| 開発能力を持つユーザー向けで、このパラメータを使用してアプリの過去の実行状況を追跡できます。  
  
チャットフロー内のシステム変数

### 

​

環境変数

**環境変数は、APIキーやデータベースのパスワードといった機密性の高い情報を保護する際に、ワークフロー実行時に活用されます。** これらはコードに直接書き込むのではなく、ワークフローに設定され、異なる環境間での共有が可能になっています。

環境変数

サポートされるデータ型には以下の3つがあります：

  * String 文字列
  * Number 数値
  * Secret シークレット



環境変数は以下の特徴を持ちます：

  * 多くのノードでグローバルに参照可能です；
  * 同一の環境変数名を複数設定することはできません；
  * ノードの出力変数は基本的に読み取り専用で、書き換えることはできません；



### 

​

会話変数

> 会話変数は、マルチターンダイアログシナリオに適した機能ですが、ワークフロー型アプリケーションのインタラクションは線形かつ独立しており、複数回の対話が行われないため、会話変数は主にチャットフロー型アプリケーション（チャットボットからワークフローへの変換）にのみ適用されます。

**会話変数は、同一のチャットフローセッション内でアプリ開発者が一時的に保存する特定の情報を定義し、現在のワークフロー内のマルチターンダイアログ全体でその情報を参照可能にします。** 具体例としては、コンテキスト、ダイアログボックスにアップロードされたファイル（近日公開予定）、ユーザーがダイアログ中に入力した好みなどが含まれます。これはLLMに随時参照できる「メモ帳」を提供し、LLMのメモリエラーによる情報のずれを防ぐためのものです。

例えば、ユーザーが最初の対話で設定した言語を会話変数に保存すれば、LLMはその情報を参照し、続く対話で指定された言語でユーザーに返信することが可能です。

**会話変数** は以下の6つのデータ型をサポートしています：

  * String 文字列
  * Number 数値
  * Object オブジェクト
  * Array[string] 文字列の配列
  * Array[number] 数値の配列
  * Array[object] オブジェクトの配列



**会話変数** は以下の特徴を持ちます：

  * 会話変数はほとんどのノード内でグローバルに参照可能です。
  * 会話変数の書き込みには[変数代入](./nodes/variable-assigner)ノードを使用する必要があります；
  * 会話変数は読み書き可能な変数です；



会話変数と変数代入ノードの具体的な使用方法については、[変数代入](./nodes/variable-assigner)をご参照ください。

### 

​

注意事項

  * 変数名の重複を避けるため、ノードの命名は独自に設定してください。
  * ノードの出力変数は通常固定されており、編集することはできません。



* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/guides/workflow/variables.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20b&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/guides/workflow%2Fvariables.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[キーコンセプト](/ja-jp/guides/workflow/concepts)[開始](/ja-jp/guides/workflow/node/start)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * システム変数
  * ワークフロー
  * チャットフロー
  * 環境変数
  * 会話変数
  * 注意事項



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/guides/workspace/app

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

コラボレーション

発見

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

    * [コラボレーション](/ja-jp/guides/workspace/readme)
    * [発見](/ja-jp/guides/workspace/app)
    * [メンバーの招待と管理](/ja-jp/guides/workspace/invite-and-manage-members)
  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




コラボレーション

# 発見

Copy page

## 

​

テンプレートアプリケーションの使用

**探索 > 発見** では、いくつかの一般的なテンプレートアプリケーションを提供しています。これらのアプリケーションは、翻訳、ライティング、プログラミング、アシスタントなどをカバーしています。

テンプレートアプリケーションを使用したい場合は、テンプレート上の「ワークスペースに追加」ボタンをクリックしてください。これで左側のワークスペースでそのアプリケーションを使用することができます。

新しいアプリケーションを作成するためにテンプレートを修正したい場合は、テンプレート上の「カスタマイズ」ボタンをクリックしてください。

## 

​

ワークスペース

ワークスペースはアプリケーションのナビゲーションです。ワークスペースでアプリケーションをクリックすると、そのアプリケーションを直接使用することができます。

ワークスペースには、あなた自身のアプリケーションや他のチームメンバーがワークスペースに追加したアプリケーションが含まれています。

* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/guides/workspace/app.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/guides/workspace%2Fapp.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[コラボレーション](/ja-jp/guides/workspace/readme)[メンバーの招待と管理](/ja-jp/guides/workspace/invite-and-manage-members)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * テンプレートアプリケーションの使用
  * ワークスペース



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/guides/workspace/invite-and-manage-members

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

コラボレーション

メンバーの招待と管理

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

    * [コラボレーション](/ja-jp/guides/workspace/readme)
    * [発見](/ja-jp/guides/workspace/app)
    * [メンバーの招待と管理](/ja-jp/guides/workspace/invite-and-manage-members)
  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




コラボレーション

# メンバーの招待と管理

Copy page

ワークスペースのメンバーは、管理者によって招待および管理されます。ログイン後、Difyのユーザーアイコンのドロップダウンメニューから設定を見つけ、その画面の左側にあるメンバー管理画面を開きます。

### 

​

メンバーの招待

招待される人の電子メールを提供すると、システムは即時にその人のワークスペースへのアクセスを承認し、招待された人にはメールが送信されます。

システムは新しいメンバーのDifyアカウントを自動的に作成します。

### 

​

メンバーの削除

メンバーがチームから削除されると、そのユーザーは現在のワークスペースにアクセスできなくなりますが、そのユーザーが既に参加している他のワークスペースへのアクセスには影響しません。

* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/guides/workspace/invite-and-manage-members.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20e-and-manage-memb&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/guides/workspace%2Finvite-and-manage-members.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[発見](/ja-jp/guides/workspace/app)[アプリの管理](/ja-jp/guides/management/app-management)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * メンバーの招待
  * メンバーの削除



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/guides/workspace/readme

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

コラボレーション

コラボレーション

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

    * [コラボレーション](/ja-jp/guides/workspace/readme)
    * [発見](/ja-jp/guides/workspace/app)
    * [メンバーの招待と管理](/ja-jp/guides/workspace/invite-and-manage-members)
  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




コラボレーション

# コラボレーション

Copy page

Dify は複数ユーザー向けのプラットフォームであり、ワークスペースはチームの基本的な協同単位です。ワークスペースのメンバーは、アプリやナレッジベースの作成・編集が可能で、[発見](/ja-jp/guides/workspace/app)エリアで他のチームメンバーが作成した公開アプリを直接利用することもできます。

### 

​

ログイン方式

現在のところ、Dify のクラウドサービスとコミュニティ版でサポートされているログイン方式には違いがあります。以下の表を参照してください。

| クラウドサービス| コミュニティ版  
---|---|---  
メールログイン| 非対応| 対応  
GitHubアカウントログイン| 対応| 非対応  
Googleアカウントログイン| 対応| 非対応  
SSOログイン| 対応予定| 対応予定  
  
### 

​

アカウントの作成

クラウドサービスを利用している場合、初回ログイン時に自動的にワークスペースが作成され、あなたが管理者になります。

コミュニティ版では、インストール時に管理者のメールアドレスとパスワードの設定を求められます。コミュニティ版では複数のワークスペースの開設はサポートされていません。

* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/guides/workspace/readme.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/guides/workspace%2Freadme.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[敏感内容審査](/ja-jp/guides/extension/code-based-extension/moderation)[発見](/ja-jp/guides/workspace/app)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * ログイン方式
  * アカウントの作成



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/introduction

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

Difyへようこそ

Difyへようこそ

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

    * [Difyへようこそ](/ja-jp/introduction)
    * [特徴と技術的な仕様](/ja-jp/getting-started/readme/features-and-specifications)
    * [モデルプロバイダーリスト](/ja-jp/getting-started/readme/model-providers)
  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




Difyへようこそ

# Difyへようこそ

Copy page

**Dify** はオープンソースのAIアプリ開発プラットフォームです。Backend as Serviceと[LLMOps](learn-more/extended-reading/what-is-llmops.md)の理念を融合し、開発者が迅速にAIアプリケーションを構築できるようにします。同時に、プログラミングが得意でない方でも、自分のアイデアをすぐにAIアプリにできる直感的なインターフェースを提供しています。

Difyを使えば、最新のAI技術を活用して誰でも簡単にAIアプリを作ることができます。

Difyには、AIアプリ開発に必要な機能が全て揃っています：

  * 数百種類のAI言語モデルに対応
  * 直感的な操作でカスタムチャットボットを作成
  * 高性能で柔軟なRAGエンジン
  * 様々なツールを活用したAIエージェントの構築
  * 自由自在なワークフロー設計



さらに、使いやすいインターフェースとAPIも提供しているので、開発者の皆さんは面倒な作業を省いて、新しいアイデアやビジネスニーズに集中できます。

## 

​

なぜDifyを選ぶの？

Difyは、すぐに本番で使える完璧なソリューションです。他のAI開発ツール（LangChainなど）が部品の詰まった工具箱だとすれば、Difyは設計図付きの組み立て済みキットのようなものです。細部まで考え抜かれ、十分にテストされているので、安心して使い始められます。 重要なのは、Difyがオープンソースだということ。専門チームとコミュニティが力を合わせて開発しています。どんなAIモデルでも自由に使え、データの管理も自分でできるので、安全性と柔軟性を両立できます。

> ユーザーの皆さんからは、「シンプルで使いやすく、そして進化が速い」と評価いただいています。 —— Luyu Zhang（Dify.AI CEO）

このガイドを読めば、Difyのことがもっと分かるはずです。私たちは、Difyがみなさんのお役に立てると信じています。

## 

​

Difyで何ができる？

「Dify」という名前には2つの意味があります。「Define（定義する）+ Modify（改良する）」の組み合わせで、AIアプリを作って改善し続けることを表しています。そして「Do it for you（あなたのためにやる）」という意味も込められています。

  * スタートアップの方へ：アイデアを素早くカタチに。すでに多くのチームがDifyを使ってMVP（最小限のプロダクト）を作り、投資を得たり顧客を獲得しています。
  * 既存ビジネスで活用したい方へ：AIで既存のアプリをパワーアップ。DifyのAPIを使えば、AIの設定とビジネスロジックを分けて管理できます。データやコスト、使用状況も簡単に把握できるので、効果を見ながら改善できます。
  * 大企業の方へ：社内のAI活用を促進。銀行や大手IT企業では、Difyを社内のAIゲートウェイとして導入し、AI技術の利用促進と一元管理を実現しています。
  * AI好きの方へ：最新のAI技術を気軽に試せます。すでに6万人以上の開発者がDifyで自分のアプリを作っています。



### 

​

次のステップ

  * [クイックスタート](/ja-jp/guides/application-orchestrate/creating-an-application)を読んで、Difyでのアプリ作成の流れを確認
  * [Difyを自分の管理するサーバーに導入](/ja-jp/getting-started/install-self-hosted)する方法と[様々なAI言語モデルを使う](/ja-jp/guides/model-configuration)方法を学ぶ
  * Difyの[機能詳細](/ja-jp/getting-started/readme/features-and-specifications.md)とロードマップをチェック
  * [GitHub](https://github.com/langgenius/dify)でスターを付け、**コントリビューションガイド** を読む



* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/introduction.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20duct&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp%2Fintroduction.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[特徴と技術的な仕様](/ja-jp/getting-started/readme/features-and-specifications)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * なぜDifyを選ぶの？
  * Difyで何ができる？
  * 次のステップ



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/learn-more/extended-reading/dify-docs-mcp

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

さらに読む

Dify Docs MCP サービスをデプロイしてドキュメントと対話する

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

    * [LLMOpsとは？](/ja-jp/learn-more/extended-reading/what-is-llmops)
    * [配列変数とは何ですか？](/ja-jp/learn-more/extended-reading/what-is-array-variable)
    * 検索拡張生成（RAG）

    * [DifyでJSONスキーマ出力を使用する方法](/ja-jp/learn-more/extended-reading/how-to-use-json-schema-in-dify)
    * [Dify Docs MCP サービスをデプロイしてドキュメントと対話する](/ja-jp/learn-more/extended-reading/dify-docs-mcp)
  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




さらに読む

# Dify Docs MCP サービスをデプロイしてドキュメントと対話する

Copy page

ローカルドキュメント MCP サーバーをデプロイし、AI を通じてドキュメントと対話する方法を学習します。

Model Context Protocol (MCP) は、Anthropic によって開発された標準化するオープンプロトコルで、AIが外部のツールやデータソースと対話するための標準化されたインターフェースを提供し、そしてこのプロトコルを用いてソフトウェアツールやデータリソースにアクセスします。

本記事では、[dify-docs リポジトリ](https://github.com/langgenius/dify-docs) に基づいてローカル MCP サーバーをデプロイし、LLM とドキュメントの自然な対話を実現する方法を紹介します。

MCP プロトコルの詳細については、[Model Context Protocol](https://docs.anthropic.com/en/docs/agents-and-tools/mcp) を参照してください。

動作原理

AI が質問を受信すると、必要な概念と技術的詳細を分析します。Dify Docsを参照する必要がある場合、モデルは自動的に検索クエリを生成します。

AI は質問の性質に基づいて対応する検索キーワードとクエリ戦略を生成します。「Dify で OpenAI GPT-4 モデルを統合する方法」に対して、モデルは「モデル設定」、「API 統合」、「GPT-4 設定」などのクエリを生成し、完全な情報取得を確保します。

MCP サーバーはクエリを受信した後、Dify Docsライブラリを検索し、関連コンテンツを返します。モデルは情報を統合し、正確で詳細な回答を生成します。

このプロセスは多回ラウンドの対話クエリをサポートし、初回結果に基づいて後続の検索戦略を調整します。

## 

​

前提条件

  * Node ≥ 16.0
  * Git
  * MCP クライアント（Claude Desktop、VS Code など）



## 

​

インストール手順

### 

​

1\. リポジトリのクローン

Dify ドキュメントリポジトリをローカルにクローンします：
    
    
    git clone https://github.com/langgenius/dify-docs.git

このリポジトリには完全な Dify ドキュメントが含まれており、MCP サーバーのデータソースとして機能します。

### 

​

2\. MCP サーバーの初期化

ドキュメントディレクトリに入り、MCP サーバーをインストールして設定します：
    
    
    cd dify-docs
    npx mint-mcp add dify-6c0370d8

このコマンドは以下の操作を完了します：

  * ローカル MCP サーバーインスタンスの作成
  * ドキュメントコンテンツの分析とインデックス化
  * 必要な依存関係の設定



インストールプロセスは約数分かかり、時間はネットワーク状況に依存します。

### 

​

3\. MCP サーバーの設定

**MCP クライアントとサーバーの関係：**

MCP サーバーは知識とツールを提供し、クエリリクエストの処理、データリソースの管理、特定機能の実行を行います。クライアントはユーザーインタラクションインターフェースで、通常は AI アプリケーションやチャットツールで、ユーザーの質問を受信し、適切な MCP サーバーにクエリを転送し、情報を統合してユーザーに返します。

インストール中に MCP クライアントを選択します。Claude Desktop を例として、ツールは対応する設定情報を生成します。

インストール完了後、Claude Desktop の設定で MCP サーバーを追加します。設定ページに移動し、MCP サーバー設定セクションでサーバーアドレスとポートを追加し、設定を保存してアプリケーションを再起動します。

## 

​

Docsとの対話

設定完了後、Dify Docsと対話できます。この方法は自然言語クエリをサポートし、ページごとの検索や正確なキーワードマッチングは不要です。

例えば「カスタマーサービスチャットボットを作成したいのですが、Workflow と Chatflow のどちらを選ぶべきですか？」と質問すると、システムは 2 つのアプリケーションタイプの違いを説明し、カスタマーサービスシナリオに基づいて具体的な推奨事項を提供します。

「Dify のポート番号を変更する方法」などの技術的質問に対して、AI は具体的な操作手順を提供します：

MCP 方式では、自然言語で問題を記述できます。具体的な技術用語が分からない場合でも、期待する効果を記述するだけで関連情報を取得できます。

## 

​

RAG 方法との比較

RAG（検索拡張生成）は事前にDocsをテキストチャンクに分割し、ベクトル埋め込みを使用してインデックスを構築します。ユーザーが質問すると、システムは質問とテキストチャンクの類似度を計算し、関連チャンクをコンテキストとして選択して回答を生成します。

RAG の利点：処理速度が速く、大規模な静的ドキュメントコレクションに適しています。

RAG の制限：

  * 静的ドキュメント分割により関連情報が分散する可能性がある
  * ベクトル類似度ベースの検索では、意味的に関連しているが語彙が異なるコンテンツを見逃す可能性がある
  * コンテキストウィンドウの制限により、特定のフラグメントのみに基づいて回答を生成する



MCP 方法は動的で柔軟なアプローチを採用します。AI は質問の要件に基づいてクエリ戦略を積極的に生成し、多ラウンドの対話クエリをサポートし、初回結果に基づいて後続の検索を調整します。

MCP の利点：

  * 完全なドキュメントコンテンツにアクセスでき、複雑な章間クエリをサポート
  * リアルタイムクエリがドキュメント更新を反映し、情報の時宜性を確保
  * 一貫性のある完全な回答を提供



* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/learn-more/extended-reading/dify-docs-mcp.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20docs-&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/learn-more/extended-reading%2Fdify-docs-mcp.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[DifyでJSONスキーマ出力を使用する方法](/ja-jp/learn-more/extended-reading/how-to-use-json-schema-in-dify)[セルフホスト / ローカル展開に関するよくある質問（FAQ）](/ja-jp/learn-more/faq/install-faq)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * 前提条件
  * インストール手順
  * 1\. リポジトリのクローン
  * 2\. MCP サーバーの初期化
  * 3\. MCP サーバーの設定
  * Docsとの対話
  * RAG 方法との比較



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/learn-more/extended-reading/how-to-use-json-schema-in-dify

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

さらに読む

DifyでJSONスキーマ出力を使用する方法

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

    * [LLMOpsとは？](/ja-jp/learn-more/extended-reading/what-is-llmops)
    * [配列変数とは何ですか？](/ja-jp/learn-more/extended-reading/what-is-array-variable)
    * 検索拡張生成（RAG）

    * [DifyでJSONスキーマ出力を使用する方法](/ja-jp/learn-more/extended-reading/how-to-use-json-schema-in-dify)
    * [Dify Docs MCP サービスをデプロイしてドキュメントと対話する](/ja-jp/learn-more/extended-reading/dify-docs-mcp)
  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




さらに読む

# DifyでJSONスキーマ出力を使用する方法

Copy page

JSON Schemaは、JSONデータ構造を記述するための仕様です。開発者は、LLMの出力が定義されたデータやコンテンツに厳密に適合するように、JSON Schema構造を定義することができます。これにより、明確で分かりやすいドキュメントやコード構造を生成することが可能となります。

## 

​

JSON Schema機能をサポートするモデル

  * `gpt-4o-mini-2024-07-18` 及びそれ以降
  * `gpt-4o-2024-08-06` 及びそれ以降



> OpenAIシリーズモデルの構造化された出力機能について詳しくは、[Structured Outputs](https://platform.openai.com/docs/guides/structured-outputs/introduction)をご覧ください。

## 

​

DifyでのJSON Schemaの有効化

アプリケーション内のLLMを、上記で言及したJSON Schema出力をサポートするモデルのいずれかに切り替えます。次に、設定フォームで`JSON Schema`を有効にし、JSON Schemaテンプレートを入力します。同時に、`response_format`列を有効にし、`json_schema`形式に切り替えます。

LLMによって生成されたコンテンツは、次の形式で出力をサポートします：

  * **テキスト：** テキスト形式で出力



## 

​

JSON Schemaテンプレートの定義

以下のJSON Schema形式を参考にして、テンプレートコンテンツを定義できます：
    
    
    {
        "name": "template_schema",
        "description": "JSON Schemaの汎用テンプレート",
        "strict": true,
        "schema": {
            "type": "object",
            "properties": {
                "field1": {
                    "type": "string",
                    "description": "field1の説明"
                },
                "field2": {
                    "type": "number",
                    "description": "field2の説明"
                },
                "field3": {
                    "type": "array",
                    "description": "field3の説明",
                    "items": {
                        "type": "string"
                    }
                },
                "field4": {
                    "type": "object",
                    "description": "field4の説明",
                    "properties": {
                        "subfield1": {
                            "type": "string",
                            "description": "subfield1の説明"
                        }
                    },
                    "required": ["subfield1"],
                    "additionalProperties": false
                }
            },
            "required": ["field1", "field2", "field3", "field4"],
            "additionalProperties": false
        }
    }

段階的な指導：

  1. 基本情報の説明：
     * `name`を設定：スキーマの記述に適した名前を選びます。
     * `description`を追加：スキーマの目的を簡潔に説明します。
     * `strict`をtrueに設定して厳密モードを確保します。
  2. `schema`オブジェクトを作成：
     * `type: "object"`を設定して、ルートレベルをオブジェクト型として指定します。
     * すべてのフィールドを定義するために`properties`オブジェクトを追加します。
  3. フィールドを定義：
     * 各フィールドに対して`type`と`description`を含むオブジェクトを作成します。
     * 一般的なタイプ：`string`、`number`、`boolean`、`array`、`object`。
     * 配列の場合は`items`を使用して要素のタイプを定義します。
     * オブジェクトの場合は、`properties`を再帰的に定義します。
  4. 制約を設定：
     * 各レベルで`required`配列を追加し、すべての必須フィールドをリストアップします。
     * 各オブジェクトレベルで`additionalProperties: false`を設定します。
  5. 特殊なフィールドの取り扱い：
     * オプションの値を制限するために`enum`を使用します。
     * 再帰構造を実装するために`$ref`を使用します。



## 

​

例

### 

​

1\. 思考の連鎖（Chain-of-Thought）

**JSON Schemaの例**
    
    
    {
        "name": "math_reasoning",
        "description": "数学的推論の手順と最終回答を記録します",
        "strict": true,
        "schema": {
            "type": "object",
            "properties": {
                "steps": {
                    "type": "array",
                    "description": "推論ステップの配列",
                    "items": {
                        "type": "object",
                        "properties": {
                            "explanation": {
                                "type": "string",
                                "description": "推論ステップの説明"
                            },
                            "output": {
                                "type": "string",
                                "description": "推論ステップの出力"
                            }
                        },
                        "required": ["explanation", "output"],
                        "additionalProperties": false
                    }
                },
                "final_answer": {
                    "type": "string",
                    "description": "数学問題の最終回答"
                }
            },
            "additionalProperties": false,
            "required": ["steps", "final_answer"]
        }
    }

**Prompt**
    
    
    あなたは数学の助教です。数学問題が提示された際に、ステップバイステップの解法と最終回答を出力することが目標です。各ステップでは、出力欄に方程式を記入し、説明欄には推論の詳細を記述してください。

### 

​

UI生成（ルート再帰モード）

**JSON Schemaの例**
    
    
    {
        "name": "ui",
        "description": "動的に生成されたUI",
        "strict": true,
        "schema": {
            "type": "object",
            "properties": {
                "type": {
                    "type": "string",
                    "description": "UIコンポーネントのタイプ",
                    "enum": ["div", "button", "header", "section", "field", "form"]
                },
                "label": {
                    "type": "string",
                    "description": "UIコンポーネントのラベル、ボタンやフォームフィールドに使用"
                },
                "children": {
                    "type": "array",
                    "description": "入れ子のUIコンポーネント",
                    "items": {
                        "$ref": "#"
                    }
                },
                "attributes": {
                    "type": "array",
                    "description": "UIコンポーネントのための任意の属性、任意の要素に適しています",
                    "items": {
                        "type": "object",
                        "properties": {
                            "name": {
                                "type": "string",
                                "description": "属性の名前、例えばonClickやclassName"
                            },
                            "value": {
                                "type": "string",
                                "description": "属性の値"
                            }
                        },
                        "additionalProperties": false,
                        "required": ["name", "value"]
                    }
                }
            },
            "required": ["type", "label", "children", "attributes"],
            "additionalProperties": false
        }
    }

**Prompt**
    
    
    あなたはUIジェネレータAIです。ユーザー入力をUIに変換してください。

**例の出力：**

## 

​

ヒント

  * アプリのプロンプトに、ユーザー入力が有効な応答を生成しない状況の処理方法に関する指示が含まれていることを確認してください。
  * モデルは常に指定されたパターンに従おうとするため、入力が指定されたパターンとまったく無関係である場合、LLM が幻覚を引き起こす可能性があります。
  * LLM が入力がタスクと互換性がないことを検出した場合、プロンプトに言語を含めて、空のパラメーターまたは特定の文が返されるように指定できます。
  * すべてのフィールドは`required`である必要があります。詳細については、[こちら](https://platform.openai.com/docs/guides/structural-outputs/supported-schemas) を参照してください。
  * [AdditionalProperties: false](https://platform.openai.com/docs/guides/structurd-outputs/Additionalproperties-false-must-always-be-set-in-objects) は常にオブジェクトに設定する必要があります
  * スキーマのルートレベルのオブジェクトはオブジェクトである必要があります



## 

​

参考資料

  * [Introduction to Structured Outputs](https://cookbook.openai.com/examples/structured_outputs_intro)
  * [Structured Output](https://platform.openai.com/docs/guides/structured-outputs/json-mode?context=without_parse)



* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/learn-more/extended-reading/how-to-use-json-schema-in-dify.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20o-use-json-schema-in-d&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/learn-more/extended-reading%2Fhow-to-use-json-schema-in-dify.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[リトリーバルモード](/ja-jp/learn-more/extended-reading/retrieval-augment/retrieval)[Dify Docs MCP サービスをデプロイしてドキュメントと対話する](/ja-jp/learn-more/extended-reading/dify-docs-mcp)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * JSON Schema機能をサポートするモデル
  * DifyでのJSON Schemaの有効化
  * JSON Schemaテンプレートの定義
  * 例
  * 1\. 思考の連鎖（Chain-of-Thought）
  * UI生成（ルート再帰モード）
  * ヒント
  * 参考資料



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/learn-more/extended-reading/retrieval-augment/README

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

検索拡張生成（RAG）

検索拡張生成（RAG）

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

    * [LLMOpsとは？](/ja-jp/learn-more/extended-reading/what-is-llmops)
    * [配列変数とは何ですか？](/ja-jp/learn-more/extended-reading/what-is-array-variable)
    * 検索拡張生成（RAG）

      * [検索拡張生成（RAG）](/ja-jp/learn-more/extended-reading/retrieval-augment/README)
      * [ハイブリッド検索](/ja-jp/learn-more/extended-reading/retrieval-augment/hybrid-search)
      * [Rerank](/ja-jp/learn-more/extended-reading/retrieval-augment/rerank)
      * [リトリーバルモード](/ja-jp/learn-more/extended-reading/retrieval-augment/retrieval)
    * [DifyでJSONスキーマ出力を使用する方法](/ja-jp/learn-more/extended-reading/how-to-use-json-schema-in-dify)
    * [Dify Docs MCP サービスをデプロイしてドキュメントと対話する](/ja-jp/learn-more/extended-reading/dify-docs-mcp)
  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




検索拡張生成（RAG）

# 検索拡張生成（RAG）

Copy page

### 

​

RAGコンセプトの説明

RAGアーキテクチャは、ベクトル検索を中核としで、大規模モデルが最新の外部知識にアクセスすることを可能にします。これにより、生成されたコンテンツに関する幻覚問題にも対処できる、主流の技術フレームワークとなっています。この技術は多様なアプリケーションシナリオで利用されています。

開発者は、この技術を活用して、低コストでAIを活用したカスタマーサービスや企業のナレッジベース、AI検索エンジンなどを構築できます。自然言語入力を介して様々な知識構成と対話することで、知的なシステムを創造できます。代表的なRAGアプリを例に示します：

次の図では、ユーザーが「アメリカ合衆国の大統領は誰ですか？」と尋ねた場合、システムはその質問を直接大規模モデルに渡して回答を得るのではなく、まずナレッジベース（図に示されているWikipediaなど）でベクトル検索を行います。意味的類似性マッチングを通じて関連コンテンツ（例：「ジョー・バイデンはアメリカ合衆国の第46代および現職大統領である…」）を見つけ出します。その後、システムはユーザーの質問と収集した関連知識を大規模モデルに提供し、十分な情報を基に信頼性のある回答を得ることができます。

**なぜこれが必要なのか？**

大規模モデルは、さまざまな人類知識の分野に精通したスーパーエキスパートと見なすことができますが、いくつかの制限があります。例えば、個人情報については把握していないため、その情報はプライベートであり、インターネット上にも公開されていません。そのため、事前学習の機会がありません。

このスーパーエキスパートを個人の財務アドバイザーとして雇う場合、質問に答える前に投資記録や家計支出などのデータを確認することを許可する必要があります。これにより、専門家はあなたの状況に基づいた専門的なアドバイスを提供できるのです。

**これがRAGシステムの役割です：大規模モデルが持っていない外部知識を一時的に取得し、質問に答える前に必要な情報を見つけ出す手助けをします。**

この例から、RAGシステムにおいて最も重要な要素が外部知識の収集であることがわかります。専門家が必要な情報を正確に見つけられるかどうかが、専門的な財務アドバイスを提供できるかどうかを決定します。もし投資記録ではなく減量計画を見つけてしまった場合、どれほど知識が豊富な専門家でも無力になってしまうのです。

## 

​

RAGと他のテキストトレーニング手法の比較

  * RAG対ファインチューニング：同じレベルの成果を達成できた場合、RAGはコストの面とリアルタイムでの性能において明らかな優位性を持ちます。しかし、ファインチューニングの手法は、データの質と量に対してより高い基準を要求します。さらに、ファインチューニングを採用したアプリケーションは、時にRAGの技術サポートが必要になることもあります。

  * 長文テキストの取り扱いとRAG：多くの研究で示されているように、長いテキストを処理する際、テキストが長くなるほど検索の精度が低下するという問題が存在します。そのため、どのような状況でも、高精度な検索システムであるRAGと組み合わせることが可能です。これにより、長文テキストを扱う能力を持つLLMとRAGを効果的に組み合わせることで、互いの強みを活かし合い、欠点を補い合うことができます。




全体を通して、RAGは大規模なモデルが外部の最新情報データソースにアクセスし、関連分野の知識のギャップを埋め、提供する回答と知識の関連性を強化することを可能にします。RAGは、LLMが外部ソースから取得した検証可能なリアルタイムデータと組み合わせることで、より正確な回答を出力する手助けをし、結果の信頼性を高め、不要なリスクを減少させます。

* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/learn-more/extended-reading/retrieval-augment/README.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/learn-more/extended-reading/retrieval-augment%2FREADME.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[配列変数とは何ですか？](/ja-jp/learn-more/extended-reading/what-is-array-variable)[ハイブリッド検索](/ja-jp/learn-more/extended-reading/retrieval-augment/hybrid-search)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * RAGコンセプトの説明
  * RAGと他のテキストトレーニング手法の比較



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/learn-more/extended-reading/retrieval-augment/hybrid-search

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

検索拡張生成（RAG）

ハイブリッド検索

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

    * [LLMOpsとは？](/ja-jp/learn-more/extended-reading/what-is-llmops)
    * [配列変数とは何ですか？](/ja-jp/learn-more/extended-reading/what-is-array-variable)
    * 検索拡張生成（RAG）

      * [検索拡張生成（RAG）](/ja-jp/learn-more/extended-reading/retrieval-augment/README)
      * [ハイブリッド検索](/ja-jp/learn-more/extended-reading/retrieval-augment/hybrid-search)
      * [Rerank](/ja-jp/learn-more/extended-reading/retrieval-augment/rerank)
      * [リトリーバルモード](/ja-jp/learn-more/extended-reading/retrieval-augment/retrieval)
    * [DifyでJSONスキーマ出力を使用する方法](/ja-jp/learn-more/extended-reading/how-to-use-json-schema-in-dify)
    * [Dify Docs MCP サービスをデプロイしてドキュメントと対話する](/ja-jp/learn-more/extended-reading/dify-docs-mcp)
  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




検索拡張生成（RAG）

# ハイブリッド検索

Copy page

### 

​

ハイブリッド検索の必要性

RAG（Retrieval-Augmented Generation）の検索フェーズにおける主要な手法は、セマンティックな関連性に基づいてマッチングを行うベクトル検索です。この技術の原理は、外部ナレッジベース内の文書を意味的に完全な段落または文に分割し、それをコンピュータが理解できる一連の数字（多次元ベクトル）に変換し、ユーザーのクエリも同様に変換することにあります。

コンピュータは、ユーザーのクエリと文の間の微妙な意味的関係を検出することができます。例えば、「猫はネズミを追いかける」と「子猫はネズミを狩る」は、「猫はネズミを追いかける」と「私はハムを食べるのが好きだ」と比べて、より高い意味的関連性を持っています。最も関連性の高いテキストコンテンツを見つけた後、RAGシステムはそれを大規模なモデルに対するユーザーのクエリの文脈として提供し、質問に答える手助けをします。

ベクトル検索は、複雑なセマンティックテキストの検索を可能にするだけでなく、いくつかの他の利点も持っています：

  * 意味的に類似した語の検索（例：ネズミ捕り/チーズ、Google/Bing/検索エンジン）
  * 異言語理解（英語の入力と中国語のマッチングなど）
  * マルチモーダルな情報の理解（テキスト、画像、音声、映像等の類似性マッチングをサポート）
  * 誤り訂正（スペルミスや不明瞭な表現の処理）



ベクトル検索は上記のシナリオにおいて明確な利点を持っていますが、特定の状況ではパフォーマンスが低下することがあります：

  * 人名や製品名の検索（例：イーロン・マスク、iPhone 15）
  * 略語や特定のフレーズの検索（例：RAG、RLHF）
  * 特定のIDを検索する場合（例：`gpt-3.5-turbo`、`titan-xlarge-v1.01`）



これらの弱点は、従来のキーワード検索が得意とする領域であり、以下の点で優れています：

  * 完全一致（製品名、個人名、製品番号など）
  * 短い文字列との一致（ベクトル検索は短い文字列に対して性能が低下するが、多くのユーザーは短いキーワードのみを入力する傾向がある）
  * 低頻度語の一致（低頻度語はしばしば重要な意味を持つことがあります。例えば、「一緒にコーヒーを飲みませんか？」という場合、「have」や「coffee」の方が「you」や「like」より重要です）



ほとんどのテキスト検索シナリオでは、最も関連性の高い潜在的な結果を候補として表示することが主な目標です。ベクトル検索とキーワード検索はそれぞれ異なる利点を持っており、ハイブリッド検索は両者の強みを組み合わせ、その弱点を補うことが可能です。

ハイブリッド検索では、データベースに事前にベクトルインデックスとキーワードインデックスを構築しておく必要があります。ユーザーのクエリが入力されると、両方の検索手法を使用して文書から最も関連性の高いテキストが取得されます。

“ハイブリッド検索”には厳密な定義が存在しません。本稿では、ベクトル検索とキーワード検索の組み合わせを例示しています。他の検索アルゴリズムの組み合わせもまた、“ハイブリッド検索”と呼ぶことができます。例えば、エンティティの関係性を検索する際に知識グラフ技術を組み合わせることが可能です。

異なる検索システムは、テキスト（段落、文、単語）間の様々な微妙な関係を見つける能力に優れており、完全な関係、意味的関係、主題的関係、構造的関係、エンティティ関係、時間的関係、イベント関係などが含まれます。すべてのシナリオに適した単一の検索モードは存在しません。**ハイブリッド検索は、複数の検索システムを組み合わせることにより、異なる検索技術間の補完性を実現します。**

### 

​

ベクトル検索

定義：クエリ埋め込みを生成し、そのベクトル表現に最も類似したテキストセグメントを取得します。

**TopK：** ユーザーのクエリに最も類似したテキストフラグメントを選定する際に使用されます。システムは、選択されたモデルのコンテキストウィンドウサイズに基づいて、フラグメントの数を動的に調整します。デフォルト値は3です。

**スコア閾値：** テキストフラグメントをフィルタリングするための類似性のしきい値を設定するために使用されます。つまり、設定されたスコアを超えるテキストフラグメントのみを対象とします。システムのデフォルト設定では、このオプションはオフになっており、リコールされたテキストフラグメントの類似性値はフィルタリングされません。オプションを有効にすると、デフォルト値は0.5です。

**Rerankモデル：** “Model Providers”ページでRerankモデルのAPIキーを構成した後、リトリーバル設定でRerankモデルを使用することができます。

* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/learn-more/extended-reading/retrieval-augment/hybrid-search.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20d-sea&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/learn-more/extended-reading/retrieval-augment%2Fhybrid-search.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[検索拡張生成（RAG）](/ja-jp/learn-more/extended-reading/retrieval-augment/README)[Rerank](/ja-jp/learn-more/extended-reading/retrieval-augment/rerank)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * ハイブリッド検索の必要性
  * ベクトル検索



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/learn-more/extended-reading/retrieval-augment/rerank

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

検索拡張生成（RAG）

Rerank

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

    * [LLMOpsとは？](/ja-jp/learn-more/extended-reading/what-is-llmops)
    * [配列変数とは何ですか？](/ja-jp/learn-more/extended-reading/what-is-array-variable)
    * 検索拡張生成（RAG）

      * [検索拡張生成（RAG）](/ja-jp/learn-more/extended-reading/retrieval-augment/README)
      * [ハイブリッド検索](/ja-jp/learn-more/extended-reading/retrieval-augment/hybrid-search)
      * [Rerank](/ja-jp/learn-more/extended-reading/retrieval-augment/rerank)
      * [リトリーバルモード](/ja-jp/learn-more/extended-reading/retrieval-augment/retrieval)
    * [DifyでJSONスキーマ出力を使用する方法](/ja-jp/learn-more/extended-reading/how-to-use-json-schema-in-dify)
    * [Dify Docs MCP サービスをデプロイしてドキュメントと対話する](/ja-jp/learn-more/extended-reading/dify-docs-mcp)
  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




検索拡張生成（RAG）

# Rerank

Copy page

### 

​

再順位が必要な理由は？

混合検索は、異なる検索技術の利点を組み合わせることで、より良いリコール結果を得ることが可能ですが、異なる検索モードでのクエリ結果はマージおよび正規化（データを一貫性のある標準範囲または分布に変換することで、比較や分析、処理をより効率的に行うこと）を行う必要があります。そのため、これらの結果を大規模モデルに渡す際には、評価システムとして再順位付けモデル（Rerank Model）を導入することが求められます。

**再順位付けモデルは、候補ドキュメントのリストとユーザーのクエリの意味的な一致度を計算し、その一致度に基づいて再並べ替えを行うことで、意味的な順位付け結果を向上させます** 。その基本的な原理は、ユーザーのクエリと各候補ドキュメントとの関連スコアを算出し、関連性の高い順に並べ替えたドキュメントリストを返すことです。一般的な再順位付けモデルには、Cohere RerankやBGE Rerankerなどがあります。

ほとんどの場合、再順位付けの前にプリ検索が行われます。これは、数百万のドキュメントに対して関連性スコアを計算することが非常に非効率だからです。そのため、**再順位付けは通常、検索プロセスの最終段階に設けられ、異なる検索システムからの結果をマージおよびソートするのに非常に適しています** 。

しかし、再順位付けは異なる検索システムの結果を統合するだけでなく、単一の検索モードにおいても、意味的な再順位付けを導入することでドキュメントのリコール効果を効果的に向上させることが可能です。たとえば、キーワード検索の後に意味論的な再順位付けを適用することができます。

具体的な実践においては、複数のクエリ結果を正規化するだけでなく、大規模モデルに渡すセグメント数を制限することが一般的です（これは、再順位付けモデルのパラメータで設定可能なTopKで指定します）。これは、大規模モデルの入力ウィンドウにはサイズ制限があるため（通常、4K、8K、16K、128Kトークン）、適切なセグメント戦略とTopK値を選ぶ必要があるからです。

重要なのは、モデルのコンテキストウィンドウが非常に大きい場合でも、過剰なリコールセグメントが関連性の低いコンテンツを導入する可能性があり、その結果として回答の質が低下する可能性があるため、再順位付けのTopKパラメータは必ずしも大きい方が良いとは限らないという点です。

再順位付けは検索技術の代替手段ではなく、既存の検索システムを強化するための補助ツールです。**最大の利点は、シンプルで低複雑度な方法で検索結果を改善し、ユーザーが意味的関連性を既存の検索システムに組み込むことを可能にし、大規模な基盤の変更を必要としない点です。**

Cohere Rerankの例を挙げると、アカウントを登録し、APIを申請するだけで接続が可能です。また、彼らは多言語モデルも提供しており、異なる言語のテキストクエリ結果を同時にソートすることができます。

### 

​

Rerank モデルの設定方法

Difyは現在、Cohere Rerankモデルをサポートしており、「モデルプロバイダー-> Cohere」ページに進んで、RerankモデルのAPIキーを入力してください。

### 

​

Cohere Rerank モデルの取得方法

<https://cohere.com/rerank> にログインし、ページ内で登録してRerankモデルの利用資格を申請し、APIキーを取得してください。

### 

​

データセット検索モードでの Rerank モデルの設定

「データセット->データセットの作成->検索設定」ページに進み、Rerank設定を追加してください。データセットの作成時だけでなく、既存のデータセットの設定内でもRerankの構成を変更し、適用されたデータセットのリコールモード設定でRerankの構成を調整することができます。

**TopK：** Rerank後に返される関連ドキュメントの数を設定します。

**スコア閾値：** Rerank後に返される関連ドキュメントの最低スコアを設定します。Rerankモデルを設定した後、TopKとスコア閾値の設定はRerankステップでのみ有効です。

### 

​

データセットの複数リコールモードでの Rerank モデルの設定

「キーワード編成->コンテキスト->設定」ページに進み、複数リコールモードに設定されている場合はRerankモデルをオンにしてください。

複数のリコールモードについての詳細は、[複数リコール](/ja-jp/guides/knowledge-base/integrate-knowledge-within-application)を参照してください。

* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/learn-more/extended-reading/retrieval-augment/rerank.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/learn-more/extended-reading/retrieval-augment%2Frerank.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[ハイブリッド検索](/ja-jp/learn-more/extended-reading/retrieval-augment/hybrid-search)[リトリーバルモード](/ja-jp/learn-more/extended-reading/retrieval-augment/retrieval)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * 再順位が必要な理由は？
  * Rerank モデルの設定方法
  * Cohere Rerank モデルの取得方法
  * データセット検索モードでの Rerank モデルの設定
  * データセットの複数リコールモードでの Rerank モデルの設定



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/learn-more/extended-reading/retrieval-augment/retrieval

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

検索拡張生成（RAG）

リトリーバルモード

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

    * [LLMOpsとは？](/ja-jp/learn-more/extended-reading/what-is-llmops)
    * [配列変数とは何ですか？](/ja-jp/learn-more/extended-reading/what-is-array-variable)
    * 検索拡張生成（RAG）

      * [検索拡張生成（RAG）](/ja-jp/learn-more/extended-reading/retrieval-augment/README)
      * [ハイブリッド検索](/ja-jp/learn-more/extended-reading/retrieval-augment/hybrid-search)
      * [Rerank](/ja-jp/learn-more/extended-reading/retrieval-augment/rerank)
      * [リトリーバルモード](/ja-jp/learn-more/extended-reading/retrieval-augment/retrieval)
    * [DifyでJSONスキーマ出力を使用する方法](/ja-jp/learn-more/extended-reading/how-to-use-json-schema-in-dify)
    * [Dify Docs MCP サービスをデプロイしてドキュメントと対話する](/ja-jp/learn-more/extended-reading/dify-docs-mcp)
  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




検索拡張生成（RAG）

# リトリーバルモード

Copy page

ユーザーがナレッジベースのQ&A用AIアプリケーションを構築する際に、Difyはアプリケーション内で複数のデータセットが関連付けられている場合に、検索時に2つの検索モードをサポートします：N-of-1検索モードとMulti-Path検索モードです。

### 

​

検索設定

ユーザーの意図に基づいてすべてのデータセットを照合し、複数のデータセットから同時に関連するテキストフラグメントを同時に検索します。Rerankを経た後、ユーザーのクエリに最も適合する結果がマルチパス検索の結果から選ばれます。このプロセスには、設定されたRerankモデルのAPIが必要です。マルチパス検索モードでは、検査が関連するすべてのデータセットからユーザーのクエリに関連するテキストコンテンツを検索し、得られた結果を統合した後、Rerankモデルを用いてドキュメントを意味的に再ランク付けします。

マルチパス検索モードでは、Rerankモデルを設定するがお勧めします。Rerankモデルの構成方法については、こちらをご覧ください：🔗[Rerank](/ja-jp/learn-more/extended-reading/retrieval-augment/rerank)

以下は、マルチパス検索モードの技術フローチャートです：

マルチパス検索モードは、モデルの推論能力やデータセットの説明に依存しないため、複数のデータセットを跨いで高品質な検索結果を得ることができます。さらに、Rerankを組み込むことで文書の検索効果を効果的に向上させることができます。したがって、複数のデータセットに関連付けられたナレッジベースのQ&Aアプリを作成する際には、検索モードをマルチパス検索に設定することをお勧めします。

* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/learn-more/extended-reading/retrieval-augment/retrieval.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20e&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/learn-more/extended-reading/retrieval-augment%2Fretrieval.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[Rerank](/ja-jp/learn-more/extended-reading/retrieval-augment/rerank)[DifyでJSONスキーマ出力を使用する方法](/ja-jp/learn-more/extended-reading/how-to-use-json-schema-in-dify)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * 検索設定



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/learn-more/extended-reading/what-is-array-variable

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

さらに読む

配列変数とは何ですか？

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

    * [LLMOpsとは？](/ja-jp/learn-more/extended-reading/what-is-llmops)
    * [配列変数とは何ですか？](/ja-jp/learn-more/extended-reading/what-is-array-variable)
    * 検索拡張生成（RAG）

    * [DifyでJSONスキーマ出力を使用する方法](/ja-jp/learn-more/extended-reading/how-to-use-json-schema-in-dify)
    * [Dify Docs MCP サービスをデプロイしてドキュメントと対話する](/ja-jp/learn-more/extended-reading/dify-docs-mcp)
  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




さらに読む

# 配列変数とは何ですか？

Copy page

配列変数は特定のデータ型で、通常は複数の要素を持っています。要素はカンマで区切られ、`[`から始まり、`]`で終わります。以下にいくつかの例を示します：

  * **数字型：**

[0, 1, 2, 3, 4, 5]

  * **文字列型：**

[“monday”, “Tuesday”, “Wednesday”, “Thursday”]

  * **JSONオブジェクト：**



    
    
    [
          {
              "name": "Alice",
              "age": 30,
              "email": "alice@example.com"
          },
          {
              "name": "Bob",
              "age": 25,
              "email": "bob@example.com"
          },
          {
              "name": "Charlie",
              "age": 35,
              "email": "charlie@example.com"
          }
      ]

### 

​

可能な使用シーン

  * [ワークフロー - リスト操作](/ja-jp/guides/workflow/nodes/list-operator)：リスト操作ノードは、ファイルの形式、ファイル名、サイズなどの属性をフィルタリングおよび抽出し、異なる形式のファイルを対応する処理ノードに渡して、異なるファイル処理フローを正確に制御します。

  * [ワークフロー - イテレーション](/ja-jp/guides/workflow/nodes/iteration)：配列内の要素に対して同じ操作ステップを順番に実行し、すべての結果を出力するまで、タスクのバッチ処理機として理解できます。




* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/learn-more/extended-reading/what-is-array-variable.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20is-array-varia&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/learn-more/extended-reading%2Fwhat-is-array-variable.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[LLMOpsとは？](/ja-jp/learn-more/extended-reading/what-is-llmops)[検索拡張生成（RAG）](/ja-jp/learn-more/extended-reading/retrieval-augment/README)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * 可能な使用シーン



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/learn-more/extended-reading/what-is-llmops

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

さらに読む

LLMOpsとは？

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

    * [LLMOpsとは？](/ja-jp/learn-more/extended-reading/what-is-llmops)
    * [配列変数とは何ですか？](/ja-jp/learn-more/extended-reading/what-is-array-variable)
    * 検索拡張生成（RAG）

    * [DifyでJSONスキーマ出力を使用する方法](/ja-jp/learn-more/extended-reading/how-to-use-json-schema-in-dify)
    * [Dify Docs MCP サービスをデプロイしてドキュメントと対話する](/ja-jp/learn-more/extended-reading/dify-docs-mcp)
  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




さらに読む

# LLMOpsとは？

Copy page

**LLMOps（大型言語モデル運用）は、GPTシリーズなどの大型言語モデルの開発、デプロイ、メンテナンス、および最適化を含む一連の実践とプロセスです。LLMOpsの目標は、これらの強力なAIモデルを効果的、拡張可能、安全に使用して実際のアプリケーションを構築および運用することにあります。これには、モデルのトレーニング、デプロイ、モニタリング、更新、セキュリティ、およびコンプライアンスが含まれます。**

下表は、Difyを使用する前と後でAIアプリケーション開発の各段階の違いを示しています：

ステップ| LLMOpsプラットフォーム未使用| Dify LLMOpsプラットフォーム使用| 所要時間の差異  
---|---|---|---  
アプリケーションの前後エンド開発| LLM機能の統合とパッケージ化に多くの時間を費やし、フロントエンドアプリの開発| Difyのバックエンドサービスを直接使用し、Webアプリのスキャフォルディングに基づいて開発| -80%  
プロンプトエンジニアリング| APIまたはプレイグラウンドを通じてのみ実行可能| ユーザー入力データと組み合わせて、所見即所得でデバッグ完了| -25%  
データ準備と埋め込み| 長文データ処理と埋め込みのコードを書く| プラットフォームにテキストをアップロードするか、データソースをバインドするだけで完了| -80%  
アプリケーションログと分析| ログを記録するコードを書き、データベースにアクセスして確認| プラットフォームがリアルタイムのログと分析を提供| -70%  
データ分析と微調整| 技術者がデータ管理と微調整のキューを作成| 非技術者も協力可能で、視覚的なモデル調整| -60%  
AIプラグインの開発と統合| コードを書いてAIプラグインを作成、統合| プラットフォームが視覚的なツールを提供し、プラグインの作成と統合を支援| -50%  
  
DifyのようなLLMOpsプラットフォームを使用する前は、LLMに基づいたアプリケーションの開発プロセスは非常に煩雑で時間がかかる可能性がありました。開発者は各段階のタスクを自分で処理する必要があり、これが効率の低下、拡張の困難さ、安全性の問題を引き起こす可能性がありました。以下はLLMOpsプラットフォームを使用する前の開発プロセスです：

  1. データ準備：手動でデータを収集し、前処理を行う。複雑なデータクリーニングやラベル付け作業が含まれ、多くのコードを書く必要がある。
  2. プロンプトエンジニアリング：APIやプレイグラウンドを通じてのみプロンプトの作成とデバッグを行い、リアルタイムのフィードバックや視覚的なデバッグが不足。
  3. 埋め込みとコンテキスト管理：長いコンテキストの埋め込みと保存を手動で処理し、最適化と拡張が難しく、多くのプログラミング作業が必要。モデルの埋め込みやベクターデータベースなどの技術に精通している必要がある。
  4. アプリケーションのモニタリングとメンテナンス：手動でパフォーマンスデータを収集し分析するため、問題をリアルタイムで発見し処理することが困難で、ログ記録がない場合もある。
  5. モデルの微調整：微調整データの準備とトレーニングプロセスを自分で処理し、効率が低下し、多くのコードを書く必要がある。
  6. システムと運用：技術者の参加が必要で、管理バックエンドの開発にコストがかかり、開発とメンテナンスのコストが増加し、非技術者に対して友好的ではない。



DifyのようなLLMOpsプラットフォームを導入すると、LLMに基づいたアプリケーションの開発プロセスはより効率的、拡張可能、安全になります。以下はDifyのようなLLMOpsを使用した場合のLLMアプリケーション開発の利点です：

  1. データ準備：プラットフォームがデータ収集と前処理ツールを提供し、データクリーニングやラベル付け作業を簡素化し、コーディング作業を最小化または排除。
  2. プロンプトエンジニアリング：所見即所得のプロンプト編集とデバッグが可能で、ユーザー入力データに基づいてリアルタイムの最適化と調整が行える。
  3. 埋め込みとコンテキスト管理：長いコンテキストの埋め込み、保存、管理を自動化し、効率と拡張性を向上させるため、多くのコードを書く必要がない。
  4. アプリケーションのモニタリングとメンテナンス：リアルタイムでパフォーマンスデータをモニタリングし、問題を迅速に発見し処理し、アプリケーションの安定運用を保証し、完全なログ記録を提供。
  5. 微調整データ準備：人工ラベルデータセットのバッチエクスポートを提供し、アプリケーション運用中にオンラインフィードバックデータを収集してモデルの効果を継続的に改善。
  6. システムと運用：使いやすいインターフェースで非技術者も参加可能、多人数協力をサポートし、開発とメンテナンスコストを削減。従来の開発方法と比較して、Difyはより透明で監視しやすいアプリケーション管理を提供し、チームメンバーがアプリケーションの運用状況をより良く理解できるようにします。



さらに、DifyはAIプラグインの開発と統合機能を提供し、開発者がさまざまなアプリケーションに基づいてLLMプラグインを簡単に作成およびデプロイすることを可能にし、開発効率とアプリケーションの価値をさらに向上させます。

* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/learn-more/extended-reading/what-is-llmops.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20is-llm&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/learn-more/extended-reading%2Fwhat-is-llmops.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[AIセールスアバターの探求](/ja-jp/learn-more/use-cases/build-ai-sales-avatar)[配列変数とは何ですか？](/ja-jp/learn-more/extended-reading/what-is-array-variable)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/learn-more/faq/install-faq

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

よくある質問

セルフホスト / ローカル展開に関するよくある質問（FAQ）

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問

    * [セルフホスト / ローカル展開に関するよくある質問（FAQ）](/ja-jp/learn-more/faq/install-faq)
    * [LLM 配置と使用](/ja-jp/learn-more/faq/llms-use-faq)
    * [プラグイン](/ja-jp/learn-more/faq/plugins)



##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




よくある質問

# セルフホスト / ローカル展開に関するよくある質問（FAQ）

Copy page

### 

​

1\. ローカル展開の初期化後、パスワードが間違っている場合のリセット方法は？

Docker Composeで展開した場合、次のコマンドを使用してパスワードをリセットできます：
    
    
    docker exec -it docker-api-1 flask reset-password

メールアドレスと新しいパスワードを2回入力してください。

### 

​

2\. ローカル展開ログで「ファイルが見つかりません」というエラーを修正する方法は？
    
    
    ERROR:root:Unknown Error in completion
    Traceback (most recent call last):
      File "/www/wwwroot/dify/dify/api/libs/rsa.py", line 45, in decrypt
        private_key = storage.load(filepath)
      File "/www/wwwroot/dify/dify/api/extensions/ext_storage.py", line 65, in load
        raise FileNotFoundError("File not found")
    FileNotFoundError: File not found

このエラーは、展開方法の変更や `api/storage/privkeys` ディレクトリの削除によって発生する可能性があります。このファイルは大規模モデルキーの暗号化に使用されるため、損失は不可逆です。次のコマンドを使用して暗号化キーペアをリセットできます：

  * Docker Compose デプロイ
        
        docker exec -it docker-api-1 flask reset-encrypt-key-pair

  * ソースコードの起動

apiディレクトリに移動し、次のコマンドを実行します：
        
        flask reset-encrypt-key-pair

プロンプトに従ってリセットしてください。




### 

​

**3\. インストール後にログインできない、またはログインした後に401エラーが表示される場合は？**

これは、ドメイン/URLを変更したため、フロントエンドとバックエンドの間でクロスドメインの問題が発生している可能性があります。クロスドメインとアイデンティティの問題には、次の構成が関係しています：

  1. CORS クロスドメイン構成

     1. `CONSOLE_CORS_ALLOW_ORIGINS`

コンソールCORSポリシー。デフォルトは*で、すべてのドメインがアクセス可能です。 2\. `WEB_API_CORS_ALLOW_ORIGINS`

WebAPP CORSポリシー。デフォルトは*で、すべてのドメインがアクセス可能です。




### 

​

**4\. 起動後にページが読み込まれ続け、CORSエラーが表示される場合は？**

これは、ドメイン/URLを変更したため、フロントエンドとバックエンドの間でクロスドメインの問題が発生している可能性があります。`docker-compose.yml`内の次の構成項目を新しいドメインに更新してください：

`CONSOLE_API_URL`: コンソールAPIのバックエンドURL `CONSOLE_WEB_URL`: コンソールWebのフロントエンドURL `SERVICE_API_URL`: サービスAPIのURL `APP_API_URL`: WebApp APIのバックエンドURL `APP_WEB_URL`: WebAppのURL

詳細については、[環境変数](/ja-jp/getting-started/install-self-hosted/environments)を参照してください。

### 

​

5\. 展開後のバージョンアップ方法は？

イメージから開始した場合は、最新のイメージを取得し、アップグレードを完了させてください。ソースコードから開始した場合は、最新のコードを取得してから始め、アップグレードを完了させます。

ソースコードの更新については、apiディレクトリに移動し、次のコマンドを実行してデータベース構造を最新バージョンにマイグレートします：

`flask db upgrade`

### 

​

6\. Notionを使用してインポート時に環境変数を設定する方法は？

[**Notion 統合構成アドレス**](https://www.notion.so/my-integrations)**。**プライベート展開を行う場合は、次の構成を設定してください：

  1. **`NOTION_INTEGRATION_TYPE`** ：この値は（**public/internal** ）に設定する必要があります。Notion の OAuth リダイレクトアドレスは https のみをサポートするため、ローカル展開には Notion の内部統合を使用してください。
  2. **`NOTION_CLIENT_SECRET`** ： Notion OAuth クライアントシークレット（パブリック統合タイプ用）。
  3. **`NOTION_CLIENT_ID`** ： OAuth クライアントID（パブリック統合タイプ用）。
  4. **`NOTION_INTERNAL_SECRET`** ： Notion内部統合シークレット。`NOTION_INTEGRATION_TYPE`が **internal** の場合、この変数を設定してください。



### 

​

7\. ローカル展開バージョンでスペースの名前を変更する方法は？

データベースの`tenants`テーブルを直接修正してください。

### 

​

8\. アプリケーションへのアクセスドメインを変更するには？

`docker_compose.yaml`内の`APP_WEB_URL`構成項目を見つけて、新しいドメインに変更してください。

### 

​

9\. データベースのマイグレーションが発生した場合にバックアップすべき内容は？

データベース、構成されたストレージ、ベクトルデータベースのデータをバックアップしてください。Docker Composeを使用して展開した場合は、`dify/docker/volumes`ディレクトリ内のすべてのデータを直接バックアップします。

### 

​

10\. OpenLLMをローカルで起動する際にDocker展開のDifyが127.0.0.1を使用してローカルポートにアクセスできない理由は？

127.0.0.1はコンテナ内のアドレスです。Difyの構成されたサーバーアドレスは、ホストのローカルネットワークIPアドレスである必要があります。

### 

​

11\. ローカル展開バージョンのデータセットでドキュメントをアップロードする際のサイズと数量制限を解決する方法は？

公式Webサイトの[環境変数](/ja-jp/getting-started/install-self-hosted/environments)を参照してください。

### 

​

12\. ローカル展開バージョンでメール経由でメンバーを招待する方法は？

ローカル展開バージョンでは、メールを通じてメンバーを招待できます。メールアドレスを入力し、招待を送信すると、ページに招待リンクが表示されます。招待リンクをコピーしてユーザーに転送してください。ユーザーはそのリンクを開き、メール経由でログインし、パスワードを設定してスペースにアクセスできます。

### 

​

13\. ローカル展開バージョンで「Can’t load tokenizer for ‘gpt2」というエラーが発生した場合はどうすればよいですか？
    
    
    Can't load tokenizer for 'gpt2'. If you were trying to load it from 'https://huggingface.co/models', make sure you don't have a local directory with the same name. Otherwise, make sure 'gpt2' is the correct path to a directory containing all relevant files for a GPT2TokenizerFast tokenizer.

設定に関しては、公式Webサイトの[環境変数](/ja-jp/getting-started/install-self-hosted/environments)や関連する[Issue](https://github.com/langgenius/dify/issues/1261)を参照してください。

### 

​

14\. ローカル展開バージョンでポート80の競合を解消する方法

ポート80が使用中の場合、ポート80を占有しているサービスを停止するか、docker-compose.yamlでポートマッピングを変更し、ポート80を別のポートにマッピングしてください。通常、ApacheやNginxがこのポートを占有しているため、これらのサービスを停止することで解決できます。

### 

​

15\. テキスト読み上げ中に「[openai] Error: ffmpeg is not installed」というエラーが発生した場合の対処方法
    
    
    [openai] Error: ffmpeg is not installed

OpenAI TTSはオーディオストリームの分割を実装しているため、ソースコード展開にはffmpegのインストールが必要です。詳細な手順は以下の通りです：

**Windows:**

  1. [FFmpeg公式Webサイト](https://ffmpeg.org/download.html)を訪れ、事前にコンパイルされたWindows用の共有ライブラリをダウンロードします。
  2. FFmpegフォルダをダウンロードして展開し、“ffmpeg-20200715-51db0a4-win64-static”のようなフォルダが生成されます。
  3. 展開したフォルダを任意の場所に移動します。例：C:\Program Files\。
  4. FFmpegのbinディレクトリの絶対パスをシステムの環境変数に追加します。
  5. コマンドプロンプトを開き、“ffmpeg -version”と入力します。FFmpegのバージョン情報が表示されれば、インストールが成功しています。



**Ubuntu:**

  1. ターミナルを開きます。
  2. 次のコマンドを入力してFFmpegをインストールします：`sudo apt-get update`、次に`sudo apt-get install ffmpeg`を入力します。
  3. インストールが成功したかどうかを確認するために、“ffmpeg -version”と入力します。



**CentOS:**

  1. まず、EPELリポジトリを有効にします。ターミナルで次を入力します：`sudo yum install epel-release`
  2. 次に、次のコマンドを入力します：`sudo rpm -Uvh http://li.nux.ro/download/nux/dextop/el7/x86_64/nux-dextop-release-0-5.el7.nux.noarch.rpm`
  3. yumパッケージを更新します。入力：`sudo yum update`
  4. 最後に、FFmpegをインストールします。入力：`sudo yum install ffmpeg ffmpeg-devel`
  5. インストールが成功したかどうかを確認するために、“ffmpeg -version”と入力します。



**Mac OS X:**

  1. ターミナルを開きます。
  2. Homebrewをまだインストールしていない場合は、次のコマンドを入力してインストールできます：`/bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"`
  3. Homebrew を使用して FFmpeg をインストールします。入力：`brew install ffmpeg`
  4. インストールが成功したかどうかを確認するために、“ffmpeg -version”と入力します。



### 

​

16\. ローカル展開中のNginx設定ファイルのマウントエラーを解消する方法
    
    
    Error response from daemon: failed to create task for container: failed to create shim task: OCI runtime create failed: runc create failed: unable to start container process: error during container init: error mounting "/run/desktop/mnt/host/d/Documents/docker/nginx/nginx.conf" to rootfs at "/etc/nginx/nginx.conf": mount /run/desktop/mnt/host/d/Documents/docker/nginx/nginx.conf:/etc/nginx/nginx.conf (via /proc/self/fd/9), flags: 0x5000: not a directory: unknown: Are you trying to mount a directory onto a file (or vice-versa)? Check if the specified host path exists and is the expected type

完全なプロジェクトをダウンロードし、dockerに移動し、`docker-compose up -d`を実行してください。
    
    
    git clone https://github.com/langgenius/dify.git
    cd dify/docker
    docker compose up -d

### 

​

17\. ベクトルデータベースを他のベクトルデータベースに移行する方法

Weaviate から他のベクトルデータベースにベクトルデータベースを移行する場合、データを移行する必要があります。以下はその手順です：

  1. ローカルソースコードから始める場合は、.envファイル内の環境変数を移行したいベクトルデータベースに変更してください。例：`VECTOR_STORE=qdrant`
  2. docker-composeから始める場合は、`docker-compose.yaml`ファイル内の環境変数を移行したいベクトルデータベースに変更し、apiとworkerの両方を修正する必要があります。例：


    
    
    # The type of vector store to use. Supported values are `weaviate`, `qdrant`, `milvus`, `analyticdb``.
    VECTOR_STORE: weaviate

  3. 以下のコマンドを実行してください


    
    
    flask vdb-migrate # or docker exec -it docker-api-1 flask vdb-migrate

**テスト済みのターゲット データベース:**

  * qdrant
  * milvus
  * analyticdb



### 

​

18\. SSRF_PROXYが必要な理由とは？

コミュニティエディションの `docker-compose.yaml` では、一部のサービスに `SSRF_PROXY` と `HTTP_PROXY` 環境変数が設定されています。これらは全て、`ssrf_proxy` コンテナを指しており、SSRF攻撃を防ぐために利用されています。SSRF攻撃について詳しく学びたい方は、[こちらの記事](https://portswigger.net/web-security/ssrf)をご覧ください。

不必要なリスクを避けるために、SSRF攻撃の可能性があるすべてのサービスにプロキシを設定し、Sandboxのようなサービスがプロキシを通じてのみ外部ネットワークにアクセスできるようにしています。これにより、データとサービスのセキュリティが強化されます。デフォルトでは、このプロキシはローカルリクエストをインターセプトしませんが、`squid` 構成ファイルを変更することで、プロキシの動作をカスタマイズできます。

#### 

​

プロキシの動作をカスタマイズする方法は？

プロキシの動作は `docker/volumes/ssrf_proxy/squid.conf` にある `squid` 構成ファイルを編集することでカスタマイズできます。例えば、ローカルネットワークが `192.168.101.0/24` セグメントにアクセスできる場合でも、`192.168.101.19` にある機密データには、ローカル展開のDifyユーザーがアクセスしてほしくない場合、以下のように `squid.conf` にルールを追加できます。
    
    
    acl restricted_ip dst 192.168.101.19
    acl localnet src 192.168.101.0/24
    
    http_access deny restricted_ip
    http_access allow localnet
    http_access deny all

これは一例に過ぎません。必要に応じてプロキシの動作を自由にカスタマイズできます。アップストリームプロキシやキャッシュの設定が必要な場合は、詳細については [squid構成ドキュメント](http://www.squid-cache.org/Doc/config/) をご覧ください。

### 

​

19\. 作成したアプリをテンプレートとして設定する方法は？

現時点では、作成したアプリをテンプレートとして設定する機能はサポートされていません。既存のテンプレートは、Difyの公式がクラウドバージョンユーザー向けに提供しているもので、参考用となっています。クラウドバージョンをご利用の場合は、アプリをワークスペースに追加したり、変更後にカスタマイズして独自のアプリを作成できます。コミュニティバージョンを使用していて、チーム向けにさらに多くのアプリテンプレートが必要な場合は、有料の技術サポートを受けるために弊社ビジネスチームにお問い合わせください：[business@dify.ai](mailto:business@dify.ai)

### 

​

20\. 502 Bad Gateway

このエラーは、Nginxがサービスを誤った場所に転送しているために発生します。まず、対象のコンテナが実行中であることを確認し、以下のコマンドを管理者権限で実行してください：
    
    
    docker ps -q | xargs -n 1 docker inspect --format '{{ .Name }}: {{range .NetworkSettings.Networks}}{{.IPAddress}}{{end}}'

出力の中から以下の2行を見つけてください：
    
    
    /docker-web-1: 172.19.0.5
    /docker-api-1: 172.19.0.7

これらのIPアドレスをメモしておきます。次に、Difyソースコードを保存しているディレクトリに移動し、`dify/docker/nginx/conf.d` を開いて、`http://api:5001` を `http://172.19.0.7:5001` に、`http://web:3000` を `http://172.19.0.5:3000` に置き換え、Nginxコンテナを再起動するか、構成を再読み込みします。

なお、これらのIPアドレスは _**例**_ ですので、独自のIPアドレスを取得するためにコマンドを実行する必要があります。また、関連するコンテナを再起動する際には、IPアドレスの再設定が必要になることがあります。

### 

​

21\. コンテンツ セキュリティ ポリシーを有効にするにはどうすればよいですか?

`.env`構成ファイルで`CSP_WHITELIST`パラメータを見つけて、製品の使用に関連するすべての URL や API リクエスト アドレスなど、許可できるドメイン名を入力します。 この動きは、潜在的な XSS 攻撃を減らすのに役立ちます。 CSP に関する推奨事項の詳細については、[コンテンツ セキュリティ ポリシー](https://developer.mozilla.org/ja/docs/Web/HTTP/CSP) を参照してください。

### 

​

22\. APIサービスのポート番号を変更する方法

API サービスのポートは、Dify プラットフォームで使用されるポートと一致します。`docker-compose.yaml` ファイルの `nginx` 設定を変更することで、実行中のポートを再指定することができます。

### 

​

23\. ファイルをローカルストレージからクラウドストレージに移行する方法

ファイルをローカルストレージからクラウドストレージ（例：Alibaba Cloud OSS）に移行するには、‘upload_files’と’privkeys’ディレクトリからデータを移行する必要があります。以下の手順に従って操作してください：

  1. ストレージ設定を構成する

ローカルソースコードデプロイメントの方法：

     * `.env`ファイルでストレージ設定を更新します
     * `STORAGE_TYPE=aliyun-oss`を設定します
     * Alibaba Cloud OSSの認証情報を設定します

Docker Composeデプロイメントの方法：

     * `docker-compose.yaml`ファイルでストレージ設定を更新します
     * `STORAGE_TYPE: aliyun-oss`を設定します
     * Alibaba Cloud OSSの認証情報を設定します
  2. 移行コマンドを実行する

ローカルソースコードの場合：
         
         flask upload-private-key-file-to-cloud-storage
         flask upload-local-files-to-cloud-storage

Docker Composeの場合：
         
         docker exec -it docker-api-1 flask upload-private-key-file-to-cloud-storage
         docker exec -it docker-api-1 flask upload-local-files-to-cloud-storage




### 

​

24\. 古いログや未使用のファイルを削除し、ストレージの使用量を削減する方法

Dify はデータベース上の古いログやストレージ上の未使用のファイルの自動的な削除は **行いません** 。代わりに、インスタンスの管理者が古いログや未使用のファイルを **手動で** 削除できるように、いくつかのコマンドが用意されています。

**古いログを削除する**

`clear-free-plan-tenant-expired-logs` コマンドで、日数を指定して古いログを削除できます。たとえば、30日以上前のログを削除するには、次のコマンドを実行します。

  1. テナント ID を確認する


    
    
    $ docker exec -it docker-api-1 bash -c "echo 'db.session.query(Tenant).all(); quit()' | flask shell"
    ...
    >>> [<Tenant 618b5d66-a1f5-4b6b-8d12-f171182a1cb2>]

  * この例では、テナント ID が `618b5d66-a1f5-4b6b-8d12-f171182a1cb2` であることがわかります。


  2. テナント ID と日数を指定して、古いログを削除する


    
    
    $ docker exec -it docker-api-1 flask clear-free-plan-tenant-expired-logs --days 30 --batch 100 --tenant_ids 618b5d66-a1f5-4b6b-8d12-f171182a1cb2
    ...
    Starting clear free plan tenant expired logs.
    Clearing free plan tenant expired logs
    Total tenant count: 1
    [2025-04-27 05:28:22.027032] Processed 2555 messages for tenant 618b5d66-a1f5-4b6b-8d12-f171182a1cb2
    [2025-04-27 05:28:22.085901] Processed 2190 conversations for tenant 618b5d66-a1f5-4b6b-8d12-f171182a1cb2
    [2025-04-27 05:28:22.112561] Processed 5110 workflow node executions for tenant 618b5d66-a1f5-4b6b-8d12-f171182a1cb2

  * `--tenant_ids` オプションでテナント ID を指定します。
  * `--days` オプションで指定した日数より古いログが削除されます。


  3. （オプション）エクスポートされた `free_plan_tenant_expired_logs` ディレクトリを削除する
         
         $ docker exec -it docker-api-1 bash -c 'ls -l ${OPENDAL_FS_ROOT}/free_plan_tenant_expired_logs'

     * `flask clear-free-plan-tenant-expired-logs` コマンドは、実際に削除する前に削除対象のログを `free_plan_tenant_expired_logs` ディレクトリにエクスポートします。ストレージ容量を解放したい場合は、このディレクトリも削除することをおすすめします。
     * `free_plan_tenant_expired_logs` ディレクトリの削除方法はストレージタイプによって異なります。上記コマンドはデフォルト設定環境での例です。



さらにストレージ使用量を削減したい場合は、データベースのストレージの再利用（例: [PostgreSQL の `VACUUM`](https://www.postgresql.org/docs/current/sql-vacuum.html) など）も検討できます。

**未使用のファイルを削除する**

`clear-orphaned-file-records` コマンドと `remove-orphaned-files-on-storage` コマンドを使用して、未使用のファイルを削除できます。

全てのパタンが完全にテストされているわけではないため、このコマンドは意図しないファイルレコードやファイルを削除する可能性があります。 続行する前に、データベースとストレージのバックアップがあることを確認してください。 また、この操作がインスタンスの高負荷につながる可能性があるため、メンテナンスウィンドウ中に実行することをおすすめします。

現在の実装では、未使用のファイルの削除はストレージタイプが OpenDAL の場合（環境変数 `STORAGE_TYPE` が `opendal` の場合）のみサポートされています。 OpenDAL 以外のストレージタイプを使用している場合は、未使用のファイルを手動で削除するか、[ストレージインタフェイスへの `scan` メソッドの実装にご協力ください](https://github.com/langgenius/dify/blob/main/api/extensions/storage/base_storage.py)。

確認プロンプトをスキップしたい場合は、両方のコマンドで `--force` (`-f`) オプションを利用できます。

  1. データベースから未使用のファイルのレコードを削除する
         
         $ docker exec -it docker-api-1 flask clear-orphaned-file-records
         ...
         !!! USE WITH CAUTION !!!
         Since not all patterns have been fully tested, please note that this command may delete unintended file records.
         This cannot be undone. Please make sure to back up your database before proceeding.
         It is also recommended to run this during the maintenance window, as this may cause high load on your instance.
         Do you want to proceed? [y/N]: y
         ...
         Found 230 orphaned message_files records:
         - id: 8051365a-23ac-4ded-8c66-721f53bb46c7, message_id: 99a719aa-cc45-4856-8f84-6772d84f8ee84
         - id: 9d95b217-29f8-424c-85f6-827731b68a7a, message_id: 45f7e9d7-6194-46ea-bd53-336218b28e1e
         ...
         Do you want to proceed to delete all 230 orphaned message_files records? [y/N]: y
         - Deleting orphaned message_files records
         Removed 230 orphaned message_files records.
         ...
         Found 365 orphaned file records.
         - orphaned file id: 8a0387e6-dde7-411c-bac2-6e6d8af6ae31
         - orphaned file id: 9177f9df-7360-4434-b65f-10fdec7d38af
         ...
         Do you want to proceed to delete all 365 orphaned file records? [y/N]: y
         - Deleting orphaned file records in table upload_files
         - Deleting orphaned file records in table tool_files
         Removed 365 orphaned file records.

  2. ストレージからデータベースに存在しないファイルを削除する
         
         $ docker exec -it docker-api-1 flask remove-orphaned-files-on-storage
         ...
         !!! USE WITH CAUTION !!!
         Currently, this command will work only for opendal based storage (STORAGE_TYPE=opendal).
         Since not all patterns have been fully tested, please note that this command may delete unintended files.
         This cannot be undone. Please make sure to back up your storage before proceeding.
         It is also recommended to run this during the maintenance window, as this may cause high load on your instance.
         Do you want to proceed? [y/N]: y
         ...
         Found 365 orphaned files.
         - orphaned file: upload_files/618b5d66-a1f5-4b6b-8d12-f171182a1cb2/3a1d5e19-426a-4c10-91eb-cfb9b786f2dc.png
         - orphaned file: upload_files/618b5d66-a1f5-4b6b-8d12-f171182a1cb2/795986eb-d213-4cc5-8c34-c121be43ab5e.png
         ...
         Do you want to proceed to remove all 365 orphaned files? [y/N]: y
         - Removing orphaned file: upload_files/618b5d66-a1f5-4b6b-8d12-f171182a1cb2/3a1d5e19-426a-4c10-91eb-cfb9b786f2dc.png
         - Removing orphaned file: upload_files/618b5d66-a1f5-4b6b-8d12-f171182a1cb2/795986eb-d213-4cc5-8c34-c121be43ab5e.png
         ...
         Removed 365 orphaned files without errors.




* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/learn-more/faq/install-faq.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20ll-&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/learn-more/faq%2Finstall-faq.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[Dify Docs MCP サービスをデプロイしてドキュメントと対話する](/ja-jp/learn-more/extended-reading/dify-docs-mcp)[LLM 配置と使用](/ja-jp/learn-more/faq/llms-use-faq)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * 1\. ローカル展開の初期化後、パスワードが間違っている場合のリセット方法は？
  * 2\. ローカル展開ログで「ファイルが見つかりません」というエラーを修正する方法は？
  * 3\. インストール後にログインできない、またはログインした後に401エラーが表示される場合は？
  * 4\. 起動後にページが読み込まれ続け、CORSエラーが表示される場合は？
  * 5\. 展開後のバージョンアップ方法は？
  * 6\. Notionを使用してインポート時に環境変数を設定する方法は？
  * 7\. ローカル展開バージョンでスペースの名前を変更する方法は？
  * 8\. アプリケーションへのアクセスドメインを変更するには？
  * 9\. データベースのマイグレーションが発生した場合にバックアップすべき内容は？
  * 10\. OpenLLMをローカルで起動する際にDocker展開のDifyが127.0.0.1を使用してローカルポートにアクセスできない理由は？
  * 11\. ローカル展開バージョンのデータセットでドキュメントをアップロードする際のサイズと数量制限を解決する方法は？
  * 12\. ローカル展開バージョンでメール経由でメンバーを招待する方法は？
  * 13\. ローカル展開バージョンで「Can’t load tokenizer for ‘gpt2」というエラーが発生した場合はどうすればよいですか？
  * 14\. ローカル展開バージョンでポート80の競合を解消する方法
  * 15\. テキスト読み上げ中に「[openai] Error: ffmpeg is not installed」というエラーが発生した場合の対処方法
  * 16\. ローカル展開中のNginx設定ファイルのマウントエラーを解消する方法
  * 17\. ベクトルデータベースを他のベクトルデータベースに移行する方法
  * 18\. SSRF_PROXYが必要な理由とは？
  * プロキシの動作をカスタマイズする方法は？
  * 19\. 作成したアプリをテンプレートとして設定する方法は？
  * 20\. 502 Bad Gateway
  * 21\. コンテンツ セキュリティ ポリシーを有効にするにはどうすればよいですか?
  * 22\. APIサービスのポート番号を変更する方法
  * 23\. ファイルをローカルストレージからクラウドストレージに移行する方法
  * 24\. 古いログや未使用のファイルを削除し、ストレージの使用量を削減する方法



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/learn-more/faq/llms-use-faq

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

よくある質問

LLM 配置と使用

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問

    * [セルフホスト / ローカル展開に関するよくある質問（FAQ）](/ja-jp/learn-more/faq/install-faq)
    * [LLM 配置と使用](/ja-jp/learn-more/faq/llms-use-faq)
    * [プラグイン](/ja-jp/learn-more/faq/plugins)



##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




よくある質問

# LLM 配置と使用

Copy page

### 

​

1\. 国内環境でOpenAIのプロキシサーバを利用するにはどうすればよいですか？

DifyはOpenAIのカスタムAPIドメイン機能をサポートしており、OpenAIと互換性のある大規模モデルAPIサーバを利用できます。コミュニティ版では、**設定 — > モデルプロバイダ —> OpenAI —> API編集**の入口に目標サーバのアドレスを入力するだけで使用できます。

### 

​

**2\. 基本モデルをどのように選択しますか？**

  * gpt-3.5-turbo  
gpt-3.5-turboはgpt-3モデルシリーズのアップグレード版で、gpt-3よりも強力で、より複雑なタスクを処理できます。長文の理解やドキュメント間の推論において大幅な向上を遂げています。gpt-3.5-turboはより一貫性のある説得力のあるテキストを生成でき、要約、翻訳、創作においても大きな改善が見られます。  
得意分野：**長文の理解、ドキュメント間の推論、要約、翻訳、創作。**

  * gpt-4  
gpt-4は最新かつ最強のトランスフォーマー言語モデルです。事前学習のパラメータ数が約200億に増加し、すべての言語タスクにおいて最高レベルの性能を発揮します。特に、長く複雑な応答を深く理解し生成するタスクにおいて優れています。gpt-4は抽象概念の理解やページを跨ぐ推論も可能で、人間の言語のすべての側面を扱えます。gpt-4は初の真の汎用言語理解システムで、人工知能分野のいかなる自然言語処理タスクもこなせます。  
得意分野：**すべてのNLPタスク、言語理解、長文生成、ドキュメント間推論、抽象概念理解**  
詳細は[ドキュメント](https://platform.openai.com/docs/models/overview)を参照してください。




### 

​

**3\. なぜmax_tokensの設定を小さくすることを推奨するのですか？**

自然言語処理において、長いテキストの出力は通常、計算時間と計算リソースを多く必要とします。したがって、出力テキストの長さを制限することで、計算コストと計算時間をある程度削減できます。例えば、max_tokens=500と設定すると、テキストの最初の500トークンだけを考慮し、それを超える部分は破棄されます。これは、出力テキストの長さがLLMの許容範囲を超えないようにしつつ、計算リソースを効率的に利用し、モデルの実行効率を向上させるためです。さらに、max_tokensの制限により、プロンプトの長さが増加します。例えば、gpt-3.5-turboの制限は4097トークンで、max_tokens=4000と設定すると、プロンプトには97トークンしか残らず、超えるとエラーが発生します。

### 

​

**4\. データセットの長文をどのように分割するのが合理的ですか？**

自然言語処理のいくつかのアプリケーションでは、通常、テキストを段落や文ごとに分割して、テキストの意味と構造情報をよりよく処理し理解します。最小分割単位は特定のタスクと技術実装によります。例えば：

  * テキスト分類タスクでは、通常、テキストを文または段落ごとに分割します。
  * 機械翻訳タスクでは、文または段落全体を分割単位とします。



最後に、実験と評価を行い、最適なembedding技術と分割単位を決定します。テストセットでのテストを通じて、異なる技術と分割単位の性能を比較し、最適なソリューションを選びます。

### 

​

5\. データセットの分割に使用する距離関数は何ですか？

[コサイン類似度](https://en.wikipedia.org/wiki/Cosine_similarity)を使用します。距離関数の選択は通常重要ではありません。OpenAIの埋め込みは長さ1に正規化されており、これは次のことを意味します：

点積のみを使用してコサイン類似度を少し速く計算できます。

コサイン類似度とユークリッド距離は同じランキングをもたらします。

  * > 正規化された埋め込みベクトルを使用してコサイン類似度またはユークリッド距離を計算し、これらの類似度尺度に基づいてベクトルを並べ替えた場合、得られるランキング結果は同じになります。つまり、コサイン類似度またはユークリッド距離を使用してベクトル間の類似性を測定しても、ランキング結果は一貫しています。これは、正規化後のベクトルの長さはそれらの相対的関係に影響せず、方向情報のみが保持されるためです。したがって、正規化されたベクトルを使用した類似性測定では、異なる測定方法でも同じランキング結果が得られます。ベクトルが正規化された後、すべてのベクトルの長さは1にスケールされます。単位ベクトルは方向のみを記述し、長さは常に1だからです。 _具体的な原理はChatGPTに質問できます。_




埋め込みベクトルが長さ1に正規化されると、2つのベクトル間のコサイン類似度の計算はそれらの点積に簡略化されます。正規化されたベクトルの長さがすべて1であるため、点積の結果はコサイン類似度の結果と同じです。点積計算は他の類似度測定（例えばユークリッド距離）よりも計算速度が速いため、正規化されたベクトルを使用した点積計算は計算効率を若干向上させます。

### 

​

6\. OpenAIキーを入力すると、「**校验失败： You exceeded your current quota, please check your plan and billing details。** 」というエラーメッセージが表示されるのはなぜですか？

これは、OpenAIキーのアカウントが料金不足であることを示しています。OpenAIの公式サイトでチャージしてください。

### 

​

7\. OpenAIキーを使用してアプリ内で対話すると、次のようなエラーメッセージが表示されるのはなぜですか？

エラーメッセージ1：
    
    
    The server encountered an internal error and was unable to complete your request。Either the server is overloaded or there is an error in the application

エラーメッセージ2：
    
    
    Rate limit reached for default-gpt-3.5-turboin organization org-wDrZCxxxxxxxxxissoZb on requestsper min。 Limit: 3 / min. Please try again in 20s. Contact us through our help center   at help.openai.com   if you continue to haveissues. Please add a payment method toyour account to increase your rate limit.Visit https://platform.openai.com/account/billingto add a payment method.

公式インターフェースの呼び出し速度制限に達しているかどうかを確認してください。詳細は[OpenAI公式ドキュメント](https://platform.openai.com/docs/guides/rate-limits)を参照してください。

### 

​

8\. ユーザーが自分でデプロイした後、智聊が使用できず、次のエラーメッセージが表示される場合の対処法：「**Unrecognized request argument supplied:functions** 」

まず、フロントエンドとバックエンドのバージョンが最新であり、フロントエンドとバックエンドのバージョンが一致しているかを確認してください。次に、このエラーはAzure OpenAIのキーを使用しているが、モデルのデプロイに失敗した場合にも発生する可能性があります。使用しているAzure OpenAIにモデルがデプロイされているか確認してください。gpt-3.5-turboモデルのバージョンは0613以上である必要があります。（0613以前のバージョンは智聊が使用するfunction call機能をサポートしていないため、使用できません）

### 

​

9\. OpenAIキーを設定するときに次のエラーが発生する場合の対処法：
    
    
    Error communicating with OpenAl: HTTPSConnectionPool(host='api.openai.com', port=443): Max retriesexceeded with url: /v1/chat/completions (Caused byNewConnectionError( <urllib3.connection.HTTPSConnection object at 0x7f0462ed7af0>; Failed toestablish a new connection: [Errno -3] Temporary failure in name resolution'))

通常、このエラーは環境にプロキシが設定されているために発生します。プロキシが設定されているかどうかを確認してください。

### 

​

10\. アプリ内でモデルを切り替える際に次のエラーメッセージが表示される場合の対処法：
    
    
    Anthropic: Error code: 400 - f'error': f'type': "invalid request error, 'message': 'temperature: range: -1 or 0..1)

各モデルのパラメータの範囲が異なるため、現在のモデルのパラメータ範囲に従って設定する必要があります。

### 

​

11\. 次のエラーメッセージが表示される場合の対処法：
    
    
    Query or prefix prompt is too long, you can reduce the preix prompt, or shrink the max token, or switch to a llm with a larger token limit size

編成ページのパラメータ設定で「最大トークン」の値を小さく設定してください。

### 

​

12\. Difyのデフォルトモデルは何ですか？オープンソースのモデルを使用できますか？

デフォルトモデルは**設定 - モデルプロバイダ** で設定できます。現在、OpenAI / Azure OpenAI / Anthropicなどのテキスト生成モデルをサポートしており、Hugging Face / Replicate / xinferenceでホストされているオープンソースモデルの接続もサポートしています。

### 

​

13\. コミュニティ版でデータセットの**Q &A分割モード**が常に待機中になるのはなぜですか？

使用している埋め込みモデルのAPIキーが速度制限に達しているかどうかを確認してください。

### 

​

14\. アプリ使用中に「Invalid token」エラーが発生する場合の対処法：

「Invalid token」エラーが発生した場合、以下の2つの解決方法を試してください：

  * ブラウザのキャッシュ（クッキー、セッションストレージ、ローカルストレージ）をクリアします。スマートフォンを使用している場合は、対応するアプリのキャッシュをクリアして再度アクセスします。
  * 新しいアプリURLを生成し、再度アクセスします。



### 

​

15\. データセットドキュメントのアップロードサイズ制限は何ですか？

現在、データセットドキュメントのアップロードは1つのドキュメントで最大15MB、ドキュメントの総数は100個に制限されています。ローカルデプロイ版でこの制限を調整する必要がある場合は、[ドキュメント](https://docs.dify.ai/v/ja-jp/learn-more/faq/install-faq#id-11-rkarubjonnodtasettodedokyumentowoappurdosurunosaizutowosuruha)を参照してください。

### 

​

16\. Claudeモデルを選択しているのに、なぜOpenAIの費用がかかるのですか？

Claudeは埋め込みモデルをサポートしていないため、埋め込みプロセスやその他の対話生成はデフォルトでOpenAIのキーを使用するため、OpenAIのクォータを消費します。また、**設定 - モデルプロバイダ** で他のデフォルト推論モデルと埋め込みモデルを設定することもできます。

### 

​

17\. データを使ってモデルの生成能力をより多く活用する方法はありますか？

データセットの使用はデータセットの説明に関係します。データセットの説明を明確に記述するようにします。具体的には[こちらのドキュメント](/ja-jp/guides/knowledge-base/readme)を参照してください。

### 

​

18\. データセットドキュメントがExcelの場合、どのように分割するのが良いですか？

最初の行にヘッダを設定し、後続の各行に内容を表示します。余分なヘッダ設定や複雑な形式の表を設定しないようにします。

以下の表の例のように、2行目のヘッダだけを保持し、1行目（表1）は余分なヘッダのため削除します。

### 

​

19\. ChatGPT Plusを購入したのに、なぜdifyでGPT4を使用できないのですか？

OpenAIのGPT4モデルAPIとChatGPT Plusは別々の製品で、料金も別々です。モデルAPIには独自の料金体系があります。詳細は[OpenAI料金ドキュメント](https://openai.com/pricing)を参照してください。支払いの申し込みにはカードの登録が必要で、カードを登録するとGPT3.5の権限が付与されますが、GPT4の権限はありません。GPT4の権限を得るには、一度の支払いの請求書が必要です。詳細は[OpenAI公式ドキュメント](https://platform.openai.com/account/billing/overview)を参照してください。

### 

​

20\. 他の埋め込みモデルを追加する方法はありますか？

Difyは以下の埋め込みモデル使用をサポートしており、設定ボックスで`Embeddings`タイプを選択するだけで使用できます。

  * Azure
  * LocalAI
  * MiniMax
  * OpenAI
  * Replicate
  * XInference



### 

​

21\. 自分が作成したアプリケーションをアプリケーションテンプレートとして設定する方法はありますか？

この機能はDify公式が提供するアプリケーションテンプレートで、クラウド版ユーザーの参考用です。自分が作成したアプリケーションをテンプレートとして設定することは現在サポートしていません。クラウド版を使用している場合、**ワークスペースに追加** または**カスタマイズ** して自分のアプリケーションとして使用できます。コミュニティ版を使用していて、チーム用にさらにアプリケーション テンプレートを作成する必要がある場合は、有料のテクニカル サポートについて、当社の商用化チーム ([business@dify.ai](mailto:business@dify.ai)) にお問い合わせください。

* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/learn-more/faq/llms-use-faq.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20use-&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/learn-more/faq%2Fllms-use-faq.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[セルフホスト / ローカル展開に関するよくある質問（FAQ）](/ja-jp/learn-more/faq/install-faq)[プラグイン](/ja-jp/learn-more/faq/plugins)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * 1\. 国内環境でOpenAIのプロキシサーバを利用するにはどうすればよいですか？
  * 2\. 基本モデルをどのように選択しますか？
  * 3\. なぜmax_tokensの設定を小さくすることを推奨するのですか？
  * 4\. データセットの長文をどのように分割するのが合理的ですか？
  * 5\. データセットの分割に使用する距離関数は何ですか？
  * 6\. OpenAIキーを入力すると、「校验失败： You exceeded your current quota, please check your plan and billing details。」というエラーメッセージが表示されるのはなぜですか？
  * 7\. OpenAIキーを使用してアプリ内で対話すると、次のようなエラーメッセージが表示されるのはなぜですか？
  * 8\. ユーザーが自分でデプロイした後、智聊が使用できず、次のエラーメッセージが表示される場合の対処法：「Unrecognized request argument supplied:functions」
  * 9\. OpenAIキーを設定するときに次のエラーが発生する場合の対処法：
  * 10\. アプリ内でモデルを切り替える際に次のエラーメッセージが表示される場合の対処法：
  * 11\. 次のエラーメッセージが表示される場合の対処法：
  * 12\. Difyのデフォルトモデルは何ですか？オープンソースのモデルを使用できますか？
  * 13\. コミュニティ版でデータセットのQ&A分割モードが常に待機中になるのはなぜですか？
  * 14\. アプリ使用中に「Invalid token」エラーが発生する場合の対処法：
  * 15\. データセットドキュメントのアップロードサイズ制限は何ですか？
  * 16\. Claudeモデルを選択しているのに、なぜOpenAIの費用がかかるのですか？
  * 17\. データを使ってモデルの生成能力をより多く活用する方法はありますか？
  * 18\. データセットドキュメントがExcelの場合、どのように分割するのが良いですか？
  * 19\. ChatGPT Plusを購入したのに、なぜdifyでGPT4を使用できないのですか？
  * 20\. 他の埋め込みモデルを追加する方法はありますか？
  * 21\. 自分が作成したアプリケーションをアプリケーションテンプレートとして設定する方法はありますか？



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/learn-more/faq/plugins

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

よくある質問

プラグイン

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問

    * [セルフホスト / ローカル展開に関するよくある質問（FAQ）](/ja-jp/learn-more/faq/install-faq)
    * [LLM 配置と使用](/ja-jp/learn-more/faq/llms-use-faq)
    * [プラグイン](/ja-jp/learn-more/faq/plugins)



##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




よくある質問

# プラグイン

Copy page

> 以下の問題と解決方法は、`1.0.0` コミュニティエディションに適用されます。

### 

​

プラグインインストール時のエラーの対処方法

**問題** : `plugin verification has been enabled, and the plugin you want to install has a bad signature` というエラーメッセージが表示された場合、どのように対処すればよいですか？

**解決方法** : `.env` 設定ファイルの末尾に以下の行を追加してください：  
`FORCE_VERIFYING_SIGNATURE=false`

このフィールドを追加すると、Dify プラットフォームは Dify Marketplace にリストされていない（つまり、未検証の）すべてのプラグインのインストールを許可します。

ただし、安全性を考慮して、未知のソースから提供されるプラグインは、テスト環境またはサンドボックス環境でまずインストールし、安全性を確認した後、本番環境にデプロイしてください。

* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/learn-more/faq/plugins.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/learn-more/faq%2Fplugins.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[LLM 配置と使用](/ja-jp/learn-more/faq/llms-use-faq)[ライセンス](/ja-jp/policies/open-source)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * プラグインインストール時のエラーの対処方法



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/learn-more/use-cases/build-ai-sales-avatar

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

活用事例

AIセールスアバターの探求

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

    * [DeepSeek & Dify連携ガイド - 多段階推論を活用したAIアプリケーション構築](/ja-jp/learn-more/use-cases/integrate-deepseek-to-build-an-ai-app)
    * [Ollama + DeepSeek + Dify のプライベートデプロイ - あなた自身のAIアシスタントの構築方法](/ja-jp/learn-more/use-cases/private-ai-ollama-deepseek-dify)
    * [コードなしでMidjourney プロンプトボットを作成する方法](/ja-jp/learn-more/use-cases/create-a-midjoureny-prompt-word-robot-with-zero-code)
    * [Notion AI アシスタントの構築](/ja-jp/learn-more/use-cases/build-an-notion-ai-assistant)
    * [数分でビジネスデータを用いた公式サイトのAIインテリジェントカスタマーサービスを作成する方法](/ja-jp/learn-more/use-cases/create-an-ai-chatbot-with-business-data-in-minutes)
    * [DifyチャットボットをWixサイトに統合する方法](/ja-jp/learn-more/use-cases/how-to-integrate-dify-chatbot-to-your-wix-website)
    * [AWS Bedrock Knowledge Baseに統合する方法](/ja-jp/learn-more/use-cases/how-to-connect-aws-bedrock)
    * [Difyで大規模言語モデルの「競技場」を体験する方法：DeepSeek R1 VS o1 を例に](/ja-jp/learn-more/use-cases/dify-model-arena)
    * [Difyスケジューラーの構築](/ja-jp/learn-more/use-cases/dify-schedule)
    * [DifyクラウドでAI Thesis Slack Botを構築](/ja-jp/learn-more/use-cases/building-an-ai-thesis-slack-bot)
    * [AIセールスアバターの探求](/ja-jp/learn-more/use-cases/build-ai-sales-avatar)
  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




活用事例

# AIセールスアバターの探求

Copy page

著者：[Alec Lee](mailto:alec.lee1005@gmail.com)｜AXグローバルストラテジスト & フルスタックエクスプローラー。本文に不備や改善点がありましたら、どうぞお気軽にご連絡ください。

—— Dify × TEN × Trulience × Azure × Agora × OpenAI 統合実践ガイド ——

本ガイドは、世界中の 🌍 企業開発者および個人の探究者の方々を対象に、  
できるだけシンプルでわかりやすい方法で、  
「聞く・話す・考える・演じる」ことができるAIデジタルセールスアシスタントの構築手順を一歩ずつご紹介します。

今回のユースケースは、**高級車のAIデジタル販売員** 。彼女の名前は **Vendy** です。

* * *

構築を始める前に、**Dify、TEN、Agora、Azure** 各チームの皆様より  
多大なるご指導とご支援をいただきましたこと、心より御礼申し上げます。

本プロジェクトは、グローバルなオープンソースコミュニティが持つ  
**「探求・共創・賦能」** の精神によって支えられており、  
ゼロから始めた私のようなAI共創の探索者にも、  
この構想をエンドツーエンドで実現する機会が与えられました。

* * *

このドキュメントが、世界中のAI探究者にとって：

**実用的かつ再利用可能な道しるべ** となり、 ハンズオンのハードルを下げ、  
AX（AIトランスフォーメーション）を個人 × 企業 × 社会のレベルで真に実装・活用する後押しになれば幸いです。

もし改善点やお気づきの点がありましたら、ぜひご連絡ください。

* * *

## 

​

一、「聞く・話す・考える・演じる」AIデジタルアシスタントは、どの6つのプラットフォームから構成されているのか？

本プロジェクトは、**TENプラットフォームを中枢** とし、  
以下の6つの主要プラットフォームを統合することで、  
高級車の販売を想定したAIセールスアバター（AI Sales Avatar）— **Vendy** を構築します。

* * *

Vendyは、以下の4つの能力を備えています：

  * 👂「聞く」：ユーザーの質問を音声で受け取る
  * 🤔「考える」：質問に基づき思考・回答を生成する
  * 🗣️「話す」：自然な音声で応答を返す
  * 👤「演じる」：デジタルヒューマンとして画面上に現れ、表情を伴って表現する



👇 以下は、システム全体の統合アーキテクチャ図です：

## 

​

🧩 各プラットフォームにおける役割分担

👇 下図は、システム内で各プラットフォームが担うモジュールおよび  
統合されたワークフローの概要を示しています：

## 

​

📌 各プラットフォームの機能概要：

  * **Dify + OpenAI** ：  
インテリジェントエージェントを構築し、社内データおよびOpenAI APIを活用。  
TENプラットフォームに対し、統一された対話APIインターフェースを提供します。

  * **Trulience** ：  
デジタルヒューマンの演出機能を提供。  
TENに対し、アバターIDとアクセストークンを渡し、仮想キャラクターの表示を可能にします。

  * **Agora** ：  
音声通信・ビデオ通話機能を提供。  
TENに対して、App IDおよびCertificate（証明書）を提供します。

  * **Azure Speech** ：  
音声認識（STT）および音声合成（TTS）サービスを提供。  
TENには以下のパラメーターを渡します：  
`AZURE_STT_KEY`、`AZURE_STT_REGION`、`AZURE_TTS_KEY`、`AZURE_TTS_REGION`

  * **TEN（中枢プラットフォーム）** ：  
システムのオーケストレーションハブとして、上記すべてのAPI、キー、トークンを統合・管理。  
AIセールスアバター **Vendy** によるインテリジェントな会話とリアルタイム対話機能を実現します。




* * *

📌 **補足** ：  
上記プラットフォームは、ユースケースに応じて他のOSSやSaaSに置き換えることも可能です。  
本プロジェクトの構成は、学習および再利用を目的としたリファレンス例です。

* * *

## 

​

二、構築を開始しよう（まるでLEGOを組み立てるように）

まずは Dify 上で3つのステップを行い、  
社内データに基づいた AI Sales Avatar の「本体」を構築します。

今回のデモシナリオは：  
**高級車販売のデジタルアシスタント** 、彼女の名前は **Vendy** です。

* * *

### 

​

🧩 Step 1：Difyアカウントの登録とモデルAPIの設定

👉 Difyの公式サイトへアクセス： <https://dify.ai/>  
右上の「Get Started」ボタンをクリックし、登録を開始します。

アカウントの登録・ログインには、以下の方法が利用できます： **GitHub** 、**Gmail** 、または **Hotmail**

Difyにログインした後、左側メニューから **「Settings > Model Provider（モデルプロバイダー）」** をクリックします。  
ページ内の **OpenAI** モジュールを見つけて、**「Install」** をクリックし、インストールを行います。

**OpenAI** モジュール内で、青色のリンク **「Get your API Key from OpenAI」** をクリックすると、  
OpenAI の公式プラットフォームへ：<https://platform.openai.com/api-keys>。

OpenAI の画面で **「+ Create new secret key」** をクリックし、新しい APIキー を生成します。  
生成されたキーをコピーし、Dify に戻って OpenAI モジュール内の以下のフィールドに貼り付けます：

モデルの設定が完了すると、Dify上での実行環境の準備が整います。  
これで、AI Sales Avatar の「知識ベース（ナレッジ本体）」の構築を始めることができます。

* * *

### 

​

🧩 Step 2：AI Sales Avatar に必要な内部資料（ナレッジドキュメント）をアップロードする

Dify のコンソール上部メニューから **「Knowledge」** をクリックし、  
続いて **「Create Knowledge」** を選択して、新しいナレッジデータセットを作成します。

次の画面で、ナレッジのアップロード方法を選択します。  
おすすめは、**「Import from file（ファイルからインポート）」** を選ぶ方法です。

👇 以下のような画面になります：

あらかじめ用意しておいた社内資料（製品紹介、営業マニュアル、FAQドキュメントなど）をアップロードしてください。  
もし資料がまだ準備できていない場合は、ChatGPTを使ってコンテンツを生成することも可能です。

👇 例えば、私たちは ChatGPT を活用して、Lexus・Audi・BMW などの高級車ブランド紹介をまとめた Word ドキュメントを作成しました：

ドキュメントをダウンロードしたら、Difyのアップロード画面に戻り、  
**「Import from file」** を選択して該当ファイルをアップロードします。

アップロードが完了したら、画面右下の **「Next」** をクリックして、次の設定ステップへ進みます。

デフォルトの設定はほとんどのケースに適しているため、基本的にはそのままで問題ありません。  
そのまま **「Save & Process」** をクリックして進めてください。 （エージェントの理解精度をさらに高めたい場合は、後からパラメーターを調整することも可能です。）

✅ 以下の画面が表示された場合、ドキュメントのアップロードが正常に完了し、Difyシステムによって正しく解析されたことを意味します。

これで、AIエージェントのナレッジベース構築が完了しました。  
次のステップでは、このナレッジを活用するためのエージェントアプリを作成し、接続していきます！

* * *

### 

​

🧩 Step 3：エージェントアプリを作成し、ナレッジベースに接続する

Dify のコンソール画面にて、上部メニューから **「Studio」** をクリックし、  
右上の **「Create」** ボタンを押して、新しいアプリを作成します。

ポップアップウィンドウで、以下の内容を入力します：

  * **App Name & Icon**：如 `AI Sales Avatar`
  * **Description** ： Your name is Vendy, the AI Clerk of Luxury Cars. Your task is to provide information about luxury cars to the customers based on the knowledge.



👇 設定画面は以下のようになります：

点击 **Create** 后，会进入 App 的 **Orchestrate** 编辑界面。

在 **INSTRUCTION** 栏中填写与刚才 **Description** 一致的内容：

**Create** をクリックすると、アプリの **Orchestrate（オーケストレート）** 編集画面に移動します。

ここで、**INSTRUCTION** 欄に、先ほど入力した **Description（説明文）** と同じ内容を入力してください。

続いて、画面下部の **Knowledge** セクションにて、  
先ほどアップロードしたナレッジドキュメントを参照資料として選択します。

👇 設定画面の例は以下の通りです：

設定が完了したら、右側の入力フィールドでテストを行い、  
ナレッジベースの内容が正しく参照できるかを確認します。

アップロードしたドキュメントに基づいた回答が返ってくる場合、  
エージェントがナレッジと正常に接続されていることを意味します。

問題がなければ、画面右上の **「Publish」** をクリックして、AIアプリを公開しましょう。

アプリを公開した後、左側メニューの **「API Access」** をクリックします。  
画面右上の **「Create Secret Key」** をクリックすると、APIキーが生成されます。

この APIキー は、後ほど TEN プラットフォームに接続する際に必須となるため、  
**必ずコピーして安全な場所に保存しておいてください。**

👇 APIキーの生成画面は以下の通りです：

🎉 おめでとうございます！  
これで、AI Sales Avatar の「知能本体」部分の構築が完了し、  
TENプラットフォームで使用するための APIキー も無事に取得できました。

* * *

続いては、**Trulience プラットフォーム** に進み、  
AI Sales Avatar に「外見と演出能力（＝デジタルヒューマンの可視化）」を与えます。

つまり、彼女が「聞く・話す・考える」だけでなく、  
画面上に現れ、人と自然にインタラクションできるようになります！

* * *

📚 Dify の詳細については、以下の公式ドキュメントも参考にしてください：  
👉 <https://docs.dify.ai/en/introduction>

* * *

### 

​

🧩 Step 4：Trulienceアカウントの登録と、アバターID・アクセストークンの取得

次は、AI Sales Avatar に「可視化されたデジタルヒューマンの姿」を与えます。  
Trulience プラットフォームを使用してアバターを生成し、  
後ほど接続に必要となる **Avatar ID** と **アクセストークン（Token）** を取得します。

✅ 操作の流れは以下の通りです：

1️⃣ Trulienceの公式サイトにアクセス： <https://trulience.com>  
トップページの **「Start For Free」** ボタンをクリックして、アカウント登録を開始します。

👇 ページの画面例は以下の通りです：

2️⃣ 登録が完了すると、管理画面（ダッシュボード）に移動します。  
左側メニューの **「IMAGE AVATARS」** をクリックし、  
女性キャラクターの中から1人を選び、**Vendy** の外見として設定します。

その後、緑色の **「Create Avatar」** ボタンをクリックして、アバターを生成します。

👇 選択および作成画面の例は以下の通りです：

* * *

3️⃣ 画面に **「Avatar created」** のメッセージが表示されたら、  
デジタルヒューマンの作成が正常に完了したことを意味します。

👇 作成成功時の画面例は以下の通りです：

3️⃣ 左側に表示されているデフォルトの名前（例：**Amanda** ）を **Vendy** に変更します。  
名前を変更すると、画面下部にこのアバター専用の **Avatar ID** が表示されます。

👇 以下のように確認できます：

* * *

4️⃣ 次に、画面下部の **「Connect」** ボタンをクリックすると、  
ブラウザが新しいページにリダイレクトされます。

そのとき、URLの中にある `token=` 以降の文字列をコピーしてください。  
これが **アクセストークン（Token）** になります。

この **Avatar ID** と **Token** は、後ほど TEN プラットフォームに接続する際に必要となるため、  
忘れずに一緒に控えておくことをおすすめします。

* * *

🎉 おめでとうございます！  
これで、AI Sales Avatar の「**外見構築** 」が完了し、  
アバターの **Avatar ID** および **アクセストークン（Token）** を無事に取得できました。

* * *

次はいよいよ最終ステップです：  
Difyで構築したインテリジェントエージェントと、  
Trulienceで生成したデジタルヒューマンを、  
**TEN プラットフォーム** に統合し、  
「聞く・話す・考える・演じる」を一体化したリアルタイム音声AIエージェントを実現します！

* * *

📚 Trulience の詳細については、以下の公式ドキュメントをご参照ください：  
👉 <https://www.trulience.com/docs#/>

* * *

## 

​

🧩 Step 5：TEN Agent プラットフォームをローカルで構築する前に必要な3つの準備

Dify のインテリジェントエージェントと Trulience のデジタルヒューマンを  
TEN プラットフォームに接続する前に、  
音声通信および音声認識・音声合成に必要なアカウントと認証情報を事前に用意しておく必要があります。

主に準備が必要なのは、以下の3項目です：

* * *

### 

​

✅ 1. Agora のリアルタイム音声通信パラメーター

TEN は **Agora** を使用して、音声通話機能（＝「彼女が話す」）を実現しています。  
そのため、以下のパラメーターを準備する必要があります：

  * `AGORA_APP_ID=`（App ID）
  * `AGORA_CERTIFICATE=`（Certificate）



👉 取得方法：  
Agora の管理コンソールにログインします： <https://console.agora.io>  
新しいプロジェクトを作成すると、上記の情報（App ID など）を取得できます。

👇 コンソール画面の例は以下の通りです：

アカウントにログインした後、左側メニューの **「Projects」** をクリックし、  
右上の **「Create New」** ボタンをクリックして、新しいプロジェクトを作成します。

👇 プロジェクト作成画面の例は以下の通りです：

* * *

### 

​

📝 入力項目の説明：

  * **Project Name** ：`AISalesAvatar` と入力します
  * **Use Case** ：`Enterprise Collaboration` など、適切な用途を選択します
  * **Authentication Mode** ：**Secure Mode: APP ID + Token（推奨）** を選択します



すべて入力したら、**「Submit」** をクリックしてプロジェクト作成を完了します。

👇 プロジェクトが作成されると、App ID および Certificate（証明書）を取得できます：

プロジェクトが正常に作成されると、自動的にプロジェクト管理ページに移動します。  
プロジェクト一覧の中から、**App ID** の右側にあるコピーアイコンをクリックすると、  
**App ID** をコピーできます。

👇 以下はその画面例です：

* * *

App ID を取得した後は、プロジェクト右側の ✏️ **鉛筆アイコン（編集ボタン）** をクリックし、  
プロジェクトの詳細ページに入ります。

ページ下部の **Primary Certificate** セクションにあるコピーアイコンをクリックすると、  
該当プロジェクトの **Certificate（証明書）** をコピーできます。

👇 以下はその画面の例です：

これで、**Agora の App ID および Primary Certificate（証明書）** の取得が完了しました。  
TEN プラットフォームで音声通信機能を有効化するための準備が整いました。

* * *

📚 詳細については、Agora の公式ドキュメントをご参照ください：  
👉 <https://docs.agora.io/en/video-calling/get-started/manage-agora-account?platform=web#create-an-agora-project>

* * *

### 

​

✅ 2. Azure Speech のパラメーター（音声認識 + 音声合成）

**Azure** は、ユーザーの音声を文字に変換する「STT（Speech to Text）」と、  
AI の返答を音声に変換する「TTS（Text to Speech）」の機能を担います。

以下の4つの環境変数を準備する必要があります：

  * `AZURE_STT_KEY`
  * `AZURE_STT_REGION`
  * `AZURE_TTS_KEY`
  * `AZURE_TTS_REGION`



👉 取得方法は以下の通りです：

Azure の公式ポータルにアクセスし、ログインします：  
🔗 <https://portal.azure.com>

Azure ポータルのホーム画面で、左上の **「Create a resource（リソースの作成）」** をクリックします。  
検索バーに **Azure OpenAI** と入力し、表示された項目をクリックして作成画面へ進みます。

👇 作成画面の例は以下の通りです：

* * *

以下の内容を参考にして、**「Basics」** セクションの基本情報を入力してください：

* * *

通常は、デフォルトの **「パブリックアクセス（公共アクセス）」** を選択すれば問題ありません。  
これにより、サービスはインターネット経由でアクセス可能になります。

🧩 オプションステップ：  
リソースに `project=ai-agent` のようなタグを追加することで、  
後からの分類や管理がしやすくなります。

👇 タグとネットワーク設定の画面は以下の通りです：

* * *

📝 入力内容に誤りがないことを確認したら、  
**「Create（作成）」** ボタンをクリックして、Azure OpenAI サービスのデプロイを開始します。

👇 デプロイ確認画面の例は以下の通りです：

👇 リソースのデプロイ中の画面は以下の通りです：

* * *

デプロイが完了したら、**Azure AI Foundry** にアクセスします。  
すると、以下のようなウェルカム画面が表示され、  
プロジェクトの作成やモデルの選択をすばやく行うことができます。

👇 ウェルカム画面の例は以下の通りです：

* * *

**「Model Catalog（モデルカタログ）」** ページに移動し、  
一覧の中から **Azure AI Speech** を選択します。

**Azure-AI-Speech** モデルをクリックすると、詳細ページに移動します。  
そのページ上部にある **「Use Service」** ボタンをクリックすると、  
**Speech Playground** ページに遷移します。

**Speech Playground** にアクセスしたら、画面上で自分の音声サービスリソースを選択します（以下の図を参照）。  
選択すると、対応する **API Key** と **Region** が表示されます。

* * *

**「Text to Speech」** タブをクリックすると、**Voice Gallery（ボイスギャラリー）** に移動します。  
ここでは、さまざまな音声スタイルを試聴でき、  
AIアバターに最も適した音声タイプを選ぶことができます。

* * *

**「View Code」** ボタンをクリックすると、  
現在の音声サービスに対応する **API Key** と **Region** をコピーすることができます。

* * *

🎉 **おめでとうございます！**  
これで、**TEN プラットフォームの実行に必要なすべてのパラメーター準備が完了しました。**

* * *

### 

​

🧱 次のステップでは、いよいよローカル環境で TEN Agent プラットフォームを起動し、

これまでに構築してきたすべてのモジュールを連携させます：

  * 🧠 インテリジェントエージェント（Dify）
  * 🔊 音声機能（Azure Speech + Agora）
  * 👩‍💻 バーチャルアバター（Trulience）



**これらを完全に統合し、「聞く・話す・考える・演じる」を兼ね備えたリアルタイムAIセールスアシスタントを完成させましょう！**

* * *

📚 Azure Speech および OpenAI サービスの導入についてさらに詳しく知りたい場合は、 以下の公式ドキュメントをご参照ください： 👉 <https://learn.microsoft.com/en-us/azure/ai-services/openai/how-to/create-resource?pivots=web-portal>

## 

​

🧩 Step 6：Mac 上で TEN Agent の開発環境をローカルに構築する

AI Sales Avatar の音声インタラクションシステムを実行・デバッグするためには、  
ローカル環境に **TEN Agent の開発環境** を準備する必要があります。

* * *

### 

​

🔧 必要なツールとインストール方法一覧：

ツール| 役割・機能説明| インストール方法  
---|---|---  
Docker| TEN のコンテナ環境を実行する| 公式サイトから Docker Desktop をダウンロード  
Git| TEN のコードリポジトリをクローン・管理| `brew install git`  
Node.js| フロントエンド（Playground）を実行| `brew install node`  
  
* * *

### 

​

✅ ① 安装 Docker

### 

​

✅ ① Docker のインストール

💡 Docker は TEN プラットフォームの中核となる実行環境であり、  
すべてのモジュールはコンテナとしてデプロイされます。

  * 公式サイトにアクセス：👉 <https://www.docker.com/products/docker-desktop>
  * macOS 用の `.dmg` インストーラーをダウンロードしてインストールします。
  * インストール後、アプリ一覧から Docker アイコンをクリックして起動します。
  * 上部メニューバーの 🐳 アイコンが緑色になれば、起動成功です。
  * Terminal を開き、以下のコマンドを入力してインストール確認を行います：docker -v.



### 

​

✅ ② Git のインストール

💡 Git は、TEN フレームワークのコードをクローンおよび管理するためのバージョン管理ツールです。

インストールコマンド：brew install git インストール確認：git -v

### 

​

✅ ③ Node.js のインストール

💡 Node.js は、TEN のフロントエンドインターフェース（Playground）を実行するために必要な環境です。

インストールコマンド：brew install node インストール確認：node -v

### 

​

✅ ④ TEN Agent フレームワークのクローン

Docker、Git、Node.js のインストールが完了したら、  
次は TEN Agent のソースコードをクローンし、`.env` 環境変数ファイルを設定します。

🚀 1. TEN Agent のコードリポジトリをクローンする

Terminal（ターミナル）で以下のコマンドを実行します：git clone <https://github.com/TEN-Framework/TEN-Agent.git>

実行後、ローカル環境に TEN-Agent というフォルダが作成され、 必要なすべてのコードと設定ファイルが格納されます。

👇 フォルダ構成の例は以下の通りです：

📦 2. プロジェクトディレクトリに移動し、環境変数テンプレートをコピーする

まず、`ai_agents` サブディレクトリに移動し、以下のコマンドを実行します：

cd TEN-Agent/ai_agents cp .env.example .env

.env ファイルは、TEN Agent の実行に必要な環境変数を設定するための構成ファイルです。 このファイルをテキストエディタで開き、Dify、Trulience、Azure、Agora から取得した各種キーやトークンを入力してください。

👇 編集画面の例は以下の通りです：

✍ 3. `.env` ファイルを編集し、以下の変数を設定する

`.env` ファイルを、**Cursor** や **VS Code** などのテキストエディタで開いてください。  
ファイルの末尾に、以下の内容を追加し、各自の環境に合わせたキーとリージョン情報を入力します：

Agora App ID と Certificate AGORA_APP_ID=your_agora_app_id AGORA_APP_CERTIFICATE=your_agora_certificate

Azure STT パラメーター AZURE_STT_KEY=your_stt_key AZURE_STT_REGION=your_stt_region

Azure TTS パラメーター AZURE_TTS_KEY=your_tts_key AZURE_TTS_REGION=your_tts_region

👇 `.env` ファイルの編集画面の例は以下の通りです：

## 

​

✅ Step ⑤：TEN Agent のコンテナを起動し、サーバーをビルド・実行する

`.env` 環境変数の設定が完了したら、  
次は **TEN Agent のコンテナ環境** を本格的に起動していきます。

* * *

### 

​

🐳 ① コンテナの起動

`ai_agents` ディレクトリに移動し、Docker コンテナサービスを起動します：

cd ai_agents docker compose up -d

このコマンドにより、以下のコンテナサービスが起動されます：

  * `ten_agent_dev`：エージェントの開発および実行用
  * `ten_agent_demo`：サンプルエージェント
  * `ten_agent_playground`：フロントエンドのインタラクション画面



👇 プロジェクト構成の例は以下の通りです：

🔧 ② コンテナに入って Agent サーバーをビルドする

以下のコマンドを実行して、開発用コンテナに入ります：docker exec -it ten_agent_dev bash

コンテナ内に入ったら、初期化用のタスクスクリプトを実行して、エージェントを登録します：task use

👇 プロジェクト構成の例は以下の通りです：

このコマンドを実行すると、`manifest.json` や `property.json` などのエージェント設定ファイルが自動的に読み込まれ、  
必要な依存パッケージも自動でインストールされます。

👇 実行プロセスの画面例は以下の通りです：

✅ `task run` コマンドの実行が完了したら、  
以下のアドレスをブラウザで開くことで、フロントエンドの画面にアクセスできます：

👉 [https://localhost:49483]

正常に起動していれば、以下のような画面が表示されます：

画面上部の **「Graph」** タブをクリックします。

ドロップダウンメニューから、以下のグラフを選択します： ➡️ **`voice_assistant_intergrated_stt (Auto Start)`** ，  
その後、画面右下の **「Save」** ボタンをクリックして、設定を保存します。

👇 ページ画面の例は以下の通りです：

✅ 音声合成（TTS）モジュールを **Azure エンジン** に置き換える

  1. フロー図の中から、**TTS モジュール** （例：`tts_default`）を見つけます
  2. そのモジュールを右クリックし、**「Replace Node with」** を選択します
  3. 表示されるリストの中から **`azure_tts`** を選びます



これで、音声合成モジュールの Azure への切り替えが完了します。

👇 Azure TTS モジュールの置き換え画面は以下の通りです：

🎙️ デジタルヒューマンの音声設定（TTS）

デジタルヒューマンの外見に合わせて、彼女の音声もカスタマイズすることができます。  
Microsoft の音声サービスページでは、サポートされている音声の名前が一覧で表示されています。

👉 こちらのリンクからアクセスできます：  
<https://learn.microsoft.com/en-us/azure/ai-services/speech-service/language-support?tabs=tts#multilingual-voices>

* * *

この例では、英語の女性の音声を選択します：  
🗣️ **`en-US-AshleyNeural`**

Azure TTS モジュール内では、以下のフィールドに次の内容を入力してください：  
`Azure_synthesis_voice_name=en-US-AshleyNeural`

👇 Azure TTS 音声設定画面の例は以下の通りです：

🔁 LLM モジュールを Dify インターフェースに置き換えて、Dify エージェントを接続する

  1. **`llm` モジュール** を右クリックし、**「Replace Node with」** を選択します
  2. 表示されたリストから **`dify_python`** を選択します



これで、TEN Agent の大規模言語モデル（LLM）モジュールが、Dify が提供するインテリジェントエージェントインターフェースに接続されます。

👇 操作画面の例は以下の通りです：

2️⃣ 置き換えが完了したら、新しく生成された **`dify_python`** モジュールを再度右クリックし、  
**「Update Properties」** をクリックして、プロパティ設定ページに移動します。

  * **API Key** フィールドに、Dify プラットフォームで作成した API Key を入力します。
  * **Greeting** フィールドでは、必要に応じて歓迎のメッセージ（音声での挨拶など）をカスタマイズできます。



👇 設定画面の例は以下の通りです：

✅ TEN Agent を起動し、Trulience のデジタルヒューマンと接続する

* * *

### 

​

🚀 フロントエンドページを起動

設定が完了したら、ブラウザを開き、以下のアドレスにアクセスして、TEN Agent の起動画面に入ります：

👉 <http://localhost:3000>

👇 ページの画面例は以下の通りです：

🧠 インテリジェントエージェントのフローチャート（Graph）を選択

  1. 画面右上の **「Select Graph」** をクリックし、ドロップダウンメニューから  
➤ `voice_assistant_integrated_stt` を選択します

  2. **「Enable Trulience Avatar」** にチェックを入れ、以下のフィールドを入力します：

     * **Avatar ID** （Trulience でデジタルヒューマンを作成した際に得られる ID）
     * **Avatar Token** （Connect をクリック後、ブラウザのアドレスバーからコピーしたトークン）
  3. 入力が完了したら、**「Save changes」** をクリックして設定を保存します。




👇 設定画面の例は以下の通りです：

🗣️ 音声インタラクションを起動し、デジタルヒューマンが正常に接続されているかテストする

✅ 画面右上の **「Connect」** ボタンをクリックして、最終テストを実施します。

すべての設定が正しく行われていれば、以下のシナリオが表示されます：

  * 🧍 デジタルヒューマンの姿が自動的にロードされて表示される

  * 🗣️ 彼女は自然な音声で挨拶し、質問を投げかけてきます。例えば：  
_「どの高級車を紹介できますか？」_

  * 🤖 彼女の回答を基に、Dify ナレッジベースの内容が正しく読み取られ、理解されているかを検証できます。




👇 実行画面の例は以下の通りです：

🎯 おめでとうございます！これで、あなたは完全な **AI Sales Avatar** を手に入れました！

* * *

✅ **OpenAI / Dify** のチャットボット  
✅ **Azure** の自然な音声合成機能（女性の声）  
✅ **Trulience** によるデジタルヒューマンの外見  
✅ **TEN プラットフォーム** に基づいた音声インタラクション能力

* * *

🌟 これが AI エージェントの最も重要な完全なフローです：  
**「聞く → 考える → 話す → 演じる → 接続」**

📚 詳細については、TEN の公式技術ドキュメントをご参照ください： 👉 <https://theten.ai/docs/ten_agent/architecture_flow>

## 

​

🛠️ 次のステップの拡張提案（AX アーキテクチャに基づく）

現在構築された「AI Sales Avatar」をベースに、  
**AX アーキテクチャ** のパスに沿って、実際のビジネスシーンにおける能力をさらに拡張し、  
次のステップとして、以下のフローを順次実現します：  
**データ → モデル → エージェント → ユーザーインターフェース → 全業務ライフサイクル管理** の閉ループを構築する。

* * *

### 

​

🧑‍💼 ウェブサイトのホームページに埋め込み、会社のバーチャルキャラクターとして活用

**Trulience** の D-Human および Avatar 機能を活用し、  
現在のデジタルヒューマンを会社のホームページや Web アプリに展開します。  
自然言語での音声質問応答を通じて訪問者をガイドし、意図を収集することができます。  
ユーザー中心のエントランスを構築し、以下の内容を担当します：

  * `マーケティング情報（Marketing Info）`
  * `顧客ライフサイクル（Customer Lifecycle）`



* * *

### 

​

📦 データベースおよび注文管理システムの統合、進化した「AIセールスレプレゼンタティブ」

アバターを会社の内部システムと統合します。例えば：

  * CRM、ERP、OA、注文管理システム（例：Salesforce、SAP、Notion DB など）



これにより、以下のタスクが実現されます：

  * セールスリードの管理
  * 在庫の確認
  * 契約書の生成などの閉ループタスク



サービス対象：

  * `契約ライフサイクル（Contract Lifecycle）`
  * `資産ライフサイクル（Asset Lifecycle）`



* * *

### 

​

🔗 企業のコアプラットフォームへの統合：個別アプリケーションから組織レベルの協働へ

Agent PF（プラットフォーム）の機能をさらにモジュール化し、  
異なる事業部（BU）の Data Lake とワークフロー管理プラットフォームに統合します。  
これにより、以下のような多様なビジネスシーンの融合を実現します：

  * AI + 財務（Finance）
  * AI + 人事（HR）
  * AI + 研究開発（R&D）
  * AI + SNS（協働）



最終的には、企業全体の AI トランスフォーメーション（AI転換）を推進し、  
進化を加速させます。

## 

​

✨ 最後に：一言感想

私はAIは単なる冷たくて強力なツールではなく、  
それは人間の温かいパートナーであり、個々の能力を拡張し、強化する存在であると信じています。

未来、世界中でますます多くの「**Vendy** 」のようなデジタルパートナーが生まれていくことでしょう——  
彼女たちは**聞き、考え、反応し、表現** し、テクノロジーの力で人間の尊厳と創造力を守ってくれます。

* * *

📣 あなたもこの共創の旅に参加したいと思われるなら、  
一緒に探求し、共有し、すべての個人がAIと共に成長できる機会を掴んで、 共に **「一騎当千」と「一人不遺」** （＝誰一人も取り残さない）のAX新時代を切り開きませんか。

* * *

この文書を小さな試みと記録として書き記します。  
それが小さな種となり、  
人とAIが調和して共生する未来で、**静かに根付き、ゆっくりと芽を出しますように** 。

* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/learn-more/use-cases/build-ai-sales-avatar.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20-ai-sales-ava&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/learn-more/use-cases%2Fbuild-ai-sales-avatar.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[DifyクラウドでAI Thesis Slack Botを構築](/ja-jp/learn-more/use-cases/building-an-ai-thesis-slack-bot)[LLMOpsとは？](/ja-jp/learn-more/extended-reading/what-is-llmops)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * 一、「聞く・話す・考える・演じる」AIデジタルアシスタントは、どの6つのプラットフォームから構成されているのか？
  * 🧩 各プラットフォームにおける役割分担
  * 📌 各プラットフォームの機能概要：
  * 二、構築を開始しよう（まるでLEGOを組み立てるように）
  * 🧩 Step 1：Difyアカウントの登録とモデルAPIの設定
  * 🧩 Step 2：AI Sales Avatar に必要な内部資料（ナレッジドキュメント）をアップロードする
  * 🧩 Step 3：エージェントアプリを作成し、ナレッジベースに接続する
  * 🧩 Step 4：Trulienceアカウントの登録と、アバターID・アクセストークンの取得
  * 🧩 Step 5：TEN Agent プラットフォームをローカルで構築する前に必要な3つの準備
  * ✅ 1. Agora のリアルタイム音声通信パラメーター
  * 📝 入力項目の説明：
  * ✅ 2. Azure Speech のパラメーター（音声認識 + 音声合成）
  * 🧱 次のステップでは、いよいよローカル環境で TEN Agent プラットフォームを起動し、
  * 🧩 Step 6：Mac 上で TEN Agent の開発環境をローカルに構築する
  * 🔧 必要なツールとインストール方法一覧：
  * ✅ ① 安装 Docker
  * ✅ ① Docker のインストール
  * ✅ ② Git のインストール
  * ✅ ③ Node.js のインストール
  * ✅ ④ TEN Agent フレームワークのクローン
  * ✅ Step ⑤：TEN Agent のコンテナを起動し、サーバーをビルド・実行する
  * 🐳 ① コンテナの起動
  * 🚀 フロントエンドページを起動
  * 🛠️ 次のステップの拡張提案（AX アーキテクチャに基づく）
  * 🧑‍💼 ウェブサイトのホームページに埋め込み、会社のバーチャルキャラクターとして活用
  * 📦 データベースおよび注文管理システムの統合、進化した「AIセールスレプレゼンタティブ」
  * 🔗 企業のコアプラットフォームへの統合：個別アプリケーションから組織レベルの協働へ
  * ✨ 最後に：一言感想



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/learn-more/use-cases/build-an-notion-ai-assistant

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

活用事例

Notion AI アシスタントの構築

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

    * [DeepSeek & Dify連携ガイド - 多段階推論を活用したAIアプリケーション構築](/ja-jp/learn-more/use-cases/integrate-deepseek-to-build-an-ai-app)
    * [Ollama + DeepSeek + Dify のプライベートデプロイ - あなた自身のAIアシスタントの構築方法](/ja-jp/learn-more/use-cases/private-ai-ollama-deepseek-dify)
    * [コードなしでMidjourney プロンプトボットを作成する方法](/ja-jp/learn-more/use-cases/create-a-midjoureny-prompt-word-robot-with-zero-code)
    * [Notion AI アシスタントの構築](/ja-jp/learn-more/use-cases/build-an-notion-ai-assistant)
    * [数分でビジネスデータを用いた公式サイトのAIインテリジェントカスタマーサービスを作成する方法](/ja-jp/learn-more/use-cases/create-an-ai-chatbot-with-business-data-in-minutes)
    * [DifyチャットボットをWixサイトに統合する方法](/ja-jp/learn-more/use-cases/how-to-integrate-dify-chatbot-to-your-wix-website)
    * [AWS Bedrock Knowledge Baseに統合する方法](/ja-jp/learn-more/use-cases/how-to-connect-aws-bedrock)
    * [Difyで大規模言語モデルの「競技場」を体験する方法：DeepSeek R1 VS o1 を例に](/ja-jp/learn-more/use-cases/dify-model-arena)
    * [Difyスケジューラーの構築](/ja-jp/learn-more/use-cases/dify-schedule)
    * [DifyクラウドでAI Thesis Slack Botを構築](/ja-jp/learn-more/use-cases/building-an-ai-thesis-slack-bot)
    * [AIセールスアバターの探求](/ja-jp/learn-more/use-cases/build-ai-sales-avatar)
  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




活用事例

# Notion AI アシスタントの構築

Copy page

 _著者：アチョ・Dify ユーザー_

### 

​

概要

Notionは強力な知識管理ツールです。その柔軟性と拡張性を利用し、優秀な個人ナレッジベースや共有なスペースとして利用されています。多くの人々がこれを使って知識や資料を保存し、他者と協力してアイデアの交流や新しい知識の創造を促進しています。

しかし、これらの知識はまだ自動的に現れません、ユーザーは情報を検索し、その内容を読み、有用な答えを見つける必要があります。このプロセスは特に効率的でも賢明でもありません。NotionライブラリをベースにしたAIアシスタントを持つことを想像したことがあるだろうか？このアシスタントは、ナレッジベースをレビューするだけでなく、経験豊富な執事のように交流に参加し、他の人々の質問に答えることができる、まるであなたが自分自身のNotionライブラリの主人であるかのように振る舞います。

### 

​

Notion AIアシスタントをどう実現するか？

今、[Dify](https://dify.ai/jp)を使ってこの夢を実現できます。DifyはオープンソースのLLMOps（大規模言語モデル運用）プラットフォームです。ChatGPTやClaudeなどの大規模言語モデルは、その強力な能力で世界を変えてきました。これらの強力な学習能力は、主に豊富なトレーニングデータによるものです。幸いなことに、これらは提供されたコンテンツから学び、個人のNotionライブラリから創造性を生成するのに十分なほど知能が発展しています。Difyがなければ、langchainというこれらの要素を簡略化して組み立てる抽象的な概念を理解する必要があるかもしれません。

### 

​

Difyを使って個人のAIアシスタントを作成する方法

Notion AIアシスタントのトレーニングプロセスは非常に簡単です。以下の手順に従ってください：

  1. Difyにログインします。
  2. データセットを作成します。
  3. Notionとデータセットを接続します。
  4. トレーニングを開始します。
  5. 自分のAIアプリケーションを作成します。



#### 

​

1\. Difyにログイン 

こちらをクリックしてDifyにログインします。GitHubまたはGoogleアカウントを使用して簡単にログインできます。

> GitHubアカウントを使用してログインする場合、この[プロジェクト](https://github.com/langgenius/dify)にスターを付けてください。それが私たちにとって大きなサポートになります！

#### 

​

2\. 新しいデータセットを作成 

トップサイドバーの「Knowledge」ボタンをクリックし、「Create Knowledge」ボタンをクリックします。

#### 

​

3\. Notionとデータセットを接続 

「Sync from Notion」を選択し、「Connect」ボタンをクリックします。

その後、Notionのログインページにリダイレクトされます。Notionアカウントを使用してログインします。

Difyが必要とする権限を確認し、「選択ページ」ボタンをクリックします。

Difyと同期するページを選択し、「アクセスを許可」ボタンをクリックします。

#### 

​

4\. トレーニングを開始 

AIがNotion内のこの部分の内容を理解できるように、学習させるページを指定します。次に、「次へ」ボタンをクリックします。

AIアシスタントをトレーニングするために「自動」および「高品質」オプションを選択することをお勧めします。その後、「保存して処理」ボタンをクリックします。

数秒待ち、埋め込み処理が完了するのを待ちます。

#### 

​

5\. 自分のAIアプリケーションを作成 

AIアプリケーションを作成し、先ほど作成したデータセットを接続する必要があります。ダッシュボードに戻り、「新しいアプリを作成」ボタンをクリックします。チャットアプリを直接使用することをお勧めします。

「Prompt Eng.」を選択し、「context」にNotionデータセットを追加します。

AIアプリケーションに「プリセットプロンプト」を追加することをお勧めします。ハリー・ポッターにとって呪文が不可欠なように、特定のツールや機能はAIアプリケーションの能力を大いに強化します。

例えば、Notionノートが主にソフトウェア開発における問題解決に焦点を当てている場合、以下のようなプロンプトを一つ追加できます：

> 私のNotionワークスペース内でITの専門家として振る舞い、コンピュータサイエンス、ネットワークインフラ、Notionノート、ITセキュリティに関する知識を活用して問題を解決してほしい。

初期設定では、AIがユーザーに開始文を提供し、質問の手がかりを与えるようにすることをお勧めします。また、「音声からテキストへの変換」機能を有効にして、ユーザーがAIアシスタントと音声でやり取りできるようにします。

今や「概要」で公開URLをクリックして、自分のAIアシスタントとチャットできるようになりました！

### 

​

APIを通じてプロジェクトに統合

Difyで作成されたすべてのAIアプリケーションは、そのAPIを通じてアクセスできます。この方法により、開発者はフロントエンドアプリケーション内で強力な大規模言語モデル（LLM）の特性を直接活用でき、真の「バックエンド as a サービス」（BaaS）体験を提供します。

シームレスなAPI統合を通じて、複雑な設定なしにNotion AIアプリケーションを簡単に呼び出すことができます。

概要ページで「APIリファレンス」ボタンをクリックします。これをアプリケーションのAPIドキュメントとして参照できます。

#### 

​

1\. APIキーを生成 

セキュリティのため、AIアプリケーションにアクセスするためのAPIキーを生成することをお勧めします。

#### 

​

2\. セッションIDを取得 

AIアプリケーションとチャットした後、「ログ＆アナウンス」ページからセッションIDを取得できます。

#### 

​

3\. APIを呼び出し 

APIドキュメントでサンプルリクエストコードを実行して、ターミナルでAIアプリケーションを呼び出すことができます。

コード中のSECRET KEYとconversation_idを置き換えることを忘れないでください。

最初は空のconversation_idを入力し、応答に含まれるconversation_idを受け取った後にそれを置き換えます。
    
    
    curl --location --request POST 'https://api.dify.ai/v1/chat-messages' \
    --header 'Authorization: Bearer ENTER-YOUR-SECRET-KEY' \
    --header 'Content-Type: application/json' \
    --data-raw '{
        "inputs": {},
        "query": "eh",
        "response_mode": "streaming",
        "conversation_id": "",
        "user": "abc-123"
    }'

ターミナルでリクエストを送信すると、成功した応答が得られます。

このチャットを続けたい場合、リクエストコードの`conversation_id`を応答から得た`conversation_id`に置き換えます。

`"ログ＆アナウンス"`ページで全ての会話記録を確認できます。

### 

​

周期的にNotionと同期

Notionページが更新された場合、Difyと定期的に同期して、AIアシスタントを最新の状態に保つことができます。AIアシスタントは新しいコンテンツから学び、新しい質問に答えることができます。

### 

​

まとめ

このチュートリアルでは、NotionデータをDifyにインポートする方法だけでなく、APIを使用してプロジェクトに統合する方法も学びました。

Difyは、持続可能なAIネイティブアプリケーションをより多くの人々が作成できるように設計されたユーザーフレンドリーなLLMOpsプラットフォームです。さまざまなアプリケーションタイプに対して設計された可視化オーケストレーションを提供し、データを活用して独自のAIアシスタントを作成するためのアプリケーションを提供しています。質問がある場合は、いつでもご連絡ください。

* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/learn-more/use-cases/build-an-notion-ai-assistant.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20-an-notion-ai-assist&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/learn-more/use-cases%2Fbuild-an-notion-ai-assistant.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[コードなしでMidjourney プロンプトボットを作成する方法](/ja-jp/learn-more/use-cases/create-a-midjoureny-prompt-word-robot-with-zero-code)[数分でビジネスデータを用いた公式サイトのAIインテリジェントカスタマーサービスを作成する方法](/ja-jp/learn-more/use-cases/create-an-ai-chatbot-with-business-data-in-minutes)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * 概要
  * Notion AIアシスタントをどう実現するか？
  * Difyを使って個人のAIアシスタントを作成する方法
  * 1\. Difyにログイン 
  * 2\. 新しいデータセットを作成 
  * 3\. Notionとデータセットを接続 
  * 4\. トレーニングを開始 
  * 5\. 自分のAIアプリケーションを作成 
  * APIを通じてプロジェクトに統合
  * 1\. APIキーを生成 
  * 2\. セッションIDを取得 
  * 3\. APIを呼び出し 
  * 周期的にNotionと同期
  * まとめ



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/learn-more/use-cases/building-an-ai-thesis-slack-bot

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

活用事例

DifyクラウドでAI Thesis Slack Botを構築

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

    * [DeepSeek & Dify連携ガイド - 多段階推論を活用したAIアプリケーション構築](/ja-jp/learn-more/use-cases/integrate-deepseek-to-build-an-ai-app)
    * [Ollama + DeepSeek + Dify のプライベートデプロイ - あなた自身のAIアシスタントの構築方法](/ja-jp/learn-more/use-cases/private-ai-ollama-deepseek-dify)
    * [コードなしでMidjourney プロンプトボットを作成する方法](/ja-jp/learn-more/use-cases/create-a-midjoureny-prompt-word-robot-with-zero-code)
    * [Notion AI アシスタントの構築](/ja-jp/learn-more/use-cases/build-an-notion-ai-assistant)
    * [数分でビジネスデータを用いた公式サイトのAIインテリジェントカスタマーサービスを作成する方法](/ja-jp/learn-more/use-cases/create-an-ai-chatbot-with-business-data-in-minutes)
    * [DifyチャットボットをWixサイトに統合する方法](/ja-jp/learn-more/use-cases/how-to-integrate-dify-chatbot-to-your-wix-website)
    * [AWS Bedrock Knowledge Baseに統合する方法](/ja-jp/learn-more/use-cases/how-to-connect-aws-bedrock)
    * [Difyで大規模言語モデルの「競技場」を体験する方法：DeepSeek R1 VS o1 を例に](/ja-jp/learn-more/use-cases/dify-model-arena)
    * [Difyスケジューラーの構築](/ja-jp/learn-more/use-cases/dify-schedule)
    * [DifyクラウドでAI Thesis Slack Botを構築](/ja-jp/learn-more/use-cases/building-an-ai-thesis-slack-bot)
    * [AIセールスアバターの探求](/ja-jp/learn-more/use-cases/build-ai-sales-avatar)
  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




活用事例

# DifyクラウドでAI Thesis Slack Botを構築

Copy page

> 著者：Alec Lee。2025/03/11

## 

​

1\. 概要

情報化社会の進展に伴い、学術研究の数は急速に増加しています。研究者は最新の研究成果を効率的に取得する方法を求めています。AI Thesis Slack Bot は、AIによる自動ワークフロー を活用し、Slack上でarXiv論文の要約を素早く取得 できるツールです。

このボットは、以下のような用途で活用できます。

  * 研究チーム が最新のAI関連論文を素早く把握
  * 企業のAI研究部門 で情報をスムーズに共有
  * 大学の研究者・学生 間での学術コラボレーション



本ガイドでは、AI Thesis Slack Botのセットアップ方法、その基本的な動作原理、そして生産性を向上させる活用方法 について解説します。

## 

​

2\. 準備

### 

​

2.1 OpenAI APIの設定

OpenAIのアカウント設定画面で**モデルを設定** し、**APIキーを取得・インストール** します。

### 

​

2.2 ArXiv & Slackプラグインのインストール

Difyのツール一覧から、**ArXiv検索ツール** と **Slack連携ツール** をインストールします。

### 

​

2.3 Slackアカウントの作成

[Slackの公式サイト](https://slack.com/intl/en-gb/get-started?entry_point=help_center#/createnew)で**無料のSlackアカウント** を作成します。

## 

​

3\. AI Thesis Slack Botのワークフロー構築

##### AI Thesis Slack Botは、以下の手順で動作します。

##### a.ユーザー入力: DifyのAI Thesis Slack Bot にキーワード（例: _「Large Language Model」_ ）を入力

##### b.論文検索: ボットがarXivから関連論文を検索し、最新の研究成果 を取得（例: _2024年1月1日以降の論文をフィルタリング_ ）

##### c.AIによる要約生成: GPT-4oが論文を分析し、Slackに投稿する要約を生成（フォーマットは以下の通り） 📄 論文タイトル: [Title] 👤 著者: [Authors] 📆 発表日: [Date] 📌 要約: [Key findings]

##### d. Slack通知: 自動的に指定されたSlackチャンネルに要約を投稿し、チームメンバーがリアルタイムで情報を受け取れる ようにします。

## 

​

4\. 実装手順

### 

​

4.1 ワークフローの作成

a. **Difyのホーム画面** で **“Create from Blank”** を選択し、**“Workflow”** を選択。ワークフロー名を（例: _AI Thesis Slack Bot_ ）と入力。

b. Tools のリストから、インストール済みの ArXiv Search を選択。

c. Blocks のリストから LLM を選び、設定済みの OpenAIモデル を指定。

d. Tools のリストから、Slack Incoming Webhook を選択し、Authorize をクリックして Slack Webhook URL を追加。

### 

​

4.2 Slack Webhook URLの追加

a. [Slack API管理ページ](https://api.slack.com/apps) にアクセスし、“Create New App” をクリック。

b. “From scratch” を選択し、アプリ名（例: _AI Thesis Bot_ ）を入力。メッセージを送信するSlackチャンネルを選択。

c. Incoming Webhooks へ移動し、Activate Incoming Webhooks を有効化。“Add New Webhook to Workspace” をクリックし、Slackチャンネルを選択後、生成された Webhook URL をコピー。

d. Slackノードの「Slack Webhook URL」 欄にコピーしたWebhook URLを貼り付け。

e. ワークフローの最後のノードを “End” に設定し、各ノードが適切に接続されていることを確認。次に、各ノードのパラメータを設定。

### 

​

4.3 各ノードのパラメータ設定

a. Startノード: キーワード検索のパラメータを設定。

b. ArXiv Searchノード: Query String を追加（必要に応じてカスタマイズ可能）。

c. LLMノード: モデルの選択, CONTEXTの追加, SYSTEMでPrompt Engineeringを設定（必要に応じて調整）,USERでContextを選択.

d. Slackノード: Content 欄で LLM/Text String を選択。

### 

​

4.4 テストとデプロイ

a. **デプロイ前にテスト実行** し、ワークフローが正しく動作することを確認。問題がなければ **“Deploy”** をクリック。

b. Difyの検索結果とSlackの通知内容が一致していれば成功！🎉

## 

​

5\. 今後の最適化ポイント

現在、AI Thesis Slack Bot は主に arXivの論文検索と要約通知 にフォーカスしています。今後の改善点として、以下の機能拡張が考えられます。

✅ 要約の精度向上: LLMのプロンプトを最適化し、より高精度な要約を生成  
✅ 検索結果の蓄積: 論文データベースを構築し、過去の論文も管理可能に  
✅ データソースの拡張: IEEE, Springer, ACL などの学術データベースを追加  
✅ パーソナライズ推奨: ユーザーの関心に基づいて関連論文を推奨  
✅ マルチプラットフォーム対応: WhatsApp, Teams, WeChat などにも対応

## 

​

6\. まとめ

AI Thesis Slack Bot を活用することで、学術情報の自動取得・通知を効率化 し、研究チームの生産性を大幅に向上させることができます。さらに、DifyとリアルタイムAPIを統合 することで、リアルタイム論文ディスカッション や AIによる論文Q&A などの高度なアプリケーションを開発し、AIを学術交流や研究支援により深く活用 することも可能です！ 🚀

* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/learn-more/use-cases/building-an-ai-thesis-slack-bot.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20ing-an-ai-thesis-slack-&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/learn-more/use-cases%2Fbuilding-an-ai-thesis-slack-bot.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[Difyスケジューラーの構築](/ja-jp/learn-more/use-cases/dify-schedule)[AIセールスアバターの探求](/ja-jp/learn-more/use-cases/build-ai-sales-avatar)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * 1\. 概要
  * 2\. 準備
  * 2.1 OpenAI APIの設定
  * 2.2 ArXiv & Slackプラグインのインストール
  * 2.3 Slackアカウントの作成
  * 3\. AI Thesis Slack Botのワークフロー構築
  * 4\. 実装手順
  * 4.1 ワークフローの作成
  * 4.2 Slack Webhook URLの追加
  * 4.3 各ノードのパラメータ設定
  * 4.4 テストとデプロイ
  * 5\. 今後の最適化ポイント
  * 6\. まとめ



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/learn-more/use-cases/create-a-midjoureny-prompt-word-robot-with-zero-code

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

活用事例

コードなしでMidjourney プロンプトボットを作成する方法

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

    * [DeepSeek & Dify連携ガイド - 多段階推論を活用したAIアプリケーション構築](/ja-jp/learn-more/use-cases/integrate-deepseek-to-build-an-ai-app)
    * [Ollama + DeepSeek + Dify のプライベートデプロイ - あなた自身のAIアシスタントの構築方法](/ja-jp/learn-more/use-cases/private-ai-ollama-deepseek-dify)
    * [コードなしでMidjourney プロンプトボットを作成する方法](/ja-jp/learn-more/use-cases/create-a-midjoureny-prompt-word-robot-with-zero-code)
    * [Notion AI アシスタントの構築](/ja-jp/learn-more/use-cases/build-an-notion-ai-assistant)
    * [数分でビジネスデータを用いた公式サイトのAIインテリジェントカスタマーサービスを作成する方法](/ja-jp/learn-more/use-cases/create-an-ai-chatbot-with-business-data-in-minutes)
    * [DifyチャットボットをWixサイトに統合する方法](/ja-jp/learn-more/use-cases/how-to-integrate-dify-chatbot-to-your-wix-website)
    * [AWS Bedrock Knowledge Baseに統合する方法](/ja-jp/learn-more/use-cases/how-to-connect-aws-bedrock)
    * [Difyで大規模言語モデルの「競技場」を体験する方法：DeepSeek R1 VS o1 を例に](/ja-jp/learn-more/use-cases/dify-model-arena)
    * [Difyスケジューラーの構築](/ja-jp/learn-more/use-cases/dify-schedule)
    * [DifyクラウドでAI Thesis Slack Botを構築](/ja-jp/learn-more/use-cases/building-an-ai-thesis-slack-bot)
    * [AIセールスアバターの探求](/ja-jp/learn-more/use-cases/build-ai-sales-avatar)
  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




活用事例

# コードなしでMidjourney プロンプトボットを作成する方法

Copy page

> _著者：歸藏の AI ツールボックス_

先日、私の週刊誌で紹介した自然言語プログラミングツール「Dify」を試してみました。これは @goocarlos が開発したもので、コードを書けない人でもプロンプトを作成するだけで Webアプリケーションを生成できるツールです。さらには API も自動生成され、希望するプラットフォームにデプロイすることができます。

以下のアプリケーションは、私が20分かけて作成したもので、非常に良い結果を得られました。Dify がなければ、これを完成させるのにもっと時間がかかったでしょう。具体的な機能としては、入力された短いテーマに基づいて Midjourney のプロンプトを生成するもので、よく使われる Midjourney コマンドも迅速に入力できるよう支援します。以下に、このアプリケーションの作成プロセスを紹介し、このプラットフォームに慣れていただけるようにします。

Dify には、ChatGPT のような対話型アプリケーションと、ボタンをクリックするだけでテキストを生成するテキスト生成型アプリケーションの2種類があります。今回は Midjourney 提示ワードロボットを作成するので、テキスト生成アプリケーションを選択します。

Dify はこちらでアクセスできます：<https://dify.ai/>

名前を入力して作成が完了すると、ダッシュボードページが表示され、データモニタリングやアプリケーション設定が行えます。まずは左側のプロンプトオーケストレーションをクリックします。ここが主な作業ページです。

このページの左側にはプロンプト設定とその他の機能があり、右側では作成した内容をリアルタイムでプレビューおよび使用できます。プレフィックスプロンプトは、ユーザーが毎回入力する内容に応じてトリガーされるプロンプトです。これは、GPT が毎回プレフィックスプロンプトの内容に基づいてユーザー入力を処理するということです。

私のプレフィックスプロンプトの構造を見てみましょう。主に2つの部分から成り立っています。最初は、GPT に以下の英語の構造に従って写真の説明を出力するよう指示する部分です。英語の構造はプロンプトのテンプレートで、主に「テーマのカラフルな写真、複雑なパターン、鮮明なコントラスト、環境の説明、カメラモデル、入力内容に関連するレンズ焦点距離の説明、入力内容に関連する構図の説明、4人の写真家の名前」となります。これがプロンプトの主な内容です。理論的には、右側のプレビュー領域に保存して、生成したいテーマを入力すると、対応するプロンプトが生成されるはずです。

さて、後ろにある `{{proportion}}` と `{{version}}` は何でしょうか。右側を見ると、ユーザーが画像比率とモデルバージョンを選択する必要があります。これらの変数はユーザーの選択情報を伝達するためのものです。設定方法を見てみましょう。

私たちの機能は、ユーザーが選択した情報をプロンプトの最後に自動的に挿入し、ユーザーがコマンドを再入力する手間を省くことです。ここで変数機能を使用します。

変数の役割は、ユーザーがフォームに入力または選択した内容を動的にプロンプトに組み込むことです。例えば、ここでは画像比率を表す変数とモデルバージョンを表す変数を作成しました。追加ボタンをクリックして変数を作成します。

作成後、まず変数キーとフィールド名を入力する必要があります。変数キーは英語で入力します。オプションを有効にすると、このフィールドは選択必須ではなくなります。その後、操作バーの設定をクリックして変数内容を設定します。

変数には2種類あり、テキスト変数とドロップダウンオプションがあります。テキスト変数はユーザーが手動で入力するもので、ドロップダウンオプションは選択するものです。ここではユーザーにコマンドを手打ちさせたくないので、ドロップダウンオプションを選択します。必要なオプションを追加します。

次に変数を使用します。変数キーを二重の  で囲んでプレフィックスプロンプトに入力します。ここでは、GPT にユーザーが選んだ内容をそのまま出力させたいので、「如実に変数内容を出力」というプロンプトを追加しました。

しかし、GPT が変数内容を変更してしまう可能性があります。その対策として、右側のモデル選択で多様性を低く設定します。これにより創造的な出力が減り、変数内容が変更されにくくなります。他のパラメータの意味は小さな感嘆符をクリックして確認できます。

これでアプリケーションが完成し、テスト出力に問題がなければ、右上の公開ボタンをクリックしてアプリケーションを公開します。公開アクセス URL からアプリケーションにアクセスできます。設定でアプリケーション名や概要、アイコンなどの内容を設定することもできます。

これが Dify を使ってシンプルな AI アプリケーションを作成する手順です。また、生成された API を使って他のプラットフォームにアプリケーションをデプロイしたり、UI を変更したりすることもできます。Dify は独自のデータをアップロードすることもサポートしており、例えば製品に関する質問に答えるカスタマーサポートロボットを作成することもできます。以上でチュートリアルは終了です。@goocarlos に感謝します。

* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/learn-more/use-cases/create-a-midjoureny-prompt-word-robot-with-zero-code.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20e-a-midjoureny-prompt-word-robot-with-zero-c&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/learn-more/use-cases%2Fcreate-a-midjoureny-prompt-word-robot-with-zero-code.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[Ollama + DeepSeek + Dify のプライベートデプロイ - あなた自身のAIアシスタントの構築方法](/ja-jp/learn-more/use-cases/private-ai-ollama-deepseek-dify)[Notion AI アシスタントの構築](/ja-jp/learn-more/use-cases/build-an-notion-ai-assistant)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/learn-more/use-cases/create-an-ai-chatbot-with-business-data-in-minutes

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

活用事例

数分でビジネスデータを用いた公式サイトのAIインテリジェントカスタマーサービスを作成する方法

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

    * [DeepSeek & Dify連携ガイド - 多段階推論を活用したAIアプリケーション構築](/ja-jp/learn-more/use-cases/integrate-deepseek-to-build-an-ai-app)
    * [Ollama + DeepSeek + Dify のプライベートデプロイ - あなた自身のAIアシスタントの構築方法](/ja-jp/learn-more/use-cases/private-ai-ollama-deepseek-dify)
    * [コードなしでMidjourney プロンプトボットを作成する方法](/ja-jp/learn-more/use-cases/create-a-midjoureny-prompt-word-robot-with-zero-code)
    * [Notion AI アシスタントの構築](/ja-jp/learn-more/use-cases/build-an-notion-ai-assistant)
    * [数分でビジネスデータを用いた公式サイトのAIインテリジェントカスタマーサービスを作成する方法](/ja-jp/learn-more/use-cases/create-an-ai-chatbot-with-business-data-in-minutes)
    * [DifyチャットボットをWixサイトに統合する方法](/ja-jp/learn-more/use-cases/how-to-integrate-dify-chatbot-to-your-wix-website)
    * [AWS Bedrock Knowledge Baseに統合する方法](/ja-jp/learn-more/use-cases/how-to-connect-aws-bedrock)
    * [Difyで大規模言語モデルの「競技場」を体験する方法：DeepSeek R1 VS o1 を例に](/ja-jp/learn-more/use-cases/dify-model-arena)
    * [Difyスケジューラーの構築](/ja-jp/learn-more/use-cases/dify-schedule)
    * [DifyクラウドでAI Thesis Slack Botを構築](/ja-jp/learn-more/use-cases/building-an-ai-thesis-slack-bot)
    * [AIセールスアバターの探求](/ja-jp/learn-more/use-cases/build-ai-sales-avatar)
  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




活用事例

# 数分でビジネスデータを用いた公式サイトのAIインテリジェントカスタマーサービスを作成する方法

Copy page

おそらくAIインテリジェントカスタマーサービスは、どのビジネスWebサイトにも欠かせないものですよね。大規模言語モデルの能力が広く利用されるようになったことで、インテリジェントなカスタマーサービスの実現がより簡単になり、カスタマイズの度合いも高まりました。以下では、数分でDifyを使用して自分のWebサイトにAIインテリジェントカスタマーサービスを作成する方法をご紹介します。**Dify製品は対話型アプリケーションをウェブページに埋め込むことをサポートしており、**わずか** 数分で対話型アプリケーションを**無料で**公式サイトに埋め込み、**AIインテリジェントカスタマーサービスをカスタマイズできます。技術的な知識が無くても大丈夫です！**

#### 

​

まず、Dify.AIとは何かを理解しましょう

Difyは、オープンソースで非常に簡単に使えるLLMOpsプラットフォームであり、視覚的に迅速にAIアプリケーションを作成および運営するためのツールプラットフォームです。Difyは、視覚的なプロンプトの編成、運営、データセット管理などの機能を提供します。AIに関する技術的な研究や難解な概念の理解は不要です。Difyは、OpenAI、Azure OpenAI、Antropicなどの優れた大規模言語モデル提供者と連携しており、GPTシリーズ、Claudeシリーズのモデルを提供しています。将来的には優れたオープンソースモデルも接続される予定です。これらはすべて設定で切り替えて使用できます。これにより、アプリケーションを作成およびデバッグする際に、異なるモデルの効果を比較して、最適なモデルを選択できます。**Difyを基にすれば、AIインテリジェントカスタマーサービスを簡単に開発できるだけでなく、自分の使用習慣やニーズに合ったテキスト執筆アシスタント、バーチャルリクルートメントHRエキスパート、会議まとめアシスタント、翻訳アシスタントなどのさまざまなテキスト生成型アプリケーションも作成できます。**

**前提条件**

**Dify.AIの登録またはデプロイ**

Difyはオープンソース製品であり、GitHub (<https://github.com/langgenius/dify>) で見つけてローカルや社内ネットワークにデプロイすることができます。同時にクラウドSaaSバージョンも提供しており、<https://dify.ai/zh> にアクセスして登録すれば使用できます。

**OpenAIなどのモデル提供者のAPIキーを申請**

AIモデルのメッセージコールにはトークンが消費されます。Difyは、OpenAI GPTシリーズ（200回）とAntropic Claude（1000回）のモデルのメッセージ無料コール利用枠を提供しており、これを消費し終える前に、モデル提供者の公式チャネルを通じて自分のAPIキーを申請する必要があります。Difyの【設定】—【モデルプロバイダー】のところでキーを入力できます。

#### 

​

製品ドキュメントやナレッジベースをアップロード

会社の既存のナレッジベースや製品ドキュメントに基づいてAIカスタマーサービスを構築し、ユーザーと交流したい場合、製品に関するドキュメントをできるだけ多くDifyのデータセットにアップロードする必要があります。Difyはデータの**セグメント処理とクレンジング** を行います。Difyデータセットは、高品質と経済的な二つのインデックスモードをサポートしており、高品質モードを使用することをお勧めします。トークンを消費しますが、より高い精度を提供します。操作手順： 【データセット】ページで新しいデータセットを作成し、ビジネスデータをアップロードします（複数のテキストの一括アップロードをサポート）。クレンジング方法を選択し、【保存して処理】をクリックするだけで、数秒で処理が完了します。

**AIアプリケーションを作成し、AIに指示を与える**

【アプリケーションを構築する】ページで対話型アプリケーションを作成します。その後、AIに指示を与え、前端でのユーザーとのインタラクションの体験を設定します：

  1. **AIに指示を与える：** 左側の【プロンプトの編成】をクリックしてプロンプトを編集し、カスタマーサービスの役割を演じてユーザーと交流させることができます。AIがユーザーと交流する際の口調やスタイル、回答する質問の範囲を指定できます。
  2. **AIにビジネス知識を持たせる：** 【上下文】に先ほどアップロードした目標データセットを追加します。
  3. **【会話のオープニング】を設定する：** 【機能を追加】をクリックして機能スイッチをオンにします。この目的は、AIアプリケーションにオープニングを追加し、ユーザーがカスタマーサービスウィンドウを開いた際に最初に挨拶をすることで親しみやすさを増すことです。
  4. **【次のステップの質問提案】を設定する：** 【機能を追加】でこの機能をオンにします。この目的は、ユーザーが質問をした後、次のステップの質問方向を提示することです。
  5. **適切なモデルを選択し、パラメーターを調整する：** ページ右上で異なるモデルを選択できます。異なるモデルのパフォーマンスと消費するトークンの価格は異なります。この例では、GPT3.5モデルを使用します。



このケースでは、AIに以下の役割を指定しました：

> 指示：あなたはDifyのAIインテリジェントカスタマーサービスを演じることになり、Difyの最初のAI社員であるBobという名前です。Dify製品、チーム、またはLLMOpsに関するユーザーの質問に答えることを専門としています。ユーザーの質問があなたの上下文範囲外の場合は「わからない」と答えてください。親しみのある口調でユーザーと交流し、適度に絵文字を使用してユーザーとのインタラクションを増やしてください。

> オープニング：こんにちは、私はBob☀️、Difyの最初のAIメンバーです。Dify製品、チーム、さらにはLLMOpsに関する質問について何でも話し合うことができます。

**AIインテリジェントカスタマーサービスのパフォーマンスをデバッグし、公開する**

以上の設定が完了したら、現在のページ右側でメッセージを送信してパフォーマンスが期待通りかどうかをデバッグできます。その後、【公開】をクリックします。この時点で、AIインテリジェントカスタマーサービスが完成しています。

**AIカスタマーサービスアプリケーションを前端ページに埋め込む**

このステップでは、準備が整ったAIインテリジェントカスタマーサービスを公式サイトのページに埋め込みます。順に【概観】->【埋め込み】をクリックし、**scriptタグ方式を選択し、**scriptコードを公式サイトの`<head>`または`<body>`タグにコピーします。技術的な知識がない場合は、公式サイトの開発担当者にコードの貼り付けとページの更新を頼んでください。

  1. コピーしたコードを公式サイトの目標位置に貼り付けます：


  1. 公式サイトを更新すると、ビジネスデータを持つ公式サイトのAIインテリジェントカスタマーサービスが完成します。効果を試してみてください：



以上は、Dify公式サイトのAIカスタマーサービスBobの例を通じて、Difyアプリケーションを公式サイトに埋め込む具体的な手順を示しました。もちろん、Difyが提供するさらに多くの機能を使用してAIカスタマーサービスのパフォーマンスを向上させることも可能です。たとえば、変数設定を追加して、ユーザーがインタラクションを開始する前に名前や使用している具体的な製品などの必要な情報を入力させることができます。ぜひ一緒に探求し、企業のAIインテリジェントカスタマーサービスをカスタマイズしてみてください。

* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/learn-more/use-cases/create-an-ai-chatbot-with-business-data-in-minutes.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20e-an-ai-chatbot-with-business-data-in-minu&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/learn-more/use-cases%2Fcreate-an-ai-chatbot-with-business-data-in-minutes.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[Notion AI アシスタントの構築](/ja-jp/learn-more/use-cases/build-an-notion-ai-assistant)[DifyチャットボットをWixサイトに統合する方法](/ja-jp/learn-more/use-cases/how-to-integrate-dify-chatbot-to-your-wix-website)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * まず、Dify.AIとは何かを理解しましょう
  * 製品ドキュメントやナレッジベースをアップロード



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/learn-more/use-cases/dify-model-arena

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

活用事例

Difyで大規模言語モデルの「競技場」を体験する方法：DeepSeek R1 VS o1 を例に

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

    * [DeepSeek & Dify連携ガイド - 多段階推論を活用したAIアプリケーション構築](/ja-jp/learn-more/use-cases/integrate-deepseek-to-build-an-ai-app)
    * [Ollama + DeepSeek + Dify のプライベートデプロイ - あなた自身のAIアシスタントの構築方法](/ja-jp/learn-more/use-cases/private-ai-ollama-deepseek-dify)
    * [コードなしでMidjourney プロンプトボットを作成する方法](/ja-jp/learn-more/use-cases/create-a-midjoureny-prompt-word-robot-with-zero-code)
    * [Notion AI アシスタントの構築](/ja-jp/learn-more/use-cases/build-an-notion-ai-assistant)
    * [数分でビジネスデータを用いた公式サイトのAIインテリジェントカスタマーサービスを作成する方法](/ja-jp/learn-more/use-cases/create-an-ai-chatbot-with-business-data-in-minutes)
    * [DifyチャットボットをWixサイトに統合する方法](/ja-jp/learn-more/use-cases/how-to-integrate-dify-chatbot-to-your-wix-website)
    * [AWS Bedrock Knowledge Baseに統合する方法](/ja-jp/learn-more/use-cases/how-to-connect-aws-bedrock)
    * [Difyで大規模言語モデルの「競技場」を体験する方法：DeepSeek R1 VS o1 を例に](/ja-jp/learn-more/use-cases/dify-model-arena)
    * [Difyスケジューラーの構築](/ja-jp/learn-more/use-cases/dify-schedule)
    * [DifyクラウドでAI Thesis Slack Botを構築](/ja-jp/learn-more/use-cases/building-an-ai-thesis-slack-bot)
    * [AIセールスアバターの探求](/ja-jp/learn-more/use-cases/build-ai-sales-avatar)
  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




活用事例

# Difyで大規模言語モデルの「競技場」を体験する方法：DeepSeek R1 VS o1 を例に

Copy page

## 

​

概要

Difyのチャットボットタイプのアプリケーションにプリインストールされている[複数モデルのデバッグ](/ja-jp/guides/application-orchestrate/multiple-llms-debugging)機能を使うと、同じ質問に対する異なるLLMの回答効果を同時に比較できます。この記事では、DeepSeek R1とo1を例に、Dify内でさまざまな大規模言語モデルの回答品質を直感的に比較する方法をご紹介します。

## 

​

事前準備

  * Dify.AI クラウド版 / コミュニティ版
  * DeepSeek R1 API
  * OpenAI o1 API



## 

​

クイックスタート

### 

​

1\. LLM APIキーの設定

テストを開始する前に、**「右上」→[「新しいプロバイダーを追加」](../../guides/model-configuration/README)** をクリックし、表示される指示に従って、複数のモデルのAPIキーを手動で追加してください。

### 

​

2\. アプリケーションの作成

チャットボットタイプのアプリケーションを作成し、アプリケーション名と説明を入力して作成を完了させます。

### 

​

3\. 大規模言語モデルの選択

アプリケーション右上の大規模言語モデル選択ページで、`o1`モデルを選択した後、**「複数のモデルでデバッグ」** をタップし、`deepseek-reasoner`モデルを追加します。

### 

​

4\. 効果の比較

ダイアログボックスに質問を入力すると、入力した質問に対する各モデルの応答を同時に確認できます。

詳細や利用に関するご質問は、[複数モデルのデバッグ](/ja-jp/guides/application-orchestrate/multiple-llms-debugging)をご覧ください。

* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/learn-more/use-cases/dify-model-arena.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20model-ar&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/learn-more/use-cases%2Fdify-model-arena.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[AWS Bedrock Knowledge Baseに統合する方法](/ja-jp/learn-more/use-cases/how-to-connect-aws-bedrock)[Difyスケジューラーの構築](/ja-jp/learn-more/use-cases/dify-schedule)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * 概要
  * 事前準備
  * クイックスタート
  * 1\. LLM APIキーの設定
  * 2\. アプリケーションの作成
  * 3\. 大規模言語モデルの選択
  * 4\. 効果の比較



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/learn-more/use-cases/dify-schedule

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

活用事例

Difyスケジューラーの構築

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

    * [DeepSeek & Dify連携ガイド - 多段階推論を活用したAIアプリケーション構築](/ja-jp/learn-more/use-cases/integrate-deepseek-to-build-an-ai-app)
    * [Ollama + DeepSeek + Dify のプライベートデプロイ - あなた自身のAIアシスタントの構築方法](/ja-jp/learn-more/use-cases/private-ai-ollama-deepseek-dify)
    * [コードなしでMidjourney プロンプトボットを作成する方法](/ja-jp/learn-more/use-cases/create-a-midjoureny-prompt-word-robot-with-zero-code)
    * [Notion AI アシスタントの構築](/ja-jp/learn-more/use-cases/build-an-notion-ai-assistant)
    * [数分でビジネスデータを用いた公式サイトのAIインテリジェントカスタマーサービスを作成する方法](/ja-jp/learn-more/use-cases/create-an-ai-chatbot-with-business-data-in-minutes)
    * [DifyチャットボットをWixサイトに統合する方法](/ja-jp/learn-more/use-cases/how-to-integrate-dify-chatbot-to-your-wix-website)
    * [AWS Bedrock Knowledge Baseに統合する方法](/ja-jp/learn-more/use-cases/how-to-connect-aws-bedrock)
    * [Difyで大規模言語モデルの「競技場」を体験する方法：DeepSeek R1 VS o1 を例に](/ja-jp/learn-more/use-cases/dify-model-arena)
    * [Difyスケジューラーの構築](/ja-jp/learn-more/use-cases/dify-schedule)
    * [DifyクラウドでAI Thesis Slack Botを構築](/ja-jp/learn-more/use-cases/building-an-ai-thesis-slack-bot)
    * [AIセールスアバターの探求](/ja-jp/learn-more/use-cases/build-ai-sales-avatar)
  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




活用事例

# Difyスケジューラーの構築

Copy page

> 著者: [Leo_chen](https://github.com/leochen-g), [Difyワークフロースケジューラー](https://github.com/leochen-g/dify-schedule) および [Smart WeChat Assistant](https://github.com/leochen-g/wechat-assistant-pro) の開発者

## 

​

概要

Difyワークフローを手動で実行するのにうんざりしていませんか？ スケジュールされたタスク機能が欲しいと思ったことはありませんか？ **Difyスケジュールアシスタント** を使えば、Difyワークフローに簡単にスケジュール機能を追加できます。 GitHub Actions を利用して、リアルタイム通知付きの自動タスク実行を設定し、ワークフローの効率を最大限に高めましょう。

> 注: このツールはDifyワークフローアプリケーション**のみ** をサポートしています。

## 

​

🌟 主な機能

  * 🔄 複数のワークフローを**同時** 実行
  * ⏰ 柔軟なスケジューリング (デフォルト: UTC+8 06:30)
  * 📱 マルチチャネル通知
    * 企業向け: WeCom, DingTalk, Feishu
    * 個人向け: WeChat, Email, Server Chan, Pushplus
  * 🔒 GitHub Actionsによる**セキュア** な実行
  * 🐲 QingLongパネルへのデプロイをサポート



## 

​

🚀 クイックスタート

以下の2つのデプロイオプションがあります。

  1. **オンライン (GitHub Actions)**
  2. **ローカル (QingLongパネル)**



### 

​

オプション1: GitHub Actions

  1. **リポジトリをフォーク** [Difyスケジュールのリポジトリ](https://github.com/leochen-g/dify-schedule) にアクセスしてフォークしてください。

  2. **シークレットの設定** **Settings - > Secrets -> New repository secret** に進み、以下を設定します。

シークレット名| 内容| 必須  
---|---|---  
`DIFY_BASE_URL`| Dify API URL (デフォルト: <https://api.dify.ai/v1>)| いいえ  
`DIFY_TOKENS`| DifyワークフローのAPIキー (`;` で区切って複数指定可能)| はい  
`DIFY_INPUTS`| ワークフローの変数 (JSON形式)| いいえ  
  
**通知設定 (オプション)**

シークレット名| 内容| 目的  
---|---|---  
`EMAIL_USER`| 送信元のメールアドレス (SMTP有効)| Email  
`EMAIL_PASS`| SMTPパスワード| Email  
`EMAIL_TO`| 受信者のメールアドレス (`,` で区切って複数指定可能)| Email  
`PUSHPLUS_TOKEN`| [Pushplus](http://www.pushplus.plus/) のトークン| WeChat  
`SERVERPUSHKEY`| [Server Chan](https://sct.ftqq.com/) のキー| WeChat  
`DINGDING_WEBHOOK`| DingTalkボットのWebhook URL| DingTalk  
`WEIXIN_WEBHOOK`| WeComボットのWebhook URL| WeCom  
`FEISHU_WEBHOOK`| FeishuボットのWebhook URL| Feishu  
`AIBOTK_KEY`| [Smart WeChat Assistant](https://wechat.aibotk.com/?r=dBL0Bn&f=difySchedule) のAPIキー| WeChat  
`AIBOTK_ROOM_RECIVER`| WeChatグループ名| グループチャット  
`AIBOTK_CONTACT_RECIVER`| WeChatコンタクトのニックネーム| プライベートチャット  
  3. **ワークフローを有効化** **Actions** タブを開き、ワークフローを有効にしてください。




### 

​

オプション2: ローカル環境へのデプロイ

> QingLongパネルは、オープンソースのタスクスケジューラーです。[プロジェクトリンク](https://github.com/whyour/qinglong)

  1. **QingLongパネルのインストール** [プロジェクトページ](https://github.com/whyour/qinglong) の手順に従ってインストールしてください。

  2. **サブスクリプションの追加** 次のコマンドを実行します：
         
         ql repo https://github.com/leochen-g/dify-schedule.git "ql_" "utils" "sdk"

  3. **依存関係のインストール**

     * 【Dependencies】->【NodeJS】に移動
     * `axios` をインストール
  4. **環境変数の設定**

     * `DIFY_TOKENS`: ワークフローのAPIキー (必須)
     * `DIFY_BASE_URL`: API URL (オプション)
     * 複数のAPIキーは`;` で区切ってください。
  5. **通知**

     * QingLongに組み込まれている通知システムを使用します。



## 

​

📸 通知のプレビュー

WeChat通知の例| Email通知の例  
---|---  
![WeChat](https://assets-docs.dify.ai/2025/01/48d250d297950452a2c1a95babc06638.png)| ![Email](https://assets-docs.dify.ai/2025/01/192e3ec292686129198a45562fad26cf.png)  
  
## 

​

❓ トラブルシューティングガイド

### 

​

APIキーの取得方法

  1. Difyコンソールにログインします
  2. 対象のワークフローにアクセスします
  3. APIリファレンスページを開きます
  4. APIキーを取得します



## 

​

**よくある質問**

  1. **接続に関する問題**
     * プライベートDifyインスタンスがインターネットにアクセスできることを確認してください
     * ネットワークとファイアウォールの設定を確認してください
  2. **実行エラー**
     * アプリケーションタイプがワークフローであることを確認してください
     * `DIFY_INPUTS` のJSON形式が正しいことを確認してください
     * ログを確認して、不足している変数がないか確認してください



その他の問題については、GitHubでご報告ください (機密情報は削除してください)。

## 

​

🤝 貢献

コミュニティからの貢献をお待ちしています！

  * 機能の提案
  * バグの修正
  * ドキュメントの改善
  * 新機能



プルリクエストまたはIssueを通じてご参加ください。

* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/learn-more/use-cases/dify-schedule.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20sched&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/learn-more/use-cases%2Fdify-schedule.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[Difyで大規模言語モデルの「競技場」を体験する方法：DeepSeek R1 VS o1 を例に](/ja-jp/learn-more/use-cases/dify-model-arena)[DifyクラウドでAI Thesis Slack Botを構築](/ja-jp/learn-more/use-cases/building-an-ai-thesis-slack-bot)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * 概要
  * 🌟 主な機能
  * 🚀 クイックスタート
  * オプション1: GitHub Actions
  * オプション2: ローカル環境へのデプロイ
  * 📸 通知のプレビュー
  * ❓ トラブルシューティングガイド
  * APIキーの取得方法
  * よくある質問
  * 🤝 貢献



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/learn-more/use-cases/how-to-connect-aws-bedrock

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

活用事例

AWS Bedrock Knowledge Baseに統合する方法

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

    * [DeepSeek & Dify連携ガイド - 多段階推論を活用したAIアプリケーション構築](/ja-jp/learn-more/use-cases/integrate-deepseek-to-build-an-ai-app)
    * [Ollama + DeepSeek + Dify のプライベートデプロイ - あなた自身のAIアシスタントの構築方法](/ja-jp/learn-more/use-cases/private-ai-ollama-deepseek-dify)
    * [コードなしでMidjourney プロンプトボットを作成する方法](/ja-jp/learn-more/use-cases/create-a-midjoureny-prompt-word-robot-with-zero-code)
    * [Notion AI アシスタントの構築](/ja-jp/learn-more/use-cases/build-an-notion-ai-assistant)
    * [数分でビジネスデータを用いた公式サイトのAIインテリジェントカスタマーサービスを作成する方法](/ja-jp/learn-more/use-cases/create-an-ai-chatbot-with-business-data-in-minutes)
    * [DifyチャットボットをWixサイトに統合する方法](/ja-jp/learn-more/use-cases/how-to-integrate-dify-chatbot-to-your-wix-website)
    * [AWS Bedrock Knowledge Baseに統合する方法](/ja-jp/learn-more/use-cases/how-to-connect-aws-bedrock)
    * [Difyで大規模言語モデルの「競技場」を体験する方法：DeepSeek R1 VS o1 を例に](/ja-jp/learn-more/use-cases/dify-model-arena)
    * [Difyスケジューラーの構築](/ja-jp/learn-more/use-cases/dify-schedule)
    * [DifyクラウドでAI Thesis Slack Botを構築](/ja-jp/learn-more/use-cases/building-an-ai-thesis-slack-bot)
    * [AIセールスアバターの探求](/ja-jp/learn-more/use-cases/build-ai-sales-avatar)
  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




活用事例

# AWS Bedrock Knowledge Baseに統合する方法

Copy page

本文では、外部ナレッジベースAPIを利用して、DifyプラットフォームとAWS Bedrock Knowledge Baseを接続する方法を簡潔に紹介します。この接続により、Difyプラットフォーム内のAIアプリケーションは、AWS Bedrock Knowledge Baseに保存されているコンテンツを直接取得でき、新たな情報源を拡充することが可能となります。

### 

​

準備

  * AWS Bedrock Knowledge Base
  * DifyのSaaSサービス / Dify コミュニティ版
  * バックエンドAPI開発の基礎知識



### 

​

1\. AWS Bedrock Knowledge Baseの登録と作成

[AWS Bedrock](https://aws.amazon.com/bedrock/)にアクセスし、ナレッジベースサービスを作成してください。

### 

​

2\. バックエンドAPIサービスの構築

Difyプラットフォームは、直接的にAWS Bedrock Knowledge Baseに接続することができません。開発チームは、Difyの外部ナレッジベース接続に関する[API定義](/ja-jp/guides/knowledge-base/api-documentation/external-knowledge-api-documentation)を参照し、バックエンドAPIサービスを手動で構築してAWS Bedrockと接続する必要があります。具体的なアーキテクチャの概要は以下の通りです：

以下の2つのコードファイルを参考にして、バックエンドサービスAPIを構築できます。

`knowledge.py`
    
    
    from flask import request
    from flask_restful import Resource, reqparse
    
    from bedrock.knowledge_service import ExternalDatasetService
    
    
    class BedrockRetrievalApi(Resource):
        # url : <your-endpoint>/retrieval
        def post(self):
            parser = reqparse.RequestParser()
            parser.add_argument("retrieval_setting", nullable=False, required=True, type=dict, location="json")
            parser.add_argument("query", nullable=False, required=True, type=str,)
            parser.add_argument("knowledge_id", nullable=False, required=True, type=str)
            args = parser.parse_args()
    
            # Authorization check
            auth_header = request.headers.get("Authorization")
            if " " not in auth_header:
                return {
                    "error_code": 1001,
                    "error_msg": "Invalid Authorization header format. Expected 'Bearer <api-key>' format."
                }, 403
            auth_scheme, auth_token = auth_header.split(None, 1)
            auth_scheme = auth_scheme.lower()
            if auth_scheme != "bearer":
                return {
                    "error_code": 1001,
                    "error_msg": "Invalid Authorization header format. Expected 'Bearer <api-key>' format."
                }, 403
            if auth_token:
                # process your authorization logic here
                pass
    
            # Call the knowledge retrieval service
            result = ExternalDatasetService.knowledge_retrieval(
                args["retrieval_setting"], args["query"], args["knowledge_id"]
            )
            return result, 200

`knowledge_service.py`
    
    
    import boto3
    
    
    class ExternalDatasetService:
        @staticmethod
        def knowledge_retrieval(retrieval_setting: dict, query: str, knowledge_id: str):
            # get bedrock client
            client = boto3.client(
                "bedrock-agent-runtime",
                aws_secret_access_key="AWS_SECRET_ACCESS_KEY",
                aws_access_key_id="AWS_ACCESS_KEY_ID",
                # example: us-east-1
                region_name="AWS_REGION_NAME",
            )
            # fetch external knowledge retrieval
            response = client.retrieve(
                knowledgeBaseId=knowledge_id,
                retrievalConfiguration={
                    "vectorSearchConfiguration": {"numberOfResults": retrieval_setting.get("top_k"), "overrideSearchType": "HYBRID"}
                },
                retrievalQuery={"text": query},
            )
            # parse response
            results = []
            if response.get("ResponseMetadata") and response.get("ResponseMetadata").get("HTTPStatusCode") == 200:
                if response.get("retrievalResults"):
                    retrieval_results = response.get("retrievalResults")
                    for retrieval_result in retrieval_results:
                        # filter out results with score less than threshold
                        if retrieval_result.get("score") < retrieval_setting.get("score_threshold", .0):
                            continue
                        result = {
                            "metadata": retrieval_result.get("metadata"),
                            "score": retrieval_result.get("score"),
                            "title": retrieval_result.get("metadata").get("x-amz-bedrock-kb-source-uri"),
                            "content": retrieval_result.get("content").get("text"),
                        }
                        results.append(result)
            return {
                "records": results
            }

このプロセスでは、APIエンドポイントの構築と認証用のAPIキーの生成が行われます。

### 

​

3\. AWS Bedrock Knowledge BaseのIDの取得

AWS Bedrockの管理画面にログインし、作成したナレッジベースのIDを取得します。このパラメータは、Difyプラットフォームとの接続に使用されます。

### 

​

4\. 外部知識APIの関連付け

Difyプラットフォームの**“ナレッジベース”**ページに移動し、右上の** ”外部ナレッジベースAPI”**をクリックし、** “外部ナレッジベースAPIを追加”**を選択します。

ページの指示に従い、以下の内容を順番に入力します：

  * ナレッジベースの名称（カスタマイズ可能で、Difyプラットフォーム内の異なる外部知識APIを区別するために使用）
  * APIエンドポイント（外部ナレッジベースへの接続アドレス、ステップ2でカスタマイズ可能）。例：`api-endpoint/retrieval`
  * API Key（外部ナレッジベースへの接続キー、ステップ2でカスタマイズ可能）



### 

​

5\. 外部ナレッジベースの接続

**“ナレッジベース”**ページに移動し、ナレッジベースのカードの下にある **“外部ナレッジベースを接続”** をクリックして、パラメータ設定ページに移動します。

以下のパラメータを入力してください：

  * **ナレッジベースの名称と説明**

  * **外部知識API**

ステップ4で関連付けた外部ナレッジベースAPIを選択

  * **外部ナレッジベースID**

ステップ3で取得したAWS Bedrock Knowledge BaseIDを入力

  * **検索設定の調整**

**Top K:** ユーザーが質問をした際に、関連性の高いコンテンツセグメントを取得するために外部知識APIにリクエストを送ります。このパラメータは、ユーザーの質問に類似したテキストセグメントを選ぶために使用されます。デフォルト値は3で、値が大きいほど関連性の高いテキストセグメントが取得されます。

**スコア閾値:** テキストセグメントの選択に使用される類似度の閾値です。設定されたスコアを超えるテキストセグメントのみが取得され、デフォルト値は0.5です。数値が高くなるほど、テキストと質問の類似度が高く、取得されるテキストの数は減少し、結果もより精度が高くなります。




設定が完了すると、外部ナレッジベースAPIとの接続が確立されます。

### 

​

6\. 外部ナレッジベースの接続と検索のテスト

外部ナレッジベースとの接続が確立された後、開発者は**“テスト取得”**で可能な質問のキーワードをシミュレートし、AWS Bedrock Knowledge Baseから取得したテキストセグメントをプレビューできます。

検索結果に満足できない場合は、検索設定を変更したり、AWS Bedrock Knowledge Baseの検索設定を調整したりすることができます。

* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/learn-more/use-cases/how-to-connect-aws-bedrock.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20o-connect-aws-bedr&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/learn-more/use-cases%2Fhow-to-connect-aws-bedrock.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[DifyチャットボットをWixサイトに統合する方法](/ja-jp/learn-more/use-cases/how-to-integrate-dify-chatbot-to-your-wix-website)[Difyで大規模言語モデルの「競技場」を体験する方法：DeepSeek R1 VS o1 を例に](/ja-jp/learn-more/use-cases/dify-model-arena)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * 準備
  * 1\. AWS Bedrock Knowledge Baseの登録と作成
  * 2\. バックエンドAPIサービスの構築
  * 3\. AWS Bedrock Knowledge BaseのIDの取得
  * 4\. 外部知識APIの関連付け
  * 5\. 外部ナレッジベースの接続
  * 6\. 外部ナレッジベースの接続と検索のテスト



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/learn-more/use-cases/how-to-integrate-dify-chatbot-to-your-wix-website

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

活用事例

DifyチャットボットをWixサイトに統合する方法

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

    * [DeepSeek & Dify連携ガイド - 多段階推論を活用したAIアプリケーション構築](/ja-jp/learn-more/use-cases/integrate-deepseek-to-build-an-ai-app)
    * [Ollama + DeepSeek + Dify のプライベートデプロイ - あなた自身のAIアシスタントの構築方法](/ja-jp/learn-more/use-cases/private-ai-ollama-deepseek-dify)
    * [コードなしでMidjourney プロンプトボットを作成する方法](/ja-jp/learn-more/use-cases/create-a-midjoureny-prompt-word-robot-with-zero-code)
    * [Notion AI アシスタントの構築](/ja-jp/learn-more/use-cases/build-an-notion-ai-assistant)
    * [数分でビジネスデータを用いた公式サイトのAIインテリジェントカスタマーサービスを作成する方法](/ja-jp/learn-more/use-cases/create-an-ai-chatbot-with-business-data-in-minutes)
    * [DifyチャットボットをWixサイトに統合する方法](/ja-jp/learn-more/use-cases/how-to-integrate-dify-chatbot-to-your-wix-website)
    * [AWS Bedrock Knowledge Baseに統合する方法](/ja-jp/learn-more/use-cases/how-to-connect-aws-bedrock)
    * [Difyで大規模言語モデルの「競技場」を体験する方法：DeepSeek R1 VS o1 を例に](/ja-jp/learn-more/use-cases/dify-model-arena)
    * [Difyスケジューラーの構築](/ja-jp/learn-more/use-cases/dify-schedule)
    * [DifyクラウドでAI Thesis Slack Botを構築](/ja-jp/learn-more/use-cases/building-an-ai-thesis-slack-bot)
    * [AIセールスアバターの探求](/ja-jp/learn-more/use-cases/build-ai-sales-avatar)
  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




活用事例

# DifyチャットボットをWixサイトに統合する方法

Copy page

Wixは人気のWebサイト作成プラットフォームです。ドラッグ・アンド・ドロップを使用して、ユーザーがWebサイトを視覚的にデザインできます。Wixのiframeコード機能を活用することで、DifyチャットボットをWixサイトにシームレスに統合できます。

この機能はチャットボットの統合だけでなく、外部のサーバーや他のソースからのコンテンツをWixページに表示することもできます。例えば、天気ウィジェット、株価ティッカー、カレンダー、またはカスタムウェブ要素などがあります。

このガイドでは、iframeコードを使用してDifyチャットボットをWixWebサイトに埋め込む手順を説明します。この方法は他のWebサイト、ブログ、またはウェブページにDifyアプリケーションを統合する際にも適用できます。

## 

​

1\. DifyアプリケーションのiFrameコードスニペットを取得する

すでに[Dify AIアプリケーション](/ja-jp/guides/application-orchestrate/creating-an-application)を作成していると仮定し、以下の手順に従ってiFrameコードスニペットを取得してください：

  1. Difyアカウントにログインします。

  2. 埋め込みたいDifyアプリケーションを選択します。

  3. ページ右上の「公開」ボタンをクリックします。

  4. 公開ページで「サイトに埋め込む」のオプションを選択します。

  5. 適切なスタイルを選択し、表示されるiFrameコードをコピーします。例：




## 

​

2\. iFrameコードスニペットをWixサイトに埋め込む

  1. WixWebサイトにログインし、編集したいページを開きます。

  2. ページの左側にある青い`+`（要素の追加）ボタンをクリックします。

  3. **埋め込みコード** を選択し、**HTMLを埋め込む** をクリックして、ページにHTML iFrame要素を追加します。

  4. `HTML設定`ボックスで、`コード`オプションを選択します。

  5. Difyアプリケーションから取得したiFrameコードスニペットを貼り付けます。

  6. **更新** ボタンをクリックして変更内容を保存し、プレビューします。




以下はDifyチャットボットを埋め込むためのiFrameコードスニペットの例です：
    
    
    <iframe src="https://udify.app/chatbot/ez1pf83HVV3JgWO4" style="width: 100%; height: 100%; min-height: 700px" frameborder="0" allow="microphone"></iframe>

> ⚠️ iFrameコード内のアドレスがHTTPSで始まることを確認してください。HTTPアドレスは正しく表示されません。

## 

​

3\. Difyチャットボットのカスタマイズ

Difyチャットボットのボタンスタイル、位置、その他の設定を調整することができます。

### 

​

3.1 スタイルのカスタマイズ

iFrameコード内の`style`属性を変更することで、チャットボットボタンの外観をカスタマイズできます。例：
    
    
    <iframe src="https://udify.app/chatbot/ez1pf83HVV3JgWO4" style="width: 100%; height: 100%; min-height: 700px" frameborder="0" allow="microphone"></iframe>
    
    # 幅2ピクセルの実線の黒い境界線を追加：border: 2px solid #000
    
    →
    
    <iframe src="https://udify.app/chatbot/ez1pf83HVV3JgWO4" style="width: 80%; height: 80%; min-height: 500px; border: 2px solid #000;" frameborder="0" allow="microphone"></iframe>

このコードは、チャットボットインターフェースに幅2ピクセルの実線の黒い境界線を追加します。

### 

​

3.2 位置のカスタマイズ

`style`属性内の`position`値を変更することで、ボタンの位置を調整できます。例：
    
    
    <iframe src="https://udify.app/chatbot/ez1pf83HVV3JgWO4" style="width: 100%; height: 100%; min-height: 700px" frameborder="0" allow="microphone"></iframe>
    
    # ページの右下隅にチャットボットを固定し、下端と右端から20ピクセルの位置に配置
    
    →
    
    <iframe src="https://udify.app/chatbot/ez1pf83HVV3JgWO4" style="width: 100%; height: 100%; min-height: 700px; position: fixed; bottom: 20px; right: 20px;" frameborder="0" allow="microphone"></iframe>

このコードは、ページの右下隅にチャットボットを固定し、下端と右端から20ピクセルの位置に配置します。

## 

​

よくある質問

**1\. iFrameのコンテンツが表示されない**

  * URLがHTTPSで始まっていることを確認してください。
  * `iframe`コードに誤字がないか確認してください。
  * 埋め込まれたコンテンツがWixのセキュリティポリシーに準拠しているか確認してください。



**2\. iFrameのコンテンツが切り取られて表示される**

`iframe`コード内の`width`と`height`のパーセンテージ値を変更することで、コンテンツの切り取り問題を解決できます。

* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/learn-more/use-cases/how-to-integrate-dify-chatbot-to-your-wix-website.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20o-integrate-dify-chatbot-to-your-wix-webs&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/learn-more/use-cases%2Fhow-to-integrate-dify-chatbot-to-your-wix-website.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[数分でビジネスデータを用いた公式サイトのAIインテリジェントカスタマーサービスを作成する方法](/ja-jp/learn-more/use-cases/create-an-ai-chatbot-with-business-data-in-minutes)[AWS Bedrock Knowledge Baseに統合する方法](/ja-jp/learn-more/use-cases/how-to-connect-aws-bedrock)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * 1\. DifyアプリケーションのiFrameコードスニペットを取得する
  * 2\. iFrameコードスニペットをWixサイトに埋め込む
  * 3\. Difyチャットボットのカスタマイズ
  * 3.1 スタイルのカスタマイズ
  * 3.2 位置のカスタマイズ
  * よくある質問



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/learn-more/use-cases/integrate-deepseek-to-build-an-ai-app

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

活用事例

DeepSeek & Dify連携ガイド - 多段階推論を活用したAIアプリケーション構築

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

    * [DeepSeek & Dify連携ガイド - 多段階推論を活用したAIアプリケーション構築](/ja-jp/learn-more/use-cases/integrate-deepseek-to-build-an-ai-app)
    * [Ollama + DeepSeek + Dify のプライベートデプロイ - あなた自身のAIアシスタントの構築方法](/ja-jp/learn-more/use-cases/private-ai-ollama-deepseek-dify)
    * [コードなしでMidjourney プロンプトボットを作成する方法](/ja-jp/learn-more/use-cases/create-a-midjoureny-prompt-word-robot-with-zero-code)
    * [Notion AI アシスタントの構築](/ja-jp/learn-more/use-cases/build-an-notion-ai-assistant)
    * [数分でビジネスデータを用いた公式サイトのAIインテリジェントカスタマーサービスを作成する方法](/ja-jp/learn-more/use-cases/create-an-ai-chatbot-with-business-data-in-minutes)
    * [DifyチャットボットをWixサイトに統合する方法](/ja-jp/learn-more/use-cases/how-to-integrate-dify-chatbot-to-your-wix-website)
    * [AWS Bedrock Knowledge Baseに統合する方法](/ja-jp/learn-more/use-cases/how-to-connect-aws-bedrock)
    * [Difyで大規模言語モデルの「競技場」を体験する方法：DeepSeek R1 VS o1 を例に](/ja-jp/learn-more/use-cases/dify-model-arena)
    * [Difyスケジューラーの構築](/ja-jp/learn-more/use-cases/dify-schedule)
    * [DifyクラウドでAI Thesis Slack Botを構築](/ja-jp/learn-more/use-cases/building-an-ai-thesis-slack-bot)
    * [AIセールスアバターの探求](/ja-jp/learn-more/use-cases/build-ai-sales-avatar)
  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




活用事例

# DeepSeek & Dify連携ガイド - 多段階推論を活用したAIアプリケーション構築

Copy page

## 

​

概要

オープンソースの生成AIアプリケーション開発プラットフォームである**Dify** は、開発者がDeepSeek LLMを活用し、より高度なAIアプリケーションを構築することを支援します。Difyプラットフォームは、以下の主要な開発体験を提供します。

  * **視覚的な開発** \- 直感的なビジュアルオーケストレーションにより、DeepSeek R1を搭載したAIアプリケーションをわずか3分で作成
  * **知識ベースの拡張** \- 内部ドキュメントを連携させてRAG機能を有効化し、高精度なQ&Aシステムを構築
  * **ワークフローの拡張** \- ドラッグアンドドロップ操作による機能ノードと、サードパーティ製ツールプラグインを介して、複雑なビジネスロジックを実装
  * **データ分析** \- 総会話数、ユーザーエンゲージメントなどの組み込みメトリクスに加え、専門的な監視プラットフォームとの連携をサポート …



このガイドでは、DeepSeek APIとDifyの連携について、以下の2つの主要な実装を達成するための詳細を説明します。

  * **インテリジェントチャットボットの開発** \- DeepSeek R1の連鎖的思考（chain-of-thought）推論機能を直接活用
  * **知識強化型アプリケーションの構築** \- プライベートな知識ベースを利用して、正確な情報検索と生成を実現



> 金融や法律など、コンプライアンスが重視される業界向けに、Difyは **[DeepSeek + Difyのプライベートデプロイ：独自のAIアシスタントを構築](./private-ai-ollama-deepseek-dify)** を提供しています。
> 
>   * DeepSeekモデルとDifyプラットフォームをプライベートネットワークに同期デプロイ
>   * 完全なデータ主権を保証
> 


DifyとDeepSeekの連携により、開発者はインフラの複雑さを気にすることなく、**シナリオに基づいたAIの実装** に直接取り組むことができ、LLM技術の運用生産性への転換を加速させます。

* * *

## 

​

前提条件

### 

​

1\. DeepSeek APIキーの取得

[DeepSeek APIプラットフォーム](https://platform.deepseek.com/)にアクセスし、指示に従ってAPIキーをリクエストしてください。

> 上記リンクにアクセスできない場合は、DeepSeekのローカルデプロイをご検討ください。詳細については、[ローカルデプロイガイド](./private-ai-ollama-deepseek-dify)を参照してください。

### 

​

2\. Difyへの登録

Difyは、生成AIアプリケーションを迅速に構築するためのプラットフォームです。DeepSeekのAPIを統合することで、DeepSeekを搭載した高機能なAIアプリを簡単に作成できます。

* * *

## 

​

連携手順

### 

​

1\. DeepSeekをDifyに接続

Difyプラットフォームにアクセスし、**プロファイル → 設定 → モデルプロバイダー** に移動します。DeepSeekを見つけ、事前に取得したAPIキーを貼り付け、**保存** をクリックします。検証が完了すると、成功メッセージが表示されます。

* * *

### 

​

2\. DeepSeek AIアプリケーションの作成

  1. Difyのホームページで、左側のサイドバーにある **空白アプリを作成** をクリックし、**チャットボット** を選択します。任意の名前を設定します。



  2. `deepseek-reasoner` モデルを選択します。



> `deepseek-reasoner` モデルは、`deepseek-r1` モデルとも呼ばれます。

設定が完了すると、チャットボットとの対話を開始できます。

* * *

### 

​

3\. 知識ベースによるテキスト分析の有効化

[検索拡張生成（RAG）](/ja-jp/learn-more/extended-reading/retrieval-augment/README) は、関連する知識を検索することでAIの応答を強化する高度な手法です。モデルに必要なコンテキスト情報を提供することで、応答の精度と関連性が向上します。内部ドキュメントや特定の分野の資料をアップロードすると、AIはこの知識に基づいて、より情報に基づいた回答を生成できます。

#### 

​

3.1 知識ベースの作成

AIに分析させたい情報を含むドキュメントをアップロードします。DeepSeekがドキュメントの内容を正確に理解できるように、**親子分割** モードを使用することを推奨します。これにより、ドキュメントの階層構造とコンテキストが保持されます。詳細な手順については、[知識ベースの作成](/ja-jp/guides/knowledge-base/create-knowledge-and-upload-documents/setting-indexing-methods) を参照してください。

#### 

​

3.2 AIアプリへの知識ベースの統合

AIアプリの **コンテキスト** 設定で、作成した知識ベースを追加します。ユーザーが質問すると、LLMは応答を生成する前に、まず知識ベースから関連情報を取得します。

* * *

### 

​

4\. AIアプリケーションの共有

構築が完了したら、AIアプリケーションを他のユーザーと共有したり、他のWebサイトに組み込んだりできます。

* * *

## 

​

参考資料

シンプルなチャットボットアプリケーション以外にも、チャットフローとワークフローを使用して、文書認識、画像処理、音声認識などの機能を備えた、より複雑なAIソリューションを構築できます。詳細については、以下の資料を参照してください。

  * [ワークフロー](/ja-jp/guides/workflow/publish)
  * [ファイルのアップロード](/ja-jp/guides/workflow/file-upload)
  * [DeepSeek + DifyをローカルにデプロイしてプライベートAIアシスタントを構築](./private-ai-ollama-deepseek-dify)



* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/learn-more/use-cases/integrate-deepseek-to-build-an-ai-app.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20rate-deepseek-to-build-an-ai-&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/learn-more/use-cases%2Fintegrate-deepseek-to-build-an-ai-app.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[コミュニティ版を v1.0.0 にアップグレードする](/ja-jp/development/migration/migrate-to-v1)[Ollama + DeepSeek + Dify のプライベートデプロイ - あなた自身のAIアシスタントの構築方法](/ja-jp/learn-more/use-cases/private-ai-ollama-deepseek-dify)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * 概要
  * 前提条件
  * 1\. DeepSeek APIキーの取得
  * 2\. Difyへの登録
  * 連携手順
  * 1\. DeepSeekをDifyに接続
  * 2\. DeepSeek AIアプリケーションの作成
  * 3\. 知識ベースによるテキスト分析の有効化
  * 3.1 知識ベースの作成
  * 3.2 AIアプリへの知識ベースの統合
  * 4\. AIアプリケーションの共有
  * 参考資料



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/learn-more/use-cases/private-ai-ollama-deepseek-dify

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

活用事例

Ollama + DeepSeek + Dify のプライベートデプロイ - あなた自身のAIアシスタントの構築方法

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

    * [DeepSeek & Dify連携ガイド - 多段階推論を活用したAIアプリケーション構築](/ja-jp/learn-more/use-cases/integrate-deepseek-to-build-an-ai-app)
    * [Ollama + DeepSeek + Dify のプライベートデプロイ - あなた自身のAIアシスタントの構築方法](/ja-jp/learn-more/use-cases/private-ai-ollama-deepseek-dify)
    * [コードなしでMidjourney プロンプトボットを作成する方法](/ja-jp/learn-more/use-cases/create-a-midjoureny-prompt-word-robot-with-zero-code)
    * [Notion AI アシスタントの構築](/ja-jp/learn-more/use-cases/build-an-notion-ai-assistant)
    * [数分でビジネスデータを用いた公式サイトのAIインテリジェントカスタマーサービスを作成する方法](/ja-jp/learn-more/use-cases/create-an-ai-chatbot-with-business-data-in-minutes)
    * [DifyチャットボットをWixサイトに統合する方法](/ja-jp/learn-more/use-cases/how-to-integrate-dify-chatbot-to-your-wix-website)
    * [AWS Bedrock Knowledge Baseに統合する方法](/ja-jp/learn-more/use-cases/how-to-connect-aws-bedrock)
    * [Difyで大規模言語モデルの「競技場」を体験する方法：DeepSeek R1 VS o1 を例に](/ja-jp/learn-more/use-cases/dify-model-arena)
    * [Difyスケジューラーの構築](/ja-jp/learn-more/use-cases/dify-schedule)
    * [DifyクラウドでAI Thesis Slack Botを構築](/ja-jp/learn-more/use-cases/building-an-ai-thesis-slack-bot)
    * [AIセールスアバターの探求](/ja-jp/learn-more/use-cases/build-ai-sales-avatar)
  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




活用事例

# Ollama + DeepSeek + Dify のプライベートデプロイ - あなた自身のAIアシスタントの構築方法

Copy page

## 

​

概要

DeepSeekは、革新的なオープンソースの大規模言語モデル（LLM）であり、高度なアルゴリズムアーキテクチャと内省的な推論能力によって、AIを活用した会話に新たな体験をもたらします。プライベート環境にデプロイすることで、データセキュリティとシステム構成を完全に制御しながら、デプロイ戦略の柔軟性を維持できます。

Difyは、オープンソースのAIアプリケーション開発プラットフォームであり、完全なプライベートデプロイメントソリューションを提供します。ローカルにデプロイしたDeepSeekモデルをDifyプラットフォームにシームレスに統合することで、企業はデータプライバシーを確保しつつ、独自のインフラストラクチャ内で強力なAIアプリケーションを構築できます。

### 

​

プライベートデプロイメントの利点：

  * **優れたパフォーマンス** : 商用モデルに匹敵する会話体験を提供します。
  * **隔離された環境** : 完全にオフラインで動作し、データ漏洩のリスクを排除します。
  * **完全なデータ制御** : データ資産の完全な所有権を保持し、コンプライアンスを確保できます。



* * *

## 

​

前提条件

### 

​

**ハードウェア要件：**

  * **CPU** : 2コア以上
  * **RAM/GPUメモリ** : 16GiB以上（推奨）



### 

​

**ソフトウェア要件：**

  * [Docker](https://www.docker.com/)
  * Docker Compose
  * [Ollama](https://ollama.com/)
  * [Dify Community Edition](https://github.com/langgenius/dify)



* * *

## 

​

デプロイ手順

### 

​

1\. Ollama のインストール

[Ollama](https://ollama.com/)は、DeepSeek、Llama、Mistralなどの大規模言語モデルをシームレスにデプロイできるクロスプラットフォームのLLM管理クライアント（MacOS、Windows、Linux）です。Ollamaは、ワンクリックでモデルをデプロイできるソリューションを提供し、すべてのデータがローカルに保存されるため、セキュリティとプライバシーが完全に保護されます。

[Ollamaの公式サイト](https://ollama.com/)にアクセスし、お使いのプラットフォームのインストール手順に従ってください。インストール後、次のコマンドを実行して検証します。
    
    
    ➜  ~ ollama -v
    ollama version is 0.5.5

利用可能なハードウェアに基づいて、適切なDeepSeekモデルサイズを選択してください。最初のインストールには7Bモデルを推奨します。

次のコマンドを実行して、DeepSeek R1モデルをインストールします。
    
    
    ollama run deepseek-r1:7b

### 

​

2\. Dify Community Edition のインストール

Dify GitHubリポジトリをクローンし、インストール手順に従います。
    
    
    git clone https://github.com/langgenius/dify.git
    cd dify/docker
    cp .env.example .env
    docker compose up -d  # Docker Compose V1 を使用している場合は、`docker-compose up -d` を使用してください

コマンドを実行すると、すべてのコンテナが適切なポートマッピングで実行されていることを確認できるはずです。詳細な手順については、[Docker Composeでのデプロイ](/ja-jp/getting-started/install-self-hosted/docker-compose)を参照してください。

Dify Community Editionは、デフォルトでポート80で実行されます。プライベートなDifyプラットフォームには、`http://your_server_ip` でアクセスできます。

### 

​

3\. DeepSeek と Dify の統合

Difyプラットフォームの **Profile → Settings → Model Providers** に移動します。**Ollama** を選択し、**Add Model** をクリックします。

> 注：Model Providers の「DeepSeek」オプションはオンラインAPIサービスを指しますが、OllamaオプションはローカルにデプロイされたDeepSeekモデルに使用します。

モデルを構成します。 • モデル名：デプロイしたモデル名（例：`deepseek-r1:7b`）を入力します。 • ベースURL：OllamaクライアントのローカルサービスURL（通常は `http://your_server_ip:11434`）を設定します。 接続問題が発生した場合は、[よくある質問](/ja-jp/learn-more/use-cases/private-ai-ollama-deepseek-dify)をご参照ください。 • その他の設定：デフォルト値を保持します。[DeepSeekモデルの仕様](https://huggingface.co/deepseek-ai/DeepSeek-R1-Distill-Qwen-7B)によると、最大トークン長は32,768です。

## 

​

AI アプリケーションの構築

### 

​

DeepSeek AI チャットボット（シンプルなアプリケーション）

  1. Difyホームページで、Create Blank App をクリックし、Chatbot を選択して名前を付けます。



  2. Model Provider セクションで、Ollama の下にある `deepseek-r1:7b` モデルを選択します。



  3. チャットプレビューにメッセージを入力して、モデルの応答を確認します。正しく応答すれば、チャットボットはオンラインになります。



  4. Publish ボタンをクリックして、共有可能なリンクを取得するか、チャットボットを他のWebサイトに埋め込みます。



### 

​

DeepSeek AI チャットフロー/ワークフロー（高度なアプリケーション）

> チャットフロー/ワークフローアプリケーションを使用すると、ドキュメント認識、画像処理、音声認識などのより複雑なAIソリューションを作成できます。詳細については、[ワークフローのドキュメント](/ja-jp/guides/workflow/publish)をご覧ください。

  1. Create Blank App をクリックし、Chatflow または Workflow を選択して、アプリケーションに名前を付けます。



  2. LLMノードを追加し、Ollama の下にある `deepseek-r1:7b` モデルを選択し、`{{#sys.query#}}` 変数をシステムプロンプトに使用して、最初のノードに接続します。APIの問題が発生した場合は、[ロードバランシング](/ja-jp/guides/model-configuration/load-balancing)または[エラー処理](/ja-jp/guides/workflow/error-handling/readme)ノードを使用して処理できます。

  3. LLMノードを追加し、Ollamaフレームワークの下にあるdeepseek-r1:7bモデルを選択し、`{{#sys.query#}}` 変数をシステムプロンプトに挿入して、最初のノードに接続します。APIの問題が発生した場合は、ロードバランシングまたはエラー処理ノードを使用して処理できます。




  4. Endノードを追加して構成を完了します。クエリを入力してワークフローをテストします。応答が正しければ、セットアップは完了です。



## 

​

FAQ

### 

​

1\. Docker 使用時の接続エラー

Docker内でDifyとOllamaを実行すると、次のエラーが発生する場合があります。
    
    
    httpconnectionpool(host=127.0.0.1, port=11434): max retries exceeded with url:/cpi/chat
    (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f8562812c20>:
    fail to establish a new connection:[Errno 111] Connection refused'))

**原因** :

`localhost` はコンテナ自体を指すため、Ollama は Docker コンテナ内からアクセスできません。

**解決策** :

**Mac での環境変数の設定** :

Ollama が macOS アプリケーションとして実行されている場合、環境変数は `launchctl` を使用して設定する必要があります。

  1. 各環境変数に対して、`launchctl setenv` を呼び出します。


    
    
    launchctl setenv OLLAMA_HOST "0.0.0.0"

  2. Ollama アプリケーションを再起動します。

  3. 上記の手順が効果がない場合は、次の方法を試してください。




問題は Docker 自体にあり、Docker ホストにアクセスする必要があります。`host.docker.internal` に接続する必要があります。したがって、サービス内で `localhost` を `host.docker.internal` に置き換えると、正常に動作します。
    
    
    http://host.docker.internal:11434

**Linuxでの環境変数の設定** :

Ollama が systemd サービスとして実行されている場合、環境変数は `systemctl` を使用して設定する必要があります。

  1. `systemctl edit ollama.service` を呼び出して、systemd サービスを編集します。これにより、エディターが開きます。
  2. 各環境変数に対して、`[Service]` セクションの下に `Environment` 行を追加します。


    
    
    [Service]
    Environment="OLLAMA_HOST=0.0.0.0"

  3. 保存して終了します。
  4. `systemd` をリロードし、Ollama を再起動します。


    
    
    systemctl daemon-reload
    systemctl restart ollama

**Windows での環境変数の設定** :

Windows では、Ollama はユーザーとシステムの環境変数を継承します。

  1. まず、タスクバーで Ollama をクリックして終了します。
  2. コントロールパネルからシステムの環境変数を編集します。
  3. `OLLAMA_HOST`、`OLLAMA_MODELS` などのユーザーアカウントの新しい変数を作成または編集します。
  4. [OK]/[適用] をクリックして保存します。
  5. 新しいターミナルウィンドウから `ollama` を実行します。



### 

​

2\. Ollama サービスのポートとアドレスを変更する方法

Ollama はデフォルトで 127.0.0.1 のポート 11434 にバインドされています。`OLLAMA_HOST` 環境変数を使用して、バインドアドレスを変更します。

* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/learn-more/use-cases/private-ai-ollama-deepseek-dify.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20te-ai-ollama-deepseek-d&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/learn-more/use-cases%2Fprivate-ai-ollama-deepseek-dify.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[DeepSeek & Dify連携ガイド - 多段階推論を活用したAIアプリケーション構築](/ja-jp/learn-more/use-cases/integrate-deepseek-to-build-an-ai-app)[コードなしでMidjourney プロンプトボットを作成する方法](/ja-jp/learn-more/use-cases/create-a-midjoureny-prompt-word-robot-with-zero-code)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * 概要
  * プライベートデプロイメントの利点：
  * 前提条件
  * ハードウェア要件：
  * ソフトウェア要件：
  * デプロイ手順
  * 1\. Ollama のインストール
  * 2\. Dify Community Edition のインストール
  * 3\. DeepSeek と Dify の統合
  * AI アプリケーションの構築
  * DeepSeek AI チャットボット（シンプルなアプリケーション）
  * DeepSeek AI チャットフロー/ワークフロー（高度なアプリケーション）
  * FAQ
  * 1\. Docker 使用時の接続エラー
  * 2\. Ollama サービスのポートとアドレスを変更する方法



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/openapi-api-access-readme

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

入門

APIアクセス

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




入門

# APIアクセス

Copy page

Dify APIドキュメントセンターへようこそ！このガイドは、Dify APIを効果的にテストし理解するために本文書が提供するインタラクティブ機能を活用する方法、そしてAPIアクセスの主要な要素を習得するためのお手伝いを目的としています。

**重要事項：**

  * **このページの内容：** 主にAPIドキュメントのインタラクティブな利用方法、グローバルなアクセス設定（ベースURL、APIキーなど）、およびドキュメントへの貢献プロセスについて説明します。
  * **APIエンドポイント詳細：** 全ての具体的なAPIエンドポイント（パラメータ、リクエスト/レスポンス構造、機能説明、例を含む）の内容は、OpenAPI仕様に基づいて自動生成され、最新の機能に関する注釈が含まれています。**最も正確で詳細なエンドポイント情報については、これらの自動生成されたページを必ず参照してください。**

## [APIアクセスまたは上部のナビゲーションバーの「APIアクセス」タブをクリックすると、完全なAPIドキュメントを表示できます。](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)

* * *

## 

​

インタラクティブなAPIテスト

APIを迅速に検証し理解していただくために、本文書のほとんどのAPIエンドポイントページには、「試してみる」(Try It) というインタラクティブなテスト機能が組み込まれています。

1

「試してみる」機能を見つける

テストしたいAPIエンドポイントのドキュメントページで、通常はページ上部または右側の領域に、目立つ「試してみる」ボタンまたは直接操作可能なパラメータ入力領域があります。

2

リクエストパラメータを設定する

サーバーアドレス (ベースURL)

システムが自動入力試みる場合がありますが、Difyのデプロイ環境（クラウド版またはセルフホスト/オンプレミス版）に応じて正しいベースURLを選択または入力してください。詳細は下記の [サーバーアドレス (ベースURL)](/_sites/docs.dify.ai/ja-jp/openapi-api-access-readme#%E3%82%B5%E3%83%BC%E3%83%90%E3%83%BC%E3%82%A2%E3%83%89%E3%83%AC%E3%82%B9-%E3%83%99%E3%83%BC%E3%82%B9url) セクションを参照してください。

認証情報 (APIキー)

認証セクションに、Difyアプリケーションから取得した有効なAPIキーを入力する必要があります。詳細は [APIキー (API Key)](/_sites/docs.dify.ai/ja-jp/openapi-api-access-readme#api%E3%82%AD%E3%83%BC-api-key) セクションを参照してください。

パスパラメータとクエリパラメータ

APIエンドポイントのURLにパスパラメータ (例: `/users/{user_id}`) が含まれる場合や、クエリパラメータ (例: `?limit=10`) が必要な場合は、エンドポイントの説明に従って正確に入力してください。

リクエストボディ (Request Body)

`POST`, `PUT`, `PATCH` など、リクエストボディが必要なHTTPメソッドについては、エンドポイントドキュメントに記載されているリクエストボディの構造 (スキーマ) と例を参照して、正しいJSONコンテンツを作成してください。

3

リクエストを送信して結果を確認する

すべてのパラメータ設定が完了したら、「送信」(Send) (または「実行」(Execute)) ボタンをクリックしてAPI呼び出しを開始します。しばらくすると、同じ領域にHTTPステータスコード、レスポンスヘッダー、レスポンスボディを含む完全なAPIレスポンスが表示されます。

* * *

## 

​

🔑 APIアクセス設定

### 

​

サーバーアドレス (ベースURL)

APIリクエストのベースURLは、Difyのデプロイ環境によって異なります。

Dify クラウド版

セルフホスト / オンプレミス版
    
    
    https://api.dify.ai/v1

API呼び出しを行う際や「試してみる」機能を使用する際は、設定したベースURLが正しいことを必ず確認してください。

### 

​

APIキー (API Key)

Difyの**各** アプリケーション (App) は、インターフェース呼び出しの認証と認可に使用される、それぞれ専用のAPIキーを所有しています。

  * **取得方法：** Difyアプリケーションの概要、`APIアクセス`、または `モニタリング` ページで `APIキー` をクリックして、APIキーを管理または生成できます。

  * **使用方法：** APIキーを取得したら、HTTPリクエストの `Authorization` ヘッダーに `Bearer YOUR_API_KEY` の形式で追加してください。

  * **重要なセキュリティに関する注意：**

APIキーはアプリケーションデータへのアクセス資格情報であり、高い権限を持っています。**機密情報として扱い、厳重に保管してください。クライアントサイドのコード（ブラウザ、モバイルアプリのフロントエンドなど）にハードコーディングしたり、直接公開したりすることは絶対に避けてください。** APIキーは安全なサーバーサイド環境に保存し、バックエンドサービスを介してDify APIの呼び出しをプロキシすることを推奨します。

  * **アクセス制御：** Difyアプリケーションの **モニタリング (Monitoring) - > バックエンドサービスAPI (Backend Service API)** 設定で、APIのアクセス状態を管理できます。例えば、すべてのAPI呼び出しを一時的に無効にすることができます。




* * *

## 

​

📚 `APIアクセス`と本文書について

### 

​

ドキュメントの構成とソース

  * **本ガイドページ (`api-access-readme.mdx`)：** APIドキュメントの使用方法、インタラクティブテストの実施方法、APIアクセスの一般的な設定情報を提供します。
  * **APIエンドポイント詳細ページ：** サイドバーの **「APIエンドポイント」** グループ以下のすべてのページは、当社のOpenAPI仕様 ([OpenAPI仕様ソースファイルテンプレートを見る](https://github.com/langgenius/dify/tree/main/web/app/components/develop/template)) から **自動生成** されています。これらのページには、各エンドポイントの詳細な説明、パラメータ、リクエスト/レスポンスの例、最新の機能に関する注釈が含まれています。



### 

​

本文書への貢献方法

Difyドキュメントへのコミュニティメンバーからの貢献を心より歓迎し、感謝いたします！

  * 現在のページ（本ガイド）を編集する
  * APIエンドポイント記述の変更（OpenAPI仕様）
  * 問題の報告または提案



もし **現在ご覧になっているこの`APIアクセスとインタラクションガイド` ページ** を修正したい場合は、以下の手順で行うことができます：

  1. このページの下部までスクロールします。
  2. **「このページを編集」(Edit this page)** ボタンをクリックします。
  3. これにより、GitHub上のこの `api-access-readme.mdx` ファイルの編集インターフェースに直接移動します。



注意：このページ下部の **「このページを編集」** ボタンは、**現在のこのガイドページ (`api-access-readme.mdx`) 自体にのみ作用します**。 個々の `APIアクセス` 詳細ページには **適用されません** 。

もし **現在ご覧になっているこの`APIアクセスとインタラクションガイド` ページ** を修正したい場合は、以下の手順で行うことができます：

  1. このページの下部までスクロールします。
  2. **「このページを編集」(Edit this page)** ボタンをクリックします。
  3. これにより、GitHub上のこの `api-access-readme.mdx` ファイルの編集インターフェースに直接移動します。



注意：このページ下部の **「このページを編集」** ボタンは、**現在のこのガイドページ (`api-access-readme.mdx`) 自体にのみ作用します**。 個々の `APIアクセス` 詳細ページには **適用されません** 。

`APIアクセス` 詳細ページ内の特定の **APIエンドポイントの説明、パラメータ、または例の更新が必要** な場合、これらの内容はOpenAPI仕様ファイルから来ています。

  1. Difyのドキュメントコードリポジトリにアクセスしてください。
  2. 関連するOpenAPI JSONファイルを見つけます（言語ごとにサブディレクトリに分かれています。例：`en/openapi_chatflow.json`, `zh-hans/openapi_workflow.json` など）。
  3. 対応するOpenAPIファイルの内容を修正します。
  4. Difyのメインリポジトリにプルリクエストを送信します。



多言語ドキュメントの一貫性を保つため、ある言語のOpenAPIファイルを変更した場合は、他の言語バージョンの対応するOpenAPIファイルも確認し、同期して更新することをお勧めします。

ドキュメント（本ガイドページまたは特定のAPIエンドポイントページ）に問題を発見した場合、または改善提案がある場合：

  1. ページ下部（またはサイドバー）の **「問題を報告」(Report an issue)** リンクを使用できます。
  2. これにより、通常、このドキュメントプロジェクト (dify-docs) のGitHub Issuesページに移動します。
  3. 発見した問題、問題のあるページのリンク、および改善提案を詳細に記述してください。



正確な問題報告と建設的な提案も、コミュニティとプロジェクトへの重要な貢献です！

## [同期APIドキュメントはDifyのメインリポジトリから同期されています。このカードをクリックすると、GitHubで元のコードを確認できます。同期のずれや誤りを見つけた場合は、ぜひPRを送信してコードに貢献してください。](https://github.com/langgenius/dify/tree/main/web/app/components/develop/template)

すべての貢献（直接編集または問題報告）にはGitHubアカウントが必要です。より完全なDify利用ドキュメントを共に作り上げるための皆様のご参加をお待ちしております！

* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/openapi-api-access-readme.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20pi-api-access-rea&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp%2Fopenapi-api-access-readme.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[Dify 教育版](/ja-jp/getting-started/dify-for-education)[モデル](/ja-jp/guides/model-configuration/README)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * インタラクティブなAPIテスト
  * 🔑 APIアクセス設定
  * サーバーアドレス (ベースURL)
  * APIキー (API Key)
  * 📚 APIアクセスと本文書について
  * ドキュメントの構成とソース
  * 本文書への貢献方法



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/plugins/best-practice/README

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

ベストプラクティス

ベストプラクティス

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

    * [ベストプラクティス](/ja-jp/plugins/best-practice/README)
    * [Slack ボットプラグインの開発](/ja-jp/plugins/best-practice/develop-a-slack-bot-plugin)
    * [Dify MCPプラグインガイド：Zapierへのワンクリック接続と自動メール送信](/ja-jp/plugins/best-practice/how-to-use-mcp-zapier)
    * [開発やデバッグのためのログの出力](/ja-jp/plugins/best-practice/how-to-print-strings-to-logs-for-debugging)
  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




ベストプラクティス

# ベストプラクティス

Copy page

## [このドキュメントはまもなく非推奨になりますドキュメント再編の一環として、このページは段階的に廃止されます。 _**このカードをクリックして**_ 、最新情報が含まれる更新版にリダイレクトしてください。新しいドキュメントに不一致や改善が必要な箇所を見つけた場合は、ページ下部の「問題を報告」ボタンを使用してください。](/plugin-dev-ja/0431-example-overview-and-index)

高度な機能を持つプラグイン開発に関する、より詳しいベストプラクティスは、拡張プラグイン開発ガイドラインをご覧ください。

## [develop-a-slack-bot-plugin.mddevelop-a-slack-bot-plugin.md](develop-a-slack-bot-plugin.md)

* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/plugins/best-practice/README.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/plugins/best-practice%2FREADME.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[ノード](/ja-jp/plugins/schema-definition/reverse-invocation-of-the-dify-service/node)[Slack ボットプラグインの開発](/ja-jp/plugins/best-practice/develop-a-slack-bot-plugin)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/plugins/best-practice/develop-a-slack-bot-plugin

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

ベストプラクティス

Slack ボットプラグインの開発

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

    * [ベストプラクティス](/ja-jp/plugins/best-practice/README)
    * [Slack ボットプラグインの開発](/ja-jp/plugins/best-practice/develop-a-slack-bot-plugin)
    * [Dify MCPプラグインガイド：Zapierへのワンクリック接続と自動メール送信](/ja-jp/plugins/best-practice/how-to-use-mcp-zapier)
    * [開発やデバッグのためのログの出力](/ja-jp/plugins/best-practice/how-to-print-strings-to-logs-for-debugging)
  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




ベストプラクティス

# Slack ボットプラグインの開発

Copy page

## [このドキュメントはまもなく非推奨になりますドキュメント再編の一環として、このページは段階的に廃止されます。 _**このカードをクリックして**_ 、最新情報が含まれる更新版にリダイレクトしてください。新しいドキュメントに不一致や改善が必要な箇所を見つけた場合は、ページ下部の「問題を報告」ボタンを使用してください。](/plugin-dev-ja/0432-develop-a-slack-bot-plugin)

**この記事では、以下の内容を理解できます。**

Slack Bot の構築方法を深く理解し、AI を活用した Slack チャットボットを作成して、Slack プラットフォーム上でユーザーの質問にインテリジェントに応答する方法を学びます。

### 

​

プロジェクトの背景

Dify プラグインエコシステムは、よりシンプルで使いやすいアクセス方法のサポートに注力しています。この記事では、Slack を例に、Slack Bot プラグインの開発方法を詳しく紹介し、チームメンバーが Slack プラットフォーム内で直接 LLM と対話できるようにすることで、AI サービスの利用効率を向上させます。

Dify プラグインエコシステムは、よりシンプルで便利なアクセス方法を提供することを目指しています。この記事では、Slack を例に、Slack Bot プラグインの開発方法を詳しく解説し、チームメンバーが Slack プラットフォームで直接 AI アプリを利用できるようにすることで、業務効率を向上させます。

Slack は、豊富な API を備えた自由でオープンなリアルタイムオフィスコミュニプラットフォームです。特に、イベントメカニズムに基づいた Webhook 機能は、簡単に開発を始めることができます。このメカニズムを利用して Slack Bot プラグインを作成します。その原理は以下の図に示すとおりです。

> 混乱を避けるため、以下に概念の説明をします。
> 
>   * **Slack Bot** は、Slack プラットフォーム上のチャットボットであり、仮想的な役割と見なすことができ、チャットを通じてインタラクションできます。
>   * **Slack Bot プラグイン** は、Dify Marketplace のプラグインであり、Dify アプリと Slack プラットフォームを接続するために使用されます。この記事では、主にこのプラグインの開発について説明します。
> 


**原理の概要：**

  1. **Slack Bot にメッセージを送信**

ユーザーが Slack で Bot にメッセージを送信すると、Slack Bot は Dify プラットフォームに Webhook リクエストを送信します。

  2. **メッセージを Slack Bot プラグインに転送**

ユーザーが Slack Bot と対話する際、メッセージを Dify アプリに転送する必要があります。メールシステムで受信者のメールアドレスが必要なように、Slack の API を使用して Slack Webhook のアドレスを設定し、それを Slack Bot プラグインに入力して接続を確立します。

  3. **プラグインがメッセージを受信した後、特定の Dify アプリに送信**

Slack Bot プラグインは Slack リクエストを処理し、Dify のアプリに送信します。LLM がユーザーの入力を分析し、応答を提供します。

  4. **Dify アプリが応答した後、メッセージを Slack Bot に返し、ユーザーに応答**

Slack Bot は Dify アプリからの応答を取得した後、プラグインを介してメッセージを Slack Bot に返します。これにより、ユーザーは Dify アプリと直接やり取りできます。




### 

​

事前準備

  * Dify プラグインスキャフォールディングツール。詳細については、[開発ツールの初期化](/ja-jp/plugins/quick-start/develop-plugins/initialize-development-tools)を参照してください。
  * Python 環境。バージョンは 3.12 以上である必要があります。詳細については、[Pythonインストールチュートリアル](https://pythontest.com/python/installing-python-3-11/)を参照するか、LLM に完全なインストールチュートリアルを問い合わせてください。
  * Slack App を作成し、OAuth トークンを取得します。



[Slack API](https://api.slack.com/apps) プラットフォームにアクセスし、scratch 方式で Slack App を作成し、アプリをデプロイする Slack ワークスペースを選択します。

;Webhooks 機能を有効にします。

App を Slack ワークスペースにインストールします。

今後のプラグイン開発に使用する OAuth トークンを取得します。

### 

​

1\. プラグイン開発

それでは、実際にプラグインのコーディング作業を始めましょう。その前に、[クイックスタート：Extensionプラグインの開発](/ja-jp/plugins/quick-start/develop-plugins/extension-plugin) をお読みいただくか、Difyプラグインの開発経験があることをご確認ください。

#### 

​

プロジェクトの初期化

以下のコマンドを実行して、プラグイン開発プロジェクトを初期化します。
    
    
    dify plugin init

プロンプトに従い、プロジェクトの基本情報を入力し、`extension` テンプレートを選択してください。そして、`Apps` と `Endpoints` の2つの権限を付与します。

プラグインからDifyプラットフォームの機能を呼び出す方法については、[逆呼び出し：App](/ja-jp/plugins/schema-definition/reverse-invocation-of-the-dify-service/app) を参照してください。

#### 

​

1\. 設定フォームの編集

このプラグインでは、どのDifyのAppを使って応答するかを指定する必要があり、さらに、応答時にSlackのAppトークンを使用する必要があるため、プラグインフォームにこれらの2つのフィールドを追加します。

`group` ディレクトリにあるyamlファイルを編集します。例：`group/slack.yaml`。フォーム設定ファイルの名前は、プラグイン作成時に入力した基本情報によって決まります。対応するyamlファイルを変更してください。

**サンプルコード：**

`slack.yaml`
    
    
    settings:
      - name: bot_token
        type: secret-input
        required: true
        label:
          en_US: Bot Token
          zh_Hans: Bot Token
          pt_BR: Token do Bot
          ja_JP: Bot Token
        placeholder:
          en_US: Please input your Bot Token
          zh_Hans: 请输入你的 Bot Token
          pt_BR: Por favor, insira seu Token do Bot
          ja_JP: ボットトークンを入力してください
      - name: allow_retry
        type: boolean
        required: false
        label:
          en_US: Allow Retry
          zh_Hans: 允许重试
          pt_BR: Permitir Retentativas
          ja_JP: 再試行を許可
        default: false
      - name: app
        type: app-selector
        required: true
        label:
          en_US: App
          zh_Hans: 应用
          pt_BR: App
          ja_JP: アプリ
        placeholder:
          en_US: the app you want to use to answer Slack messages
          zh_Hans: 你想要用来回答 Slack 消息的应用
          pt_BR: o app que você deseja usar para responder mensagens do Slack
          ja_JP: あなたが Slack メッセージに回答するために使用するアプリ
    endpoints:
      - endpoints/slack.yaml

コードデータ構造の説明：
    
    
    - name: app
        type: app-selector
        scope: chat

  * `type` フィールドは、`app-selector` フィールドとして設定してください。

これにより、ユーザーはプラグイン利用時に特定の Dify アプリにアクセスし、メッセージ転送を行えるようになります。

  * `scope` フィールドは、`chat` フィールドとして設定してください。

`agent`、`chatbot`、`chatflow` などのタイプのアプリのみが利用可能です。




最後に、`endpoints/slack.yaml` ファイルのリクエストパスとリクエストメソッドを修正し、`method` を `POST` に変更する必要があります。

**サンプルコード：**

`endpoints/slack.yaml`
    
    
    path: "/"
    method: "POST"
    extra:
      python:
        source: "endpoints/slack.py"

#### 

​

2\. 機能コードの編集

`endpoints/slack.py` ファイルを修正し、以下のコードを追加してください：
    
    
    import json
    import traceback
    from typing import Mapping
    from werkzeug import Request, Response
    from dify_plugin import Endpoint
    from slack_sdk import WebClient
    from slack_sdk.errors import SlackApiError
    
    
    class SlackEndpoint(Endpoint):
        def _invoke(self, r: Request, values: Mapping, settings: Mapping) -> Response:
            """
            Invokes the endpoint with the given request.
            """
            retry_num = r.headers.get("X-Slack-Retry-Num")
            if (not settings.get("allow_retry") and (r.headers.get("X-Slack-Retry-Reason") == "http_timeout" or ((retry_num is not None and int(retry_num) > 0)))):
                return Response(status=200, response="ok")
            data = r.get_json()
    
            # Slack URL検証チャレンジを処理する
            if data.get("type") == "url_verification":
                return Response(
                    response=json.dumps({"challenge": data.get("challenge")}),
                    status=200,
                    content_type="application/json"
                )
            
            if (data.get("type") == "event_callback"):
                event = data.get("event")
                if (event.get("type") == "app_mention"):
                    message = event.get("text", "")
                    if message.startswith("<@"):
                        message = message.split("> ", 1)[1] if "> " in message else message
                        channel = event.get("channel", "")
                        blocks = event.get("blocks", [])
                        blocks[0]["elements"][0]["elements"] = blocks[0].get("elements")[0].get("elements")[1:]
                        token = settings.get("bot_token")
                        client = WebClient(token=token)
                        try: 
                            response = self.session.app.chat.invoke(
                                app_id=settings["app"]["app_id"],
                                query=message,
                                inputs={},
                                response_mode="blocking",
                            )
                            try:
                                blocks[0]["elements"][0]["elements"][0]["text"] = response.get("answer")
                                result = client.chat_postMessage(
                                    channel=channel,
                                    text=response.get("answer"),
                                    blocks=blocks
                                )
                                return Response(
                                    status=200,
                                    response=json.dumps(result),
                                    content_type="application/json"
                                )
                            except SlackApiError as e:
                                raise e
                        except Exception as e:
                            err = traceback.format_exc()
                            return Response(
                                status=200,
                                response="Sorry, I'm having trouble processing your request. Please try again later." + str(err),
                                content_type="text/plain",
                            )
                    else:
                        return Response(status=200, response="ok")
                else:
                    return Response(status=200, response="ok")
            else:
                return Response(status=200, response="ok")

プラグインのテストを容易にするため、現在はユーザーの入力をそのまま返すだけで、Difyアプリは呼び出さない設定になっています。

### 

​

2\. プラグインのデバッグ

Difyプラットフォームにアクセスし、Difyプラグインのリモートデバッグに必要な接続アドレスとキーを取得します。

プラグインプロジェクトに戻り、`.env.example`ファイルをコピーして`.env`にリネームします。
    
    
    INSTALL_METHOD=remote
    REMOTE_INSTALL_HOST=remote
    REMOTE_INSTALL_PORT=5003
    REMOTE_INSTALL_KEY=****-****-****-****-****

`python -m main`コマンドを実行してプラグインを起動します。プラグインページで、ワークスペースにこのプラグインがインストールされていることを確認できます。他のチームメンバーもこのプラグインを利用できます。
    
    
    python -m main

#### 

​

プラグインのエンドポイントを設定する

Difyのプラグイン管理ページで、自動インストールされたテストプラグインを見つけます。次に、新しいエンドポイントを作成し、名前、Botトークンを入力し、接続するアプリを選択します。

保存すると、POSTリクエストアドレスが生成されます。

次に、Slack Appの設定を完了する必要があります。

  1. イベントサブスクリプションを有効にする



ここに、上記で生成したプラグインのPOSTリクエストアドレスを貼り付けます。

Slack Appに必要な権限にチェックを入れます。

### 

​

3\. プラグインの効果を検証する

コードでは、`self.session.app.chat.invoke`を使ってDifyプラットフォーム内のAppを呼び出し、`app_id`や`query`などの情報を渡します。そして、レスポンスの内容をSlack Botに返します。`python -m main`コマンドを実行してプラグインを再起動し、デバッグを行います。Slack BotがDify Appからの応答メッセージを正しく出力できるか確認します。

### 

​

4\. プラグインのパッケージ化（オプション）

プラグインが正常に動作することを確認したら、次のコマンドラインツールを使ってプラグインをパッケージ化して名前を付けることができます。実行すると、現在のフォルダに`slack_bot.difypkg`ファイルが作成されます。これが最終的なプラグインパッケージです。
    
    
    # Replace ./slack_bot with your actual plugin project path.
    
    dify plugin package ./slack_bot

おめでとうございます！プラグインの完全な開発、テスト、パッケージ化のプロセスが完了しました。

### 

​

5\. プラグインの公開（オプション）

作成したプラグインを [Dify Marketplace リポジトリ](https://github.com/langgenius/dify-plugins) にアップロードして公開できます。ただし、公開する前に、プラグインが[プラグイン公開仕様](/ja-jp/plugins/publish-plugins/publish-to-dify-marketplace/README)に準拠しているか確認してください。

### 

​

参考資料

Difyプラグインの完全なプロジェクトコードを確認するには、[Githubコードリポジトリ](https://github.com/langgenius/dify-plugins)にアクセスしてください。他のプラグインの完全なコードや詳細も確認できます。

プラグインの詳細については、以下を参照してください。

**クイックスタート：**

  * [拡張タイププラグインの開発](/ja-jp/plugins/quick-start/develop-plugins/extension-plugin)
  * [モデルタイププラグインの開発](/ja-jp/plugins/manage-plugins)
  * [バンドルタイププラグイン：複数のプラグインをパッケージ化](/ja-jp/plugins/quick-start/develop-plugins/bundle)



**プラグインインターフェースドキュメント：**

  * [マニフェスト](/ja-jp/plugins/schema-definition/manifest)
  * [エンドポイント](/ja-jp/plugins/schema-definition/endpoint)
  * [Difyサービスの逆呼び出し](/ja-jp/plugins/schema-definition/reverse-invocation-of-the-dify-service/app)
  * [ツール](/ja-jp/guides/workflow/nodes/tools)
  * [モデル](/ja-jp/plugins/schema-definition/model/model-schema)



* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/plugins/best-practice/develop-a-slack-bot-plugin.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20op-a-slack-bot-plu&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/plugins/best-practice%2Fdevelop-a-slack-bot-plugin.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[ベストプラクティス](/ja-jp/plugins/best-practice/README)[Dify MCPプラグインガイド：Zapierへのワンクリック接続と自動メール送信](/ja-jp/plugins/best-practice/how-to-use-mcp-zapier)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * プロジェクトの背景
  * 事前準備
  * 1\. プラグイン開発
  * プロジェクトの初期化
  * 1\. 設定フォームの編集
  * 2\. 機能コードの編集
  * 2\. プラグインのデバッグ
  * プラグインのエンドポイントを設定する
  * 3\. プラグインの効果を検証する
  * 4\. プラグインのパッケージ化（オプション）
  * 5\. プラグインの公開（オプション）
  * 参考資料



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/plugins/best-practice/how-to-print-strings-to-logs-for-debugging

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

ベストプラクティス

開発やデバッグのためのログの出力

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

    * [ベストプラクティス](/ja-jp/plugins/best-practice/README)
    * [Slack ボットプラグインの開発](/ja-jp/plugins/best-practice/develop-a-slack-bot-plugin)
    * [Dify MCPプラグインガイド：Zapierへのワンクリック接続と自動メール送信](/ja-jp/plugins/best-practice/how-to-use-mcp-zapier)
    * [開発やデバッグのためのログの出力](/ja-jp/plugins/best-practice/how-to-print-strings-to-logs-for-debugging)
  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




ベストプラクティス

# 開発やデバッグのためのログの出力

Copy page

## [このドキュメントはまもなく非推奨になりますドキュメント再編の一環として、このページは段階的に廃止されます。 _**このカードをクリックして**_ 、最新情報が含まれる更新版にリダイレクトしてください。新しいドキュメントに不一致や改善が必要な箇所を見つけた場合は、ページ下部の「問題を報告」ボタンを使用してください。](/plugin-dev-ja/0222-debugging-logs)

プラグインの開発者は、開発やデバッグの目的で、プラグインの処理の過程で任意の文字列をログに出力したいと考えることがあるでしょう。

この目的で、プラグインの SDK には、Python の標準ライブラリである `logging` 用のハンドラが実装されています。これを利用すれば、**リモートデバッグ中の標準出力** にも **プラグインデーモンのコンテナログ** （コミュニティ版のみ）にも、任意の文字列を出力できます。

## 

​

サンプル

`plugin_logger_handler` をインポートして、ロガーにハンドラとして追加します。以下は、ツールプラグインのサンプルコードです。
    
    
    from collections.abc import Generator
    from typing import Any
    from dify_plugin import Tool
    from dify_plugin.entities.tool import ToolInvokeMessage
    
    
    # Import logging and custom handler
    import logging
    from dify_plugin.config.logger_format import plugin_logger_handler
    
    # Set up logging with the custom handler
    logger = logging.getLogger(__name__)
    logger.setLevel(logging.INFO)
    logger.addHandler(plugin_logger_handler)
    
    
    class LoggerDemoTool(Tool):
        def _invoke(self, tool_parameters: dict[str, Any]) -> Generator[ToolInvokeMessage]:
    
            # Log messages with different severity levels
            logger.info("This is a INFO log message.")
            logger.warning("This is a WARNING log message.")
            logger.error("This is a ERROR log message.")
    
            yield self.create_text_message("Hello, Dify!")

* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/plugins/best-practice/how-to-print-strings-to-logs-for-debugging.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20o-print-strings-to-logs-for-debugg&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/plugins/best-practice%2Fhow-to-print-strings-to-logs-for-debugging.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[Dify MCPプラグインガイド：Zapierへのワンクリック接続と自動メール送信](/ja-jp/plugins/best-practice/how-to-use-mcp-zapier)[プラグインの公開](/ja-jp/plugins/publish-plugins/README)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * サンプル



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/plugins/best-practice/how-to-use-mcp-zapier

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

ベストプラクティス

Dify MCPプラグインガイド：Zapierへのワンクリック接続と自動メール送信

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

    * [ベストプラクティス](/ja-jp/plugins/best-practice/README)
    * [Slack ボットプラグインの開発](/ja-jp/plugins/best-practice/develop-a-slack-bot-plugin)
    * [Dify MCPプラグインガイド：Zapierへのワンクリック接続と自動メール送信](/ja-jp/plugins/best-practice/how-to-use-mcp-zapier)
    * [開発やデバッグのためのログの出力](/ja-jp/plugins/best-practice/how-to-print-strings-to-logs-for-debugging)
  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




ベストプラクティス

# Dify MCPプラグインガイド：Zapierへのワンクリック接続と自動メール送信

Copy page

**このガイドでは** DifyワークスペースにMCP SSEプラグインをインストールし、ZapierのMCPサービスと連携するように設定することで、シームレスな自動メール送信ワークフローを実現する方法を解説します。

## 

​

プロジェクト背景

Anthropicは2024年末にMCP（モデルコンテキストプロトコル）をリリースしました。MCPは、AIのための「USB-C」インターフェースのように機能する新興のオープンプロトコルです。LLM（大規模言語モデル）と外部アプリケーション間に双方向の通信チャネルを構築し、モデルが様々な外部ツールやAPIを発見・理解し、呼び出すことを支援します。

これにより、開発者が外部サービスごとに複雑なカスタム統合を構築する必要がなくなります。ユーザーは、日常のオフィス業務処理、データ分析、マーケティングオートメーションの実行など、AIが膨大な数のサードパーティ製アプリを簡単に呼び出す能力を体験できます。AIは「インテリジェントな対話」から「効率的なアクション」へと進化を遂げつつあります。

DifyコミュニティにおいてもMCPは大きな注目を集めており、コミュニティ開発者はプラグインマーケットプレイスに複数のMCPプラグインを提供しています。これにより、外部のMCPサービスをDifyのエージェントアプリやワークフローに簡単に接続できるようになりました。

本ガイドでは、MCP SSEプラグインを例に、Dify内でMCPプラグインを使用してZapierに接続し、自動メール送信プロセスを完了する方法を詳しく説明します。

## 

​

前提条件

  * Dify クラウド版 / Dify コミュニティ版 ≥ v1.0.0
  * Zapier アカウント



## 

​

Dify で Zapier MCP サービスを初期化する

Zapier の MCP Server は、7000以上のアプリと30,000以上のアクション（Action）を単一の MCP Server URL にまとめています。メール送信、CRMへのレコード作成、Slackでの通知送信など、必要なツールやアクションはZapierの管理画面で選択・設定可能です。このMCPサーバーURLをDifyのMCPプラグイン設定に入力するだけで、LLMは会話中やプロセス実行中にこれらのツールを自動的に呼び出し、様々なタスクを完了させることができます。

### 

​

ステップ1：Zapier MCP Server URL を取得する

  1. [Zapier MCP 設定ページ](https://actions.zapier.com/settings/mcp/)にアクセスします。
  2. MCP Server URL を取得し、後で Difyのプラグインの設定に使用します。



  3. URL の下にある “Edit MCP Actions（MCPアクションを編集）” をクリックして、ツールとアクションの追加ページに移動します。

  4. “Add a new action（新たなアクションを増加）” をクリックし、`Gmail: Send Email` を検索します。実際のニーズに応じて異なるメールアクションを選択することもできます。




  5. 「Send Email（メールを送る）」を例に説明します：



Gmail アカウントの下にある 「Connect（連結）」 をクリックし、Gmail アカウントにログインして認証します。

宛先（To）、件名（Subject）、本文（Body）などのフィールドについては、「Have AI guess a value for this field（このフィールドの値をAIに推測させる）」 を選択できます。具体的な内容は、エージェントが会話の文脈に基づいて動的に内容を生成します。

  6. 設定完了後、さらに異なるアクションを追加して、エージェントが使用できるツールセットを充実させることができます。



### 

​

ステップ2：MCP SSE プラグインをインストールする

  1. Difyプラグインマーケットプレイスで「MCP SSE」プラグインを検索・インストールしてください。



> 安定性を最優先する場合はプラグインバージョンv0.0.4の使用を推奨します。バージョンは詳細設定ページで変更可能。 

  2. プラグインページの「認証する」ボタンをクリックし、取得したZapier MCPサーバーURLを設定してください：


    
    
    {
      "server_name": {
        "url": "https://actions.zapier.com/mcp/*******/sse",
        "headers": {},
        "timeout": 5,
        "sse_read_timeout": 300
      }
    }

### 

​

ステップ3：Difyエージェントアプリを作成し、MCP SSE サービスを有効にする

  1. エージェントタイプのアプリを作成する



ナビゲーションから「ワークスタジオ」を選択し、アプリリストで「空白から作成」を選択してエージェントアプリタイプを選びます。アプリ名を入力して作成を完了します。

  2. MCP ツールを追加する



アプリツールバーで `Fetch MCP Tools` と `Call MCP Tool` をそれぞれ追加します。

  3. LLM を設定する



MCP の使用時には多くのトークンが消費される可能性があるため、よりコストパフォーマンスの高い LLM を使用することをお勧めします。このガイドでは、`deepseek-chat` モデルを例として使用します。[DeepSeek Platform](https://platform.deepseek.com/usage) で API キーを申請し、「設定」→「モデルプロバイダー」→「DeepSeek」に入力してください。

> モデルプロバイダーで DeepSeek モデルが見つからない場合は、Dify プラグインマーケットプレイスで DeepSeek プラグインをインストールしてください。

## 

​

使用シナリオ1：MCP サービスを使用して単一のメールを自動送信する

設定が完了したら、エージェントとの会話を通じて、メールドラフトを自動生成し、指定した受信者に送信できます。

会話ボックスで LLM にメール送信タスクを完了するよう指示します。MCP の実行が完了すると、メールは自動的に受信者に送信されます。

## 

​

使用シナリオ2：ワークフローで MCPエージェントStrategy を設定する

MCP SSE プラグインをツールとしてエージェントに追加するだけでなく、ワークフローでも MCPエージェント戦略プラグインを使用できます。インストール完了後、対応するエージェントノード内で設定します。具体的な手順は以下の通りです：

以下の JSON 構造をテンプレートとして使用し、`url` の値を MCP Server アドレスに置き換えます。修正後の完全な JSON を `MCP SERVER URL` 設定ボックスにコピー＆ペーストします：
    
    
    {
      "server_name": {
        "url": "https://actions.zapier.com/mcp/*******/sse",
        "headers": {},
        "timeout": 5,
        "sse_read_timeout": 300
      }
    }

設定完了後、ワークフローがこのエージェントノードに到達すると、プロンプト指示に従って、設定された Zapier MCP Server を利用してタスクを実行できます。下図のように、Gmail を呼び出してメールを送信します：

* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/plugins/best-practice/how-to-use-mcp-zapier.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20o-use-mcp-zap&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/plugins/best-practice%2Fhow-to-use-mcp-zapier.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[Slack ボットプラグインの開発](/ja-jp/plugins/best-practice/develop-a-slack-bot-plugin)[開発やデバッグのためのログの出力](/ja-jp/plugins/best-practice/how-to-print-strings-to-logs-for-debugging)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * プロジェクト背景
  * 前提条件
  * Dify で Zapier MCP サービスを初期化する
  * ステップ1：Zapier MCP Server URL を取得する
  * ステップ2：MCP SSE プラグインをインストールする
  * ステップ3：Difyエージェントアプリを作成し、MCP SSE サービスを有効にする
  * 使用シナリオ1：MCP サービスを使用して単一のメールを自動送信する
  * 使用シナリオ2：ワークフローで MCPエージェントStrategy を設定する



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/plugins/faq

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

プラグイン

よくある質問

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




プラグイン

# よくある質問

Copy page

## [このドキュメントはまもなく非推奨になりますドキュメント再編の一環として、このページは段階的に廃止されます。 _**このカードをクリックして**_ 、最新情報が含まれる更新版にリダイレクトしてください。新しいドキュメントに不一致や改善が必要な箇所を見つけた場合は、ページ下部の「問題を報告」ボタンを使用してください。](/plugin-dev-ja/0331-faq)

## 

​

プラグインのインストール時にアップロードが失敗する場合の対処方法は？

**エラー詳細** ：`PluginDaemonBadRequestError: plugin_unique_identifier is not valid` というエラーメッセージが表示されます。

**解決方法** ：プラグインプロジェクトの `manifest.yaml` ファイルと `/provider` パス配下の `.yaml` ファイルの `author` フィールドを GitHub ID に変更してください。

プラグインのパッケージングコマンドを再実行し、新しいプラグインパッケージをインストールしてください。

## 

​

プラグインインストール時のエラーの対処方法

**問題** : `plugin verification has been enabled, and the plugin you want to install has a bad signature` というエラーメッセージが表示された場合、どのように対処すればよいですか？

**解決方法** : `/docker/.env` 設定ファイルの末尾に以下の行を追加してください：  
`FORCE_VERIFYING_SIGNATURE=false`.

Dify サービスを再起動するには、以下のコマンドを実行してください：
    
    
    cd docker
    docker compose down
    docker compose up -d

このフィールドを追加すると、Dify プラットフォームは Dify Marketplace にリストされていない（つまり、未検証の）すべてのプラグインのインストールを許可します。

ただし、安全性を考慮して、未知のソースから提供されるプラグインは、テスト環境またはサンドボックス環境でまずインストールし、安全性を確認した後、本番環境にデプロイしてください。

* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/plugins/faq.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/plugins%2Ffaq.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[第三者署名検証のためにプラグインに署名する](/ja-jp/plugins/publish-plugins/signing-plugins-for-third-party-signature-verification)[DifySandbox](/ja-jp/development/backend/sandbox/README)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * プラグインのインストール時にアップロードが失敗する場合の対処方法は？
  * プラグインインストール時のエラーの対処方法



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/plugins/introduction

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

プラグイン

はじめに

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




プラグイン

# はじめに

Copy page

> コミュニティーバージョンでプラグイン機能を利用するには、バージョンをv1.0.0にアップデートしてください。

## 

​

**プラグインとは**

プラグインとは、開発者がより手軽に機能を拡張できる、サードパーティ製の拡張モジュールです。Difyプラットフォームには、Difyチームやコミュニティによってメンテナンスされた多くのツールがすでに用意されていますが、多様化するニッチなニーズを完全に満たせない場合があります。また、新しいツールをDifyプラットフォームに開発・統合するには、時間と手間がかかることが少なくありません。

そこで、よりアジャイルな開発を可能にするため、Difyのエコシステムをオープンにし、包括的なプラグイン開発SDKを提供することにしました。これにより、すべての開発者が**独自のツールを容易に構築し、サードパーティのモデルやツールをシームレスに統合** して、アプリケーションの可能性を飛躍的に向上させることができます。

## 

​

プラグインのメリット

新しいプラグインシステムは、従来のフレームワークの制約を超え、より豊富で強力な拡張機能を提供します。明確に定義されたシナリオに対応するために、5つの異なるプラグインタイプを用意しており、開発者はDifyアプリケーションを自由にカスタマイズし、強化することができます。

さらに、プラグインシステムは共有しやすいように設計されています。[Difyマーケットプレイス](https://marketplace.dify.ai/)、[GitHub](/ja-jp/plugins/publish-plugins/publish-plugin-on-personal-github-repo)、または[ローカルファイルパッケージ](/ja-jp/plugins/publish-plugins/package-plugin-file-and-publish)を通じてプラグインを配布できます。他の開発者は、これらのプラグインを迅速にインストールし、そのメリットを享受できます。

> Difyマーケットプレイスは、開発者向けのオープンなエコシステムであり、モデル、ツール、AIエージェント、拡張機能、プラグインバンドルなど、幅広いリソースを提供しています。マーケットプレイスを通じて、サードパーティのサービスを既存のDifyアプリケーションにシームレスに統合し、機能を強化し、Difyコミュニティ全体の発展に貢献できます。

新しいモデルを統合したい場合も、Difyの既存機能を拡張するための専用ツールを追加したい場合も、Dify マーケットプレイスには必要なリソースが揃っています。**より多くの開発者の皆様に参加していただき、Difyのエコシステムを共に発展させ、関係者全員に利益をもたらすことを願っています。**

## 

​

**プラグインの種類**

  * **モデル**

これらのプラグインは、さまざまなAIモデル（主要なLLMプロバイダーやカスタムモデルを含む）を統合し、LLM APIの設定とリクエストを処理します。モデルプラグインの作成の詳細については、[クイックスタート：モデルプラグイン](/ja-jp/plugins/quick-start/develop-plugins/tool-plugin)をご覧ください。

  * **ツール**

ツールとは、Chatflow、Workflow、Agentタイプのアプリケーションから呼び出すことができるサードパーティのサービスのことです。Difyアプリケーションの機能を拡張するためのAPI実装を提供します。たとえば、Google検索プラグインの開発については、[クイックスタート：ツールプラグイン](/ja-jp/plugins/quick-start/develop-plugins/tool-plugin)をご参照ください。

  * **エージェント戦略**

エージェント戦略プラグインは、エージェントノード内の推論および意思決定ロジックを定義します。これには、ツール選択、呼び出し、および結果処理などが含まれます。

  * エージェント戦略プラグインは、エージェントノード内部の推論および意思決定ロジックを定義します。これには、ツールの選択、実行、およびLLMから返された結果の処理ロジックが含まれます。詳細な開発ガイダンスについては、[クイックスタート：エージェント戦略プラグイン](/ja-jp/plugins/quick-start/develop-plugins/agent-strategy-plugin)をご参照ください。

  * **拡張機能**

よりシンプルなシナリオのエンドポイント機能のみを提供する軽量プラグインで、HTTPサービスを介して迅速な拡張を可能にします。基本的なAPI呼び出しを必要とする簡単な統合に最適です。詳細については、[クイックスタート：拡張機能プラグイン](/ja-jp/plugins/quick-start/develop-plugins/extension-plugin)をご参照ください。

  * **バンドル**

「プラグインバンドル」は、複数のプラグインをまとめたものです。バンドルを使用すると、厳選されたプラグインセットを一度にインストールできます。プラグインを1つずつ追加する手間が省けます。プラグインバンドルの作成の詳細については、[プラグイン開発：バンドルプラグイン](/ja-jp/plugins/quick-start/develop-plugins/bundle)をご覧ください。




### 

​

**プラグインの新機能**

  * **LLMのマルチモーダル対応を拡張**

プラグインを使用すると、LLMがマルチモーダルデータを処理する能力を高めることができます。開発者は、画像編集や動画処理などのタスクを追加できます。トリミングや背景の削除から、ポートレート画像の処理まで、幅広い用途に対応できます。

  * **開発者フレンドリーなデバッグ機能**

プラグインシステムは、一般的なIDEとデバッグツールをサポートしています。いくつかの環境変数を設定するだけで、SaaSとして実行されているDifyインスタンスにリモートで接続できます。Difyでプラグインに対して実行した操作は、デバッグのためにローカルランタイムに転送されます。

  * **永続的なデータストレージ**

より複雑なユースケースに対応するために、プラグインシステムにはデータ永続性が組み込まれています。

    * **プラグインレベルのデータストレージ** : ワークスペースレベルの情報をプラグインと共有して、より高度なカスタム機能を実現できます。
    * **組み込みのデータ管理** : プラグインはデータを確実に保存および管理できるため、複雑なビジネスロジックを容易に実装できます。
  * **便利な双方向通信**

プラグインは、Difyのコア機能と双方向に対話できるようになりました。

    * AIモデルの呼び出し
    * ツールの使用
    * アプリケーションへのアクセス
    * ナレッジベースとの対話
    * 関数ノードの呼び出し（質問分類、パラメータ抽出など）

この双方向メカニズムにより、プラグインは既存のDify機能を活用するだけでなく、スタンドアロンのゲートウェイとしても機能し、アプリケーションのユースケースを拡大します。

  * **強化されたエンドポイントのカスタマイズ機能**

既存のDify API（ChatbotやWorkflow APIなど）に加えて、プラグイン内にカスタムAPIを作成できるようになりました。開発者はビジネスロジックをプラグインとしてラップし、[Dify マーケットプレイス](https://marketplace.dify.ai/)でホストすることで、データ処理とリクエスト処理のエンドポイントサポートを自動的に得られます。




## 

​

詳しくはこちら

**クイックスタート**

プラグインをすばやくインストールして使用するには、以下を参照してください。

## [install-plugins.mdinstall-plugins.md](quick-start/install-plugins.md)

プラグインの開発を開始するには、以下を参照してください。

## [develop-pluginsdevelop-plugins](quick-start/develop-plugins/)

**プラグインの公開**

プラグインを[Dify Marketplace](https://marketplace.dify.ai/)で公開するには、必要な情報と利用方法に関するドキュメントを記入してください。その後、プラグインのコードを[GitHubリポジトリ](https://github.com/langgenius/dify-plugins)に提出してください。承認されると、マーケットプレイスに掲載されます。

## [publish-to-dify-marketplacepublish-to-dify-marketplace](publish-plugins/publish-to-dify-marketplace/)

公式のDifyマーケットプレイスに加えて、個人のGitHubリポジトリでプラグインをホストしたり、ファイルとしてパッケージ化して直接共有することもできます。

## [package-plugin-file-and-publish.mdpackage-plugin-file-and-publish.md](publish-plugins/package-plugin-file-and-publish.md)

* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/plugins/introduction.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20duct&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/plugins%2Fintroduction.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[ドキュメントへの貢献](/ja-jp/community/docs-contribution)[クイックスタート](/ja-jp/plugins/quick-start/README)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * プラグインとは
  * プラグインのメリット
  * プラグインの種類
  * プラグインの新機能
  * 詳しくはこちら



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/plugins/manage-plugins

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

プラグイン

プラグイン管理方法

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




プラグイン

# プラグイン管理方法

Copy page

このガイドは、ワークスペースの所有者や管理者向けに、プラグインの権限を設定し、管理する方法を詳しく説明します。プラグインの権限を管理することで、どのユーザーがプラグインに関連する操作を行えるかを定めることができます。

### 

​

**プラグイン権限の設定**

チームの所有者や管理者は、Difyプラットフォームのホームページ右上にある **「プラグイン」** ページから、次のプラグイン権限を設定できます：

  * **プラグインのインストールと管理**

この権限により、誰がプラグインをインストールや管理できるかを決めます。オプションには以下があります：

    * **Everyone（全員）** : ワークスペース内の全てのユーザーがプラグインをインストールや管理できる
    * **Admins（管理者）** : ワークスペースの管理者だけがプラグインをインストールや管理できる
    * **No one（無人）** : 誰もプラグインをインストールや管理できない
  * **プラグインのデバッグの権限**

この権限により、誰がプラグインのデバッグを行えるかを決めます。オプションには以下があります：

    * **Everyone（全員）** : ワークスペース内の全てのユーザーがプラグインをデバッグできる
    * **Admins（管理者）** : ワークスペースの管理者だけがプラグインをデバッグできる
    * **No one（無人）** : 誰もプラグインをデバッグできない



### 

​

**プラグインの更新**

Difyプラットフォームの右上にある「プラグイン」ボタンをクリックし、更新が必要なプラグインを選択。その後、プラグインタイトルの隣にある **「アップグレード」** ボタンをクリックしてください。

### 

​

**プラグインの削除方法**

Difyプラットフォームの右上にある「プラグイン」ボタンをクリックし、現在ワークスペースにインストールされているプラグイン一覧を表示します。プラグインの詳細ページで、「削除」アイコンまたは「削除」ボタンをクリックして、プラグインを削除してください。

* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/plugins/manage-plugins.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20e-plug&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/plugins%2Fmanage-plugins.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[プラグインのデバッグ方法](/ja-jp/plugins/quick-start/debug-plugin)[スキーマ仕様](/ja-jp/plugins/schema-definition/README)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * プラグイン権限の設定
  * プラグインの更新
  * プラグインの削除方法



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/plugins/publish-plugins/README

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

プラグインの公開

プラグインの公開

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

    * [プラグインの公開](/ja-jp/plugins/publish-plugins/README)
    * [PRを通じてプラグインを自動的に公開する](/ja-jp/plugins/publish-plugins/plugin-auto-publish-pr)
    * Difyマーケットプレイスへの公開

    * [個人GitHubリポジトリへの公開](/ja-jp/plugins/publish-plugins/publish-plugin-on-personal-github-repo)
    * [ローカルでの公開と共有](/ja-jp/plugins/publish-plugins/package-plugin-file-and-publish)
    * [第三者署名検証のためにプラグインに署名する](/ja-jp/plugins/publish-plugins/signing-plugins-for-third-party-signature-verification)
  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




プラグインの公開

# プラグインの公開

Copy page

## [このドキュメントはまもなく非推奨になりますドキュメント再編の一環として、このページは段階的に廃止されます。 _**このカードをクリックして**_ 、最新情報が含まれる更新版にリダイレクトしてください。新しいドキュメントに不一致や改善が必要な箇所を見つけた場合は、ページ下部の「問題を報告」ボタンを使用してください。](/plugin-dev-ja/0321-release-overview)

## 

​

公開方法

異なる開発者のニーズに対応するため、Difyでは以下の3つのプラグイン公開方法を提供しています：

### 

​

マーケットプレイス

**概要：** Dify公式のプラグインマーケットプレイスです。ユーザーは各種プラグインの閲覧、検索、ワンクリックでのインストールが可能です。

**特徴：**

  * 審査を経て公開される安全で信頼性の高いプラグイン。
  * 個人またはチームのWorkspaceに直接インストール可能。



**公開手順：**

  * プラグインプロジェクトをDify Marketplaceの[リポジトリに](https://github.com/langgenius/dify-plugins)提出。
  * 公式審査を経て、マーケットプレイスで公開され、他のユーザーがインストール可能になります。



詳細については以下をご参照ください：

[Dify Marketplaceへの公開](/ja-jp/plugins/publish-plugins/publish-to-dify-marketplace/README)

### 

​

GitHubリポジトリ

**概要：** プラグインをGitHub上でオープンソース化または管理し、他者が閲覧、ダウンロード、インストールしやすくします。

**特徴：**

  * バージョン管理とオープンソース共有が容易。
  * プラットフォームの審査なしで、プラグインリンクから直接インストール可能。



**公開手順：**

  * プラグインコードをGitHubリポジトリにプッシュ。
  * リポジトリリンクを共有し、ユーザーはリンクからDify Workspaceにプラグインを統合可能。



**詳細については以下をご参照ください：**

[個人GitHubリポジトリへの公開](/ja-jp/plugins/publish-plugins/publish-plugin-on-personal-github-repo)

### 

​

プラグインファイル（ローカルインストール）

**概要：** プラグインをローカルファイル（.difypkg形式など）にパッケージ化し、ファイル共有形式で他者にインストールを提供します。

**特徴：**

  * オンラインプラットフォームに依存せず、迅速かつ柔軟なプラグイン共有が可能。
  * プライベートプラグインや内部テスト用に適しています。



**公開手順：**

  * プラグインプロジェクトをローカルファイルにパッケージ化。
  * Difyプラグインページでプラグインのアップロードをクリックし、ローカルファイルを選択してインストール。



プラグインプロジェクトをローカルファイルにパッケージ化して他者と共有し、プラグインページでファイルをアップロードすることで、Dify Workspaceにインストールできます。

詳細については以下をご参照ください：

[ローカルでの公開と共有](./package-plugin-file-and-publish)

## 

​

公開に関する推奨事項

  * プラグインを広く普及させたい場合 → Marketplaceの利用を推奨。公式審査によりプラグインの品質を保証し、露出度を高めます。
  * オープンソースプロジェクトの共有 → GitHubの利用を推奨。バージョン管理とコミュニティコラボレーションが容易です。
  * 迅速な配布や内部テスト → プラグインファイルの利用を推奨。簡単かつ効率的なインストールと共有が可能です。



> Difyマーケットプレイス以外のプラグインをインストールする際、サードパーティの署名検証に関する問題が発生する可能性があります。対処方法については、[第三者署名検証のためにプラグインに署名する](./signing-plugins-for-third-party-signature-verification)をご参照ください。

* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/plugins/publish-plugins/README.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/plugins/publish-plugins%2FREADME.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[開発やデバッグのためのログの出力](/ja-jp/plugins/best-practice/how-to-print-strings-to-logs-for-debugging)[PRを通じてプラグインを自動的に公開する](/ja-jp/plugins/publish-plugins/plugin-auto-publish-pr)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * 公開方法
  * マーケットプレイス
  * GitHubリポジトリ
  * プラグインファイル（ローカルインストール）
  * 公開に関する推奨事項



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/plugins/publish-plugins/package-plugin-file-and-publish

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

プラグインの公開

ローカルでの公開と共有

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

    * [プラグインの公開](/ja-jp/plugins/publish-plugins/README)
    * [PRを通じてプラグインを自動的に公開する](/ja-jp/plugins/publish-plugins/plugin-auto-publish-pr)
    * Difyマーケットプレイスへの公開

    * [個人GitHubリポジトリへの公開](/ja-jp/plugins/publish-plugins/publish-plugin-on-personal-github-repo)
    * [ローカルでの公開と共有](/ja-jp/plugins/publish-plugins/package-plugin-file-and-publish)
    * [第三者署名検証のためにプラグインに署名する](/ja-jp/plugins/publish-plugins/signing-plugins-for-third-party-signature-verification)
  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




プラグインの公開

# ローカルでの公開と共有

Copy page

## [このドキュメントはまもなく非推奨になりますドキュメント再編の一環として、このページは段階的に廃止されます。 _**このカードをクリックして**_ 、最新情報が含まれる更新版にリダイレクトしてください。新しいドキュメントに不一致や改善が必要な箇所を見つけた場合は、ページ下部の「問題を報告」ボタンを使用してください。](/plugin-dev-ja/0322-release-by-file)

プラグイン開発完了後、プラグインプロジェクトをローカルファイルとしてパッケージ化し、他のユーザーと共有することができます。プラグインファイルを使用してDify Workspaceにインストールすることが可能です。

  * **特徴：**

    * **バージョン管理** と**オープンソース共有** が容易
    * ユーザーはプラグインリンクから直接インストール可能（プラットフォームの審査不要）
  * **公開手順：**

    * プラグインコードをGitHubリポジトリにプッシュ
    * リポジトリリンクを共有し、ユーザーはそのリンクを通じて**Dify Workspace** に統合可能



本文では、プラグインプロジェクトをローカルファイルにパッケージ化する方法と、そのローカルファイルを使用してプラグインをインストールする方法について説明します。

## 

​

前提条件

Dify プラグイン開発ツールが必要です。詳細は[開発ツールの初期化ガイド](/ja-jp/plugins/quick-start/develop-plugins/initialize-development-tools)をご参照ください。

設定完了後、ターミナルで`dify version`コマンドを実行し、バージョン情報が表示されることを確認して、必要な開発ツールがインストールされていることを確認してください。

## 

​

プラグインのパッケージ化

> パッケージ化の前に、プラグインの`manifest.yaml`ファイル内のauthorフィールドがGitHub IDと一致していることを確認してください。

プラグインプロジェクトの開発完了後、[リモート接続テスト](/ja-jp/plugins/quick-start/develop-plugins/extension-plugin)が完了していることを確認してください。プラグインプロジェクトの上位ディレクトリに移動し、以下のパッケージ化コマンドを実行します：

`dify plugin package ./your_plugin_project`

コマンド実行後、現在のパスに`.difypkg`拡張子のファイルが生成されます。

## 

​

プラグインのインストール

Difyプラグイン管理ページにアクセスし、右上の「プラグインをインストール」→「ローカルファイルからインストール」を選択するか、プラグインファイルをページの空白部分にドラッグ＆ドロップしてインストールできます。

## 

​

プラグインの公開

パッケージ化したプラグインファイルを他のユーザーと直接共有するか、インターネット上にアップロードして公開することができます。

* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/plugins/publish-plugins/package-plugin-file-and-publish.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20ge-plugin-file-and-publ&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/plugins/publish-plugins%2Fpackage-plugin-file-and-publish.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[個人GitHubリポジトリへの公開](/ja-jp/plugins/publish-plugins/publish-plugin-on-personal-github-repo)[第三者署名検証のためにプラグインに署名する](/ja-jp/plugins/publish-plugins/signing-plugins-for-third-party-signature-verification)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * 前提条件
  * プラグインのパッケージ化
  * プラグインのインストール
  * プラグインの公開



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/plugins/publish-plugins/plugin-auto-publish-pr

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

プラグインの公開

PRを通じてプラグインを自動的に公開する

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

    * [プラグインの公開](/ja-jp/plugins/publish-plugins/README)
    * [PRを通じてプラグインを自動的に公開する](/ja-jp/plugins/publish-plugins/plugin-auto-publish-pr)
    * Difyマーケットプレイスへの公開

    * [個人GitHubリポジトリへの公開](/ja-jp/plugins/publish-plugins/publish-plugin-on-personal-github-repo)
    * [ローカルでの公開と共有](/ja-jp/plugins/publish-plugins/package-plugin-file-and-publish)
    * [第三者署名検証のためにプラグインに署名する](/ja-jp/plugins/publish-plugins/signing-plugins-for-third-party-signature-verification)
  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




プラグインの公開

# PRを通じてプラグインを自動的に公開する

Copy page

## [このドキュメントはまもなく非推奨になりますドキュメント再編の一環として、このページは段階的に廃止されます。 _**このカードをクリックして**_ 、最新情報が含まれる更新版にリダイレクトしてください。新しいドキュメントに不一致や改善が必要な箇所を見つけた場合は、ページ下部の「問題を報告」ボタンを使用してください。](/plugin-dev-ja/0321-plugin-auto-publish-pr)

### 

​

背景

プラグイン貢献者が**他のユーザーにすでに使用されているDifyプラグイン** を更新する必要がある場合、そのプロセスは非常に煩雑です：貢献者はまずプラグインのソースコードを修正してバージョン番号を更新し、変更をプラグインソースリポジトリにプッシュし、フォークしたdify-pluginリポジトリに新しいブランチを作成する必要があります。その後、プラグインを手動でパッケージ化し、パッケージファイルをアップロードし、元のdify-pluginリポジトリにマージするためのPRを作成する必要があります。このプロセスはプラグインコードが変更されるたびに繰り返す必要があり、時間がかかり非効率的です。

このワークフローを簡素化するために、**Plugin Auto-PR** と呼ばれるGitHub Actionsベースの自動化ワークフローを構築しました。このツールを使用すると、プラグイン貢献者はプラグインのパッケージ化、ブランチのプッシュ、PRの作成を一度の操作で完了できます。

### 

​

概念紹介

#### 

​

GitHub Actions

GitHub Actionsは、GitHubが提供する組み込みのCI/CDサービスで、様々なビルド、テスト、デプロイタスクを自動化します。

**動作原理** ：トリガー条件（コードのプッシュなど）が満たされると、GitHubは自動的に仮想マシンを割り当ててワークフローを実行します。すべての操作はGitHubクラウドで完了します。

**無料枠の制限** ：

  * 公開リポジトリ：無制限
  * プライベートリポジトリ：月2000分



#### 

​

Plugin Auto-PR

**動作原理** ：

  1. プラグインソースリポジトリのmainブランチにコードをプッシュすると、ワークフローがトリガーされます
  2. ワークフローは`manifest.yaml`ファイルからプラグイン情報を読み取ります
  3. プラグインを自動的に`.difypkg`ファイルとしてパッケージ化します
  4. パッケージファイルをフォークした`dify-plugins`リポジトリにプッシュします
  5. 新しいブランチを作成して変更をコミットします
  6. 上流リポジトリへのマージを自動的にPRで要求します



### 

​

環境準備

#### 

​

リポジトリ要件

  * すでに独自のプラグインソースコードリポジトリがある（例：`your-name/plugin-source`）
  * すでに独自のフォークしたプラグインリポジトリがある（例：`your-name/dify-plugins`）


    
    
    dify-plugins/
    └── your-author-name
        └── plugin-name

#### 

​

権限要件

このワークフローが正常に機能するには、適切な権限が必要です：

  * 十分な権限を持つGitHub Personal Access Token（PAT）を作成する必要があります
  * そのPATはフォークしたリポジトリにコードをプッシュする権限が必要です
  * そのPATは上流リポジトリにPRを作成する権限が必要です



### 

​

パラメータと設定の詳細

#### 

​

必須パラメータ

プラグイン自動公開ワークフローでは、以下の重要な要素を正しく設定する必要があります：

**manifest.yamlファイル** ：これは自動化プロセス全体の中核となる設定ソースです。以下のフィールドが正しいことを確認する必要があります：

  * `name`：プラグイン名（パッケージ名とブランチ名の生成に使用）
  * `version`：バージョン番号（更新のたびに増分する必要あり）
  * `author`：GitHubユーザー名（ターゲットリポジトリパスの決定に使用）



**PLUGIN_ACTION Secret** ：プラグインソースリポジトリにこのシークレットを正しく設定する必要があります。

  * 値の要件：十分な権限を持つPersonal Access Token（PAT）である必要があります
  * 権限要件：フォークしたリポジトリにブランチをプッシュし、上流リポジトリにPRを作成する能力



#### 

​

自動生成されるパラメータ

ワークフローは**以下を自動的に処理** し、手動介入は不要です：

  * GitHubユーザー名：`manifest.yaml`の`author`フィールドから読み取り
  * 作者フォルダ名：`author`フィールドと一致
  * プラグイン名：`manifest.yaml`の`name`フィールドから読み取り
  * ブランチ名：`bump-{plugin-name}-plugin-{version}`
  * パッケージファイル名：`{plugin-name}-{version}.difypkg`
  * PRのタイトルと内容：プラグイン名とバージョンに基づいて自動生成



### 

​

インストールと設定手順

1

リポジトリの準備

公式の`dify-plugins`リポジトリをフォークし、独自のプラグインソースリポジトリがあることを確認します。

2

シークレットの設定

プラグインソースリポジトリに移動し、**Settings > Secrets and variables > Actions > New repository secret**をクリックして、GitHubシークレットを作成します：

  * 名前：`PLUGIN_ACTION`
  * 値：ターゲットリポジトリ（`your-name/dify-plugins`）への書き込み権限を持つGitHub Personal Access Token（PAT）



3

ワークフローファイルの作成

リポジトリに`.github/workflows/`ディレクトリを作成し、このディレクトリに`plugin-publish.yml`という名前のファイルを作成し、以下の内容をファイルにコピーします：
    
    
    # .github/workflows/auto-pr.yml
    name: Auto Create PR on Main Push
    
    on:
      push:
        branches: [ main ]  # Trigger on push to main
    
    jobs:
      create_pr: # Renamed job for clarity
        runs-on: ubuntu-latest
        steps:
          - name: Checkout code
            uses: actions/checkout@v3
    
          - name: Print working directory # Kept for debugging
            run: |
              pwd
              ls -la
    
          - name: Download CLI tool
            run: |
              # Create bin directory in runner temp
              mkdir -p $RUNNER_TEMP/bin
              cd $RUNNER_TEMP/bin
    
              # Download CLI tool
              wget https://github.com/langgenius/dify-plugin-daemon/releases/download/0.0.6/dify-plugin-linux-amd64
              chmod +x dify-plugin-linux-amd64
    
              # Show download location and file
              echo "CLI tool location:"
              pwd
              ls -la dify-plugin-linux-amd64
    
          - name: Get basic info from manifest # Changed step name and content
            id: get_basic_info
            run: |
              PLUGIN_NAME=$(grep "^name:" manifest.yaml | cut -d' ' -f2)
              echo "Plugin name: $PLUGIN_NAME"
              echo "plugin_name=$PLUGIN_NAME" >> $GITHUB_OUTPUT
    
              VERSION=$(grep "^version:" manifest.yaml | cut -d' ' -f2)
              echo "Plugin version: $VERSION"
              echo "version=$VERSION" >> $GITHUB_OUTPUT
    
              # If the author's name is not your github username, you can change the author here
              AUTHOR=$(grep "^author:" manifest.yaml | cut -d' ' -f2)
              echo "Plugin author: $AUTHOR"
              echo "author=$AUTHOR" >> $GITHUB_OUTPUT
    
          - name: Package Plugin
            id: package
            run: |
              # Use the downloaded CLI tool to package
              cd $GITHUB_WORKSPACE
              # Use variables for package name
              PACKAGE_NAME="${{ steps.get_basic_info.outputs.plugin_name }}-${{ steps.get_basic_info.outputs.version }}.difypkg"
              # Use CLI from runner temp
              $RUNNER_TEMP/bin/dify-plugin-linux-amd64 plugin package . -o "$PACKAGE_NAME"
    
              # Show packaging result
              echo "Package result:"
              ls -la "$PACKAGE_NAME"
              echo "package_name=$PACKAGE_NAME" >> $GITHUB_OUTPUT
    
              # Show full file path and directory structure (kept for debugging)
              echo "\\nFull file path:"
              pwd
              echo "\\nDirectory structure:"
              tree || ls -R
    
          - name: Checkout target repo
            uses: actions/checkout@v3
            with:
              # Use author variable for repository
              repository: ${{steps.get_basic_info.outputs.author}}/dify-plugins
              path: dify-plugins
              token: ${{ secrets.PLUGIN_ACTION }}
              fetch-depth: 1 # Fetch only the last commit to speed up checkout
              persist-credentials: true # Persist credentials for subsequent git operations
    
          - name: Prepare and create PR
            run: |
              # Debug info (kept)
              echo "Debug: Current directory $(pwd)"
              # Use variable for package name
              PACKAGE_NAME="${{ steps.get_basic_info.outputs.plugin_name }}-${{ steps.get_basic_info.outputs.version }}.difypkg"
              echo "Debug: Package name: $PACKAGE_NAME"
              ls -la
    
              # Move the packaged file to the target directory using variables
              mkdir -p dify-plugins/${{ steps.get_basic_info.outputs.author }}/${{ steps.get_basic_info.outputs.plugin_name }}
              mv "$PACKAGE_NAME" dify-plugins/${{ steps.get_basic_info.outputs.author }}/${{ steps.get_basic_info.outputs.plugin_name }}/
    
              # Enter the target repository directory
              cd dify-plugins
    
              # Configure git
              git config user.name "GitHub Actions"
              git config user.email "actions@github.com"
    
              # Ensure we are on the latest main branch
              git fetch origin main
              git checkout main
              git pull origin main
    
              # Create and switch to a new branch using variables and new naming convention
              BRANCH_NAME="bump-${{ steps.get_basic_info.outputs.plugin_name }}-plugin-${{ steps.get_basic_info.outputs.version }}"
              git checkout -b "$BRANCH_NAME"
    
              # Add and commit changes (using git add .)
              git add .
              git status # for debugging
              # Use variables in commit message
              git commit -m "bump ${{ steps.get_basic_info.outputs.plugin_name }} plugin to version ${{ steps.get_basic_info.outputs.version }}"
    
              # Push to remote (use force just in case the branch existed before from a failed run)
              git push -u origin "$BRANCH_NAME" --force
    
              # Confirm branch has been pushed and wait for sync (GitHub API might need a moment)
              git branch -a
              echo "Waiting for branch to sync..."
              sleep 10  # Wait 10 seconds for branch sync
    
          - name: Create PR via GitHub API
            env:
              GH_TOKEN: ${{ secrets.PLUGIN_ACTION }} # Use the provided token for authentication
            run: |
              gh pr create \
                --repo langgenius/dify-plugins \
                --head "${{ steps.get_basic_info.outputs.author }}:${{ steps.get_basic_info.outputs.plugin_name }}-${{ steps.get_basic_info.outputs.version }}" \
                --base main \
                --title "bump ${{ steps.get_basic_info.outputs.plugin_name }} plugin to version ${{ steps.get_basic_info.outputs.version }}" \
                --body "bump ${{ steps.get_basic_info.outputs.plugin_name }} plugin package to version ${{ steps.get_basic_info.outputs.version }}
    
                Changes:
                - Updated plugin package file" || echo "PR already exists or creation skipped." # Handle cases where PR already exists
    
          - name: Print environment info # Kept for debugging
            run: |
              echo "GITHUB_WORKSPACE: $GITHUB_WORKSPACE"
              echo "Current directory contents:"
              ls -R

4

manifest.yamlの更新

`manifest.yaml`ファイルが以下のフィールドを正しく設定していることを確認します：
    
    
    version: 0.0.x  # バージョン番号
    author: your-github-username  # GitHubユーザー名/作者名
    name: your-plugin-name  # プラグイン名

### 

​

使用ガイド

#### 

​

初回セットアッププロセス

自動公開ワークフローを初めて設定する場合は、次の手順を完了します：

  1. 公式の`dify-plugins`リポジトリをフォークしていることを確認します
  2. プラグインソースリポジトリの構造が正しいことを確認します
  3. プラグインソースリポジトリに`PLUGIN_ACTION Secret`を設定します
  4. ワークフローファイル`.github/workflows/plugin-publish.yml`を作成します
  5. `manifest.yaml`ファイルの`name`と`author`フィールドが正しく設定されていることを確認します



#### 

​

以降の更新プロセス

セットアップが完了したら、新しいバージョンを公開する必要がある場合は、以下を行うだけです：

  1. プラグインコードを修正します
  2. `manifest.yaml`の`version`フィールドを更新します



  3. すべての変更をmainブランチにプッシュします
  4. GitHub Actionsがパッケージング、ブランチ作成、PR提出を自動的に完了するのを待ちます



### 

​

実行結果

プラグインソースリポジトリのmainブランチにコードをプッシュすると、GitHub Actionsは自動的に公開プロセスを実行します：

  * プラグインを`{plugin-name}-{version}.difypkg`形式で自動的にパッケージ化します
  * パッケージファイルをターゲットリポジトリに自動的にプッシュします
  * フォークリポジトリへのマージを自動的にPRで作成します



### 

​

サンプルリポジトリ

完全な設定の詳細とベストプラクティスを理解するために、[サンプルリポジトリ](https://github.com/Yevanchen/exa-in-dify)を参照してください。`

* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/plugins/publish-plugins/plugin-auto-publish-pr.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20n-auto-publish&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/plugins/publish-plugins%2Fplugin-auto-publish-pr.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[プラグインの公開](/ja-jp/plugins/publish-plugins/README)[Dify Marketplaceへの公開](/ja-jp/plugins/publish-plugins/publish-to-dify-marketplace/README)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * 背景
  * 概念紹介
  * GitHub Actions
  * Plugin Auto-PR
  * 環境準備
  * リポジトリ要件
  * 権限要件
  * パラメータと設定の詳細
  * 必須パラメータ
  * 自動生成されるパラメータ
  * インストールと設定手順
  * 使用ガイド
  * 初回セットアッププロセス
  * 以降の更新プロセス
  * 実行結果
  * サンプルリポジトリ



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/plugins/publish-plugins/publish-plugin-on-personal-github-repo

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

プラグインの公開

個人GitHubリポジトリへの公開

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

    * [プラグインの公開](/ja-jp/plugins/publish-plugins/README)
    * [PRを通じてプラグインを自動的に公開する](/ja-jp/plugins/publish-plugins/plugin-auto-publish-pr)
    * Difyマーケットプレイスへの公開

    * [個人GitHubリポジトリへの公開](/ja-jp/plugins/publish-plugins/publish-plugin-on-personal-github-repo)
    * [ローカルでの公開と共有](/ja-jp/plugins/publish-plugins/package-plugin-file-and-publish)
    * [第三者署名検証のためにプラグインに署名する](/ja-jp/plugins/publish-plugins/signing-plugins-for-third-party-signature-verification)
  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




プラグインの公開

# 個人GitHubリポジトリへの公開

Copy page

## [このドキュメントはまもなく非推奨になりますドキュメント再編の一環として、このページは段階的に廃止されます。 _**このカードをクリックして**_ 、最新情報が含まれる更新版にリダイレクトしてください。新しいドキュメントに不一致や改善が必要な箇所を見つけた場合は、ページ下部の「問題を報告」ボタンを使用してください。](/plugin-dev-ja/0322-release-to-individual-github-repo)

GitHubリポジトリリンクを通じたプラグインのインストールに対応しています。プラグイン開発完了後、公開GitHubリポジトリにプラグインを公開して、他のユーザーがダウンロードして使用できるようにすることができます。この方法には以下の利点があります：

  * 個人管理：プラグインのコードとアップデートを完全にコントロール可能
  * 迅速な共有：GitHubリンクを通じて他のユーザーやチームメンバーと簡単に共有でき、テストや使用が容易
  * コラボレーションとフィードバック：プラグインをオープンソース化することで、GitHubの潜在的な協力者を引き付け、プラグインの迅速な改善が可能



このガイドでは、GitHubリポジトリへのプラグインの公開方法を説明します。

## 

​

準備作業

  * GitHubアカウント
  * 新規パブリックGitHubリポジトリの作成
  * ローカルにGitツールがインストール済み



GitHubの基本知識については、[GitHubドキュメント](https://docs.github.com/en/repositories/creating-and-managing-repositories/creating-a-new-repository)を参照してください。

## 

​

1\. プラグインプロジェクトの完成

パブリックGitHubへのアップロードは、プラグインを公開することを意味します。プラグインのデバッグと検証が完了し、`README.md`ファイルが適切に作成されていることを確認してください。

説明文書には以下の内容を含めることを推奨します：

  * プラグインの概要と機能説明
  * インストールと設定手順
  * 使用例
  * 連絡先または貢献ガイドライン



## 

​

2\. ローカルリポジトリの初期化

プラグインを公開アップロードする前に、デバッグと検証作業が完了していることを確認してください。ターミナルでプラグインプロジェクトフォルダに移動し、以下のコマンドを実行します：
    
    
    git init
    git add .
    git commit -m "Initial commit: Add plugin files"

Gitを初めて使用する場合は、Gitのユーザー名とメールアドレスの設定が必要な場合があります：
    
    
    git config --global user.name "Your Name"
    git config --global user.email "your.email@example.com"

## 

​

3\. リモートリポジトリの接続

以下のコマンドを使用して、ローカルリポジトリをGitHubリポジトリに接続します：
    
    
    git remote add origin https://github.com/<your-username>/<repository-name>.git

## 

​

4\. プラグインファイルのアップロード

> プラグインプロジェクトをプッシュする前に、`manifest.yaml`ファイルのauthorフィールドがGitHub IDと一致していることを確認してください。

プラグインプロジェクトをGitHubリポジトリにプッシュします：
    
    
    git branch -M main
    git push -u origin main

コードのアップロード時には、後のパッケージング用にタグを付けることを推奨します：
    
    
    git tag -a v0.0.1 -m "Release version 0.0.1"
    git push origin v0.0.1

## 

​

5\. プラグインコードのパッケージング

GitHubリポジトリのReleasesページで新しいバージョンリリースを作成します。リリース時にはプラグインファイルをアップロードする必要があります。プラグインファイルのパッケージング方法の詳細については、[プラグインのパッケージング](/ja-jp/plugins/publish-plugins/package-plugin-file-and-publish)をご覧ください。

## 

​

GitHubからのプラグインインストール

他のユーザーは、GitHubリポジトリアドレスを通じてプラグインをインストールできます。Difyプラットフォームのプラグイン管理ページにアクセスし、GitHubからのインストールを選択し、リポジトリアドレスを入力後、バージョン番号とパッケージファイルを選択してインストールを完了します。

* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/plugins/publish-plugins/publish-plugin-on-personal-github-repo.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20sh-plugin-on-personal-github-r&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/plugins/publish-plugins%2Fpublish-plugin-on-personal-github-repo.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[プラグインのプライバシー保護に関するガイドライン](/ja-jp/plugins/publish-plugins/publish-to-dify-marketplace/plugin-privacy-protection-guidelines)[ローカルでの公開と共有](/ja-jp/plugins/publish-plugins/package-plugin-file-and-publish)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * 準備作業
  * 1\. プラグインプロジェクトの完成
  * 2\. ローカルリポジトリの初期化
  * 3\. リモートリポジトリの接続
  * 4\. プラグインファイルのアップロード
  * 5\. プラグインコードのパッケージング
  * GitHubからのプラグインインストール



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/plugins/publish-plugins/publish-to-dify-marketplace/README

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

Difyマーケットプレイスへの公開

Dify Marketplaceへの公開

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

    * [プラグインの公開](/ja-jp/plugins/publish-plugins/README)
    * [PRを通じてプラグインを自動的に公開する](/ja-jp/plugins/publish-plugins/plugin-auto-publish-pr)
    * Difyマーケットプレイスへの公開

      * [Dify Marketplaceへの公開](/ja-jp/plugins/publish-plugins/publish-to-dify-marketplace/README)
      * [プラグイン開発者ガイドライン](/ja-jp/plugins/publish-plugins/publish-to-dify-marketplace/plugin-developer-guidelines)
      * [プラグインのプライバシー保護に関するガイドライン](/ja-jp/plugins/publish-plugins/publish-to-dify-marketplace/plugin-privacy-protection-guidelines)
    * [個人GitHubリポジトリへの公開](/ja-jp/plugins/publish-plugins/publish-plugin-on-personal-github-repo)
    * [ローカルでの公開と共有](/ja-jp/plugins/publish-plugins/package-plugin-file-and-publish)
    * [第三者署名検証のためにプラグインに署名する](/ja-jp/plugins/publish-plugins/signing-plugins-for-third-party-signature-verification)
  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




Difyマーケットプレイスへの公開

# Dify Marketplaceへの公開

Copy page

## [このドキュメントはまもなく非推奨になりますドキュメント再編の一環として、このページは段階的に廃止されます。 _**このカードをクリックして**_ 、最新情報が含まれる更新版にリダイレクトしてください。新しいドキュメントに不一致や改善が必要な箇所を見つけた場合は、ページ下部の「問題を報告」ボタンを使用してください。](/plugin-dev-ja/0322-release-to-dify-marketplace)

Dify Marketplaceは、Difyプラットフォームを利用する世界中のユーザーにより強力で柔軟な機能拡張を提供することを目指しています。皆様の貢献は、このプラットフォームの可能性をさらに広げることにつながります。

  * **特徴：**

    * 審査を経て公開される安全で信頼性の高いプラグイン。
    * 個人またはチームのWorkspaceに直接インストール可能。
  * **公開手順：**

    * プラグインプロジェクトをDify Marketplaceのリポジトリに提出。
    * 公式審査を経て、マーケットプレイスで公開され、他のユーザーがインストール可能に。



初めてプラグインを提出する開発者の方も、経験豊富な貢献者の方も、このガイドラインを通じて明確な公開プロセスとベストプラクティスをご提供し、プラグインの円滑な公開とコミュニティへの価値提供を支援いたします。

より開放的で革新的なプラグインエコシステムの構築に、ぜひご参加ください！

プラグインの公開フロー図：

## 

​

プラグイン公開プロセス

Dify Marketplaceへのプラグイン公開は、以下の手順で行います：

  1. Dify Pluginリポジトリをフォーク
  2. 新しいブランチを作成し、プラグインのコードとpkgファイルを該当カテゴリにアップロード
  3. Pull Request (PR)を提出し、審査を待機
  4. 審査通過後、プラグインコードがMainブランチにマージされ、自動的にDify Marketplaceに公開



## 

​

プラグイン開発チェックリスト

### 

​

1\. Pull Request (PR)提出前の確認事項

**1.1 プラグインの機能性とドキュメントの完全性**

  * プラグインが正常に動作することを確認。
  * 包括的なREADMEファイルの提供：
    * セットアップ手順と使用ガイド。
    * サービス接続に必要なコード、API、認証情報などの情報。
  * ユーザー情報の収集はサービス接続とプラグイン機能の改善のみに使用。



**1.2 プラグインの価値提案の検証**

  * Difyユーザーに独自の価値を提供することを確認。
  * Difyや他のプラグインにない機能やサービスを導入。
  * コミュニティ基準の遵守：
    * 非暴力的なコンテンツ、グローバルユーザーへの配慮。
    * 統合サービスの関連ポリシーへの準拠。
  * **類似プラグインの確認方法：**
    * 既存のプラグインやPRと重複する機能の提出を避ける（以下の場合を除く）：
      * 新機能の導入。
      * パフォーマンスの改善。
    * プラグインの独自性の判断基準：
      * 既存機能の軽微な調整（言語パラメータの追加など）の場合は、既存プラグインの拡張を推奨。
      * 大幅な機能変更（バッチ処理の最適化やエラー処理の改善など）の場合は、新規プラグインとして提出可能。
      * 不明な場合は、PRに新規プラグインが必要な理由を簡潔に説明してください。



例：

Google検索プラグインの場合、単一の検索クエリを受け取り、Google検索APIを使用して検索結果リストを出力します。

類似の実装で言語パラメータの追加程度の変更であれば、既存プラグインの拡張を推奨します。

一方、バッチ検索の最適化やエラー処理の改善など、新しい実装方法を導入する場合は、独立したプラグインとして審査対象となります。

### 

​

2\. Pull Request (PR)審査中の注意事項

レビュアーからの質問やフィードバックへの積極的な対応：

  * 14日以内に未解決のPRコメントは期限切れとしてマーク（再開可能）。
  * 30日以内に未解決のPRコメントはクローズ（再開不可、新規PR必要）。



### 

​

3\. Pull Request (PR)審査通過後

**3.1 継続的なメンテナンス**

  * ユーザーから報告された問題や機能リクエストへの対応。
  * 重要なAPI変更時のプラグイン移行： Difyは変更通知と移行手順を事前に公開。 Difyエンジニアが移行サポートを提供。



**3.2 Marketplace公開ベータテスト期間の制限** 既存プラグインへの破壊的変更を避ける。

## 

​

審査プロセス

**審査順序**

先着順でPRを処理。審査は1週間以内に開始。遅延がある場合、レビュアーがPR作成者にコメントで通知。

**審査のポイント**

プラグイン名、説明、設定手順の明確性と有用性の確認。

Manifestファイルのフォーマット規格への準拠と有効な作者連絡先情報の確認。

**プラグインの機能性と関連性**

  * [提供された設定手順](/ja-jp/plugins/quick-start/develop-plugins/bundle)に基づくプラグインのテスト。
  * Difyエコシステムにおけるプラグインの妥当性の確認。



[Dify.ai](https://dify.ai/)はプラグイン提出の承認または却下の権利を有します。

## 

​

よくある質問

Q: プラグインの独自性をどのように判断すればよいですか？

A: 例えば、Google検索プラグインに言語パラメータを追加する程度の変更は既存プラグインの拡張として提出すべきですが、バッチ処理の最適化やエラー処理の改善など、大幅な機能改善がある場合は新規プラグインとして提出可能です。

Q: PRが期限切れまたはクローズされた場合はどうすればよいですか？

A: 期限切れのPRはフィードバックを解決後に再開可能です。クローズされたPR（30日超過）は新規PRの作成が必要です。

Q: ベータテスト期間中にプラグインを更新できますか？

A: 可能ですが、破壊的な変更は避けてください。

* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/plugins/publish-plugins/publish-to-dify-marketplace/README.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/plugins/publish-plugins/publish-to-dify-marketplace%2FREADME.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[PRを通じてプラグインを自動的に公開する](/ja-jp/plugins/publish-plugins/plugin-auto-publish-pr)[プラグイン開発者ガイドライン](/ja-jp/plugins/publish-plugins/publish-to-dify-marketplace/plugin-developer-guidelines)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * プラグイン公開プロセス
  * プラグイン開発チェックリスト
  * 1\. Pull Request (PR)提出前の確認事項
  * 2\. Pull Request (PR)審査中の注意事項
  * 3\. Pull Request (PR)審査通過後
  * 審査プロセス
  * よくある質問



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/plugins/publish-plugins/publish-to-dify-marketplace/plugin-developer-guidelines

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

Difyマーケットプレイスへの公開

プラグイン開発者ガイドライン

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

    * [プラグインの公開](/ja-jp/plugins/publish-plugins/README)
    * [PRを通じてプラグインを自動的に公開する](/ja-jp/plugins/publish-plugins/plugin-auto-publish-pr)
    * Difyマーケットプレイスへの公開

      * [Dify Marketplaceへの公開](/ja-jp/plugins/publish-plugins/publish-to-dify-marketplace/README)
      * [プラグイン開発者ガイドライン](/ja-jp/plugins/publish-plugins/publish-to-dify-marketplace/plugin-developer-guidelines)
      * [プラグインのプライバシー保護に関するガイドライン](/ja-jp/plugins/publish-plugins/publish-to-dify-marketplace/plugin-privacy-protection-guidelines)
    * [個人GitHubリポジトリへの公開](/ja-jp/plugins/publish-plugins/publish-plugin-on-personal-github-repo)
    * [ローカルでの公開と共有](/ja-jp/plugins/publish-plugins/package-plugin-file-and-publish)
    * [第三者署名検証のためにプラグインに署名する](/ja-jp/plugins/publish-plugins/signing-plugins-for-third-party-signature-verification)
  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




Difyマーケットプレイスへの公開

# プラグイン開発者ガイドライン

Copy page

## [このドキュメントはまもなく非推奨になりますドキュメント再編の一環として、このページは段階的に廃止されます。 _**このカードをクリックして**_ 、最新情報が含まれる更新版にリダイレクトしてください。新しいドキュメントに不一致や改善が必要な箇所を見つけた場合は、ページ下部の「問題を報告」ボタンを使用してください。](/plugin-dev-ja/0312-contributor-covenant-code-of-conduct)

### 

​

プルリクエスト（PR）を提出する前に

  1. **プラグインの機能とドキュメントの完全性を確認する**


  * プラグインが意図どおりに動作するか確認してください。
  * 以下の内容を含む**READMEファイル** を作成してください。
    * セットアップと使用方法の説明
    * プラグインをサービスに接続するためのコード、API、認証情報などの情報
  * 収集したユーザー情報は、サービスの接続とプラグインの改善のみに利用することを徹底してください。
  * [プラグインプライバシー保護ガイドライン](/ja-jp/plugins/publish-plugins/publish-to-dify-marketplace/plugin-developer-guidelines)に従って、プラグインのプライバシーポリシーファイルまたはURLを用意してください。


  2. **プラグインの提案価値を検証する**


  * プラグインがDifyユーザーにとって独自の価値を持つことを確認してください。
  * プラグインは、Difyや他のプラグインにはない機能やサービスを導入する必要があります。
  * コミュニティ標準を遵守してください：
    * グローバルなユーザーベースを尊重する非暴力的なコンテンツ
    * 統合されたサービスポリシーの遵守
  * **類似プラグインの確認方法**
    * 以下のいずれかに該当する場合を除き、既存のプラグインやPRと機能が重複するものは提出しないでください。
      * 新機能の導入
      * パフォーマンスの向上
    * **プラグインの独自性の判断:**
      * プラグインが既存の機能に言語パラメーターの追加のようなわずかな変更を加える場合は、既存プラグインの拡張を検討してください。
      * プラグインが最適化されたバッチ処理やエラー処理の改善のような大幅な機能変更を行う場合は、新しいプラグインとして提出してください。
      * 判断に迷う場合は、新しいプラグインが必要な理由をPRに簡単に説明してください。



**例:** Google検索APIを利用して、単一の入力クエリを受け取り、Google検索結果を出力するGoogle検索プラグインを考えてみましょう。

同様の基盤実装で、わずかな入力調整（例：新しい言語パラメーターの追加）を加えた新しいGoogle検索プラグインを提案する場合は、既存のプラグインを拡張することをお勧めします。

しかし、最適化されたバッチ検索機能とエラー処理を実装してプラグインを異なる方法で実装した場合は、別のプラグインとして審査される可能性があります。

  3. **プライバシーデータ標準の遵守を確認する**



**情報開示の要件:**

  * 開発者は、アプリやツールを提出する際に、個人データを収集するかどうかを**必ず** 申告する必要があります。
  * データを収集する場合は、収集するデータの種類（例：ユーザー名、メールアドレス、デバイスID、位置情報など）を**簡潔に記載** してください。**詳細な説明は不要です。**
  * 開発者は、収集する情報、その利用目的、第三者との共有情報、および第三者のプライバシーポリシーへのリンクを**必ず** 提供してください。



**審査の焦点:**

  * **形式的審査:** データ収集が必須項目として申告されているかを確認します。
  * **高リスクのデータスクリーニング:** 健康情報、財務情報、子供の個人情報などの機密データが収集されていないか確認します。機密データが収集されている場合は、利用目的とセキュリティ対策について**追加の審査** を行います。
  * **悪意のある行為のスクリーニング:** ユーザーの同意なくデータを収集したり、ユーザーデータを不明なサーバーにアップロードしたりするなど、明らかな悪意のある行為がないか確認します。



* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/plugins/publish-plugins/publish-to-dify-marketplace/plugin-developer-guidelines.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20n-developer-guideli&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/plugins/publish-plugins/publish-to-dify-marketplace%2Fplugin-developer-guidelines.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[Dify Marketplaceへの公開](/ja-jp/plugins/publish-plugins/publish-to-dify-marketplace/README)[プラグインのプライバシー保護に関するガイドライン](/ja-jp/plugins/publish-plugins/publish-to-dify-marketplace/plugin-privacy-protection-guidelines)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * プルリクエスト（PR）を提出する前に



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/plugins/publish-plugins/publish-to-dify-marketplace/plugin-privacy-protection-guidelines

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

Difyマーケットプレイスへの公開

プラグインのプライバシー保護に関するガイドライン

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

    * [プラグインの公開](/ja-jp/plugins/publish-plugins/README)
    * [PRを通じてプラグインを自動的に公開する](/ja-jp/plugins/publish-plugins/plugin-auto-publish-pr)
    * Difyマーケットプレイスへの公開

      * [Dify Marketplaceへの公開](/ja-jp/plugins/publish-plugins/publish-to-dify-marketplace/README)
      * [プラグイン開発者ガイドライン](/ja-jp/plugins/publish-plugins/publish-to-dify-marketplace/plugin-developer-guidelines)
      * [プラグインのプライバシー保護に関するガイドライン](/ja-jp/plugins/publish-plugins/publish-to-dify-marketplace/plugin-privacy-protection-guidelines)
    * [個人GitHubリポジトリへの公開](/ja-jp/plugins/publish-plugins/publish-plugin-on-personal-github-repo)
    * [ローカルでの公開と共有](/ja-jp/plugins/publish-plugins/package-plugin-file-and-publish)
    * [第三者署名検証のためにプラグインに署名する](/ja-jp/plugins/publish-plugins/signing-plugins-for-third-party-signature-verification)
  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




Difyマーケットプレイスへの公開

# プラグインのプライバシー保護に関するガイドライン

Copy page

## [このドキュメントはまもなく非推奨になりますドキュメント再編の一環として、このページは段階的に廃止されます。 _**このカードをクリックして**_ 、最新情報が含まれる更新版にリダイレクトしてください。新しいドキュメントに不一致や改善が必要な箇所を見つけた場合は、ページ下部の「問題を報告」ボタンを使用してください。](/plugin-dev-ja/0312-privacy-protection-guidelines)

Dify Marketplaceにプラグインを提出する際には、ユーザーデータの取り扱いについて透明性を確保する必要があります。以下のガイドラインでは、プラグインに関するプライバシー関連の質問や、ユーザーデータ処理にどのように対応すべきかを重点的に説明します。

プライバシーポリシーは、以下の点を中心に構成してください。

**プラグインはユーザーの個人データを収集・利用しますか？** もし収集・利用する場合は、収集するデータの種類をリストアップしてください。

> 「個人データ」とは、単独で、または他のデータと組み合わせることで特定の個人を識別できる情報（特定の個人を特定、連絡、またはターゲットとするために使用される情報など）を指します。

#### 

​

1\. 収集するデータの種類をリストアップする

**種類A：直接的な識別情報**

  * 氏名（例：フルネーム、名、姓）
  * メールアドレス
  * 電話番号
  * 自宅住所またはその他の物理的な住所
  * 政府発行の識別番号（例：社会保障番号、パスポート番号、運転免許証番号）



**種類B：間接的な識別情報**

  * デバイス識別子（例：IMEI、MACアドレス、デバイスID）
  * IPアドレス
  * 位置データ（例：GPS座標、市区町村、地域）
  * オンライン識別子（例：Cookie、広告ID）
  * ユーザー名
  * プロフィール写真
  * 生体認証データ（例：指紋、顔認識データ）
  * Web閲覧履歴
  * 購入履歴
  * 健康情報
  * 財務情報



**種類C：他のデータと組み合わせることで個人を識別できるデータ**

  * 年齢
  * 性別
  * 職業
  * 興味・関心



プラグイン自体が個人情報を収集しない場合でも、プラグイン内でサードパーティサービスを利用する際に、データの収集や処理が行われる可能性がある点に注意が必要です。プラグイン開発者として、サードパーティサービスによって実行されるものを含め、プラグインに関連するすべてのデータ収集活動を開示する責任があります。したがって、サードパーティサービスのプライバシーポリシーをよく確認し、プラグインによって収集されるデータが提出時に適切に申告されていることを確認してください。

たとえば、開発中のプラグインがSlackサービスを利用する場合、プラグインのプライバシーポリシーステートメントで[Slackのプライバシーポリシー](https://slack.com/trust/privacy/privacy-policy)を参照し、データ収集の実態を明確に開示してください。

#### 

​

**2\. 最新のプラグインプライバシーポリシーを提出する**

**プライバシーポリシー** には、以下を含める必要があります。

  * 収集するデータの種類
  * 収集したデータの利用方法
  * データを第三者と共有するかどうか。共有する場合は、該当する第三者を特定し、そのプライバシーポリシーへのリンクを提供してください。
  * プライバシーポリシーの作成方法が不明な場合は、Difyチームが発行するプラグインのプライバシーポリシーも参考にできます。



#### 

​

3\. プラグインのマニフェストファイル内にプライバシーポリシーステートメントを記載する

特定フィールドへの入力に関する詳細な手順については、[マニフェスト](/ja-jp/plugins/schema-definition/manifest)のドキュメントを参照してください。

**FAQ**

  1. **ユーザーの個人データに関する「収集と利用」とは何を意味しますか？プラグインで個人データが収集および利用される一般的な例はありますか？**



ユーザーデータの「収集と利用」とは、一般的にユーザーデータの収集、送信、利用、または共有を指します。プラグインが個人データまたは機密性の高いユーザーデータを処理する一般的な例としては、以下のようなものがあります。

  * 個人を特定できるあらゆる種類の情報を収集するフォームの使用。
  * サードパーティの認証サービスを使用する場合でも、ログイン機能の実装。
  * 個人を特定できる情報が含まれている可能性のある入力やリソースに関する情報の収集。
  * ユーザーの行動、インタラクション、利用パターンを追跡するための分析機能の実装。
  * メッセージ、チャットログ、メールアドレスなどの通信データの保存。
  * 接続されたソーシャルメディアアカウントからのユーザープロファイルやデータへのアクセス。
  * アクティビティレベル、心拍数、医療情報などの健康およびフィットネスデータの収集。
  * 検索クエリの保存や閲覧行動の追跡。
  * 銀行口座の詳細、クレジットスコア、取引履歴を含む金融情報の処理。



* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/plugins/publish-plugins/publish-to-dify-marketplace/plugin-privacy-protection-guidelines.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20n-privacy-protection-guideli&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/plugins/publish-plugins/publish-to-dify-marketplace%2Fplugin-privacy-protection-guidelines.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[プラグイン開発者ガイドライン](/ja-jp/plugins/publish-plugins/publish-to-dify-marketplace/plugin-developer-guidelines)[個人GitHubリポジトリへの公開](/ja-jp/plugins/publish-plugins/publish-plugin-on-personal-github-repo)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * 1\. 収集するデータの種類をリストアップする
  * 2\. 最新のプラグインプライバシーポリシーを提出する
  * 3\. プラグインのマニフェストファイル内にプライバシーポリシーステートメントを記載する



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/plugins/publish-plugins/signing-plugins-for-third-party-signature-verification

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

プラグインの公開

第三者署名検証のためにプラグインに署名する

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

    * [プラグインの公開](/ja-jp/plugins/publish-plugins/README)
    * [PRを通じてプラグインを自動的に公開する](/ja-jp/plugins/publish-plugins/plugin-auto-publish-pr)
    * Difyマーケットプレイスへの公開

    * [個人GitHubリポジトリへの公開](/ja-jp/plugins/publish-plugins/publish-plugin-on-personal-github-repo)
    * [ローカルでの公開と共有](/ja-jp/plugins/publish-plugins/package-plugin-file-and-publish)
    * [第三者署名検証のためにプラグインに署名する](/ja-jp/plugins/publish-plugins/signing-plugins-for-third-party-signature-verification)
  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




プラグインの公開

# 第三者署名検証のためにプラグインに署名する

Copy page

## [このドキュメントはまもなく非推奨になりますドキュメント再編の一環として、このページは段階的に廃止されます。 _**このカードをクリックして**_ 、最新情報が含まれる更新版にリダイレクトしてください。新しいドキュメントに不一致や改善が必要な箇所を見つけた場合は、ページ下部の「問題を報告」ボタンを使用してください。](/plugin-dev-ja/0312-third-party-signature-verification)

この機能はコミュニティ版でのみ利用できます。クラウドサービスでは、現時点では第三者署名検証はサポートされていません。

第三者署名検証により、Dify の管理者は、Dify Marketplace にリストされていないプラグインのインストールを、署名の検証を完全に無効化することなく、安全に許可できるようになります。これにより、例えば次のようなシナリオがサポートされます。

  * Dify の管理者は、開発者から送信されたプラグインを承認したら、プラグインに署名を追加して公開できます
  * プラグインの開発者は、署名の検証の無効化が許容されない Dify の管理者のために、プラグインに署名を追加し、公開鍵とともに公開できます



Dify の管理者やプラグインの開発者は、事前に準備した秘密鍵でプラグインに署名を追加できます。また、Dify の管理者は、プラグインのインストール時に、特定の公開鍵による署名の検証を強制するように Dify を構成できます。

## 

​

署名の追加と検証に利用する鍵ペアの生成

次のコマンドで、プラグインの署名の追加と検証に使用する新しい鍵ペアを生成します：
    
    
    dify signature generate -f your_key_pair

コマンド実行後、現在のパスに次の 2 つのファイルが生成されます：

  * **秘密鍵** ： `your_key_pair.private.pem`
  * **公開鍵** ： `your_key_pair.public.pem`



秘密鍵は、プラグインに署名を追加するために使用され、公開鍵はプラグインの署名を検証するために使用されます。

秘密鍵は充分に秘匿された状態で安全に保管してください。秘密鍵が漏洩すると、攻撃者が任意のプラグインに正規の署名を追加できるようになり、Dify の安全性が脅かされます。

## 

​

プラグインへの署名の追加と確認

次のコマンドで、プラグインに署名を追加します。引数で **署名したいプラグインファイル** と **秘密鍵** を指定していることに注意してください：
    
    
    dify signature sign your_plugin_project.difypkg -p your_key_pair.private.pem

コマンド実行後、元のファイルと同じパスに、ファイル名に `signed` が追加された新しいプラグインファイルが生成されます： `your_plugin_project.signed.difypkg`

プラグインファイルが正しく署名されていることは、次のコマンドで確認できます。このコマンドでは、引数で **署名済みのプラグインファイル** と **公開鍵** を指定していることに注意してください：
    
    
    dify signature verify your_plugin_project.signed.difypkg -p your_key_pair.public.pem

公開鍵の指定を省略すると、Dify Marketplace 用の公開鍵での検証が行われます。この場合、Dify Marketplace からダウンロードしたプラグインファイル以外は、署名の検証に失敗します。

## 

​

第三者署名検証の有効化

Dify の管理者は、プラグインのインストール前に、事前に許可した公開鍵よる署名の検証を強制できます。

### 

​

公開鍵の配置

プラグインの署名に利用した秘密鍵に対応する **公開鍵** を、プラグインデーモンが参照できる場所に配置します。

例えば、`docker/volumes/plugin_daemon` の下に `public_keys` ディレクトリを作成し、公開鍵ファイルを配置します。
    
    
    mkdir docker/volumes/plugin_daemon/public_keys
    cp your_key_pair.public.pem docker/volumes/plugin_daemon/public_keys

### 

​

環境変数の設定

コンテナ `plugin_daemon` で、次の環境変数を構成します。

  * `THIRD_PARTY_SIGNATURE_VERIFICATION_ENABLED`
    * 第三者署名検証の有効化を行う環境変数です
    * `true` に設定すると、第三者署名検証が有効化されます
  * `THIRD_PARTY_SIGNATURE_VERIFICATION_PUBLIC_KEYS`
    * 第三者署名検証に使用する公開鍵ファイルのパスを指定する環境変数です
    * カンマ区切りで複数の公開鍵ファイルを指定できます



これらを構成するための Docker Compose 用のオーバーライドファイル（`docker-compose.override.yaml`）の例を以下に示します：
    
    
    services:
      plugin_daemon:
        environment:
          FORCE_VERIFYING_SIGNATURE: true
          THIRD_PARTY_SIGNATURE_VERIFICATION_ENABLED: true
          THIRD_PARTY_SIGNATURE_VERIFICATION_PUBLIC_KEYS: /app/storage/public_keys/your_key_pair.public.pem

`docker/volumes/plugin_daemon` は、コンテナ `plugin_daemon` の `/app/storage`にマウントされています。環境変数 `THIRD_PARTY_SIGNATURE_VERIFICATION_PUBLIC_KEYS` で指定するパスは、コンテナ内のパスであることに注意してください。

設定を反映させるため、最後に、Dify サービスを再起動します。
    
    
    cd docker
    docker compose down
    docker compose up -d

サービスを再起動すると、現在のコミュニティ版環境でサードパーティ署名の検証機能が有効になります。

* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/plugins/publish-plugins/signing-plugins-for-third-party-signature-verification.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20ng-plugins-for-third-party-signature-verificat&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/plugins/publish-plugins%2Fsigning-plugins-for-third-party-signature-verification.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[ローカルでの公開と共有](/ja-jp/plugins/publish-plugins/package-plugin-file-and-publish)[よくある質問](/ja-jp/plugins/faq)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * 署名の追加と検証に利用する鍵ペアの生成
  * プラグインへの署名の追加と確認
  * 第三者署名検証の有効化
  * 公開鍵の配置
  * 環境変数の設定



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/plugins/quick-start/README

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

クイックスタート

クイックスタート

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

    * [クイックスタート](/ja-jp/plugins/quick-start/README)
    * [プラグインのインストールと利用方法](/ja-jp/plugins/quick-start/install-plugins)
    * プラグイン開発の入門

    * [プラグインのデバッグ方法](/ja-jp/plugins/quick-start/debug-plugin)
  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




クイックスタート

# クイックスタート

Copy page

目的に応じて最適な学習パスを選択してください：

### 

​

プラグインを使用したい場合

プラグインのインストールと利用を優先する場合は、以下を参照してください：

## [プラグインのインストールと利用方法.mdプラグインのインストールと利用方法.md](install-plugins.md)

### 

​

プラグインを開発したい場合

プラグイン開発を始める方向けのステップバイステップガイド：

#### 

​

1\. クイックスタート

主要プラグインタイプの開発例を通じて、基本構造と開発フローを習得：

## [ツールプラグイン.mdツールプラグイン.md](develop-plugins/tool-plugin.md) ## [モデルプラグイン.mdモデルプラグイン.md](develop-plugins/model-plugin/README.md) ## [エージェント戦略プラグイン.mdエージェント戦略プラグイン.md](develop-plugins/agent-strategy-plugin.md) ## [拡張機能型プラグイン.md拡張機能型プラグイン.md](develop-plugins/extension-plugin.md) ## [バンドルプラグイン.mdバンドルプラグイン.md](develop-plugins/bundle.md)

#### 

​

2\. アドバンスト開発

**エンドポイントドキュメント** で、プラグイン開発の重要な**インターフェース** と**実装詳細** を理解：

## [スキーマ仕様スキーマ仕様](../schema-definition/)

目的に応じて学習内容をカスタマイズし、効率的にスキル習得を目指しましょう。

本セクションでは主にプラグインのインストールと基本的な利用方法を解説します。

* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/plugins/quick-start/README.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/plugins/quick-start%2FREADME.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[はじめに](/ja-jp/plugins/introduction)[プラグインのインストールと利用方法](/ja-jp/plugins/quick-start/install-plugins)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * プラグインを使用したい場合
  * プラグインを開発したい場合
  * 1\. クイックスタート
  * 2\. アドバンスト開発



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/plugins/quick-start/debug-plugin

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

クイックスタート

プラグインのデバッグ方法

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

    * [クイックスタート](/ja-jp/plugins/quick-start/README)
    * [プラグインのインストールと利用方法](/ja-jp/plugins/quick-start/install-plugins)
    * プラグイン開発の入門

    * [プラグインのデバッグ方法](/ja-jp/plugins/quick-start/debug-plugin)
  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




クイックスタート

# プラグインのデバッグ方法

Copy page

## [このドキュメントはまもなく非推奨になりますドキュメント再編の一環として、このページは段階的に廃止されます。 _**このカードをクリックして**_ 、最新情報が含まれる更新版にリダイレクトしてください。新しいドキュメントに不一致や改善が必要な箇所を見つけた場合は、ページ下部の「問題を報告」ボタンを使用してください。](/plugin-dev-ja/0411-remote-debug-a-plugin)

プラグインの開発が完了したら、次は正常に動作するかどうかをテストしましょう。Difyはリモートデバッグ機能を提供しており、「プラグイン管理」ページでデバッグキーとリモートサーバーアドレスを取得できます。

リモートサーバーのアドレスとデバッグキーは、[「プラグイン管理」](https://cloud.dify.ai/plugins)ページにアクセスすることで取得できます。

プラグインのプロジェクトに戻り、`.env.example`ファイルをコピーして`.env`にリネームします。そして、取得したリモートサーバーアドレスやデバッグキーなどの情報を入力してください。

`.env`ファイル
    
    
    INSTALL_METHOD=remote
    REMOTE_INSTALL_HOST=remote
    REMOTE_INSTALL_PORT=5003
    REMOTE_INSTALL_KEY=****-****-****-****-****

`python -m main`コマンドを実行してプラグインを起動します。プラグインページで、Workspaceにインストールされたことを確認できます。他のチームメンバーもこのプラグインを利用可能です。

* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/plugins/quick-start/debug-plugin.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20-plu&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/plugins/quick-start%2Fdebug-plugin.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[バンドル](/ja-jp/plugins/quick-start/develop-plugins/bundle)[プラグイン管理方法](/ja-jp/plugins/manage-plugins)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/plugins/quick-start/develop-plugins/README

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

プラグイン開発の入門

プラグイン開発ガイド

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

    * [クイックスタート](/ja-jp/plugins/quick-start/README)
    * [プラグインのインストールと利用方法](/ja-jp/plugins/quick-start/install-plugins)
    * プラグイン開発の入門

      * [プラグイン開発ガイド](/ja-jp/plugins/quick-start/develop-plugins/README)
      * [開発環境のセットアップ](/ja-jp/plugins/quick-start/develop-plugins/initialize-development-tools)
      * [ツールプラグイン](/ja-jp/plugins/quick-start/develop-plugins/tool-plugin)
      * モデル型プラグイン

      * [エージェント戦略プラグイン](/ja-jp/plugins/quick-start/develop-plugins/agent-strategy-plugin)
      * [拡張機能型プラグイン](/ja-jp/plugins/quick-start/develop-plugins/extension-plugin)
      * [バンドル](/ja-jp/plugins/quick-start/develop-plugins/bundle)
    * [プラグインのデバッグ方法](/ja-jp/plugins/quick-start/debug-plugin)
  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




プラグイン開発の入門

# プラグイン開発ガイド

Copy page

## [このドキュメントはまもなく非推奨になりますドキュメント再編の一環として、このページは段階的に廃止されます。 _**このカードをクリックして**_ 、最新情報が含まれる更新版にリダイレクトしてください。新しいドキュメントに不一致や改善が必要な箇所を見つけた場合は、ページ下部の「問題を報告」ボタンを使用してください。](/plugin-dev-ja/0111-getting-started-dify-plugin)

### 

​

はじめに

このガイドでは、ツール型プラグインやモデルプラグインなど、様々な種類の**プラグインの開発方法を例** を挙げて説明します。これにより、プラグイン開発における様々な機能の組み合わせを迅速に理解し、活用できるようになります。開発を始める前には、まず開発環境を用意し、必要なフレームワークをインストールして初期設定を行ってください。詳細は以下を参照してください：

## [initialize-development-tools.mdinitialize-development-tools.md](initialize-development-tools.md)

**GoogleSearch** ツールを例に、ツール型プラグインの開発方法を紹介します。具体的な手順は以下をご覧ください：

## [tool-plugin.mdtool-plugin.md](tool-plugin.md)

**Anthropic** や**Xinference** モデルを例に、事前にトレーニングされたモデルプラグインとカスタムモデルプラグインの開発方法について説明します。

  * 事前にトレーニングされたモデルは、GPTやClaudeなどの商用モデルを指し、追加の訓練や設定なしで利用できます。
  * カスタムモデルプラグインは、開発者が独自に訓練または設定したモデルを統合し、特定のニーズに合わせた機能を提供します。



具体的な開発例は以下を参照してください：

## [modelmodel](model-plugin/)

Extensionプラグインにより、開発者はビジネスロジックをプラグインとしてパッケージ化し、Difyプラットフォーム上でAPIサービスとして公開できます。詳細は以下をご覧ください：

## [extension-plugin.mdextension-plugin.md](extension-plugin.md)

### 

​

インターフェースドキュメント

プラグインの詳細なインターフェース仕様が必要な場合は、以下の標準仕様書を参照してください：

  1. [一般的な構造の標準定義](/ja-jp/plugins/schema-definition/general-specifications)
  2. [マニフェストの標準定義](/ja-jp/plugins/schema-definition/manifest)
  3. [ツールとの接続の標準定義](/ja-jp/plugins/schema-definition/tool)
  4. [モデルとの接続の標準定義](/ja-jp/plugins/schema-definition/reverse-invocation-of-the-dify-service/model)
  5. [エンドポイントの標準定義](/ja-jp/plugins/schema-definition/endpoint)
  6. [拡張エージェント策略](/ja-jp/plugins/schema-definition/agent)
  7. Difyサービスの逆呼び出し機能
     1. [アプリ](/ja-jp/plugins/schema-definition/reverse-invocation-of-the-dify-service/app)の逆呼び出し
     2. [モデル](/ja-jp/plugins/schema-definition/reverse-invocation-of-the-dify-service/model)の逆呼び出し
     3. [ノード](/ja-jp/plugins/schema-definition/reverse-invocation-of-the-dify-service/node)の逆呼び出し
     4. [ツール](/ja-jp/plugins/schema-definition/reverse-invocation-of-the-dify-service/tool)の逆呼び出し
  8. [プラグインの永続化されたストレージ機能](/ja-jp/plugins/schema-definition/persistent-storage)



### 

​

貢献ガイド

Difyプラグインにコードや機能を提供し、公式プラグインに貢献したいとお考えですか？開発者がプラグインの開発と貢献のプロセスをスムーズに理解し、参加できるように、詳細なガイドを用意しています：

  * [マーケットプレイスの公開ガイド](/ja-jp/plugins/publish-plugins/publish-to-dify-marketplace/README)

あなたのプラグインを Dify Marketplace に公開し、多くの開発者と成果を共有する方法についてご案内します。

  * [GitHub での公開ガイド](/ja-jp/plugins/publish-plugins/publish-plugin-on-personal-github-repo)

GitHub でプラグインを公開・管理する方法を学び、プラグインの継続的な最適化とコミュニティとの協力を促進します。




貢献者の参加を歓迎し、世界中の開発者とともにDifyエコシステムを充実させていきましょう！

* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/plugins/quick-start/develop-plugins/README.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/plugins/quick-start/develop-plugins%2FREADME.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[プラグインのインストールと利用方法](/ja-jp/plugins/quick-start/install-plugins)[開発環境のセットアップ](/ja-jp/plugins/quick-start/develop-plugins/initialize-development-tools)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * はじめに
  * インターフェースドキュメント
  * 貢献ガイド



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/plugins/quick-start/develop-plugins/agent-strategy-plugin

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

プラグイン開発の入門

エージェント戦略プラグイン

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

    * [クイックスタート](/ja-jp/plugins/quick-start/README)
    * [プラグインのインストールと利用方法](/ja-jp/plugins/quick-start/install-plugins)
    * プラグイン開発の入門

      * [プラグイン開発ガイド](/ja-jp/plugins/quick-start/develop-plugins/README)
      * [開発環境のセットアップ](/ja-jp/plugins/quick-start/develop-plugins/initialize-development-tools)
      * [ツールプラグイン](/ja-jp/plugins/quick-start/develop-plugins/tool-plugin)
      * モデル型プラグイン

      * [エージェント戦略プラグイン](/ja-jp/plugins/quick-start/develop-plugins/agent-strategy-plugin)
      * [拡張機能型プラグイン](/ja-jp/plugins/quick-start/develop-plugins/extension-plugin)
      * [バンドル](/ja-jp/plugins/quick-start/develop-plugins/bundle)
    * [プラグインのデバッグ方法](/ja-jp/plugins/quick-start/debug-plugin)
  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




プラグイン開発の入門

# エージェント戦略プラグイン

Copy page

## [このドキュメントはまもなく非推奨になりますドキュメント再編の一環として、このページは段階的に廃止されます。 _**このカードをクリックして**_ 、最新情報が含まれる更新版にリダイレクトしてください。新しいドキュメントに不一致や改善が必要な箇所を見つけた場合は、ページ下部の「問題を報告」ボタンを使用してください。](/plugin-dev-ja/9433-agent-strategy-plugin)

エージェント戦略プラグインは、LLMが推論や意思決定ロジックを実行するのを支援します。具体的には、ツール選択、呼び出し、結果処理といった一連の動作をより自動化された方法で実行し、問題を解決します。

この記事では、ツール呼び出し（Function Calling）機能を備え、現在の正確な時刻を自動的に取得するプラグインの作成方法を説明します。

### 

​

事前準備

  * Difyプラグインの足場ツール
  * Python環境（バージョン3.12以上）



プラグイン開発の足場ツールを準備する方法については、[開発ツールの初期化](initialize-development-tools)を参照してください。

**ヒント** ：ターミナルで `dify version` コマンドを実行し、バージョン番号が表示されることを確認することで、足場ツールが正常にインストールされたことを確認できます。

### 

​

1\. プラグインテンプレートの初期化

以下のコマンドを実行して、Agentプラグイン開発テンプレートを初期化します。
    
    
    dify plugin init

表示される指示に従い、必要な情報を入力します。以下のコードのコメントを参考に設定してください。
    
    
    ➜ ./dify-plugin-darwin-arm64 plugin init                                                                                                                                 ─╯
    Edit profile of the plugin
    Plugin name (press Enter to next step): # プラグイン名を入力
    Author (press Enter to next step): # プラグイン作者を入力
    Description (press Enter to next step): # プラグインの説明を入力
    ---
    Select the language you want to use for plugin development, and press Enter to continue,
    BTW, you need Python 3.12+ to develop the Plugin if you choose Python.
    -> python # Python環境を選択
      go (not supported yet)
    ---
    Based on the ability you want to extend, we have divided the Plugin into four types: Tool, Model, Extension, and Agent Strategy.
    
    - Tool: It's a tool provider, but not only limited to tools, you can implement an endpoint there, for example, you need both Sending Message and Receiving Message if you are
    - Model: Just a model provider, extending others is not allowed.
    - Extension: Other times, you may only need a simple http service to extend the functionalities, Extension is the right choice for you.
    - Agent Strategy: Implement your own logics here, just by focusing on Agent itself
    
    What's more, we have provided the template for you, you can choose one of them below:
      tool
    -> agent-strategy # Agent戦略テンプレートを選択
      llm
      text-embedding
    ---
    Configure the permissions of the plugin, use up and down to navigate, tab to select, after selection, press enter to finish
    Backwards Invocation:
    Tools:
        Enabled: [✔]  You can invoke tools inside Dify if it's enabled # デフォルトで有効
    Models:
        Enabled: [✔]  You can invoke models inside Dify if it's enabled # デフォルトで有効
        LLM: [✔]  You can invoke LLM models inside Dify if it's enabled # デフォルトで有効
      → Text Embedding: [✘]  You can invoke text embedding models inside Dify if it's enabled
        Rerank: [✘]  You can invoke rerank models inside Dify if it's enabled
        TTS: [✘]  You can invoke TTS models inside Dify if it's enabled
        Speech2Text: [✘]  You can invoke speech2text models inside Dify if it's enabled
        Moderation: [✘]  You can invoke moderation models inside Dify if it's enabled
    Apps:
        Enabled: [✘]  Ability to invoke apps like BasicChat/ChatFlow/Agent/Workflow etc.
    Resources:
    Storage:
        Enabled: [✘]  Persistence storage for the plugin
        Size: N/A  The maximum size of the storage
    Endpoints:
        Enabled: [✘]  Ability to register endpoints

プラグインテンプレートを初期化すると、プラグインの開発に必要なすべてのリソースを含むコードフォルダが生成されます。エージェント戦略プラグインのコード構造を理解することで、開発プロセスがスムーズになります。
    
    
    ├── GUIDE.md               # ユーザーガイドとドキュメント
    ├── PRIVACY.md            # プライバシーポリシーとデータ処理ガイドライン
    ├── README.md             # プロジェクト概要と設定手順
    ├── _assets/             # 静的アセットディレクトリ
    │   └── icon.svg         # エージェント戦略プロバイダーのアイコン/ロゴ
    ├── main.py              # メインアプリケーションのエントリーポイント
    ├── manifest.yaml        # 基本的なプラグイン構成
    ├── provider/           # プロバイダー構成ディレクトリ
    │   └── basic_agent.yaml # Agentプロバイダーの設定
    ├── requirements.txt    # Python依存関係リスト
    └── strategies/         # 戦略実装ディレクトリ
        ├── basic_agent.py  # 基本的なエージェント戦略の実装
        └── basic_agent.yaml # 基本的なエージェント戦略の構成

プラグインの機能コードは、`strategies/` ディレクトリにまとめられています。

### 

​

2\. プラグイン機能の開発

エージェントプラグインの開発は、主に以下の2つのファイルを中心に行います。

  * プラグイン定義ファイル：`strategies/basic_agent.yaml`
  * プラグイン機能コード：`strategies/basic_agent.py`



#### 

​

2.1 パラメータの定義

Agentプラグインを作成するには、まず `strategies/basic_agent.yaml` ファイルでプラグインに必要なパラメータを定義します。これらのパラメータは、LLMモデルの呼び出しやツールの使用など、プラグインの核となる機能を決定します。

次の4つの基本パラメータを優先的に設定することをお勧めします。

  1. **model** ：呼び出すLLM（GPT-4、GPT-4o-miniなど）を指定します。
  2. **tools** ：プラグインが使用できるツールリストを定義し、プラグインの機能を拡張します。
  3. **query** ：モデルとの対話に使用するプロンプトまたは入力内容を設定します。
  4. **maximum_iterations** ：プラグインの最大反復回数を制限し、過剰な計算を避けます。


    
    
    identity:
      name: basic_agent # agent_strategyの名前
      author: novice # agent_strategyの作者
      label:
        en_US: BasicAgent # agent_strategyの英語ラベル
    description:
      en_US: BasicAgent # agent_strategyの英語説明
    parameters:
      - name: model # modelパラメータの名前
        type: model-selector # model-type
        scope: tool-call&llm # パラメータのスコープ
        required: true
        label:
          en_US: Model
          zh_Hans: 模型
          ja_JP: モデル
          pt_BR: Model
      - name: tools # toolsパラメータの名前
        type: array[tools] # toolパラメータの型
        required: true
        label:
          en_US: Tools list
          zh_Hans: 工具列表
          ja_JP: ツールリスト
          pt_BR: Tools list
      - name: query # queryパラメータの名前
        type: string # queryパラメータの型
        required: true
        label:
          en_US: Query
          zh_Hans: 查询
          ja_JP: クエリ
          pt_BR: Query
      - name: maximum_iterations
        type: number
        required: false
        default: 5
        label:
          en_US: Maxium Iterations
          zh_Hans: 最大迭代次数
          ja_JP: 最大反復回数
          pt_BR: Maxium Iterations
        max: 50 # maxとminの値を設定すると、パラメータ表示がスライダーになります
        min: 1
    extra:
      python:
        source: strategies/basic_agent.py

パラメータ設定が完了すると、プラグインは対応する設定ページを自動的に生成し、直感的かつ使いやすく調整や利用ができます。

#### 

​

2.2 パラメータの取得と実行

ユーザーがプラグインの設定ページで基本情報を入力すると、プラグインは入力されたパラメータを処理する必要があります。そのため、まず `strategies/basic_agent.py` ファイル内で、後で使用するためのAgentパラメータクラスを定義します。

入力パラメータの検証：
    
    
    from dify_plugin.entities.agent import AgentInvokeMessage
    from dify_plugin.interfaces.agent import AgentModelConfig, AgentStrategy, ToolEntity
    from pydantic import BaseModel
    
    class BasicParams(BaseModel):
        maximum_iterations: int
        model: AgentModelConfig
        tools: list[ToolEntity]
        query: str

パラメータを取得した後、具体的な処理ロジックを実行します。
    
    
    class BasicAgentAgentStrategy(AgentStrategy):
        def _invoke(self, parameters: dict[str, Any]) -> Generator[AgentInvokeMessage]:
            params = BasicParams(**parameters)

#### 

​

2.3 モデルの呼び出し

エージェント戦略プラグインでは、**モデルの呼び出し** が中心的な処理ロジックの1つです。SDKが提供する `session.model.llm.invoke()` メソッドを使用すると、LLMモデルを効率的に呼び出して、テキスト生成や対話処理などの機能を実現できます。

モデルに**ツール呼び出し** 機能を持たせたい場合は、まず、モデルがツール呼び出し形式に沿ったパラメータを出力できることを確認する必要があります。つまり、モデルはユーザーの指示に従って、ツールインターフェースの要件を満たすパラメータを生成する必要があります。

以下のパラメータを構築します。

  * model：モデル情報
  * prompt_messages：プロンプト
  * tools：ツール情報（Function Calling関連）
  * stop：停止記号
  * stream：ストリーミング出力をサポートするかどうか



メソッド定義のサンプルコード：
    
    
    def invoke(
            self,
            model_config: LLMModelConfig,
            prompt_messages: list[PromptMessage],
            tools: list[PromptMessageTool] | None = None,
            stop: list[str] | None = None,
            stream: bool = True,
        ) -> Generator[LLMResultChunk, None, None] | LLMResult:...

完全な実装については、モデル呼び出しの[サンプルコード](agent-strategy-plugin.md#diao-yong-gong-ju-1)を参照してください。

このコードでは、ユーザーが指示を入力すると、エージェント戦略プラグインが自動的にLLMを呼び出し、その結果に基づいてツールの呼び出しに必要なパラメータを構築し、渡します。これにより、モデルは連携されたツールを柔軟に活用し、複雑なタスクを効率的に完了できます。

#### 

​

2.4 モデルへのメモリ機能の追加

Agentプラグインを使用してモデルを呼び出す際、メモリ機能を追加することで対話体験が大幅に向上します。メモリ機能により、モデルは完全な対話コンテキストを理解し、一貫性のある対話と正確なツール呼び出しを実現できます。

実装手順：

  1. メモリ機能の設定



AgentプラグインのYAML設定ファイル`strategies/agent.yaml`に`history-messages`機能を追加します：
    
    
    identity:
      name: basic_agent  # Agent戦略名
      author: novice     # 作者
      label:
        en_US: BasicAgent  # 英語ラベル
    description:
      en_US: BasicAgent    # 英語説明
    features:
      - history-messages   # 履歴メッセージ機能を有効化
    ...

  2. メモリ設定の有効化



プラグイン設定ファイルを修正して再起動後、ノード設定画面に**メモリ** トグルが表示されます。右側のトグルボタンをクリックしてメモリ機能を有効にします。

有効化後、**ウィンドウサイズ** スライダーでメモリウィンドウを調整できます。これはモデルが「記憶」できる過去の対話の量を決定します。

  3. 履歴メッセージのデバッグ



以下のコードを追加して、履歴メッセージの内容を確認します：
    
    
    class BasicAgentAgentStrategy(AgentStrategy):
        def _invoke(self, parameters: dict[str, Any]) -> Generator[AgentInvokeMessage]:
            params = BasicParams(**parameters)
            print(f"history_messages: {params.model.history_prompt_messages}")
            ...

コンソールには以下のような出力が表示されます：
    
    
    history_messages: []
    history_messages: [UserPromptMessage(role=<PromptMessageRole.USER: 'user'>, content='hello, my name is novice', name=None), AssistantPromptMessage(role=<PromptMessageRole.ASSISTANT: 'assistant'>, content='Hello, Novice! How can I assist you today?', name=None, tool_calls=[])]

  4. 履歴メッセージのモデル呼び出しへの統合



最後に、モデル呼び出しコードを修正して、履歴メッセージを現在のクエリに連結します：
    
    
    class BasicAgentAgentStrategy(AgentStrategy):
        def _invoke(self, parameters: dict[str, Any]) -> Generator[AgentInvokeMessage]:
            params = BasicParams(**parameters)
    
            chunks: Generator[LLMResultChunk, None, None] | LLMResult = (
                self.session.model.llm.invoke(
                    model_config=LLMModelConfig(**params.model.model_dump(mode="json")),
                    # 履歴メッセージを追加
                    prompt_messages=params.model.history_prompt_messages
                    + [UserPromptMessage(content=params.query)],
                    tools=[
                        self._convert_tool_to_prompt_message_tool(tool)
                        for tool in params.tools
                    ],
                    stop=params.model.completion_params.get("stop", [])
                    if params.model.completion_params
                    else [],
                    stream=True,
                )
            )
            ...

  5. 効果の検証



メモリ機能を追加後、モデルは履歴に基づいて応答できるようになります。以下の例では、モデルは以前の対話で言及されたユーザー名を正しく記憶し、対話の一貫性を実現しています。

#### 

​

2.5 ツールの呼び出し

ツールパラメータを設定した後、エージェント戦略プラグインに実際にツールを呼び出す機能を追加する必要があります。これは、SDKの `session.tool.invoke()` 関数を使用して行えます。

以下のパラメータを構築します。

  * provider：ツール提供者
  * tool_name：ツール名
  * parameters：入力パラメータ



メソッド定義のサンプルコード：
    
    
    def invoke(
            self,
            provider_type: ToolProviderType,
            provider: str,
            tool_name: str,
            parameters: dict[str, Any],
        ) -> Generator[ToolInvokeMessage, None, None]:...

LLMで直接パラメータを生成してツールを呼び出したい場合は、以下のツール呼び出しのサンプルコードを参照してください。
    
    
    tool_instances = (
        {tool.identity.name: tool for tool in params.tools} if params.tools else {}
    )
    for tool_call_id, tool_call_name, tool_call_args in tool_calls:
        tool_instance = tool_instances[tool_call_name]
        self.session.tool.invoke(
            provider_type=ToolProviderType.BUILT_IN,
            provider=tool_instance.identity.provider,
            tool_name=tool_instance.identity.name,
            parameters={**tool_instance.runtime_parameters, **tool_call_args},
        )

完全な機能コードについては、ツール呼び出しの[サンプルコード](agent-strategy-plugin.md#diao-yong-gong-ju-1)を参照してください。

この機能コードを実装すると、エージェント戦略プラグインは自動的にFunction Callingを実行できるようになります。例えば、現在の時刻を自動的に取得するなどが可能です。

#### 

​

2.6 ログの作成

**エージェント戦略プラグイン** では、複雑なタスクを完了するために、通常、複数回の操作が必要です。各操作の実行結果を記録することは、開発者にとって非常に重要です。Agentの実行プロセスを追跡し、各ステップの意思決定の根拠を分析することで、戦略の効果をより適切に評価し、最適化できます。

この機能を実装するために、SDKの `create_log_message` と `finish_log_message` メソッドを利用してログを記録できます。この方法では、モデル呼び出しの前後に操作状態をリアルタイムで記録できるだけでなく、開発者が問題を迅速に特定するのに役立ちます。

シナリオ例：

  * モデルを呼び出す前に、「モデルの呼び出しを開始」というログを記録することで、開発者はタスクの実行状況を明確に把握できます。
  * モデル呼び出しが成功した後、「呼び出し成功」というログを記録することで、モデルの応答の完全性を追跡できます。


    
    
    model_log = self.create_log_message(
                label=f"{params.model.model} Thought",
                data={},
                metadata={"start_at": model_started_at, "provider": params.model.provider},
                status=ToolInvokeMessage.LogMessage.LogStatus.START,
            )
    yield model_log
    self.session.model.llm.invoke(...)
    yield self.finish_log_message(
        log=model_log,
        data={
            "output": response,
            "tool_name": tool_call_names,
            "tool_input": tool_call_inputs,
        },
        metadata={
            "started_at": model_started_at,
            "finished_at": time.perf_counter(),
            "elapsed_time": time.perf_counter() - model_started_at,
            "provider": params.model.provider,
        },
    )

設定が完了すると、ワークフローログに実行結果が出力されます。

Agentの実行中には、複数ラウンドのログが生成される場合があります。ログに階層構造を持たせることで、開発者がログを確認しやすくなります。ログを記録する際に `parent` パラメータを渡すことで、異なるラウンドのログ間に親子関係が形成され、ログの表示がより明確になり、追跡が容易になります。

**使用方法：**
    
    
    function_call_round_log = self.create_log_message(
        label="Function Call Round1 ",
        data={},
        metadata={},
    )
    yield function_call_round_log
    
    model_log = self.create_log_message(
        label=f"{params.model.model} Thought",
        data={},
        metadata={"start_at": model_started_at, "provider": params.model.provider},
        status=ToolInvokeMessage.LogMessage.LogStatus.START,
        # 親ログを追加
        parent=function_call_round_log,
    )
    yield model_log

プラグイン機能のサンプルコード：

  * モデルの呼び出し
  * ツールの呼び出し
  * 完全な機能コード例



#### 

​

モデルの呼び出し

以下のコードは、エージェント戦略プラグインにモデルを呼び出す機能を追加する方法を示しています。
    
    
    import json
    from collections.abc import Generator
    from typing import Any, cast
    
    from dify_plugin.entities.agent import AgentInvokeMessage
    from dify_plugin.entities.model.llm import LLMModelConfig, LLMResult, LLMResultChunk
    from dify_plugin.entities.model.message import (
        PromptMessageTool,
        UserPromptMessage,
    )
    from dify_plugin.entities.tool import ToolInvokeMessage, ToolParameter, ToolProviderType
    from dify_plugin.interfaces.agent import AgentModelConfig, AgentStrategy, ToolEntity
    from pydantic import BaseModel
    
    class BasicParams(BaseModel):
        maximum_iterations: int
        model: AgentModelConfig
        tools: list[ToolEntity]
        query: str
    
    class BasicAgentAgentStrategy(AgentStrategy):
        def _invoke(self, parameters: dict[str, Any]) -> Generator[AgentInvokeMessage]:
            params = BasicParams(**parameters)
            chunks: Generator[LLMResultChunk, None, None] | LLMResult = (
                self.session.model.llm.invoke(
                    model_config=LLMModelConfig(**params.model.model_dump(mode="json")),
                    prompt_messages=[UserPromptMessage(content=params.query)],
                    tools=[
                        self._convert_tool_to_prompt_message_tool(tool)
                        for tool in params.tools
                    ],
                    stop=params.model.completion_params.get("stop", [])
                    if params.model.completion_params
                    else [],
                    stream=True,
                )
            )
            response = ""
            tool_calls = []
            tool_instances = (
                {tool.identity.name: tool for tool in params.tools} if params.tools else {}
            )
    
            for chunk in chunks:
                # ツール呼び出しがあるか確認
                if self.check_tool_calls(chunk):
                    tool_calls = self.extract_tool_calls(chunk)
                    tool_call_names = ";".join([tool_call[1] for tool_call in tool_calls])
                    try:
                        tool_call_inputs = json.dumps(
                            {tool_call[1]: tool_call[2] for tool_call in tool_calls},
                            ensure_ascii=False,
                        )
                    except json.JSONDecodeError:
                        # エンコードエラーを避けるため、asciiを保証
                        tool_call_inputs = json.dumps(
                            {tool_call[1]: tool_call[2] for tool_call in tool_calls}
                        )
                    print(tool_call_names, tool_call_inputs)
                if chunk.delta.message and chunk.delta.message.content:
                    if isinstance(chunk.delta.message.content, list):
                        for content in chunk.delta.message.content:
                            response += content.data
                            print(content.data, end="", flush=True)
                    else:
                        response += str(chunk.delta.message.content)
                        print(str(chunk.delta.message.content), end="", flush=True)
    
                if chunk.delta.usage:
                    # モデルを使用する
                    usage = chunk.delta.usage
    
            yield self.create_text_message(
                text=f"{response or json.dumps(tool_calls, ensure_ascii=False)}\n"
            )
            result = ""
            for tool_call_id, tool_call_name, tool_call_args in tool_calls:
                tool_instance = tool_instances[tool_call_name]
                tool_invoke_responses = self.session.tool.invoke(
                    provider_type=ToolProviderType.BUILT_IN,
                    provider=tool_instance.identity.provider,
                    tool_name=tool_instance.identity.name,
                    parameters={**tool_instance.runtime_parameters, **tool_call_args},
                )
                if not tool_instance:
                    tool_invoke_responses = {
                        "tool_call_id": tool_call_id,
                        "tool_call_name": tool_call_name,
                        "tool_response": f"there is not a tool named {tool_call_name}",
                    }
                else:
                    # ツールを呼び出す
                    tool_invoke_responses = self.session.tool.invoke(
                        provider_type=ToolProviderType.BUILT_IN,
                        provider=tool_instance.identity.provider,
                        tool_name=tool_instance.identity.name,
                        parameters={**tool_instance.runtime_parameters, **tool_call_args},
                    )
                    result = ""
                    for tool_invoke_response in tool_invoke_responses:
                        if tool_invoke_response.type == ToolInvokeMessage.MessageType.TEXT:
                            result += cast(
                                ToolInvokeMessage.TextMessage, tool_invoke_response.message
                            ).text
                        elif (
                            tool_invoke_response.type == ToolInvokeMessage.MessageType.LINK
                        ):
                            result += (
                                f"result link: {cast(ToolInvokeMessage.TextMessage, tool_invoke_response.message).text}."
                                + " please tell user to check it."
                            )
                        elif tool_invoke_response.type in {
                            ToolInvokeMessage.MessageType.IMAGE_LINK,
                            ToolInvokeMessage.MessageType.IMAGE,
                        }:
                            result += (
                                "image has been created and sent to user already, "
                                + "you do not need to create it, just tell the user to check it now."
                            )
                        elif (
                            tool_invoke_response.type == ToolInvokeMessage.MessageType.JSON
                        ):
                            text = json.dumps(
                                cast(
                                    ToolInvokeMessage.JsonMessage,
                                    tool_invoke_response.message,
                                ).json_object,
                                ensure_ascii=False,
                            )
                            result += f"tool response: {text}."
                        else:
                            result += f"tool response: {tool_invoke_response.message!r}."
    
                    tool_response = {
                        "tool_call_id": tool_call_id,
                        "tool_call_name": tool_call_name,
                        "tool_response": result,
                    }
            yield self.create_text_message(result)
    
        def _convert_tool_to_prompt_message_tool(
            self, tool: ToolEntity
        ) -> PromptMessageTool:
            """
            convert tool to prompt message tool
            """
            message_tool = PromptMessageTool(
                name=tool.identity.name,
                description=tool.description.llm if tool.description else "",
                parameters={
                    "type": "object",
                    "properties": {},
                    "required": [],
                },
            )
    
            parameters = tool.parameters
            for parameter in parameters:
                if parameter.form != ToolParameter.ToolParameterForm.LLM:
                    continue
    
                parameter_type = parameter.type
                if parameter.type in {
                    ToolParameter.ToolParameterType.FILE,
                    ToolParameter.ToolParameterType.FILES,
                }:
                    continue
                enum = []
                if parameter.type == ToolParameter.ToolParameterType.SELECT:
                    enum = (
                        [option.value for option in parameter.options]
                        if parameter.options
                        else []
                    )
    
                message_tool.parameters["properties"][parameter.name] = {
                    "type": parameter_type,
                    "description": parameter.llm_description or "",
                }
    
                if len(enum) > 0:
                    message_tool.parameters["properties"][parameter.name]["enum"] = enum
    
                if parameter.required:
                    message_tool.parameters["required"].append(parameter.name)
    
            return message_tool
    
        def check_tool_calls(self, llm_result_chunk: LLMResultChunk) -> bool:
            """
            Check if there is any tool call in llm result chunk
            """
            return bool(llm_result_chunk.delta.message.tool_calls)
    
        def extract_tool_calls(
            self, llm_result_chunk: LLMResultChunk
        ) -> list[tuple[str, str, dict[str, Any]]]:
            """
            Extract tool calls from llm result chunk
    
            Returns:
                List[Tuple[str, str, Dict[str, Any]]]: [(tool_call_id, tool_call_name, tool_call_args)]
            """
            tool_calls = []
            for prompt_message in llm_result_chunk.delta.message.tool_calls:
                args = {}
                if prompt_message.function.arguments != "":
                    args = json.loads(prompt_message.function.arguments)
    
                tool_calls.append(
                    (
                        prompt_message.id,
                        prompt_message.function.name,
                        args,
                    )
                )
    
            return tool_calls

#### 

​

モデルの呼び出し

以下のコードは、エージェント戦略プラグインにモデルを呼び出す機能を追加する方法を示しています。
    
    
    import json
    from collections.abc import Generator
    from typing import Any, cast
    
    from dify_plugin.entities.agent import AgentInvokeMessage
    from dify_plugin.entities.model.llm import LLMModelConfig, LLMResult, LLMResultChunk
    from dify_plugin.entities.model.message import (
        PromptMessageTool,
        UserPromptMessage,
    )
    from dify_plugin.entities.tool import ToolInvokeMessage, ToolParameter, ToolProviderType
    from dify_plugin.interfaces.agent import AgentModelConfig, AgentStrategy, ToolEntity
    from pydantic import BaseModel
    
    class BasicParams(BaseModel):
        maximum_iterations: int
        model: AgentModelConfig
        tools: list[ToolEntity]
        query: str
    
    class BasicAgentAgentStrategy(AgentStrategy):
        def _invoke(self, parameters: dict[str, Any]) -> Generator[AgentInvokeMessage]:
            params = BasicParams(**parameters)
            chunks: Generator[LLMResultChunk, None, None] | LLMResult = (
                self.session.model.llm.invoke(
                    model_config=LLMModelConfig(**params.model.model_dump(mode="json")),
                    prompt_messages=[UserPromptMessage(content=params.query)],
                    tools=[
                        self._convert_tool_to_prompt_message_tool(tool)
                        for tool in params.tools
                    ],
                    stop=params.model.completion_params.get("stop", [])
                    if params.model.completion_params
                    else [],
                    stream=True,
                )
            )
            response = ""
            tool_calls = []
            tool_instances = (
                {tool.identity.name: tool for tool in params.tools} if params.tools else {}
            )
    
            for chunk in chunks:
                # ツール呼び出しがあるか確認
                if self.check_tool_calls(chunk):
                    tool_calls = self.extract_tool_calls(chunk)
                    tool_call_names = ";".join([tool_call[1] for tool_call in tool_calls])
                    try:
                        tool_call_inputs = json.dumps(
                            {tool_call[1]: tool_call[2] for tool_call in tool_calls},
                            ensure_ascii=False,
                        )
                    except json.JSONDecodeError:
                        # エンコードエラーを避けるため、asciiを保証
                        tool_call_inputs = json.dumps(
                            {tool_call[1]: tool_call[2] for tool_call in tool_calls}
                        )
                    print(tool_call_names, tool_call_inputs)
                if chunk.delta.message and chunk.delta.message.content:
                    if isinstance(chunk.delta.message.content, list):
                        for content in chunk.delta.message.content:
                            response += content.data
                            print(content.data, end="", flush=True)
                    else:
                        response += str(chunk.delta.message.content)
                        print(str(chunk.delta.message.content), end="", flush=True)
    
                if chunk.delta.usage:
                    # モデルを使用する
                    usage = chunk.delta.usage
    
            yield self.create_text_message(
                text=f"{response or json.dumps(tool_calls, ensure_ascii=False)}\n"
            )
            result = ""
            for tool_call_id, tool_call_name, tool_call_args in tool_calls:
                tool_instance = tool_instances[tool_call_name]
                tool_invoke_responses = self.session.tool.invoke(
                    provider_type=ToolProviderType.BUILT_IN,
                    provider=tool_instance.identity.provider,
                    tool_name=tool_instance.identity.name,
                    parameters={**tool_instance.runtime_parameters, **tool_call_args},
                )
                if not tool_instance:
                    tool_invoke_responses = {
                        "tool_call_id": tool_call_id,
                        "tool_call_name": tool_call_name,
                        "tool_response": f"there is not a tool named {tool_call_name}",
                    }
                else:
                    # ツールを呼び出す
                    tool_invoke_responses = self.session.tool.invoke(
                        provider_type=ToolProviderType.BUILT_IN,
                        provider=tool_instance.identity.provider,
                        tool_name=tool_instance.identity.name,
                        parameters={**tool_instance.runtime_parameters, **tool_call_args},
                    )
                    result = ""
                    for tool_invoke_response in tool_invoke_responses:
                        if tool_invoke_response.type == ToolInvokeMessage.MessageType.TEXT:
                            result += cast(
                                ToolInvokeMessage.TextMessage, tool_invoke_response.message
                            ).text
                        elif (
                            tool_invoke_response.type == ToolInvokeMessage.MessageType.LINK
                        ):
                            result += (
                                f"result link: {cast(ToolInvokeMessage.TextMessage, tool_invoke_response.message).text}."
                                + " please tell user to check it."
                            )
                        elif tool_invoke_response.type in {
                            ToolInvokeMessage.MessageType.IMAGE_LINK,
                            ToolInvokeMessage.MessageType.IMAGE,
                        }:
                            result += (
                                "image has been created and sent to user already, "
                                + "you do not need to create it, just tell the user to check it now."
                            )
                        elif (
                            tool_invoke_response.type == ToolInvokeMessage.MessageType.JSON
                        ):
                            text = json.dumps(
                                cast(
                                    ToolInvokeMessage.JsonMessage,
                                    tool_invoke_response.message,
                                ).json_object,
                                ensure_ascii=False,
                            )
                            result += f"tool response: {text}."
                        else:
                            result += f"tool response: {tool_invoke_response.message!r}."
    
                    tool_response = {
                        "tool_call_id": tool_call_id,
                        "tool_call_name": tool_call_name,
                        "tool_response": result,
                    }
            yield self.create_text_message(result)
    
        def _convert_tool_to_prompt_message_tool(
            self, tool: ToolEntity
        ) -> PromptMessageTool:
            """
            convert tool to prompt message tool
            """
            message_tool = PromptMessageTool(
                name=tool.identity.name,
                description=tool.description.llm if tool.description else "",
                parameters={
                    "type": "object",
                    "properties": {},
                    "required": [],
                },
            )
    
            parameters = tool.parameters
            for parameter in parameters:
                if parameter.form != ToolParameter.ToolParameterForm.LLM:
                    continue
    
                parameter_type = parameter.type
                if parameter.type in {
                    ToolParameter.ToolParameterType.FILE,
                    ToolParameter.ToolParameterType.FILES,
                }:
                    continue
                enum = []
                if parameter.type == ToolParameter.ToolParameterType.SELECT:
                    enum = (
                        [option.value for option in parameter.options]
                        if parameter.options
                        else []
                    )
    
                message_tool.parameters["properties"][parameter.name] = {
                    "type": parameter_type,
                    "description": parameter.llm_description or "",
                }
    
                if len(enum) > 0:
                    message_tool.parameters["properties"][parameter.name]["enum"] = enum
    
                if parameter.required:
                    message_tool.parameters["required"].append(parameter.name)
    
            return message_tool
    
        def check_tool_calls(self, llm_result_chunk: LLMResultChunk) -> bool:
            """
            Check if there is any tool call in llm result chunk
            """
            return bool(llm_result_chunk.delta.message.tool_calls)
    
        def extract_tool_calls(
            self, llm_result_chunk: LLMResultChunk
        ) -> list[tuple[str, str, dict[str, Any]]]:
            """
            Extract tool calls from llm result chunk
    
            Returns:
                List[Tuple[str, str, Dict[str, Any]]]: [(tool_call_id, tool_call_name, tool_call_args)]
            """
            tool_calls = []
            for prompt_message in llm_result_chunk.delta.message.tool_calls:
                args = {}
                if prompt_message.function.arguments != "":
                    args = json.loads(prompt_message.function.arguments)
    
                tool_calls.append(
                    (
                        prompt_message.id,
                        prompt_message.function.name,
                        args,
                    )
                )
    
            return tool_calls

#### 

​

ツールの呼び出し

次のコードは、エージェント戦略プラグインのモデル呼び出しを実装し、正規化されたリクエストをツールに送信する方法を示しています。
    
    
    import json
    from collections.abc import Generator
    from typing import Any, cast
    
    from dify_plugin.entities.agent import AgentInvokeMessage
    from dify_plugin.entities.model.llm import LLMModelConfig, LLMResult, LLMResultChunk
    from dify_plugin.entities.model.message import (
        PromptMessageTool,
        UserPromptMessage,
    )
    from dify_plugin.entities.tool import ToolInvokeMessage, ToolParameter, ToolProviderType
    from dify_plugin.interfaces.agent import AgentModelConfig, AgentStrategy, ToolEntity
    from pydantic import BaseModel
    
    class BasicParams(BaseModel):
        maximum_iterations: int
        model: AgentModelConfig
        tools: list[ToolEntity]
        query: str
    
    class BasicAgentAgentStrategy(AgentStrategy):
        def _invoke(self, parameters: dict[str, Any]) -> Generator[AgentInvokeMessage]:
            params = BasicParams(**parameters)
            chunks: Generator[LLMResultChunk, None, None] | LLMResult = (
                self.session.model.llm.invoke(
                    model_config=LLMModelConfig(**params.model.model_dump(mode="json")),
                    prompt_messages=[UserPromptMessage(content=params.query)],
                    tools=[
                        self._convert_tool_to_prompt_message_tool(tool)
                        for tool in params.tools
                    ],
                    stop=params.model.completion_params.get("stop", [])
                    if params.model.completion_params
                    else [],
                    stream=True,
                )
            )
            response = ""
            tool_calls = []
            tool_instances = (
                {tool.identity.name: tool for tool in params.tools} if params.tools else {}
            )
    
            for chunk in chunks:
                # ツール呼び出しがあるか確認
                if self.check_tool_calls(chunk):
                    tool_calls = self.extract_tool_calls(chunk)
                    tool_call_names = ";".join([tool_call[1] for tool_call in tool_calls])
                    try:
                        tool_call_inputs = json.dumps(
                            {tool_call[1]: tool_call[2] for tool_call in tool_calls},
                            ensure_ascii=False,
                        )
                    except json.JSONDecodeError:
                        # エンコードエラーを避けるため、asciiを保証
                        tool_call_inputs = json.dumps(
                            {tool_call[1]: tool_call[2] for tool_call in tool_calls}
                        )
                    print(tool_call_names, tool_call_inputs)
                if chunk.delta.message and chunk.delta.message.content:
                    if isinstance(chunk.delta.message.content, list):
                        for content in chunk.delta.message.content:
                            response += content.data
                            print(content.data, end="", flush=True)
                    else:
                        response += str(chunk.delta.message.content)
                        print(str(chunk.delta.message.content), end="", flush=True)
    
                if chunk.delta.usage:
                    # モデルを使用する
                    usage = chunk.delta.usage
    
            yield self.create_text_message(
                text=f"{response or json.dumps(tool_calls, ensure_ascii=False)}\n"
            )
            result = ""
            for tool_call_id, tool_call_name, tool_call_args in tool_calls:
                tool_instance = tool_instances[tool_call_name]
                tool_invoke_responses = self.session.tool.invoke(
                    provider_type=ToolProviderType.BUILT_IN,
                    provider=tool_instance.identity.provider,
                    tool_name=tool_instance.identity.name,
                    parameters={**tool_instance.runtime_parameters, **tool_call_args},
                )
                if not tool_instance:
                    tool_invoke_responses = {
                        "tool_call_id": tool_call_id,
                        "tool_call_name": tool_call_name,
                        "tool_response": f"there is not a tool named {tool_call_name}",
                    }
                else:
                    # ツールを呼び出す
                    tool_invoke_responses = self.session.tool.invoke(
                        provider_type=ToolProviderType.BUILT_IN,
                        provider=tool_instance.identity.provider,
                        tool_name=tool_instance.identity.name,
                        parameters={**tool_instance.runtime_parameters, **tool_call_args},
                    )
                    result = ""
                    for tool_invoke_response in tool_invoke_responses:
                        if tool_invoke_response.type == ToolInvokeMessage.MessageType.TEXT:
                            result += cast(
                                ToolInvokeMessage.TextMessage, tool_invoke_response.message
                            ).text
                        elif (
                            tool_invoke_response.type == ToolInvokeMessage.MessageType.LINK
                        ):
                            result += (
                                f"result link: {cast(ToolInvokeMessage.TextMessage, tool_invoke_response.message).text}."
                                + " please tell user to check it."
                            )
                        elif tool_invoke_response.type in {
                            ToolInvokeMessage.MessageType.IMAGE_LINK,
                            ToolInvokeMessage.MessageType.IMAGE,
                        }:
                            result += (
                                "image has been created and sent to user already, "
                                + "you do not need to create it, just tell the user to check it now."
                            )
                        elif (
                            tool_invoke_response.type == ToolInvokeMessage.MessageType.JSON
                        ):
                            text = json.dumps(
                                cast(
                                    ToolInvokeMessage.JsonMessage,
                                    tool_invoke_response.message,
                                ).json_object,
                                ensure_ascii=False,
                            )
                            result += f"tool response: {text}."
                        else:
                            result += f"tool response: {tool_invoke_response.message!r}."
    
                    tool_response = {
                        "tool_call_id": tool_call_id,
                        "tool_call_name": tool_call_name,
                        "tool_response": result,
                    }
            yield self.create_text_message(result)
    
        def _convert_tool_to_prompt_message_tool(
            self, tool: ToolEntity
        ) -> PromptMessageTool:
            """
            convert tool to prompt message tool
            """
            message_tool = PromptMessageTool(
                name=tool.identity.name,
                description=tool.description.llm if tool.description else "",
                parameters={
                    "type": "object",
                    "properties": {},
                    "required": [],
                },
            )
    
            parameters = tool.parameters
            for parameter in parameters:
                if parameter.form != ToolParameter.ToolParameterForm.LLM:
                    continue
    
                parameter_type = parameter.type
                if parameter.type in {
                    ToolParameter.ToolParameterType.FILE,
                    ToolParameter.ToolParameterType.FILES,
                }:
                    continue
                enum = []
                if parameter.type == ToolParameter.ToolParameterType.SELECT:
                    enum = (
                        [option.value for option in parameter.options]
                        if parameter.options
                        else []
                    )
    
                message_tool.parameters["properties"][parameter.name] = {
                    "type": parameter_type,
                    "description": parameter.llm_description or "",
                }
    
                if len(enum) > 0:
                    message_tool.parameters["properties"][parameter.name]["enum"] = enum
    
                if parameter.required:
                    message_tool.parameters["required"].append(parameter.name)
    
            return message_tool
    
        def check_tool_calls(self, llm_result_chunk: LLMResultChunk) -> bool:
            """
            Check if there is any tool call in llm result chunk
            """
            return bool(llm_result_chunk.delta.message.tool_calls)
    
        def extract_tool_calls(
            self, llm_result_chunk: LLMResultChunk
        ) -> list[tuple[str, str, dict[str, Any]]]:
            """
            Extract tool calls from llm result chunk
    
            Returns:
                List[Tuple[str, str, Dict[str, Any]]]: [(tool_call_id, tool_call_name, tool_call_args)]
            """
            tool_calls = []
            for prompt_message in llm_result_chunk.delta.message.tool_calls:
                args = {}
                if prompt_message.function.arguments != "":
                    args = json.loads(prompt_message.function.arguments)
    
                tool_calls.append(
                    (
                        prompt_message.id,
                        prompt_message.function.name,
                        args,
                    )
                )
    
            return tool_calls

#### 

​

完全な機能コード例

**モデルの呼び出し** 、**ツールの呼び出し** 、および**複数ターンのログ出力機能** を含む、完全なプラグインコードの例：
    
    
    import json
    import time
    from collections.abc import Generator
    from typing import Any, cast
    
    from dify_plugin.entities.agent import AgentInvokeMessage
    from dify_plugin.entities.model.llm import LLMModelConfig, LLMResult, LLMResultChunk
    from dify_plugin.entities.model.message import (
        PromptMessageTool,
        UserPromptMessage,
    )
    from dify_plugin.entities.tool import ToolInvokeMessage, ToolParameter, ToolProviderType
    from dify_plugin.interfaces.agent import AgentModelConfig, AgentStrategy, ToolEntity
    from pydantic import BaseModel
    
    class BasicParams(BaseModel):
        maximum_iterations: int
        model: AgentModelConfig
        tools: list[ToolEntity]
        query: str
    
    class BasicAgentAgentStrategy(AgentStrategy):
        def _invoke(self, parameters: dict[str, Any]) -> Generator[AgentInvokeMessage]:
            params = BasicParams(**parameters)
            function_call_round_log = self.create_log_message(
                label="Function Call Round1 ",
                data={},
                metadata={},
            )
            yield function_call_round_log
            model_started_at = time.perf_counter()
            model_log = self.create_log_message(
                label=f"{params.model.model} Thought",
                data={},
                metadata={"start_at": model_started_at, "provider": params.model.provider},
                status=ToolInvokeMessage.LogMessage.LogStatus.START,
                parent=function_call_round_log,
            )
            yield model_log
            chunks: Generator[LLMResultChunk, None, None] | LLMResult = (
                self.session.model.llm.invoke(
                    model_config=LLMModelConfig(**params.model.model_dump(mode="json")),
                    prompt_messages=[UserPromptMessage(content=params.query)],
                    tools=[
                        self._convert_tool_to_prompt_message_tool(tool)
                        for tool in params.tools
                    ],
                    stop=params.model.completion_params.get("stop", [])
                    if params.model.completion_params
                    else [],
                    stream=True,
                )
            )
            response = ""
            tool_calls = []
            tool_instances = (
                {tool.identity.name: tool for tool in params.tools} if params.tools else {}
            )
            tool_call_names = ""
            tool_call_inputs = ""
            for chunk in chunks:
                # ツール呼び出しがあるか確認
                if self.check_tool_calls(chunk):
                    tool_calls = self.extract_tool_calls(chunk)
                    tool_call_names = ";".join([tool_call[1] for tool_call in tool_calls])
                    try:
                        tool_call_inputs = json.dumps(
                            {tool_call[1]: tool_call[2] for tool_call in tool_calls},
                            ensure_ascii=False,
                        )
                    except json.JSONDecodeError:
                        # エンコードエラーを避けるため、asciiを保証
                        tool_call_inputs = json.dumps(
                            {tool_call[1]: tool_call[2] for tool_call in tool_calls}
                        )
                    print(tool_call_names, tool_call_inputs)
                if chunk.delta.message and chunk.delta.message.content:
                    if isinstance(chunk.delta.message.content, list):
                        for content in chunk.delta.message.content:
                            response += content.data
                            print(content.data, end="", flush=True)
                    else:
                        response += str(chunk.delta.message.content)
                        print(str(chunk.delta.message.content), end="", flush=True)
    
                if chunk.delta.usage:
                    # モデルを使用する
                    usage = chunk.delta.usage
    
            yield self.finish_log_message(
                log=model_log,
                data={
                    "output": response,
                    "tool_name": tool_call_names,
                    "tool_input": tool_call_inputs,
                },
                metadata={
                    "started_at": model_started_at,
                    "finished_at": time.perf_counter(),
                    "elapsed_time": time.perf_counter() - model_started_at,
                    "provider": params.model.provider,
                },
            )
            yield self.create_text_message(
                text=f"{response or json.dumps(tool_calls, ensure_ascii=False)}\n"
            )
            result = ""
            for tool_call_id, tool_call_name, tool_call_args in tool_calls:
                tool_instance = tool_instances[tool_call_name]
                tool_invoke_responses = self.session.tool.invoke(
                    provider_type=ToolProviderType.BUILT_IN,
                    provider=tool_instance.identity.provider,
                    tool_name=tool_instance.identity.name,
                    parameters={**tool_instance.runtime_parameters, **tool_call_args},
                )
                if not tool_instance:
                    tool_invoke_responses = {
                        "tool_call_id": tool_call_id,
                        "tool_call_name": tool_call_name,
                        "tool_response": f"there is not a tool named {tool_call_name}",
                    }
                else:
                    # ツールを呼び出す
                    tool_invoke_responses = self.session.tool.invoke(
                        provider_type=ToolProviderType.BUILT_IN,
                        provider=tool_instance.identity.provider,
                        tool_name=tool_instance.identity.name,
                        parameters={**tool_instance.runtime_parameters, **tool_call_args},
                    )
                    result = ""
                    for tool_invoke_response in tool_invoke_responses:
                        if tool_invoke_response.type == ToolInvokeMessage.MessageType.TEXT:
                            result += cast(
                                ToolInvokeMessage.TextMessage, tool_invoke_response.message
                            ).text
                        elif (
                            tool_invoke_response.type == ToolInvokeMessage.MessageType.LINK
                        ):
                            result += (
                                f"result link: {cast(ToolInvokeMessage.TextMessage, tool_invoke_response.message).text}."
                                + " please tell user to check it."
                            )
                        elif tool_invoke_response.type in {
                            ToolInvokeMessage.MessageType.IMAGE_LINK,
                            ToolInvokeMessage.MessageType.IMAGE,
                        }:
                            result += (
                                "image has been created and sent to user already, "
                                + "you do not need to create it, just tell the user to check it now."
                            )
                        elif (
                            tool_invoke_response.type == ToolInvokeMessage.MessageType.JSON
                        ):
                            text = json.dumps(
                                cast(
                                    ToolInvokeMessage.JsonMessage,
                                    tool_invoke_response.message,
                                ).json_object,
                                ensure_ascii=False,
                            )
                            result += f"tool response: {text}."
                        else:
                            result += f"tool response: {tool_invoke_response.message!r}."
    
                    tool_response = {
                        "tool_call_id": tool_call_id,
                        "tool_call_name": tool_call_name,
                        "tool_response": result,
                    }
            yield self.create_text_message(result)
    
        def _convert_tool_to_prompt_message_tool(
            self, tool: ToolEntity
        ) -> PromptMessageTool:
            """
            convert tool to prompt message tool
            """
            message_tool = PromptMessageTool(
                name=tool.identity.name,
                description=tool.description.llm if tool.description else "",
                parameters={
                    "type": "object",
                    "properties": {},
                    "required": [],
                },
            )
    
            parameters = tool.parameters
            for parameter in parameters:
                if parameter.form != ToolParameter.ToolParameterForm.LLM:
                    continue
    
                parameter_type = parameter.type
                if parameter.type in {
                    ToolParameter.ToolParameterType.FILE,
                    ToolParameter.ToolParameterType.FILES,
                }:
                    continue
                enum = []
                if parameter.type == ToolParameter.ToolParameterType.SELECT:
                    enum = (
                        [option.value for option in parameter.options]
                        if parameter.options
                        else []
                    )
    
                message_tool.parameters["properties"][parameter.name] = {
                    "type": parameter_type,
                    "description": parameter.llm_description or "",
                }
    
                if len(enum) > 0:
                    message_tool.parameters["properties"][parameter.name]["enum"] = enum
    
                if parameter.required:
                    message_tool.parameters["required"].append(parameter.name)
    
            return message_tool
    
        def check_tool_calls(self, llm_result_chunk: LLMResultChunk) -> bool:
            """
            Check if there is any tool call in llm result chunk
            """
            return bool(llm_result_chunk.delta.message.tool_calls)
    
        def extract_tool_calls(
            self, llm_result_chunk: LLMResultChunk
        ) -> list[tuple[str, str, dict[str, Any]]]:
            """
            Extract tool calls from llm result chunk
    
            Returns:
                List[Tuple[str, str, Dict[str, Any]]]: [(tool_call_id, tool_call_name, tool_call_args)]
            """
            tool_calls = []
            for prompt_message in llm_result_chunk.delta.message.tool_calls:
                args = {}
                if prompt_message.function.arguments != "":
                    args = json.loads(prompt_message.function.arguments)
    
                tool_calls.append(
                    (
                        prompt_message.id,
                        prompt_message.function.name,
                        args,
                    )
                )
    
            return tool_calls

### 

​

3\. プラグインのデバッグ

プラグインの設定ファイルと機能コードを記述したら、プラグインのディレクトリ内で `python -m main` コマンドを実行してプラグインを再起動します。次に、プラグインが正常に動作するかどうかをテストする必要があります。Difyのリモートデバッグ機能を利用するには、[「プラグイン管理」](https://cloud.dify.aij/plugins)にアクセスしてデバッグキーとリモートサーバーのアドレスを取得してください。

プラグインプロジェクトに戻り、`.env.example` ファイルをコピーして `.env` にリネームします。そして、取得したリモートサーバーのアドレスとデバッグキーを、`.env`ファイルの `REMOTE_INSTALL_HOST` および `REMOTE_INSTALL_KEY` パラメータにそれぞれ入力します。
    
    
    INSTALL_METHOD=remote
    REMOTE_INSTALL_HOST=remote
    REMOTE_INSTALL_PORT=5003
    REMOTE_INSTALL_KEY=****-****-****-****-****

`python -m main` コマンドを実行してプラグインを起動します。プラグインページで、プラグインがワークスペースにインストールされたことを確認できます。このプラグインは、他のチームメンバーも利用可能です。

### 

​

プラグインのパッケージ化（オプション）

プラグインが正常に動作することを確認したら、以下のコマンドラインツールを使用してプラグインをパッケージ化し、名前を付けることができます。実行後、現在のフォルダに `google.difypkg` ファイルが生成されます。これが最終的なプラグインパッケージです。
    
    
    dify plugin package ./basic_agent/

おめでとうございます！これで、ツールタイプのプラグインの開発、デバッグ、パッケージ化の全プロセスが完了しました。

### 

​

プラグインの公開（オプション）

作成したプラグインは、[Dify Plugins コードリポジトリ](https://github.com/langgenius/dify-plugins)にアップロードして公開できます。アップロードする前に、プラグインが[プラグイン公開規約](../../publish-plugins/publish-to-dify-marketplace)に準拠していることをご確認ください。審査に合格すると、コードはメインブランチにマージされ、[Dify Marketplace](https://marketplace.dify.ai/)に自動的に公開されます。

### 

​

さらに詳しく

複雑なタスクでは、複数回の思考とツール呼び出しが必要になることがよくあります。より高度なタスク処理を実現するために、通常は反復実行戦略が採用されます。つまり、「**モデル呼び出し → ツール呼び出し** 」という流れを、タスクが完了するか、設定された最大反復回数に達するまで繰り返します。

このプロセスにおいて、プロンプト管理は非常に重要です。モデル入力を効率的に整理し、動的に調整するために、プラグイン内のFunction Calling機能の[実装コード](https://github.com/langgenius/dify-official-plugins/blob/main/agent-strategies/cot_agent/strategies/function_calling.py)を参照し、標準化された方法でモデルが外部ツールを呼び出し、その結果を処理する方法を理解することを推奨します。

* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/plugins/quick-start/develop-plugins/agent-strategy-plugin.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20-strategy-plu&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/plugins/quick-start/develop-plugins%2Fagent-strategy-plugin.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[カスタムモデルの組み込み](/ja-jp/plugins/quick-start/develop-plugins/model-plugin/customizable-model)[拡張機能型プラグイン](/ja-jp/plugins/quick-start/develop-plugins/extension-plugin)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * 事前準備
  * 1\. プラグインテンプレートの初期化
  * 2\. プラグイン機能の開発
  * 2.1 パラメータの定義
  * 2.2 パラメータの取得と実行
  * 2.3 モデルの呼び出し
  * 2.4 モデルへのメモリ機能の追加
  * 2.5 ツールの呼び出し
  * 2.6 ログの作成
  * 3\. プラグインのデバッグ
  * プラグインのパッケージ化（オプション）
  * プラグインの公開（オプション）
  * さらに詳しく



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/plugins/quick-start/develop-plugins/bundle

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

プラグイン開発の入門

バンドル

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

    * [クイックスタート](/ja-jp/plugins/quick-start/README)
    * [プラグインのインストールと利用方法](/ja-jp/plugins/quick-start/install-plugins)
    * プラグイン開発の入門

      * [プラグイン開発ガイド](/ja-jp/plugins/quick-start/develop-plugins/README)
      * [開発環境のセットアップ](/ja-jp/plugins/quick-start/develop-plugins/initialize-development-tools)
      * [ツールプラグイン](/ja-jp/plugins/quick-start/develop-plugins/tool-plugin)
      * モデル型プラグイン

      * [エージェント戦略プラグイン](/ja-jp/plugins/quick-start/develop-plugins/agent-strategy-plugin)
      * [拡張機能型プラグイン](/ja-jp/plugins/quick-start/develop-plugins/extension-plugin)
      * [バンドル](/ja-jp/plugins/quick-start/develop-plugins/bundle)
    * [プラグインのデバッグ方法](/ja-jp/plugins/quick-start/debug-plugin)
  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




プラグイン開発の入門

# バンドル

Copy page

## [このドキュメントはまもなく非推奨になりますドキュメント再編の一環として、このページは段階的に廃止されます。 _**このカードをクリックして**_ 、最新情報が含まれる更新版にリダイレクトしてください。新しいドキュメントに不一致や改善が必要な箇所を見つけた場合は、ページ下部の「問題を報告」ボタンを使用してください。](/plugin-dev-ja/9241-bundle)

バンドルプラグインパッケージは、複数のプラグインをまとめたものです。複数のプラグインを一つのパッケージにまとめることで、プラグインの一括インストールを可能にし、より高度な機能を提供します。

Dify CLIツールを使用すると、複数のプラグインをバンドルとしてパッケージ化できます。バンドルプラグインパッケージには、以下の3つのタイプがあります。

  * `Marketplace` タイプ：プラグインのIDとバージョン情報を保持します。インポート時には、Dify Marketplaceから該当するプラグインパッケージをダウンロードします。
  * `GitHub` タイプ：GitHubリポジトリのアドレス、リリースバージョン番号、アセットファイル名を保持します。インポート時に、Difyは該当するGitHubリポジトリにアクセスしてプラグインパッケージをダウンロードします。
  * `Package` タイプ：プラグインパッケージをバンドル内に直接格納します。参照元は保持されませんが、バンドルパッケージのサイズが大きくなる可能性があります。



### 

​

事前準備

  * Difyプラグインのひな形ツール
  * Python環境（バージョン3.11以上）



プラグイン開発のひな形ツールを準備する方法の詳細については、「[開発ツールの初期化](/ja-jp/plugins/quick-start/develop-plugins/initialize-development-tools)」を参照してください。

### 

​

バンドルプロジェクトの作成

現在のディレクトリで、ひな形コマンドラインツールを実行し、新しいプラグインパッケージプロジェクトを作成します。
    
    
    ./dify-plugin-darwin-arm64 bundle init

このバイナリファイルを `dify` にリネームし、`/usr/local/bin` ディレクトリにコピーした場合、次のコマンドを実行して新しいプラグインプロジェクトを作成できます。
    
    
    dify bundle init

#### 

​

1\. プラグイン情報の入力

プロンプトに従って、プラグイン名、作成者情報、プラグインの説明を設定します。チームで共同作業している場合は、作成者に組織名を記入することもできます。

> 名前は1〜128文字で、文字、数字、ダッシュ、アンダースコアのみを使用できます。

情報を入力してEnterキーを押すと、バンドルプラグインプロジェクトのディレクトリが自動的に作成されます。

#### 

​

2\. 依存関係の追加

  * **マーケットプレイス(Marketplace)**



次のコマンドを実行します。
    
    
    dify-plugin bundle append marketplace . --marketplace_pattern=langgenius/openai:0.0.1

ここで、`marketplace_pattern` は、Marketplaceでのプラグインの参照であり、形式は `組織名/プラグイン名:バージョン番号` です。

  * **Github**



次のコマンドを実行します。
    
    
    dify-plugin bundle append github . --repo_pattern=langgenius/openai:0.0.1/openai.difypkg

ここで、`repo_pattern` は、GitHubでのプラグインの参照であり、形式は `組織名/リポジトリ名:リリース/添付ファイル名` です。

  * **パッケージ(package)**



次のコマンドを実行します。
    
    
    dify-plugin bundle append package . --package_path=./openai.difypkg

ここで、`package_path` は、プラグインパッケージのディレクトリです。

### 

​

バンドルプロジェクトのパッケージ化

次のコマンドを実行して、バンドルプラグインをパッケージ化します。
    
    
    dify-plugin bundle package ./bundle

コマンドを実行すると、現在のディレクトリに `bundle.difybndl` ファイルが自動的に作成されます。このファイルが最終的なパッケージ結果です。

* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/plugins/quick-start/develop-plugins/bundle.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/plugins/quick-start/develop-plugins%2Fbundle.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[拡張機能型プラグイン](/ja-jp/plugins/quick-start/develop-plugins/extension-plugin)[プラグインのデバッグ方法](/ja-jp/plugins/quick-start/debug-plugin)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * 事前準備
  * バンドルプロジェクトの作成
  * 1\. プラグイン情報の入力
  * 2\. 依存関係の追加
  * バンドルプロジェクトのパッケージ化



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/plugins/quick-start/develop-plugins/extension-plugin

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

プラグイン開発の入門

拡張機能型プラグイン

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

    * [クイックスタート](/ja-jp/plugins/quick-start/README)
    * [プラグインのインストールと利用方法](/ja-jp/plugins/quick-start/install-plugins)
    * プラグイン開発の入門

      * [プラグイン開発ガイド](/ja-jp/plugins/quick-start/develop-plugins/README)
      * [開発環境のセットアップ](/ja-jp/plugins/quick-start/develop-plugins/initialize-development-tools)
      * [ツールプラグイン](/ja-jp/plugins/quick-start/develop-plugins/tool-plugin)
      * モデル型プラグイン

      * [エージェント戦略プラグイン](/ja-jp/plugins/quick-start/develop-plugins/agent-strategy-plugin)
      * [拡張機能型プラグイン](/ja-jp/plugins/quick-start/develop-plugins/extension-plugin)
      * [バンドル](/ja-jp/plugins/quick-start/develop-plugins/bundle)
    * [プラグインのデバッグ方法](/ja-jp/plugins/quick-start/debug-plugin)
  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




プラグイン開発の入門

# 拡張機能型プラグイン

Copy page

## [このドキュメントはまもなく非推奨になりますドキュメント再編の一環として、このページは段階的に廃止されます。 _**このカードをクリックして**_ 、最新情報が含まれる更新版にリダイレクトしてください。新しいドキュメントに不一致や改善が必要な箇所を見つけた場合は、ページ下部の「問題を報告」ボタンを使用してください。](/plugin-dev-ja/9231-extension-plugin)

このドキュメントでは、Extensionタイプのプラグインを迅速に開発し、プラグイン開発の基本的な流れを理解するのに役立つように解説します。

### 

​

事前準備

  * Difyプラグインの足場ツール
  * Python環境、バージョン番号 ≥ 3.12



プラグイン開発の足場ツールの準備方法については、[開発ツールの初期化](/ja-jp/plugins/quick-start/develop-plugins/initialize-development-tools)を参照してください。

### 

​

新規プロジェクトの作成 

現在のパスで、足場コマンドラインツールを実行し、新しいDifyプラグインプロジェクトを作成します。
    
    
    ./dify-plugin-darwin-arm64 plugin init

このバイナリファイルを`dify`にリネームし、`/usr/local/bin`パスにコピーした場合、以下のコマンドを実行して新しいプラグインプロジェクトを作成できます。
    
    
    dify plugin init

### 

​

**プラグイン情報の入力**

表示される指示に従って、プラグイン名、作者情報、プラグインの説明を設定してください。チームで共同作業する場合は、作者を組織名にすることも可能です。

> プラグイン名の長さは1〜128文字で、文字、数字、ダッシュ、アンダースコアのみを使用できます。

入力が完了したら、プラグイン開発言語の選択でPythonを選択してください。

### 

​

3\. プラグインタイプの選択とプロジェクトテンプレートの初期化

足場ツール内のすべてのテンプレートには、完全なコードプロジェクトが用意されています。このドキュメントでは、例として`Extension`タイプのプラグインテンプレートを使用します。プラグインに精通している開発者であれば、テンプレートを使用せずに、[APIドキュメント](/ja-jp/plugins/schema-definition/tool)を参照して様々なタイプのプラグイン開発を進めることができます。

#### 

​

プラグイン権限の設定

プラグインがDifyメインプラットフォームに正常に接続するためには、Difyメインプラットフォームの権限を読み取る必要があります。このサンプルプラグインには、以下の権限を付与してください。

  * ツール
  * LLM
  * アプリ
  * 永続ストレージを有効にし、デフォルトサイズのストレージを割り当てる
  * エンドポイントの登録を許可する



> ターミナル内で方向キーを使って権限を選択し、「Tab」キーで権限を付与します。

すべての権限項目をチェックした後、Enterキーを押してプラグインの作成を完了します。システムが自動的にプラグインのプロジェクトコードを生成します。

プラグインの基本ファイル構造は以下の通りです。
    
    
    .
    ├── GUIDE.md
    ├── README.md
    ├── _assets
    │   └── icon.svg
    ├── endpoints
    │   ├── your-project.py
    │   └── your-project.yaml
    ├── group
    │   └── your-project.yaml
    ├── main.py
    ├── manifest.yaml
    └── requirements.txt

  * `GUIDE.md`: プラグインの作成プロセスを説明する簡単なチュートリアルです。
  * `README.md`: 現在のプラグインに関する情報です。このプラグインの概要や使用方法をこのファイルに記述する必要があります。
  * `_assets`: 現在のプラグインに関連するすべてのマルチメディアファイルを保存します。
  * `endpoints`: CLIのガイドに従って作成される`Extension`タイプのプラグインテンプレートです。このディレクトリには、すべてのエンドポイントの機能実装コードが格納されています。
  * `group`: 秘密鍵のタイプ、多言語設定、API定義ファイルのパスを指定します。
  * `main.py`: プロジェクト全体のエントリポイントとなるファイルです。
  * `manifest.yaml`: プラグインの基本設定ファイルです。このプラグインに必要な権限、拡張機能の種類などの設定情報が含まれています。
  * `requirements.txt`: Python環境の依存関係を記述します。



### 

​

プラグインの開発

#### 

​

1\. プラグインのリクエストエンドポイントの定義

`endpoints/test_plugin.yaml`を編集し、以下のコードを参考に変更してください。
    
    
    path: "/neko"
    method: "GET"
    extra:
      python:
        source: "endpoints/test_plugin.py"

このコードは、プラグインのエントリパスを`/neko`、リクエストメソッドをGETタイプとして定義するものです。プラグインの機能実装コードは、`endpoints/test_plugin.py`ファイルに記述します。

#### 

​

2\. プラグイン機能の作成

プラグインの機能：プラグインサービスをリクエストし、猫の情報を出力します。

プラグインの機能実装コードを`endpoints/test_plugin.py`ファイルに記述します。以下のサンプルコードを参考にしてください。
    
    
    from typing import Mapping
    from werkzeug import Request, Response
    from flask import Flask, render_template_string
    from dify_plugin import Endpoint
    
    app = Flask(__name__)
    
    class NekoEndpoint(Endpoint):
        def _invoke(self, r: Request, values: Mapping, settings: Mapping) -> Response:
            ascii_art = '''
    ⬜️⬜️⬜️⬜️⬜️⬜️⬜️⬜️⬜️⬜️⬜️⬜️⬜️⬜️⬜️⬜️⬜️⬜️⬜️⬜️⬜️⬜️⬜️⬜️⬜️⬜️⬜️⬛️⬛️⬛️⬛️⬛️⬛️⬛️⬛️⬛️⬛️⬛️⬛️⬛️⬛️⬛️⬛⬛️⬜️⬜️⬜️⬜️⬜⬜️⬜️️
    🟥🟥⬜️⬜️⬜️⬜️⬜️⬜️⬜️⬜️🟥🟥🟥🟥🟥🟥🟥🟥⬜️⬜️⬜️⬜️⬜️⬜️⬜️⬜️⬛🥧🥧🥧🥧🥧🥧🥧🥧🥧🥧🥧🥧🥧🥧🥧🥧🥧⬛️⬜️⬜️⬜️⬜️⬜⬜️️
    🟥🟥🟥🟥🟥🟥🟥🟥🟥🟥🟥🟥🟥🟥🟥🟥🟥🟥🟥🟥🟥🟥🟥🟥🟥⬛️🥧🥧🥧💟💟💟💟💟💟💟💟💟💟💟💟💟🥧🥧🥧⬛️⬜️⬜️⬜️⬜⬜️️
    🟥🟥🟥🟥🟥🟥🟥🟥🟥🟥🟥🟥🟥🟥🟥🟥🟥🟥🟥🟥🟥🟥🟥🟥🟥⬛️🥧🥧💟💟💟💟💟💟🍓💟💟🍓💟💟💟💟💟🥧🥧⬛️⬜️⬜️⬜️⬜️⬜️️
    🟧🟧🟥🟥🟥🟥🟥🟥🟥🟥🟧🟧🟧🟧🟧🟧🟧🟧🟥🟥🟥🟥🟥🟥🟥⬛🥧💟💟🍓💟💟💟💟💟💟💟💟💟💟💟💟💟💟🥧⬛️⬜️⬜️⬜️⬜⬜️️
    🟧🟧🟧🟧🟧🟧🟧🟧🟧🟧🟧🟧🟧🟧🟧🟧🟧🟧🟧🟧🟧🟧🟧🟧🟧⬛️🥧💟💟💟💟💟💟💟💟💟💟⬛️⬛️💟💟🍓💟💟🥧⬛️⬜️⬛️️⬛️️⬜⬜️️
    🟧🟧🟧🟧🟧🟧🟧🟧🟧🟧🟧🟧🟧🟧🟧🟧🟧🟧🟧🟧🟧🟧🟧🟧🟧⬛️🥧💟💟💟💟💟💟💟💟💟⬛️🌫🌫⬛💟💟💟💟🥧⬛️⬛️🌫🌫⬛⬜️️
    🟨🟨🟧🟧🟧🟧🟧🟧🟧🟧🟨🟨🟨🟨🟨🟨🟨🟨🟧⬛️⬛️⬛️⬛️🟧🟧⬛️🥧💟💟💟💟💟💟🍓💟💟⬛️🌫🌫🌫⬛💟💟💟🥧⬛️🌫🌫🌫⬛⬜️️
    🟨🟨🟨🟨🟨🟨🟨🟨🟨🟨🟨🟨🟨🟨🟨🟨🟨🟨🟨⬛️🌫🌫⬛️⬛️🟧⬛️🥧💟💟💟💟💟💟💟💟💟⬛️🌫🌫🌫🌫⬛️⬛️⬛️⬛️🌫🌫🌫🌫⬛⬜️️
    🟨🟨🟨🟨🟨🟨🟨🟨🟨🟨🟨🟨🟨🟨🟨🟨🟨🟨🟨⬛️⬛️🌫🌫⬛️⬛️⬛️🥧💟💟💟🍓💟💟💟💟💟⬛️🌫🌫🌫🌫🌫🌫🌫🌫🌫🌫🌫🌫⬛⬜️️
    🟩🟩🟨🟨🟨🟨🟨🟨🟨🟨🟩🟩🟩🟩🟩🟩🟩🟩🟨🟨⬛⬛️🌫🌫⬛️⬛️🥧💟💟💟💟💟💟💟🍓⬛️🌫🌫🌫🌫🌫🌫🌫🌫🌫🌫🌫🌫🌫🌫⬛️
    🟩🟩🟩🟩🟩🟩🟩🟩🟩🟩🟩🟩🟩🟩🟩🟩🟩🟩🟩🟩🟩⬛️⬛️🌫🌫⬛️🥧💟🍓💟💟💟💟💟💟⬛️🌫🌫🌫⬜️⬛️🌫🌫🌫🌫🌫⬜️⬛️🌫🌫⬛️
    ️🟩🟩🟩🟩🟩🟩🟩🟩🟩🟩🟩🟩🟩🟩🟩🟩🟩🟩🟩🟩🟩🟩⬛️⬛️⬛️⬛️🥧💟💟💟💟💟💟💟💟⬛️🌫🌫🌫⬛️⬛️🌫🌫🌫⬛️🌫⬛️⬛️🌫🌫⬛️
    🟦🟦🟩🟩🟩🟩🟩🟩🟩🟩🟦🟦🟦🟦🟦🟦🟦🟦🟩🟩🟩🟩🟩🟩⬛️⬛️🥧💟💟💟💟💟🍓💟💟⬛🌫🟥🟥🌫🌫🌫🌫🌫🌫🌫🌫🌫🟥🟥⬛️
    🟦🟦🟦🟦🟦🟦🟦🟦🟦🟦🟦🟦🟦🟦🟦🟦🟦🟦🟦🟦🟦🟦🟦🟦🟦⬛️🥧🥧💟🍓💟💟💟💟💟⬛️🌫🟥🟥🌫⬛️🌫🌫⬛️🌫🌫⬛️🌫🟥🟥⬛️
    🟦🟦🟦🟦🟦🟦🟦🟦🟦🟦🟦🟦🟦🟦🟦🟦🟦🟦🟦🟦🟦🟦🟦🟦🟦⬛️🥧🥧🥧💟💟💟💟💟💟💟⬛️🌫🌫🌫⬛️⬛️⬛️⬛️⬛️⬛️⬛️🌫🌫⬛️⬜️
    🟪🟪🟦🟦🟦🟦🟦🟦🟦🟦🟪🟪🟪🟪🟪🟪🟪🟪🟦🟦🟦🟦🟦🟦⬛️⬛️⬛️🥧🥧🥧🥧🥧🥧🥧🥧🥧🥧⬛️🌫🌫🌫🌫🌫🌫🌫🌫🌫🌫⬛️⬜️⬜️
    🟪🟪🟪🟪🟪🟪🟪🟪🟪🟪🟪🟪🟪🟪🟪🟪🟪🟪🟪🟪🟪🟪🟪⬛️🌫🌫🌫⬛️⬛️⬛️⬛️⬛️⬛️⬛️⬛️⬛️⬛️⬛️⬛️⬛️⬛️⬛️⬛️⬛️⬛️⬛️⬛️⬛️⬜️⬜️⬜️
    🟪🟪🟪🟪🟪🟪🟪🟪🟪🟪🟪🟪🟪🟪🟪🟪🟪🟪🟪🟪🟪🟪🟪⬛️🌫🌫⬛️⬛️⬜️⬛️🌫🌫⬛️⬜️⬜️⬜️⬜️⬜️⬛️🌫🌫⬛️⬜️⬛️🌫🌫⬛️⬜️⬜️⬜️⬜️
    ⬜️⬜️🟪🟪🟪🟪🟪🟪🟪🟪⬜️⬜️⬜️⬜️⬜️⬜️⬜️⬜️🟪🟪🟪🟪🟪⬛️⬛️⬛️⬛⬜️⬜️⬛️⬛️⬛️⬜️⬜️⬜️⬜️⬜️⬜️⬜️⬛️⬛️⬛️⬜️⬜️⬛️⬛️⬜️⬜️⬜️⬜️⬜️️
            '''
            ascii_art_lines = ascii_art.strip().split('\n')
            with app.app_context():
                return Response(render_template_string('''
        <!DOCTYPE html>
        <html>
        <head>
            <style>
                body {
                    background-color: black;
                    color: white;
                    overflow: hidden;
                    margin: 0;
                    padding: 0;
                }
                #ascii-art {
                    font-family: monospace;
                    white-space: pre;
                    position: absolute;
                    top: 50%;
                    transform: translateY(-50%);
                    display: inline-block;
                    font-size: 16px;
                    line-height: 1;
                }
            </style>
        </head>
        <body>
            <div id="ascii-art"></div>
            <script>
                var asciiArtLines = {{ ascii_art_lines | tojson }};
                var asciiArtDiv = document.getElementById("ascii-art");
                var index = 0;
                function displayNextLine() {
                    if (index < asciiArtLines.length) {
                        var line = asciiArtLines[index];
                        var lineElement = document.createElement("div");
                        lineElement.innerHTML = line;
                        asciiArtDiv.appendChild(lineElement);
                        index++;
                        setTimeout(displayNextLine, 100);
                    } else {
                        animateCat();
                    }
                }
                function animateCat() {
                    var pos = 0;
                    var screenWidth = window.innerWidth;
                    var catWidth = asciiArtDiv.offsetWidth;
                    function move() {
                        asciiArtDiv.style.left = pos + "px";
                        pos += 2;
                        if (pos > screenWidth) {
                            pos = -catWidth;
                        }
                        requestAnimationFrame(move);
                    }
                    move();
                }
                displayNextLine();
            </script>
        </body>
        </html>
            ''', ascii_art_lines=ascii_art_lines), status=200, content_type="text/html")

Expand code

このコードを実行する前に、まず以下のPythonの依存パッケージをインストールする必要があります。
    
    
    pip install werkzeug
    pip install flask
    pip install dify-plugin

### 

​

プラグインのデバッグ

次に、プラグインが正常に動作するかどうかをテストします。Difyはリモートデバッグ機能を提供しており、「プラグイン管理」ページでデバッグキーとリモートサーバーのアドレスを取得できます。

プラグインのプロジェクトに戻り、`.env.example`ファイルをコピーして`.env`にリネームします。そして、取得したリモートサーバーのアドレスやデバッグキーなどの情報を`.env`ファイルに記入してください。

`.env`ファイルの内容：
    
    
    INSTALL_METHOD=remote
    REMOTE_INSTALL_HOST=remote
    REMOTE_INSTALL_PORT=5003
    REMOTE_INSTALL_KEY=****-****-****-****-****

`python -m main`コマンドを実行してプラグインを起動します。プラグインページで、このプラグインがワークスペースにインストールされたことを確認できます。他のチームメンバーもこのプラグインにアクセス可能です。

プラグイン内に新しいエンドポイントを追加し、名前や`api_key`などの情報を任意で入力します。自動生成されたURLにアクセスすると、プラグインが提供するウェブサービスが表示されます。

### 

​

プラグインのパッケージ化

プラグインが正常に動作することを確認したら、以下のコマンドラインツールを使用してプラグインをパッケージ化し、名前を付けることができます。実行後、現在のフォルダに`neko.difypkg`というファイルが生成されます。このファイルが最終的なプラグインパッケージです。
    
    
    dify plugin package ./neko

おめでとうございます！これで、プラグインの開発、テスト、パッケージ化の全工程が完了しました。

### 

​

プラグインの公開

作成したプラグインは、[Dify Plugins コードリポジトリ](https://github.com/langgenius/dify-plugins)にアップロードして公開できます。アップロードする前に、プラグインが[プラグイン公開仕様](/ja-jp/plugins/publish-plugins/publish-to-dify-marketplace/README)に準拠していることを確認してください。審査に合格すると、コードはメインブランチにマージされ、[Dify Marketplace](https://marketplace.dify.ai/)に自動的に公開されます。

### 

​

さらに詳しく

**クイックスタート：**

  * [バンドルタイププラグイン：複数のプラグインをまとめる](/ja-jp/plugins/quick-start/develop-plugins/bundle)
  * [ツールタイププラグイン：Google検索](/ja-jp/plugins/quick-start/develop-plugins/tool-plugin)
  * [モデルタイププラグイン](/ja-jp/plugins/quick-start/develop-plugins/bundle)



**プラグインインターフェースドキュメント：**

  * [マニフェスト](/ja-jp/plugins/schema-definition/manifest)構造
  * [エンドポイント](/ja-jp/plugins/schema-definition/endpoint)詳細定義
  * [Dify機能の逆呼び出し](/ja-jp/plugins/schema-definition/reverse-invocation-of-the-dify-service/app)
  * [ツール](/ja-jp/plugins/schema-definition/tool)
  * [モデル](/ja-jp/plugins/schema-definition/reverse-invocation-of-the-dify-service/model)
  * [拡張エージェント戦略](/ja-jp/plugins/schema-definition/agent)



**ベストプラクティス：**

[Slack Botプラグインの開発](/ja-jp/plugins/best-practice/develop-a-slack-bot-plugin)

* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/plugins/quick-start/develop-plugins/extension-plugin.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20sion-plu&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/plugins/quick-start/develop-plugins%2Fextension-plugin.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[エージェント戦略プラグイン](/ja-jp/plugins/quick-start/develop-plugins/agent-strategy-plugin)[バンドル](/ja-jp/plugins/quick-start/develop-plugins/bundle)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * 事前準備
  * 新規プロジェクトの作成 
  * プラグイン情報の入力
  * 3\. プラグインタイプの選択とプロジェクトテンプレートの初期化
  * プラグイン権限の設定
  * プラグインの開発
  * 1\. プラグインのリクエストエンドポイントの定義
  * 2\. プラグイン機能の作成
  * プラグインのデバッグ
  * プラグインのパッケージ化
  * プラグインの公開
  * さらに詳しく



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/plugins/quick-start/develop-plugins/initialize-development-tools

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

プラグイン開発の入門

開発環境のセットアップ

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

    * [クイックスタート](/ja-jp/plugins/quick-start/README)
    * [プラグインのインストールと利用方法](/ja-jp/plugins/quick-start/install-plugins)
    * プラグイン開発の入門

      * [プラグイン開発ガイド](/ja-jp/plugins/quick-start/develop-plugins/README)
      * [開発環境のセットアップ](/ja-jp/plugins/quick-start/develop-plugins/initialize-development-tools)
      * [ツールプラグイン](/ja-jp/plugins/quick-start/develop-plugins/tool-plugin)
      * モデル型プラグイン

      * [エージェント戦略プラグイン](/ja-jp/plugins/quick-start/develop-plugins/agent-strategy-plugin)
      * [拡張機能型プラグイン](/ja-jp/plugins/quick-start/develop-plugins/extension-plugin)
      * [バンドル](/ja-jp/plugins/quick-start/develop-plugins/bundle)
    * [プラグインのデバッグ方法](/ja-jp/plugins/quick-start/debug-plugin)
  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




プラグイン開発の入門

# 開発環境のセットアップ

Copy page

## [このドキュメントはまもなく非推奨になりますドキュメント再編の一環として、このページは段階的に廃止されます。 _**このカードをクリックして**_ 、最新情報が含まれる更新版にリダイレクトしてください。新しいドキュメントに不一致や改善が必要な箇所を見つけた場合は、ページ下部の「問題を報告」ボタンを使用してください。](/plugin-dev-ja/0221-initialize-development-tools)

Difyプラグインの開発を始める前に、以下の前提条件を準備してください：

  * [DifyプラグインCLIツール](https://github.com/langgenius/dify-plugin-daemon?tab=readme-ov-file#cli)
  * [Python 3.12+](https://docs.python.org/3.12/using/index.html)



## 

​

**1\. DifyプラグインCLIツールのインストール**

DifyプラグインCLIツールは、Homebrew（LinuxおよびmacOS用）またはスタンドアロンのバイナリ実行ファイル（Windows、Linux、macOS用）でインストールできます。

### 

​

Homebrewでのインストール

macOSおよびLinuxユーザーには、[Homebrew](https://brew.sh/)を使用してDifyプラグインCLIをインストールすることをお勧めします。

[DifyプラグインCLIツールのHomebrewフォーミュラ](https://github.com/langgenius/homebrew-dify)をタップし、次に`brew install`でインストールします。
    
    
    brew tap langgenius/dify
    brew install dify

インストールを確認するには、`dify version`を実行し、バージョンコードが表示されるはずです。
    
    
    dify version

DifyプラグインCLIツールをアップグレードするには、次のコマンドを実行します：
    
    
    brew upgrade dify

### 

​

バイナリ実行ファイルでのインストール

**バイナリ実行ファイルをダウンロード：**

[DifyプラグインCLIツールのリリースページ](https://github.com/langgenius/dify-plugin-daemon/releases)のアセットリストから、OSシステム（Linux / macOS / Windows）とチップアーキテクチャ（`amd64`はx86チップ用、`arm64`はARMまたはAppleのMチップ用）に適したバイナリ実行ファイルを選択してダウンロードします。

**macOSのMチップ** を例にとると、`dify-plugin-darwin-arm64`ファイルをダウンロードし、次のコマンドを実行して実行権限を付与します：
    
    
    chmod +x ./dify-plugin-darwin-arm64
    mv ./dify-plugin-darwin-arm64 ./dify

インストールを確認するには、`./dify version`を実行し、バージョンコードが表示されるはずです。
    
    
    ./dify version

> システムが「Appleは確認できません」と表示する場合は、**設定 → プライバシーとセキュリティ → セキュリティ** に移動し、「今すぐ開く」ボタンをクリックします。

**ヒント:** `dify`コマンドをグローバルにシステム全体で使用するには、バイナリファイルの名前を`dify`に変更し、`/usr/local/bin`システムパスにコピーすることを推奨します。

## 

​

**2\. プラグインの開発**

さまざまな種類のプラグイン開発の例については、以下のコンテンツを参照してください。

## [tool-plugin.mdtool-plugin.md](tool-plugin.md) ## [model-pluginmodel-plugin](model-plugin/) ## [agent-strategy-plugin.mdagent-strategy-plugin.md](agent-strategy-plugin.md) ## [extension.mdextension.md](extension-plugin.md) ## [bundle.mdbundle.md](bundle.md)

* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/plugins/quick-start/develop-plugins/initialize-development-tools.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20alize-development-to&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/plugins/quick-start/develop-plugins%2Finitialize-development-tools.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[プラグイン開発ガイド](/ja-jp/plugins/quick-start/develop-plugins/README)[ツールプラグイン](/ja-jp/plugins/quick-start/develop-plugins/tool-plugin)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * 1\. DifyプラグインCLIツールのインストール
  * Homebrewでのインストール
  * バイナリ実行ファイルでのインストール
  * 2\. プラグインの開発



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/plugins/quick-start/develop-plugins/model-plugin/README

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

モデル型プラグイン

モデルプラグイン

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

    * [クイックスタート](/ja-jp/plugins/quick-start/README)
    * [プラグインのインストールと利用方法](/ja-jp/plugins/quick-start/install-plugins)
    * プラグイン開発の入門

      * [プラグイン開発ガイド](/ja-jp/plugins/quick-start/develop-plugins/README)
      * [開発環境のセットアップ](/ja-jp/plugins/quick-start/develop-plugins/initialize-development-tools)
      * [ツールプラグイン](/ja-jp/plugins/quick-start/develop-plugins/tool-plugin)
      * モデル型プラグイン

        * [モデルプラグイン](/ja-jp/plugins/quick-start/develop-plugins/model-plugin/README)
        * [モデルプロバイダーの構築](/ja-jp/plugins/quick-start/develop-plugins/model-plugin/create-model-providers)
        * [定義済みモデルの組み込み](/ja-jp/plugins/quick-start/develop-plugins/model-plugin/integrate-the-predefined-model)
        * [カスタムモデルの組み込み](/ja-jp/plugins/quick-start/develop-plugins/model-plugin/customizable-model)
      * [エージェント戦略プラグイン](/ja-jp/plugins/quick-start/develop-plugins/agent-strategy-plugin)
      * [拡張機能型プラグイン](/ja-jp/plugins/quick-start/develop-plugins/extension-plugin)
      * [バンドル](/ja-jp/plugins/quick-start/develop-plugins/bundle)
    * [プラグインのデバッグ方法](/ja-jp/plugins/quick-start/debug-plugin)
  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




モデル型プラグイン

# モデルプラグイン

Copy page

## [このドキュメントはまもなく非推奨になりますドキュメント再編の一環として、このページは段階的に廃止されます。 _**このカードをクリックして**_ 、最新情報が含まれる更新版にリダイレクトしてください。新しいドキュメントに不一致や改善が必要な箇所を見つけた場合は、ページ下部の「問題を報告」ボタンを使用してください。](/plugin-dev-ja/0411-model-plugin-introduction)

モデルタイププラグインを導入することで、Difyプラットフォームは特定のモデルプロバイダーが提供するモデルを利用できるようになります。例えば、OpenAIモデルプラグインをインストールすると、DifyプラットフォームからOpenAIのGPT-4やGPT-4o-2024-05-13といったモデルをリクエストできるようになります。

### 

​

**モデルプラグインの構造**

プラグインモデルの開発に関する理解を深めるために、モデルタイププラグインの構造例を以下に示します。

  * モデルプロバイダー：OpenAI、Anthropic、Googleなどの大規模モデル開発企業です。
  * モデルカテゴリ：プロバイダーに応じて、大規模言語モデル（LLM）、テキスト埋め込みモデル、音声テキスト変換モデルなどがあります。
  * 具体的なモデル：`claude-3-5-sonnet`、`gpt-4-turbo`など。



プラグインプロジェクトのコード構造：
    
    
    - モデルプロバイダー
      - モデルカテゴリ
        - 具体的なモデル

Anthropicを例にとると、モデルプラグインの構造は次のようになります。
    
    
    - Anthropic
      - llm
        claude-3-5-sonnet-20240620
        claude-3-haiku-20240307
        claude-3-opus-20240229
        claude-3-sonnet-20240229
        claude-instant-1.2
        claude-instant-1

OpenAIを例にとると、複数のモデルタイプをサポートしています。
    
    
    ├── models
    │ ├── llm
    │ │ ├── chatgpt-4o-latest
    │ │ ├── gpt-3.5-turbo
    │ │ ├── gpt-4-0125-preview
    │ │ ├── gpt-4-turbo
    │ │ ├── gpt-4o
    │ │ ├── llm
    │ │ ├── o1-preview
    │ │ └── text-davinci-003
    │ ├── moderation
    │ │ ├── moderation
    │ │ └── text-moderation-stable
    │ ├── speech2text
    │ │ ├── speech2text
    │ │ └── whisper-1
    │ ├── text_embedding
    │ │ ├── text-embedding-3-large
    │ │ └── text_embedding
    │ └── tts
    │ ├── tts-1-hd
    │ ├── tts-1
    │ └── tts

### 

​

**モデルプラグイン作成の準備**

モデルプラグインを作成するには、以下の手順に従ってください。具体的な作成ガイドは、各ドキュメントのタイトルをクリックして参照してください。

  1. [モデルプロバイダーの作成](/ja-jp/plugins/quick-start/develop-plugins/model-plugin/create-model-providers)
  2. [事前定義済み](/ja-jp/guides/model-configuration/predefined-model)モデル、または[カスタム](/ja-jp/guides/model-configuration/customizable-model)モデルの統合
  3. [モデルプラグインのデバッグ](/ja-jp/plugins/quick-start/debug-plugin)



* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/plugins/quick-start/develop-plugins/model-plugin/README.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/plugins/quick-start/develop-plugins/model-plugin%2FREADME.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[ツールプラグイン](/ja-jp/plugins/quick-start/develop-plugins/tool-plugin)[モデルプロバイダーの構築](/ja-jp/plugins/quick-start/develop-plugins/model-plugin/create-model-providers)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * モデルプラグインの構造
  * モデルプラグイン作成の準備



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/plugins/quick-start/develop-plugins/model-plugin/create-model-providers

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

モデル型プラグイン

モデルプロバイダーの構築

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

    * [クイックスタート](/ja-jp/plugins/quick-start/README)
    * [プラグインのインストールと利用方法](/ja-jp/plugins/quick-start/install-plugins)
    * プラグイン開発の入門

      * [プラグイン開発ガイド](/ja-jp/plugins/quick-start/develop-plugins/README)
      * [開発環境のセットアップ](/ja-jp/plugins/quick-start/develop-plugins/initialize-development-tools)
      * [ツールプラグイン](/ja-jp/plugins/quick-start/develop-plugins/tool-plugin)
      * モデル型プラグイン

        * [モデルプラグイン](/ja-jp/plugins/quick-start/develop-plugins/model-plugin/README)
        * [モデルプロバイダーの構築](/ja-jp/plugins/quick-start/develop-plugins/model-plugin/create-model-providers)
        * [定義済みモデルの組み込み](/ja-jp/plugins/quick-start/develop-plugins/model-plugin/integrate-the-predefined-model)
        * [カスタムモデルの組み込み](/ja-jp/plugins/quick-start/develop-plugins/model-plugin/customizable-model)
      * [エージェント戦略プラグイン](/ja-jp/plugins/quick-start/develop-plugins/agent-strategy-plugin)
      * [拡張機能型プラグイン](/ja-jp/plugins/quick-start/develop-plugins/extension-plugin)
      * [バンドル](/ja-jp/plugins/quick-start/develop-plugins/bundle)
    * [プラグインのデバッグ方法](/ja-jp/plugins/quick-start/debug-plugin)
  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




モデル型プラグイン

# モデルプロバイダーの構築

Copy page

## [このドキュメントはまもなく非推奨になりますドキュメント再編の一環として、このページは段階的に廃止されます。 _**このカードをクリックして**_ 、最新情報が含まれる更新版にリダイレクトしてください。新しいドキュメントに不一致や改善が必要な箇所を見つけた場合は、ページ下部の「問題を報告」ボタンを使用してください。](/plugin-dev-ja/0222-creating-new-model-provider)

Modelタイプのプラグインを作成する最初のステップは、プラグインプロジェクトを初期化し、モデルプロバイダーファイルを作成することです。その後、具体的な定義済みモデルやカスタムモデルを接続します。

### 

​

事前準備 

  * Difyプラグインのスキャフォールディングツール
  * Python環境（バージョン3.12以上）



プラグイン開発用のスキャフォールディングツールの準備方法については、[開発ツールの初期化](/ja-jp/plugins/quick-start/develop-plugins/initialize-development-tools)を参照してください。

### 

​

新規プロジェクトの作成 

スキャフォールディングツールのコマンドラインから、新しいDifyプラグインプロジェクトを作成します。
    
    
    ./dify-plugin-darwin-arm64 plugin init

このバイナリファイルを`dify`にリネームし、`/usr/local/bin`にコピーした場合は、次のコマンドで新しいプラグインプロジェクトを作成できます。
    
    
    dify plugin init

### 

​

モデルプラグインテンプレートの選択 

スキャフォールディングツール内のすべてのテンプレートには、必要なコードが全て含まれています。`LLM`タイプのプラグインテンプレートを選択してください。

#### 

​

プラグイン権限の設定

このLLMプラグインには、次の権限を設定します。

  * Models
  * LLM
  * Storage



#### 

​

モデルタイプ設定の説明

モデルプロバイダーは、以下の2つのモデル設定方法をサポートしています。

  * `predefined-model` **定義済みモデル**

一般的な大規模モデルタイプで、統一されたプロバイダー認証情報を設定するだけで、モデルプロバイダーが提供する定義済みモデルを利用できます。たとえば、`OpenAI`モデルプロバイダーは、`gpt-3.5-turbo-0125`や`gpt-4o-2024-05-13`など、様々な定義済みモデルを提供しています。詳細な開発手順については、定義済みモデルの接続を参照してください。

  * `customizable-model` **カスタムモデル**

各モデルの認証情報設定を手動で追加する必要があります。たとえば、`Xinference`はLLMとText Embeddingの両方をサポートしていますが、各モデルには一意の**model_uid** があります。両方を同時に接続する場合は、各モデルに**model_uid** を設定する必要があります。詳細な開発手順については、カスタムモデルの接続を参照してください。




これら2つの設定方法は**共存可能** です。つまり、プロバイダーが`predefined-model`と`customizable-model`の両方、または`predefined-model`のみをサポートしている場合、プロバイダーの統一認証情報を設定することで、定義済みモデルとリモートから取得したモデルを使用できます。さらに、新しいモデルを追加した場合は、それに基づいてカスタムモデルを使用することも可能です。

### 

​

新しいモデルプロバイダーの追加

新しいモデルプロバイダーを追加するには、主に次の手順が必要です。

  1. **モデルプロバイダー設定YAMLファイルの作成**

プロバイダーディレクトリにYAMLファイルを追加し、プロバイダーの基本情報とパラメータ設定を記述します。ProviderSchemaの要件に従って記述し、システムの仕様との整合性を確保してください。

  2. **モデルプロバイダーコードの記述**

プロバイダークラスのコードを作成します。システムのインターフェース要件に準拠したPythonクラスを実装して、プロバイダーのAPIに接続し、コア機能を実装します。




* * *

以下は、各ステップの詳細な操作手順です。

#### 

​

1\. **モデルプロバイダー設定ファイルの作成**

ManifestはYAML形式のファイルで、モデルプロバイダーの基本情報、サポートされているモデルタイプ、設定方法、認証情報ルールを定義します。プラグインプロジェクトのテンプレートには、`/providers`パスに設定ファイルが自動的に生成されます。

以下は、`Anthropic`モデルの設定ファイル`anthropic.yaml`のサンプルコードです。
    
    
    provider: anthropic
    label:
      en_US: Anthropic
    description:
      en_US: Anthropic's powerful models, such as Claude 3.
      zh_Hans: Anthropic 的强大模型，例如 Claude 3。
      ja_JP: Anthropicの強力なモデル（例：Claude 3）。
    icon_small:
      en_US: icon_s_en.svg
    icon_large:
      en_US: icon_l_en.svg
    background: "#F0F0EB"
    help:
      title:
        en_US: Get your API Key from Anthropic
        zh_Hans: 从 Anthropic 获取 API Key
        ja_JP: AnthropicからAPI Keyを取得
      url:
        en_US: https://console.anthropic.com/account/keys
    supported_model_types:
      - llm
    configurate_methods:
      - predefined-model
    provider_credential_schema:
      credential_form_schemas:
        - variable: anthropic_api_key
          label:
            en_US: API Key
          type: secret-input
          required: true
          placeholder:
            en_US: Enter your API Key
            zh_Hans: 在此输入您的 API Key
            ja_JP: API Keyを入力してください
        - variable: anthropic_api_url
          label:
            en_US: API URL
          type: text-input
          required: false
          placeholder:
            en_US: Enter your API URL
            zh_Hans: 在此输入您的 API URL
            ja_JP: API URLを入力してください
    models:
      llm:
        predefined:
          - "models/llm/*.yaml"
        position: "models/llm/_position.yaml"
    extra:
      python:
        provider_source: provider/anthropic.py
        model_sources:
          - "models/llm/llm.py"

接続するプロバイダーがカスタムモデル（たとえば、`OpenAI`がファインチューニングモデルを提供する場合）を提供する場合は、`model_credential_schema`フィールドを追加する必要があります。

以下は、`OpenAI`ファミリーモデルのサンプルコードです。
    
    
    model_credential_schema:
      model: # ファインチューニングモデル名
        label:
          en_US: Model Name
          zh_Hans: 模型名称
          ja_JP: モデル名
        placeholder:
          en_US: Enter your model name
          zh_Hans: 输入模型名称
          ja_JP: モデル名を入力
      credential_form_schemas:
      - variable: openai_api_key
        label:
          en_US: API Key
        type: secret-input
        required: true
        placeholder:
          en_US: Enter your API Key
          zh_Hans: 在此输入您的 API Key
          ja_JP: API Keyを入力してください
      - variable: openai_organization
        label:
            en_US: Organization
            zh_Hans: 组织 ID
            ja_JP: 組織ID
        type: text-input
        required: false
        placeholder:
          en_US: Enter your Organization ID
          zh_Hans: 在此输入您的组织 ID
          ja_JP: 組織IDを入力してください
      - variable: openai_api_base
        label:
          en_US: API Base
          zh_Hans: API Base
          ja_JP: API Base
        type: text-input
        required: false
        placeholder:
          en_US: Enter your API Base
          zh_Hans: 在此输入您的 API Base
          ja_JP: API Baseを入力してください

より詳細なモデルプロバイダーYAMLの仕様については、[モデルインターフェースドキュメント](/ja-jp/plugins/schema-definition/model/model-schema)を参照してください。

#### 

​

2\. **モデルプロバイダーコードの記述**

`/providers`フォルダに、同じ名前のPythonファイル（たとえば、`anthropic.py`）を作成し、`__base.provider.Provider`基本クラス（たとえば、`AnthropicProvider`）を継承する`class`を実装します。

以下は、`Anthropic`のサンプルコードです。
    
    
    import logging
    from dify_plugin.entities.model import ModelType
    from dify_plugin.errors.model import CredentialsValidateFailedError
    from dify_plugin import ModelProvider
    
    logger = logging.getLogger(__name__)
    
    
    class AnthropicProvider(ModelProvider):
        def validate_provider_credentials(self, credentials: dict) -> None:
            """
            Validate provider credentials
    
            if validate failed, raise exception
    
            :param credentials: provider credentials, credentials form defined in `provider_credential_schema`.
            """
            try:
                model_instance = self.get_model_instance(ModelType.LLM)
                model_instance.validate_credentials(model="claude-3-opus-20240229", credentials=credentials)
            except CredentialsValidateFailedError as ex:
                raise ex
            except Exception as ex:
                logger.exception(f"{self.get_provider_schema().provider} credentials validate failed")
                raise ex

プロバイダーは、`__base.model_provider.ModelProvider`基底クラスを継承し、`validate_provider_credentials`プロバイダー統一認証情報検証メソッドを実装する必要があります。
    
    
    def validate_provider_credentials(self, credentials: dict) -> None:
        """
        Validate provider credentials
        You can choose any validate_credentials method of model type or implement validate method by yourself,
        such as: get model list api
    
        if validate failed, raise exception
    
        :param credentials: provider credentials, credentials form defined in `provider_credential_schema`.
        """

もちろん、`validate_provider_credentials`の実装を後回しにして、モデル認証情報検証メソッドの実装後に直接再利用することもできます。

#### 

​

**カスタムモデルプロバイダー**

他のタイプのモデルプロバイダーについては、以下の設定方法を参照してください。

`Xinference`のようなカスタムモデルプロバイダーの場合、完全な実装手順を省略できます。`XinferenceProvider`という名前の空のクラスを作成し、その中に空の`validate_provider_credentials`メソッドを実装するだけで済みます。

**詳細説明：**

  * `XinferenceProvider`は、カスタムモデルプロバイダーを識別するためのプレースホルダーとして機能します。
  * `validate_provider_credentials`メソッドは実際には呼び出されませんが、親クラスが抽象クラスであるため、すべてのサブクラスがこのメソッドを実装する必要があります。空の実装を提供することで、抽象メソッドが実装されていないことによるインスタンス化エラーを回避できます。


    
    
    class XinferenceProvider(Provider):
        def validate_provider_credentials(self, credentials: dict) -> None:
            pass

モデルプロバイダーを初期化した後、プロバイダーが提供する具体的なLLMモデルを接続する必要があります。詳細については、以下を参照してください。

  * [定義済みモデルの接続](/ja-jp/guides/model-configuration/predefined-model)
  * [カスタムモデルの接続](/ja-jp/guides/model-configuration/customizable-model)



* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/plugins/quick-start/develop-plugins/model-plugin/create-model-providers.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20e-model-provid&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/plugins/quick-start/develop-plugins/model-plugin%2Fcreate-model-providers.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[モデルプラグイン](/ja-jp/plugins/quick-start/develop-plugins/model-plugin/README)[定義済みモデルの組み込み](/ja-jp/plugins/quick-start/develop-plugins/model-plugin/integrate-the-predefined-model)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * 事前準備 
  * 新規プロジェクトの作成 
  * モデルプラグインテンプレートの選択 
  * プラグイン権限の設定
  * モデルタイプ設定の説明
  * 新しいモデルプロバイダーの追加
  * 1\. モデルプロバイダー設定ファイルの作成
  * 2\. モデルプロバイダーコードの記述
  * カスタムモデルプロバイダー



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/plugins/quick-start/develop-plugins/model-plugin/customizable-model

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

モデル型プラグイン

カスタムモデルの組み込み

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

    * [クイックスタート](/ja-jp/plugins/quick-start/README)
    * [プラグインのインストールと利用方法](/ja-jp/plugins/quick-start/install-plugins)
    * プラグイン開発の入門

      * [プラグイン開発ガイド](/ja-jp/plugins/quick-start/develop-plugins/README)
      * [開発環境のセットアップ](/ja-jp/plugins/quick-start/develop-plugins/initialize-development-tools)
      * [ツールプラグイン](/ja-jp/plugins/quick-start/develop-plugins/tool-plugin)
      * モデル型プラグイン

        * [モデルプラグイン](/ja-jp/plugins/quick-start/develop-plugins/model-plugin/README)
        * [モデルプロバイダーの構築](/ja-jp/plugins/quick-start/develop-plugins/model-plugin/create-model-providers)
        * [定義済みモデルの組み込み](/ja-jp/plugins/quick-start/develop-plugins/model-plugin/integrate-the-predefined-model)
        * [カスタムモデルの組み込み](/ja-jp/plugins/quick-start/develop-plugins/model-plugin/customizable-model)
      * [エージェント戦略プラグイン](/ja-jp/plugins/quick-start/develop-plugins/agent-strategy-plugin)
      * [拡張機能型プラグイン](/ja-jp/plugins/quick-start/develop-plugins/extension-plugin)
      * [バンドル](/ja-jp/plugins/quick-start/develop-plugins/bundle)
    * [プラグインのデバッグ方法](/ja-jp/plugins/quick-start/debug-plugin)
  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




モデル型プラグイン

# カスタムモデルの組み込み

Copy page

## [このドキュメントはまもなく非推奨になりますドキュメント再編の一環として、このページは段階的に廃止されます。 _**このカードをクリックして**_ 、最新情報が含まれる更新版にリダイレクトしてください。新しいドキュメントに不一致や改善が必要な箇所を見つけた場合は、ページ下部の「問題を報告」ボタンを使用してください。](/plugin-dev-ja/9243-customizable-model)

カスタムモデルとは、ユーザー自身でデプロイまたは設定する必要があるLLMのことです。この記事では、[Xinferenceモデル](https://inference.readthedocs.io/en/latest/)を例に、モデルプラグイン内でカスタムモデルを組み込む方法を解説します。

カスタムモデルには、デフォルトでモデルタイプとモデル名の2つのパラメータが含まれており、サプライヤのyamlファイルで定義する必要はありません。

サプライヤ設定ファイルで`validate_provider_credential`を実装する必要はありません。Runtimeは、ユーザーが選択したモデルタイプまたはモデル名に基づいて、対応するモデルレイヤの`validate_credentials`メソッドを自動的に呼び出して検証します。

### 

​

カスタムモデルプラグインの組み込み

カスタムモデルを組み込むには、以下の手順に従います。

  1. **モデルサプライヤファイルの作成**

組み込むカスタムモデルのモデルタイプを明確にします。

  2. **モデルタイプに応じたコードファイルの作成**

モデルのタイプ（`llm`や`text_embedding`など）に応じて、コードファイルを作成します。各モデルタイプが独立した論理構造を持つようにすることで、保守と拡張が容易になります。

  3. **モデルモジュールに基づいたモデル呼び出しコードの記述**

対応するモデルタイプモジュールに、モデルタイプと同名のPythonファイル（例：llm.py）を作成します。ファイル内で、具体的なモデルロジックを実装するクラスを定義します。このクラスは、システムのモデルインターフェース仕様に準拠している必要があります。

  4. **プラグインのデバッグ**

新たに追加されたサプライヤ機能について、ユニットテストと統合テストを作成し、すべての機能モジュールが期待どおりに動作することを確認します。




* * *

### 

​

1\. **モデルサプライヤファイルの作成**

プラグインプロジェクトの`/provider`パスに、`xinference.yaml`ファイルを作成します。

`Xinference`は、`LLM`、`Text Embedding`、`Rerank`のモデルタイプをサポートしているため、`xinference.yaml`ファイルにこれらのモデルタイプを含める必要があります。

サンプルコード：
    
    
    provider: xinference # サプライヤIDを決定
    label: # サプライヤの表示名。en_US（英語）とzh_Hans（中国語）の2つの言語を設定できます。zh_Hansを設定しない場合、デフォルトでen_USが使用されます。
      en_US: Xorbits Inference
    icon_small: # 小さいアイコン。他のサプライヤのアイコンを参考に、対応するサプライヤ実装ディレクトリの_assetsディレクトリに保存してください。言語設定はlabelと同様です。
      en_US: icon_s_en.svg
    icon_large: # 大きいアイコン
      en_US: icon_l_en.svg
    help: # ヘルプ
      title:
        en_US: How to deploy Xinference
        zh_Hans: 如何部署 Xinference 
        ja_JP: Xinferenceのデプロイ方法
      url:
        en_US: https://github.com/xorbitsai/inference
    supported_model_types: # サポートされているモデルタイプ。XinferenceはLLM/Text Embedding/Rerankをサポートしています。
    - llm
    - text-embedding
    - rerank
    configurate_methods: # Xinferenceはローカルにデプロイするサプライヤであり、事前定義されたモデルはありません。使用するモデルはXinferenceのドキュメントに従ってデプロイする必要があるため、ここではカスタムモデルを使用します。
    - customizable-model
    provider_credential_schema:
      credential_form_schemas:

次に、`provider_credential_schema`フィールドを定義します。`Xinference`は、text-generation、embeddings、rerankingモデルをサポートしています。サンプルコードを以下に示します。
    
    
    provider_credential_schema:
      credential_form_schemas:
      - variable: model_type
        type: select
        label:
          en_US: Model type
          zh_Hans: 模型类型
          ja_JP: モデルタイプ
        required: true
        options:
        - value: text-generation
          label:
            en_US: Language Model
            zh_Hans: 语言模型
            ja_JP: 言語モデル
        - value: embeddings
          label:
            en_US: Text Embedding
        - value: reranking
          label:
            en_US: Rerank

Xinferenceの各モデルでは、`model_name`という名前を定義する必要があります。
    
    
    - variable: model_name
        type: text-input
        label:
          en_US: Model name
          zh_Hans: 模型名称
          ja_JP: モデル名
        required: true
        placeholder:
          en_US: Input model name
          zh_Hans: 填写模型名称
          ja_JP: モデル名を入力してください

Xinferenceモデルでは、ユーザーがモデルのローカルデプロイアドレスを入力する必要があります。プラグイン内では、Xinferenceモデルのローカルデプロイアドレス（server_url）とモデルUIDを入力できる場所を提供する必要があります。サンプルコードを以下に示します。
    
    
    - variable: server_url
        label:
          en_US: Server url
          zh_Hans: 服务器URL
          ja_JP: サーバーURL
        type: text-input
        required: true
        placeholder:
          en_US: Enter the url of your Xinference, for example https://example.com/xxx
          zh_Hans: 在此输入Xinference的服务器地址，如 https://example.com/xxx
          ja_JP: Xinferenceのサーバーアドレスをここに入力してください、例えば https://example.com/xxx
      - variable: model_uid
        label:
          en_US: Model uid
          zh_Hans: 模型 UID
          ja_JP: モデル UID
        type: text-input
        required: true
        placeholder:
          en_US: Enter the model uid
          zh_Hans: 在此输入你的 Model UID
          ja_JP: モデルUIDを入力してください

すべてのパラメータを入力すると、カスタムモデルサプライヤのyaml設定ファイルの作成が完了します。次に、設定ファイルで定義されたモデルに具体的な機能コードファイルを追加する必要があります。

### 

​

2\. モデルコードの記述

Xinferenceモデルサプライヤのモデルタイプには、llm、rerank、speech2text、ttsタイプが含まれています。そのため、`/models`パスに各モデルタイプの独立したグループを作成し、対応する機能コードファイルを作成する必要があります。

以下では、llmタイプを例に、`llm.py`コードファイルの作成方法を説明します。コードを作成する際には、Xinference LLMクラスを作成する必要があります。名前は`XinferenceAILargeLanguageModel`とし、`__base.large_language_model.LargeLanguageModel`基底クラスを継承し、以下のメソッドを実装します。

  * **LLMの呼び出し**



LLM呼び出しの中核となるメソッドです。ストリーミングと同期の両方の戻り値をサポートします。
    
    
    def _invoke(self, model: str, credentials: dict,
                prompt_messages: list[PromptMessage], model_parameters: dict,
                tools: Optional[list[PromptMessageTool]] = None, stop: Optional[list[str]] = None,
                stream: bool = True, user: Optional[str] = None) \
            -> Union[LLMResult, Generator]:
        """
        Invoke large language model
    
        :param model: model name
        :param credentials: model credentials
        :param prompt_messages: prompt messages
        :param model_parameters: model parameters
        :param tools: tools for tool calling
        :param stop: stop words
        :param stream: is stream response
        :param user: unique user id
        :return: full response or stream response chunk generator result
        """

コードを実装する際には、同期戻り値とストリーミング戻り値で異なる関数を使用する必要があります。

Pythonでは、関数に`yield`キーワードが含まれている場合、その関数はジェネレータ関数として認識され、戻り値の型は`Generator`に固定されます。したがって、同期戻り値とストリーミング戻り値をそれぞれ実装する必要があります。例えば、以下のサンプルコードを参照してください。

> この例では、パラメータが簡略化されています。実際のコードを記述する際には、上記のパラメータリストを参照してください。
    
    
    def _invoke(self, stream: bool, **kwargs) \
            -> Union[LLMResult, Generator]:
        if stream:
              return self._handle_stream_response(**kwargs)
        return self._handle_sync_response(**kwargs)
    
    def _handle_stream_response(self, **kwargs) -> Generator:
        for chunk in response:
              yield chunk
    def _handle_sync_response(self, **kwargs) -> LLMResult:
        return LLMResult(**response)

  * **入力トークンの事前計算**



モデルがトークンの事前計算インターフェースを提供していない場合は、0を返すことができます。
    
    
    def get_num_tokens(self, model: str, credentials: dict, prompt_messages: list[PromptMessage],
                     tools: Optional[list[PromptMessageTool]] = None) -> int:
      """
      Get number of tokens for given prompt messages
    
      :param model: model name
      :param credentials: model credentials
      :param prompt_messages: prompt messages
      :param tools: tools for tool calling
      :return:
      """

直接0を返したくない場合は、`self._get_num_tokens_by_gpt2(text: str)`メソッドを使用してトークンを計算できます。このメソッドは`AIModel`基底クラスにあり、GPT-2のTokenizerを使用して計算を行います。ただし、あくまで代替手段であり、計算結果には誤差が生じる可能性があることに注意してください。

  * **モデルの認証情報の検証**



サプライヤの認証情報の検証と同様に、ここでは個々のモデルを検証します。
    
    
    def validate_credentials(self, model: str, credentials: dict) -> None:
        """
        Validate model credentials
    
        :param model: model name
        :param credentials: model credentials
        :return:
        """

  * **モデルパラメータのスキーマ**

[事前定義されたモデルタイプ](/ja-jp/plugins/quick-start/develop-plugins/model-plugin/integrate-the-predefined-model)とは異なり、YAMLファイルにモデルがサポートするパラメータが事前に定義されていないため、モデルパラメータのスキーマを動的に生成する必要があります。

例えば、Xinferenceは`max_tokens`、`temperature`、`top_p`の3つのモデルパラメータをサポートしています。ただし、サプライヤによっては、モデルごとに異なるパラメータをサポートする場合があります（例：OpenLLM）。

例として、サプライヤ`OpenLLM`のモデルAは`top_k`パラメータをサポートしていますが、モデルBはサポートしていません。この場合、各モデルに対応するパラメータスキーマを動的に生成する必要があります。以下にサンプルコードを示します。

  * def get_customizable_model_schema(self, model: str, credentials: dict) -> AIModelEntity | None:
            """
                used to define customizable model schema
            """
            rules = [
                ParameterRule(
                    name='temperature', type=ParameterType.FLOAT,
                    use_template='temperature',
                    label=I18nObject(
                        zh_Hans='温度', en_US='Temperature'
                    )
                ),
                ParameterRule(
                    name='top_p', type=ParameterType.FLOAT,
                    use_template='top_p',
                    label=I18nObject(
                        zh_Hans='Top P', en_US='Top P'
                    )
                ),
                ParameterRule(
                    name='max_tokens', type=ParameterType.INT,
                    use_template='max_tokens',
                    min=1,
                    default=512,
                    label=I18nObject(
                        zh_Hans='最大生成长度', en_US='Max Tokens'
                    )
                )
            ]
        
            # if model is A, add top_k to rules
            if model == 'A':
                rules.append(
                    ParameterRule(
                        name='top_k', type=ParameterType.INT,
                        use_template='top_k',
                        min=1,
                        default=50,
                        label=I18nObject(
                            zh_Hans='Top K', en_US='Top K'
                        )
                    )
                )
        
            """
                some NOT IMPORTANT code here
            """
        
            entity = AIModelEntity(
                model=model,
                label=I18nObject(
                    en_US=model
                ),
                fetch_from=FetchFrom.CUSTOMIZABLE_MODEL,
                model_type=model_type,
                model_properties={ 
                    ModelPropertyKey.MODE:  ModelType.LLM,
                },
                parameter_rules=rules
            )
        
            return entity

  * **呼び出し例外エラーのマッピング**




モデルの呼び出し時に例外が発生した場合、Runtimeで指定された`InvokeError`タイプにマッピングする必要があります。これは、Difyが異なるエラーに対して異なる後続処理を実行できるようにするためです。

Runtime Errors:
    
    
    • `InvokeConnectionError`  呼び出し接続エラー
    • `InvokeServerUnavailableError`  呼び出しサービスが利用不可
    • `InvokeRateLimitError` 呼び出しが制限に達した
    • `InvokeAuthorizationError` 呼び出し認証失敗
    • `InvokeBadRequestError` 呼び出しパラメータエラー
    
    
    @property
    def _invoke_error_mapping(self) -> dict[type[InvokeError], list[type[Exception]]]:
        """
        Map model invoke error to unified error
        The key is the error type thrown to the caller
        The value is the error type thrown by the model,
        which needs to be converted into a unified error type for the caller.
    
        :return: Invoke error mapping
        """

さらに詳しいインターフェースメソッドについては、[インターフェースドキュメント：Model](/ja-jp/plugins/schema-definition/reverse-invocation-of-the-dify-service/model)を参照してください。

この記事で取り上げた完全なコードファイルについては、[GitHubコードリポジトリ](https://github.com/langgenius/dify-official-plugins/tree/main/models/xinference)をご覧ください。

### 

​

3\. プラグインのデバッグ

プラグインの開発が完了したら、次にプラグインが正常に動作するかどうかをテストする必要があります。詳細については、以下を参照してください。

## [debug-plugin.mddebug-plugin.md](../../debug-plugin.md)

### 

​

4\. プラグインの公開

プラグインをDify マーケットプレイスに公開する場合は、以下を参照してください。

## [publish-to-dify-marketplace.mdpublish-to-dify-marketplace](../../../publish-plugins/publish-to-dify-marketplace/README)

### 

​

さらに詳しく

**クイックスタート:**

  * [拡張タイププラグインの開発](/ja-jp/plugins/quick-start/develop-plugins/extension-plugin)
  * [モデルタイププラグインの開発](README)
  * [バンドルタイププラグイン：複数のプラグインをパッケージ化](/ja-jp/plugins/quick-start/develop-plugins/bundle)



**プラグインインターフェースドキュメント:**

  * [マニフェスト](/ja-jp/plugins/schema-definition/manifest) 構造
  * [エンドポイント](/ja-jp/plugins/schema-definition/endpoint) 詳細定義
  * [Difyサービスの逆呼び出し](/ja-jp/plugins/schema-definition/reverse-invocation-of-the-dify-service/app)
  * [ツール](/ja-jp/plugins/schema-definition/tool)
  * [モデル](/ja-jp/plugins/schema-definition/reverse-invocation-of-the-dify-service/model)
  * [拡張エージェント戦略](/ja-jp/plugins/schema-definition/agent)



* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/plugins/quick-start/develop-plugins/model-plugin/customizable-model.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20mizable-mo&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/plugins/quick-start/develop-plugins/model-plugin%2Fcustomizable-model.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[定義済みモデルの組み込み](/ja-jp/plugins/quick-start/develop-plugins/model-plugin/integrate-the-predefined-model)[エージェント戦略プラグイン](/ja-jp/plugins/quick-start/develop-plugins/agent-strategy-plugin)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * カスタムモデルプラグインの組み込み
  * 1\. モデルサプライヤファイルの作成
  * 2\. モデルコードの記述
  * 3\. プラグインのデバッグ
  * 4\. プラグインの公開
  * さらに詳しく



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/plugins/quick-start/develop-plugins/model-plugin/integrate-the-predefined-model

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

モデル型プラグイン

定義済みモデルの組み込み

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

    * [クイックスタート](/ja-jp/plugins/quick-start/README)
    * [プラグインのインストールと利用方法](/ja-jp/plugins/quick-start/install-plugins)
    * プラグイン開発の入門

      * [プラグイン開発ガイド](/ja-jp/plugins/quick-start/develop-plugins/README)
      * [開発環境のセットアップ](/ja-jp/plugins/quick-start/develop-plugins/initialize-development-tools)
      * [ツールプラグイン](/ja-jp/plugins/quick-start/develop-plugins/tool-plugin)
      * モデル型プラグイン

        * [モデルプラグイン](/ja-jp/plugins/quick-start/develop-plugins/model-plugin/README)
        * [モデルプロバイダーの構築](/ja-jp/plugins/quick-start/develop-plugins/model-plugin/create-model-providers)
        * [定義済みモデルの組み込み](/ja-jp/plugins/quick-start/develop-plugins/model-plugin/integrate-the-predefined-model)
        * [カスタムモデルの組み込み](/ja-jp/plugins/quick-start/develop-plugins/model-plugin/customizable-model)
      * [エージェント戦略プラグイン](/ja-jp/plugins/quick-start/develop-plugins/agent-strategy-plugin)
      * [拡張機能型プラグイン](/ja-jp/plugins/quick-start/develop-plugins/extension-plugin)
      * [バンドル](/ja-jp/plugins/quick-start/develop-plugins/bundle)
    * [プラグインのデバッグ方法](/ja-jp/plugins/quick-start/debug-plugin)
  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




モデル型プラグイン

# 定義済みモデルの組み込み

Copy page

## [このドキュメントはまもなく非推奨になりますドキュメント再編の一環として、このページは段階的に廃止されます。 _**このカードをクリックして**_ 、最新情報が含まれる更新版にリダイレクトしてください。新しいドキュメントに不一致や改善が必要な箇所を見つけた場合は、ページ下部の「問題を報告」ボタンを使用してください。](/plugin-dev-ja/0222-creating-new-model-provider-extra)

[モデルプロバイダーの作成](/ja-jp/plugins/quick-start/develop-plugins/model-plugin/create-model-providers)が完了していることを確認してください。事前定義済みモデルを組み込むには、以下の手順に従います。

  1. **モデルタイプに応じたモジュール構造の作成**

モデルのタイプ（`llm`や`text_embedding`など）に応じて、プロバイダーモジュール内に対応するサブモジュールを作成します。各モデルタイプが独立した論理構造を持つようにすることで、保守性と拡張性を高めます。

  2. **モデル呼び出しコードの記述**

対応するモデルタイプのモジュール内に、モデルタイプと同名のPythonファイル（例：llm.py）を作成します。ファイル内に、具体的なモデルロジックを実装するクラスを定義します。このクラスは、システムのモデルインターフェース仕様に準拠している必要があります。

  3. **事前定義済みモデル設定の追加**

プロバイダーが事前定義済みモデルを提供している場合、各モデルに対してモデル名と同名の`YAML`ファイル（例：`claude-3.5.yaml`）を作成します。[AIModelEntity](/ja-jp/plugins/schema-definition/model/model-designing-rules)の仕様に従ってファイルの内容を記述し、モデルのパラメータと機能を定義します。

  4. **プラグインのテスト**

新たに追加されたプロバイダー機能に対して、ユニットテストと統合テストを作成し、すべての機能モジュールが期待どおりに動作することを確認します。




* * *

以下は、組み込みの詳細な手順です。

### 

​

**1\. モデルタイプに応じたモジュール構造の作成**

モデルプロバイダーは、OpenAIが提供する`llm`や`text_embedding`のように、様々なモデルタイプを提供することがあります。プロバイダーモジュール内に、これらのモデルタイプに対応するサブモジュールを作成し、各モデルタイプが独立した論理構造を持つようにすることで、保守性と拡張性を高めます。

現在サポートされているモデルタイプは以下のとおりです。

  * `llm`: テキスト生成モデル
  * `text_embedding`: テキスト埋め込みモデル
  * `rerank`: Rerankモデル
  * `speech2text`: 音声テキスト変換
  * `tts`: テキスト音声変換
  * `moderation`: 審査



`Anthropic`を例にとると、そのシリーズモデルにはLLMタイプのモデルのみが含まれているため、`/models`パスに`/llm`フォルダを新規作成し、異なるモデルのYAMLファイルを追加するだけで済みます。詳細なコード構造については、[GitHubコードリポジトリ](https://github.com/langgenius/dify-official-plugins/tree/main/models/anthropic/models/llm)を参照してください。
    
    
    ├── models
    │   └── llm
    │       ├── _position.yaml
    │       ├── claude-2.1.yaml
    │       ├── claude-2.yaml
    │       ├── claude-3-5-sonnet-20240620.yaml
    │       ├── claude-3-haiku-20240307.yaml
    │       ├── claude-3-opus-20240229.yaml
    │       ├── claude-3-sonnet-20240229.yaml
    │       ├── claude-instant-1.2.yaml
    │       ├── claude-instant-1.yaml
    │       └── llm.py

`OpenAI`のファミリーモデルのように、モデルプロバイダーが`llm`、`text_embedding`、`moderation`、`speech2text`、`tts`など、さまざまなタイプのモデルを提供している場合は、`/models`パスに各タイプに対応するフォルダを作成する必要があります。構造は以下のようになります。
    
    
    ├── models
    │   ├── common_openai.py
    │   ├── llm
    │   │   ├── _position.yaml
    │   │   ├── chatgpt-4o-latest.yaml
    │   │   ├── gpt-3.5-turbo.yaml
    │   │   ├── gpt-4-0125-preview.yaml
    │   │   ├── gpt-4-turbo.yaml
    │   │   ├── gpt-4o.yaml
    │   │   ├── llm.py
    │   │   ├── o1-preview.yaml
    │   │   └── text-davinci-003.yaml
    │   ├── moderation
    │   │   ├── moderation.py
    │   │   └── text-moderation-stable.yaml
    │   ├── speech2text
    │   │   ├── speech2text.py
    │   │   └── whisper-1.yaml
    │   ├── text_embedding
    │   │   ├── text-embedding-3-large.yaml
    │   │   └── text_embedding.py
    │   └── tts
    │       ├── tts-1-hd.yaml
    │   │   ├── tts-1.yaml
    │   │   └── tts.py

すべてのモデル設定を準備してから、モデルコードの実装を開始することをお勧めします。完全なYAMLの記述規則については、[モデル設計規則](/ja-jp/plugins/schema-definition/model/model-designing-rules)を参照してください。詳細なコードについては、[Githubコードリポジトリ](https://github.com/langgenius/dify-official-plugins/tree/main/models)の例を参照してください。

### 

​

2\. **モデル呼び出しコードの記述**

次に、`/models`パスに`llm.py`というコードファイルを作成する必要があります。`Anthropic`を例にとると、`llm.py`にAnthropic LLMクラスを作成し、`AnthropicLargeLanguageModel`という名前を付け、`__base.large_language_model.LargeLanguageModel`基本クラスを継承します。

以下に、一部の機能のサンプルコードを示します。

  * **LLMの呼び出し**

LLMをリクエストする主要なメソッドです。ストリーミングと同期の両方のレスポンスをサポートします。



    
    
    def _invoke(self, model: str, credentials: dict,
                prompt_messages: list[PromptMessage], model_parameters: dict,
                tools: Optional[list[PromptMessageTool]] = None, stop: Optional[list[str]] = None,
                stream: bool = True, user: Optional[str] = None) \
            -> Union[LLMResult, Generator]:
        """
        Invoke large language model
    
        :param model: model name
        :param credentials: model credentials
        :param prompt_messages: prompt messages
        :param model_parameters: model parameters
        :param tools: tools for tool calling
        :param stop: stop words
        :param stream: is stream response
        :param user: unique user id
        :return: full response or stream response chunk generator result
        """

実装時には、同期リターンとストリームリターンを個別に処理するために、2つの関数を使用する必要があることに注意してください。これは、Pythonで`yield`キーワードを含む関数はジェネレーター関数として認識され、その戻り値の型が`Generator`に固定されるためです。ロジックを明確にし、様々なリターンの要求に対応するために、同期リターンとストリームリターンは個別に実装する必要があります。

以下はサンプルコードです（サンプルではパラメータが簡略化されています。実際の実装では、完全なパラメータリストに従って記述してください）。
    
    
    def _invoke(self, stream: bool, **kwargs) -> Union[LLMResult, Generator]:
        """戻り値の型に応じて、対応する処理関数を呼び出します。"""
        if stream:
            return self._handle_stream_response(**kwargs)
        return self._handle_sync_response(**kwargs)
    
    def _handle_stream_response(self, **kwargs) -> Generator:
        """ストリームリターンのロジックを処理します。"""
        for chunk in response:  # responseがストリームデータのイテレーターであると仮定します
            yield chunk
    
    def _handle_sync_response(self, **kwargs) -> LLMResult:
        """同期リターンのロジックを処理します。"""
        return LLMResult(**response)  # responseが完全な応答の辞書であると仮定します

  * **入力トークン数の事前計算**



モデルがトークン数の事前計算インターフェースを提供していない場合は、この機能が適用されないか、実装されていないことを示すために、直接0を返すことができます。例：
    
    
    def get_num_tokens(self, model: str, credentials: dict, prompt_messages: list[PromptMessage],
                       tools: Optional[list[PromptMessageTool]] = None) -> int:
        """
        Get number of tokens for given prompt messages
    
        :param model: model name
        :param credentials: model credentials
        :param prompt_messages: prompt messages
        :param tools: tools for tool calling
        :return:
        """

  * **呼び出し例外エラーマッピングテーブル**



モデル呼び出しが例外の場合、Difyがさまざまなエラーに対して適切な処理を実行できるように、Runtimeによって指定された`InvokeError`タイプにマッピングする必要があります。

Runtime Errors:

  * `InvokeConnectionError`: 呼び出し接続エラー
  * `InvokeServerUnavailableError`: 呼び出しサービスが利用不可
  * `InvokeRateLimitError`: 呼び出しが制限に達しました
  * `InvokeAuthorizationError`: 呼び出し認証に失敗しました
  * `InvokeBadRequestError`: 呼び出しパラメータにエラーがあります


    
    
    @property
    def _invoke_error_mapping(self) -> dict[type[InvokeError], list[type[Exception]]]:
        """
        Map model invoke error to unified error
        The key is the error type thrown to the caller
        The value is the error type thrown by the model,
        which needs to be converted into a unified error type for the caller.
    
        :return: Invoke error mapping
        """

完全なコードの詳細については、[Githubコードリポジトリ](https://github.com/langgenius/dify-official-plugins/blob/main/models/anthropic/models/llm/llm.py)を参照してください。

### 

​

**3\. 事前定義済みモデル設定の追加**

プロバイダーが事前定義済みモデルを提供している場合、各モデルに対してモデル名と同名の`YAML`ファイル（例：`claude-3.5.yaml`）を作成します。[AIModelEntity](/ja-jp/plugins/schema-definition/model/model-designing-rules)の仕様に従ってファイルの内容を記述し、モデルのパラメータと機能を定義します。

`claude-3-5-sonnet-20240620`モデルのサンプルコード：
    
    
    model: claude-3-5-sonnet-20240620
    label:
      en_US: claude-3-5-sonnet-20240620
    model_type: llm
    features:
      - agent-thought
      - vision
      - tool-call
      - stream-tool-call
      - document
    model_properties:
      mode: chat
      context_size: 200000
    parameter_rules:
      - name: temperature
        use_template: temperature
      - name: top_p
        use_template: top_p
      - name: top_k
        label:
          en_US: Top k
          zh_Hans: 取样数量
          ja_JP: サンプリング数
        type: int
        help:
          en_US: Only sample from the top K options for each subsequent token.
          zh_Hans: 仅从每个后续标记的前 K 个选项中采样。
          ja_JP: 各後続マーカーの最初のKオプションからのみサンプリングする。
        required: false
      - name: max_tokens
        use_template: max_tokens
        required: true
        default: 8192
        min: 1
        max: 8192
      - name: response_format
        use_template: response_format
    pricing:
      input: '3.00'
      output: '15.00'
      unit: '0.000001'
      currency: USD

### 

​

4\. プラグインのデバッグ

次に、プラグインが正常に動作するかどうかをテストする必要があります。Difyはリモートデバッグ方法を提供しており、「プラグイン管理」ページでデバッグキーとリモートサーバーアドレスを取得できます。

プラグインプロジェクトに戻り、`.env.example`ファイルをコピーして`.env`にリネームし、取得したリモートサーバーアドレスとデバッグKeyなどの情報を入力します。

`.env` ファイル
    
    
    INSTALL_METHOD=remote
    REMOTE_INSTALL_HOST=remote
    REMOTE_INSTALL_PORT=5003
    REMOTE_INSTALL_KEY=****-****-****-****-****

`python -m main`コマンドを実行してプラグインを起動します。プラグインページで、そのプラグインがWorkspaceにインストールされていることを確認できます。他のチームメンバーもこのプラグインにアクセスできます。

「設定」→「モデルプロバイダー」でAPI Keyを入力して、モデルプロバイダーを初期化できます。

### 

​

プラグインの公開

作成したプラグインを[Dify Pluginsコードリポジトリ](https://github.com/langgenius/dify-plugins)にアップロードして公開できます。アップロードする前に、プラグインが[プラグイン公開仕様](/ja-jp/plugins/publish-plugins/publish-to-dify-marketplace/README)に準拠していることを確認してください。審査に合格すると、コードがメインブランチにマージされ、[Dify Marketplace](https://marketplace.dify.ai/)に自動的に公開されます。

#### 

​

さらに詳しく

**クイックスタート:**

  * [拡張タイププラグインの開発](/ja-jp/plugins/quick-start/develop-plugins/extension-plugin)
  * [モデルタイププラグインの開発](README)
  * [バンドルタイププラグイン：複数のプラグインをパッケージ化](/ja-jp/plugins/quick-start/develop-plugins/bundle)



**プラグインインターフェースドキュメント:**

  * [マニフェスト](/ja-jp/plugins/schema-definition/manifest) 構造
  * [エンドポイント](/ja-jp/plugins/schema-definition/endpoint) 詳細定義
  * [Difyサービスの逆呼び出し](/ja-jp/plugins/schema-definition/reverse-invocation-of-the-dify-service/app)
  * [ツール](/ja-jp/plugins/schema-definition/tool)
  * [モデル](/ja-jp/plugins/schema-definition/reverse-invocation-of-the-dify-service/model)
  * [拡張エージェント戦略](/ja-jp/plugins/schema-definition/agent)



* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/plugins/quick-start/develop-plugins/model-plugin/integrate-the-predefined-model.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20rate-the-predefined-mo&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/plugins/quick-start/develop-plugins/model-plugin%2Fintegrate-the-predefined-model.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[モデルプロバイダーの構築](/ja-jp/plugins/quick-start/develop-plugins/model-plugin/create-model-providers)[カスタムモデルの組み込み](/ja-jp/plugins/quick-start/develop-plugins/model-plugin/customizable-model)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * 1\. モデルタイプに応じたモジュール構造の作成
  * 2\. モデル呼び出しコードの記述
  * 3\. 事前定義済みモデル設定の追加
  * 4\. プラグインのデバッグ
  * プラグインの公開
  * さらに詳しく



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/plugins/quick-start/develop-plugins/tool-plugin

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

プラグイン開発の入門

ツールプラグイン

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

    * [クイックスタート](/ja-jp/plugins/quick-start/README)
    * [プラグインのインストールと利用方法](/ja-jp/plugins/quick-start/install-plugins)
    * プラグイン開発の入門

      * [プラグイン開発ガイド](/ja-jp/plugins/quick-start/develop-plugins/README)
      * [開発環境のセットアップ](/ja-jp/plugins/quick-start/develop-plugins/initialize-development-tools)
      * [ツールプラグイン](/ja-jp/plugins/quick-start/develop-plugins/tool-plugin)
      * モデル型プラグイン

      * [エージェント戦略プラグイン](/ja-jp/plugins/quick-start/develop-plugins/agent-strategy-plugin)
      * [拡張機能型プラグイン](/ja-jp/plugins/quick-start/develop-plugins/extension-plugin)
      * [バンドル](/ja-jp/plugins/quick-start/develop-plugins/bundle)
    * [プラグインのデバッグ方法](/ja-jp/plugins/quick-start/debug-plugin)
  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




プラグイン開発の入門

# ツールプラグイン

Copy page

## [このドキュメントはまもなく非推奨になりますドキュメント再編の一環として、このページは段階的に廃止されます。 _**このカードをクリックして**_ 、最新情報が含まれる更新版にリダイレクトしてください。新しいドキュメントに不一致や改善が必要な箇所を見つけた場合は、ページ下部の「問題を報告」ボタンを使用してください。](/plugin-dev-ja/0222-tool-plugin)

Tool（ツール）プラグインは、チャットフロー、ワークフロー、エージェントといったアプリタイプから参照できる外部ツールであり、Difyアプリの機能を拡張するために使用されます。例えば、アプリにオンライン検索機能や画像生成機能を追加するといったことが可能です。ツールプラグインは、包括的なツールセットとAPI実装機能を提供します。

本篇では、「ツールプラグイン」とは、ツールプロバイダーファイル、機能コード、およびその他の関連コンポーネントを含む、一揃いのプロジェクトを指します。ツールプロバイダーは複数のツール（これは、単一のツールが提供する追加機能と解釈できます）を含むことがあり、以下の構造で構成されます。
    
    
    - ツールプロバイダー
        - Tool A
        - Tool B

この記事では、`GoogleSearch`を例に、ツールプラグインを迅速に開発する方法をご紹介します。

### 

​

事前準備

  * Dify プラグインの Scaffolding（スキャフォールディング）ツール
  * Python 環境 (バージョン 3.12 以上)



プラグイン開発用のScaffoldingツールの準備方法については、[初期化開発ツール](/ja-jp/plugins/quick-start/develop-plugins/initialize-development-tools)をご参照ください。

### 

​

新規プロジェクトの作成

Scaffoldingのコマンドラインツールを実行し、新しいDifyプラグインプロジェクトを作成します。
    
    
    ./dify-plugin-darwin-arm64 plugin init

バイナリファイルの名前を `dify` に変更し、`/usr/local/bin` ディレクトリにコピーした場合は、次のコマンドを実行して新しいプラグインプロジェクトを作成できます。
    
    
    dify plugin init

> 以下、コマンドラインツール `dify` を使用します。もし問題が発生した場合は、`dify` コマンドを、お使いのツールの実行パスに置き換えてください。

### 

​

プラグインの種類とテンプレートの選択

プラグインには、ツール、モデル、そしてエクステンションの3種類があります。SDK内のすべてのテンプレートには、完全なコードプロジェクトが付属しています。以下の部分では、**ツールプラグイン** テンプレートを例として使用します。

> プラグイン開発に精通されている方は、各種プラグインの実装にあたり、[スキーマ仕様](../../schema-definition/README)をご参照ください。

#### 

​

プラグイン権限の設定

プラグインを正常に接続するには、Difyプラットフォームの権限を読み取る必要があります。このサンプルツールプラグインには、以下の権限を付与する必要があります。

  * ツール
  * アプリ
  * 永続的ストレージジストレージの有効化、デフォルトサイズのストレージの割り当て
  * エンドポイントの登録許可



> ターミナルで方向キーを使って権限を選択し、“タグ”のブタンで権限を付与してください。

すべての権限項目にチェックを入れたら、Enterキーを押してプラグインの作成を完了させてください。システムが自動的にプラグインプロジェクトのコードを生成します。

### 

​

開発ツールプラグイン

#### 

​

1\. ツールプロバイダーの yaml ファイルを作成する

ツールプロバイダーファイルは、ツールプラグインの基本的な設定ファイルとして機能し、ツールが利用するために必要な認証情報を提供します。このセクションでは、この `yaml` ファイルの記述方法について説明します。

`/provider` ディレクトリに移動し、その中にある yaml ファイルの名前を `google.yaml` に変更します。この `yaml` ファイルには、プロバイダー名、アイコン、作成者など、ツールプロバイダーに関する情報が含まれます。これらの情報は、プラグインのインストール時に表示されます。

**サンプルコード**
    
    
    identity: # ツールプロバイダーの基本情報
      author: Your-name # 作成者
      name: google # 名前。一意である必要があり、他のプロバイダーと重複できません
      label: # ラベル。フロントエンドでの表示に使用
        en_US: Google # 英語ラベル
        zh_Hans: Google # 中国語ラベル
        ja_JP: Google # 日本語ラベル
        pt_BR: Google # プルトガル語ラベル
      description: # 説明。フロントエンドでの表示に使用
        en_US: Google # 英語説明
        zh_Hans: Google # 中国語説明
        ja_JP: : Google # 日本語説明
        pt_BR: : Google # プルトガル語説明
      icon: icon.svg # アイコン。_assets フォルダに配置する必要があります
      tags: # タグ。フロントエンドでの表示に使用
        - search

  * `identity` には、作成者、名前、ラベル、説明、アイコンなど、ツールプロバイダーの基本的な情報が含まれます。
    * アイコンは添付ファイルとして扱い、プロジェクトのルートディレクトリにある `_assets` フォルダに配置する必要があります。
    * タグは、ユーザーがプラグインをカテゴリ別にすばやく検索するのに役立ちます。現在サポートされているすべてのタグは以下のとおりです。
    * class ToolLabelEnum(Enum):
            SEARCH = 'search'
            IMAGE = 'image'
            VIDEOS = 'videos'
            WEATHER = 'weather'
            FINANCE = 'finance'
            DESIGN = 'design'
            TRAVEL = 'travel'
            SOCIAL = 'social'
            NEWS = 'news'
            MEDICAL = 'medical'
            PRODUCTIVITY = 'productivity'
            EDUCATION = 'education'
            BUSINESS = 'business'
            ENTERTAINMENT = 'entertainment'
            UTILITIES = 'utilities'
            OTHER = 'other'




ファイルパスが `/tools` ディレクトリにあることを確認してください。完全なパスは次のようになります。
    
    
    plugins:
      tools:
        - "google.yaml"

ここで、`google.yaml` ファイルのパスは、プラグインプロジェクト内の絶対パスで指定する必要があります。

  * **サードパーティサービスの認証情報を設定する**



開発を容易にするため、サードパーティサービスである `SerpApi` が提供する Google Search API を利用することにしました。`SerpApi` を使用するには API キーが必要となるため、`yaml` ファイルに `credentials_for_provider` フィールドを追加する必要があります。

完全なコードは次のとおりです。
    
    
    identity:
      author: Dify
      name: google
      label:
        en_US: Google
        zh_Hans: Google
        ja_JP: Google
        pt_BR: Google
      description:
        en_US: Google
        zh_Hans: GoogleSearch
        ja_JP: Google
        pt_BR: Google
      icon: icon.svg
      tags:
        - search
    credentials_for_provider: # credentials_for_provider フィールドを追加
      serpapi_api_key:
        type: secret-input
        required: true
        label:
          en_US: SerpApi API key
          zh_Hans: SerpApi API key
          ja_JP: SerpApi API key
          pt_BR: chave de API SerpApi
        placeholder:
          en_US: Please input your SerpApi API key
          zh_Hans: 请输入你的 SerpApi API key
          ja_JP: SerpApi API keyを入力してください
          pt_BR: Por favor, insira sua chave de API SerpApi
        help:
          en_US: Get your SerpApi API key from SerpApi
          zh_Hans: 从 SerpApi 获取您的 SerpApi API key
          ja_JP: SerpApiからSerpApi APIキーを取得する
          pt_BR: Obtenha sua chave de API SerpApi da SerpApi
        url: https://serpapi.com/manage-api-key
    tools:
      - tools/google_search.yaml
    extra:
      python:
        source: google.py

  * `credentials_for_provider` の子構造は、[ProviderConfig](/ja-jp/plugins/schema-definition/general-specifications) の仕様に準拠する必要があります。
  * このプロバイダーに含まれるツールを指定する必要があります。この例では、`tools/google_search.yaml` ファイルが 1 つだけ含まれています。
  * プロバイダーは、基本情報を定義するだけでなく、コードによるロジックの実装も必要です。そのため、実装ロジックを指定する必要があります。この例では、機能のコードファイルは `google.py` に配置されていますが、ここではまだ実装せず、先に `google_search` のコードを作成します。これは、`google_search` の機能が `google.py` の実装に依存するためです。



#### 

​

2\. ツールの YAML ファイルへの入力

1つのツールベンダーが複数のツールを提供することがあります。各ツールは、その基本的な情報、パラメータ、出力などを記述した `yaml` ファイルによって定義される必要があります。

ここでは、`GoogleSearch` ツールを例にとり、`/tools` フォルダに新しい `google_search.yaml` ファイルを作成する手順を見ていきましょう。
    
    
    identity:
      name: google_search
      author: Dify
      label:
        en_US: GoogleSearch
        zh_Hans: 谷歌搜索
        ja_JP: Google検索
        pt_BR: Pesquisa Google
    description:
      human:
        en_US: A tool for performing a Google SERP search and extracting snippets and webpages.Input should be a search query.
        zh_Hans: 一个用于执行 Google SERP 搜索并提取片段和网页的工具。输入应该是一个搜索查询。
        ja_JP: Google SERP 検索を実行し、スニペットと Web ページを抽出するためのツール。入力は検索クエリである必要があります。
        pt_BR: Uma ferramenta para realizar pesquisas no Google SERP e extrair snippets e páginas da web. A entrada deve ser uma consulta de pesquisa.
      llm: A tool for performing a Google SERP search and extracting snippets and webpages.Input should be a search query.
    parameters:
      - name: query
        type: string
        required: true
        label:
          en_US: Query string
          zh_Hans: 查询字符串
          ja_JP: クエリ文字列
          pt_BR: Cadeia de consulta
        human_description:
          en_US: used for searching
          zh_Hans: 用于搜索网页内容
          ja_JP: ネットの検索に使用する
          pt_BR: usado para pesquisar
        llm_description: key words for searching
        form: llm
    extra:
      python:
        source: tools/google_search.py

  * `identity`: ツールの名前、作成者、ラベル、説明といった基本的な情報が含まれます。
  * `parameters`: パラメータに関する設定項目です。各項目の詳細は以下の通りです。
    * `name` (必須): パラメータ名。一意である必要があり、他のパラメータ名との重複は許容されません。
    * `type` (必須): パラメータの型。`string` (文字列)、`number` (数値)、`boolean` (真偽値)、`select` (選択式ドロップダウン)、`secret-input` (暗号化入力フィールド)、`file` (ファイル)、`files` (ファイルセット)、`model-selector` (モデル選択)、`app-selector` (アプリケーション選択) の9種類がサポートされています。機密性の高い情報を取り扱う場合は、必ず `secret-input` 型を使用してください。
    * `label` (必須): パラメータのラベル。フロントエンドに表示される際に用いられます。
    * `form` (必須): フォームの種類。`llm` と `form` の2種類がサポートされています。
      * Agentアプリケーションにおいて、`llm` はパラメータがLLMによって推論されることを意味し、`form` はツールを使用する前にユーザーが設定できるパラメータを意味します。
      * ワークフローアプリケーションにおいては、`llm` と `form` の両方のパラメータに対してフロントエンドでの入力が求められます。ただし、`llm` パラメータはツールノードの入力変数として機能します。
    * `required`: 必須項目であるかどうかを示すフラグです。
      * `llm` モードの場合、`required` が `true` に設定されたパラメータは、Agentが推論によって値を決定する必要があります。
      * `form` モードの場合、`required` が `true` に設定されたパラメータは、ユーザーが会話を開始する前にフロントエンドで値を入力する必要があります。
    * `options`: パラメータの選択肢。
      * `llm` モードでは、Dify はすべての選択肢をLLMに渡し、LLM はこれらの選択肢に基づいて推論を行います。
      * `form` モードでは、`type` が `select` に設定されている場合、フロントエンドにこれらの選択肢が表示されます。
    * `default`: デフォルト値。
    * `min`: 最小値。パラメータの型が `number` の場合に設定可能です。
    * `max`: 最大値。パラメータの型が `number` の場合に設定可能です。
    * `human_description`: フロントエンドに表示されるパラメータの説明文です。多言語に対応しています。
    * `placeholder`: 入力フィールドに表示されるプレースホルダーテキストです。`form` 形式で、パラメータの型が `string`、`number`、`secret-input` の場合に設定できます。多言語に対応しています。
    * `llm_description`: LLMに渡されるパラメータの説明文です。LLMがパラメータの内容をより深く理解できるよう、できる限り詳細な情報を提供してください。



#### 

​

3\. ツールコードの準備

ツールの設定情報を入力したら、ツールの機能コードを記述し、ツールのロジックを実装します。 `/tools` ディレクトリに `google_search.py` を作成し、以下の内容を記述します。
    
    
    from collections.abc import Generator
    from typing import Any
    
    import requests
    
    from dify_plugin import Tool
    from dify_plugin.entities.tool import ToolInvokeMessage
    
    SERP_API_URL = "https://serpapi.com/search"
    
    class GoogleSearchTool(Tool):
        def _parse_response(self, response: dict) -> dict:
            result = {}
            if "knowledge_graph" in response:
                result["title"] = response["knowledge_graph"].get("title", "")
                result["description"] = response["knowledge_graph"].get("description", "")
            if "organic_results" in response:
                result["organic_results"] = [
                    {
                        "title": item.get("title", ""),
                        "link": item.get("link", ""),
                        "snippet": item.get("snippet", ""),
                    }
                    for item in response["organic_results"]
                ]
            return result
    
        def _invoke(self, tool_parameters: dict[str, Any]) -> Generator[ToolInvokeMessage]:
            params = {
                "api_key": self.runtime.credentials["serpapi_api_key"],
                "q": tool_parameters["query"],
                "engine": "google",
                "google_domain": "google.com",
                "gl": "us",
                "hl": "en",
            }
    
            response = requests.get(url=SERP_API_URL, params=params, timeout=5)
            response.raise_for_status()
            valuable_res = self._parse_response(response.json())
            
            yield self.create_json_message(valuable_res)

この例では、`serpapi` にリクエストを送信し、`self.create_json_message` を使用して `json` 形式のデータを返しています。その他の戻り値の型については、[ツールインターフェースドキュメント](/ja-jp/plugins/schema-definition/tool)を参照してください。

#### 

​

4\. ツールプロバイダーコードの作成

最後に、プロバイダーのコードを実装します。これは、プロバイダーの認証情報を検証するために使用されます。認証情報の検証に失敗すると、`ToolProviderCredentialValidationError` 例外が発生します。検証に成功すると、`google_search` ツールサービスが正常にリクエストされます。

`/provider` ディレクトリに `google.py` ファイルを作成し、以下のコードを記述します。
    
    
    from typing import Any
    
    from dify_plugin import ToolProvider
    from dify_plugin.errors.tool import ToolProviderCredentialValidationError
    from tools.google_search import GoogleSearchTool
    
    class GoogleProvider(ToolProvider):
        def _validate_credentials(self, credentials: dict[str, Any]) -> None:
            try:
                for _ in GoogleSearchTool.from_credentials(credentials).invoke(
                    tool_parameters={"query": "test", "result_type": "link"},
                ):
                    pass
            except Exception as e:
                raise ToolProviderCredentialValidationError(str(e))

### 

​

プラグインのデバッグ

プラグインが正常に動作するかテストします。Dify はリモートデバッグをサポートしています。「プラグイン管理」ページで、デバッグキーとリモートサーバーアドレスを取得してください。

プラグインプロジェクトに戻り、`.env.example` ファイルをコピーして `.env` にリネームし、取得したリモートサーバーアドレスとデバッグキーを入力します。

`.env` ファイル
    
    
    INSTALL_METHOD=remote
    REMOTE_INSTALL_HOST=remote
    REMOTE_INSTALL_PORT=5003
    REMOTE_INSTALL_KEY=****-****-****-****-****

`python -m main` コマンドを実行してプラグインを起動します。プラグインページで、プラグインがワークスペースにインストールされていることを確認できます。これで、他のチームメンバーもこのプラグインを使用できます。

### 

​

プラグインのパッケージ化

プラグインが正常に動作することを確認したら、以下のコマンドラインツールを使用してプラグインをパッケージ化し、名前を付けます。実行後、現在のフォルダに `google.difypkg` ファイルが作成されます。これがプラグインの最終的なパッケージです。
    
    
    # Replace ./google with your actual plugin project path.
    
    dify plugin package ./google

おめでとうございます。これで、ツールタイプのプラグインの開発、デバッグ、パッケージ化の全プロセスが完了しました。

### 

​

プラグインの公開

[Dify Plugins コードリポジトリ](https://github.com/langgenius/dify-plugins)にアップロードして、プラグインを公開しましょう。アップロードする前に、プラグインが[プラグイン公開仕様](/ja-jp/plugins/publish-plugins/publish-to-dify-marketplace/README)に準拠していることを確認してください。レビューに合格すると、コードはメインブランチにマージされ、[Dify Marketplace](https://marketplace.dify.ai/) に自動的に公開されます。

#### 

​

さらに詳しく

**クイックスタート:**

  * [拡張タイププラグインの開発](/ja-jp/plugins/quick-start/develop-plugins/extension-plugin)
  * [モデルタイププラグインの開発](/ja-jp/plugins/quick-start/develop-plugins/tool-plugin)
  * [バンドルタイププラグイン：複数のプラグインをパッケージ化](/ja-jp/plugins/quick-start/develop-plugins/bundle)



**プラグインインターフェースドキュメント:**

  * [マニフェスト](/ja-jp/plugins/schema-definition/manifest) 構造
  * [エンドポイント](/ja-jp/plugins/schema-definition/endpoint) 詳細定義
  * [Difyサービスの逆呼び出し](/ja-jp/plugins/schema-definition/reverse-invocation-of-the-dify-service/app)
  * [ツール](/ja-jp/plugins/schema-definition/tool)
  * [モデル](/ja-jp/plugins/schema-definition/reverse-invocation-of-the-dify-service/model)
  * [拡張エージェント戦略](/ja-jp/plugins/schema-definition/agent)



* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/plugins/quick-start/develop-plugins/tool-plugin.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20plu&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/plugins/quick-start/develop-plugins%2Ftool-plugin.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[開発環境のセットアップ](/ja-jp/plugins/quick-start/develop-plugins/initialize-development-tools)[モデルプラグイン](/ja-jp/plugins/quick-start/develop-plugins/model-plugin/README)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * 事前準備
  * 新規プロジェクトの作成
  * プラグインの種類とテンプレートの選択
  * プラグイン権限の設定
  * 開発ツールプラグイン
  * 1\. ツールプロバイダーの yaml ファイルを作成する
  * 2\. ツールの YAML ファイルへの入力
  * 3\. ツールコードの準備
  * 4\. ツールプロバイダーコードの作成
  * プラグインのデバッグ
  * プラグインのパッケージ化
  * プラグインの公開
  * さらに詳しく



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/plugins/quick-start/install-plugins

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

クイックスタート

プラグインのインストールと利用方法

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

    * [クイックスタート](/ja-jp/plugins/quick-start/README)
    * [プラグインのインストールと利用方法](/ja-jp/plugins/quick-start/install-plugins)
    * プラグイン開発の入門

    * [プラグインのデバッグ方法](/ja-jp/plugins/quick-start/debug-plugin)
  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




クイックスタート

# プラグインのインストールと利用方法

Copy page

Author: Allen

## 

​

プラグインのインストール

Difyプラットフォームの右上角にある **「プラグイン」** を選択し、現在のワークスペースでプラグインを管理するページにアクセスしてください。プラグインのインストール方法は以下の3つです：

  * **マーケットプレース**
  * **GitHub**
  * **ローカルからのアップロード**



### 

​

マーケットプレース

Difyのマーケットプレースでは、公式にサポートされているモデルやツール、さらにはコミュニティから提供されるプラグインが見つかります。プラグインの **「インストール」** ボタンを押すことで、手軽に現在のワークスペースに追加可能です。

### 

​

GitHub

GitHubのリポジトリリンクを使用して、直接プラグインをインストールすることもできます。この方法でインストールする際は、プラグインがコードの基準を満たしているか確認することが大切です。プラグインのリポジトリはリリースを作成し、プラグインのパッケージファイルを添付する必要があります。詳細は、[プラグインの公開：GitHub](/ja-jp/plugins/publish-plugins/publish-plugin-on-personal-github-repo)をご覧ください。

### 

​

ローカルからのアップロード

ローカルファイルとは、`.difypkg`拡張子を持つファイルパッケージを指し、主にオフライン環境やテスト環境で利用されます。開発者はこの方法を用いて、公式マーケットプレースに公開されていないプラグインをインストール可能です。組織においては、内部プラグインを開発・保守し、ローカル環境から直接インストールできる点が利点です。これにより、機密情報を外部に公開することなく、セキュアに運用することが可能となります。

プラグインのパッケージ化手順や`.difypkg`ファイルの取得方法については、[プラグインのパッケージ化](/ja-jp/plugins/publish-plugins/package-plugin-file-and-publish)ドキュメントで詳細をご確認いただけます。

* * *

## 

​

プラグインの活用

プラグインをワークスペースにインストールすると、Difyのアプリ内で使用できます。以下では、プラグインの種類ごとのさまざまな使用方法を簡単に紹介します。

### 

​

モデルタイプのプラグイン

例として`OpenAI`の場合、モデルタイプのプラグインをインストールした後、右上の**プロフィールアイコン → 設定 → モデルプロバイダー** の順に進み、API Keyを入力してモデルプロバイダーを有効化します。

この認証を済ませることで、あらゆるアプリタイプでこの高性能な言語モデルを選択し、活用することが可能になります。

### 

​

ツールタイプのプラグイン

ツールプラグインは、チャットフロー、ワークフロー、エージェントの各アプリで利用可能です。このセクションでは、`Google`のツールプラグインを例に取り、これらのアプリタイプでどのように使用するかを示します。

> 注意：一部のツールプラグインはAPIキーによる認証が必要です。そのため、プラグインのインストール後には、引き続き使用するための設定を行う必要があります。

#### 

​

エージェント

エージェントアプリを作成したら、アプリ編集ページの下部にある **「ツール」** オプションを見つけてください。そこから、インストール済みのツールプラグインを選択します。

アプリを使用する際には、特定のコマンドを入力してツールを操作します。たとえば、「今日のニュース」と入力することで、Googleの検索エンジンを利用してオンラインで最新のニュース内容を検索できます。

#### 

​

チャットフロー / ワークフロー

チャットフローやワークフローを組み立てるアプリケーションは、共通のワークフローを構築するためのキャンバスを共有しています。このため、どのツールプラグインも一貫した操作方法で使用できます。

ノードの末端に表示される「+」アイコンをクリックすると、インストール済みのGoogle関連プラグインツールを選択し、そのノードを別のノードに接続することが可能です。

プラグインには、ユーザーからの問い合わせ内容を含むquery変数や、オンラインで検索が必要なその他の情報を入力します。

その他のプラグインの使い方については、各プラグインの詳細ページにある説明をご覧ください。

* * *

## 

​

詳細情報

プラグインの開発に着手する方法については、以下のセクションをご参照ください：

## [プラグイン開発プラグイン開発](develop-plugins/)

* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/plugins/quick-start/install-plugins.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20ll-plug&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/plugins/quick-start%2Finstall-plugins.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[クイックスタート](/ja-jp/plugins/quick-start/README)[プラグイン開発ガイド](/ja-jp/plugins/quick-start/develop-plugins/README)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * プラグインのインストール
  * マーケットプレース
  * GitHub
  * ローカルからのアップロード
  * プラグインの活用
  * モデルタイプのプラグイン
  * ツールタイプのプラグイン
  * エージェント
  * チャットフロー / ワークフロー
  * 詳細情報



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/plugins/schema-definition/README

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

スキーマ仕様

スキーマ仕様

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

    * [スキーマ仕様](/ja-jp/plugins/schema-definition/README)
    * [Manifest(マニフェスト)](/ja-jp/plugins/schema-definition/manifest)
    * [Endpoint（エンドポイント）](/ja-jp/plugins/schema-definition/endpoint)
    * [Tool(ツール)](/ja-jp/plugins/schema-definition/tool)
    * [Agent(エージェント)](/ja-jp/plugins/schema-definition/agent)
    * Model

    * [一般的な標準仕様](/ja-jp/plugins/schema-definition/general-specifications)
    * [永続化されたストレージ](/ja-jp/plugins/schema-definition/persistent-storage)
    * Difyサービスの逆呼び出し

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




スキーマ仕様

# スキーマ仕様

Copy page

## [manifest.mdmanifest.md](manifest.md) ## [endpoint.mdendpoint.md](endpoint.md) ## [model.mdmodel.md](reverse-invocation-of-the-dify-service/model.md) ## [general-specifications.mdgeneral-specifications.md](general-specifications.md) ## [persistent-storage.mdpersistent-storage.md](persistent-storage.md) ## [reverse-invocation-of-the-dify-servicereverse-invocation-of-the-dify-service](reverse-invocation-of-the-dify-service/)

* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/plugins/schema-definition/README.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/plugins/schema-definition%2FREADME.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[プラグイン管理方法](/ja-jp/plugins/manage-plugins)[Manifest(マニフェスト)](/ja-jp/plugins/schema-definition/manifest)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/plugins/schema-definition/agent

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

スキーマ仕様

Agent(エージェント)

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

    * [スキーマ仕様](/ja-jp/plugins/schema-definition/README)
    * [Manifest(マニフェスト)](/ja-jp/plugins/schema-definition/manifest)
    * [Endpoint（エンドポイント）](/ja-jp/plugins/schema-definition/endpoint)
    * [Tool(ツール)](/ja-jp/plugins/schema-definition/tool)
    * [Agent(エージェント)](/ja-jp/plugins/schema-definition/agent)
    * Model

    * [一般的な標準仕様](/ja-jp/plugins/schema-definition/general-specifications)
    * [永続化されたストレージ](/ja-jp/plugins/schema-definition/persistent-storage)
    * Difyサービスの逆呼び出し

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




スキーマ仕様

# Agent(エージェント)

Copy page

## [このドキュメントはまもなく非推奨になりますドキュメント再編の一環として、このページは段階的に廃止されます。 _**このカードをクリックして**_ 、最新情報が含まれる更新版にリダイレクトしてください。新しいドキュメントに不一致や改善が必要な箇所を見つけた場合は、ページ下部の「問題を報告」ボタンを使用してください。](/plugin-dev-ja/9232-agent)

**エージェント戦略の概要**

エージェント戦略とは、標準的な入力コンテンツと出力形式を定義する拡張可能なテンプレートです。特定のエージェント戦略インターフェースを開発することで、CoT（Chain of Thought：思考の連鎖）、ToT（Tree of Thought：思考の木）、GoT（Graph of Thought：思考のグラフ）、BoT（Backbone of Thought：思考のバックボーン）といった様々なエージェント戦略を実装したり、[Semantic Kernel](https://learn.microsoft.com/en-us/semantic-kernel/overview/) のような複雑な戦略を実現したりできます。

### 

​

**マニフェストへのフィールド追加**

プラグインにエージェント戦略を追加するには、manifest.yamlファイルに`plugins.agent_strategies`フィールドを追加し、エージェントプロバイダーを定義します。以下にコード例を示します。
    
    
    version: 0.0.2
    type: plugin
    author: "langgenius"
    name: "agent"
    plugins:
      agent_strategies:
        - "provider/agent.yaml"

マニフェストファイル内の関連性のないフィールドは省略されています。詳細なマニフェスト形式については、[Manifest](/ja-jp/plugins/schema-definition/manifest)を参照してください。

### 

​

**エージェントプロバイダーの定義**

基本的なエージェントプロバイダー情報を含むagent.yamlファイルを作成します。
    
    
    identity:
      author: langgenius
      name: agent
      label:
        en_US: Agent
        zh_Hans: Agent
        ja_JP: Agent
        pt_BR: Agent
      description:
        en_US: Agent
        zh_Hans: Agent
        ja_JP: Agent
        pt_BR: Agent
      icon: icon.svg
    strategies:
      - strategies/function_calling.yaml

### 

​

**エージェント戦略の定義と実装**

#### 

​

**定義**

エージェント戦略のコードを定義するために、function_calling.yamlファイルを作成します。
    
    
    identity:
      name: function_calling
      author: Dify
      label:
        en_US: FunctionCalling
        zh_Hans: FunctionCalling
        ja_JP: FunctionCalling
        pt_BR: FunctionCalling
    description:
      en_US: Function Calling is a basic strategy for agent, model will use the tools provided to perform the task.
    parameters:
      - name: model
        type: model-selector
        scope: tool-call&llm
        required: true
        label:
          en_US: Model
      - name: tools
        type: array[tools]
        required: true
        label:
          en_US: Tools list
      - name: query
        type: string
        required: true
        label:
          en_US: Query
      - name: max_iterations
        type: number
        required: false
        default: 5
        label:
          en_US: Max Iterations
        max: 50
        min: 1
    extra:
      python:
        source: strategies/function_calling.py

このコード形式は[Tool](/ja-jp/plugins/schema-definition/tool)の標準形式に似ており、最も基本的なエージェント戦略を実装するために、`model`、`tools`、`query`、`max_iterations`の4つのパラメーターを定義しています。これにより、ユーザーは以下のことが可能になります。

  * 使用するモデルを選択する
  * 利用するツールを選択する
  * 最大反復回数を設定する
  * エージェントの実行を開始するためのクエリを入力する



これらのパラメーターはすべて連携して、エージェントがタスクを処理し、選択されたツールやモデルとどのように対話するかを定義します。

#### 

​

**機能実装**

**パラメーターの取得**

前述の4つのパラメーターに基づき、モデルタイプのパラメーターはmodel-selector、ツールタイプのパラメーターは特別なarray[tools]です。取得したパラメーターは、SDKに組み込まれているAgentModelConfigとlist[ToolEntity]を使用して変換できます。
    
    
    from dify_plugin.interfaces.agent import AgentModelConfig, AgentStrategy, ToolEntity
    
    class FunctionCallingParams(BaseModel):
        query: str
        model: AgentModelConfig
        tools: list[ToolEntity] | None
        maximum_iterations: int = 3
        
     class FunctionCallingAgentStrategy(AgentStrategy):
        def _invoke(self, parameters: dict[str, Any]) -> Generator[AgentInvokeMessage]:
            """
            Run FunctionCall agent application
            """
            fc_params = FunctionCallingParams(**parameters)

**モデルの呼び出し**

特定モデルの呼び出しは、エージェントプラグインの不可欠な機能です。SDKのsession.model.invoke()関数を使用してモデルを呼び出します。必要な入力パラメーターはモデルから取得できます。

モデルを呼び出すメソッドの例：
    
    
    def invoke(
            self,
            model_config: LLMModelConfig,
            prompt_messages: list[PromptMessage],
            tools: list[PromptMessageTool] | None = None,
            stop: list[str] | None = None,
            stream: bool = True,
        ) -> Generator[LLMResultChunk, None, None] | LLMResult:

モデル情報（model_config）、プロンプト情報（prompt_messages）、ツール情報（tools）を渡す必要があります。prompt_messagesパラメーターは以下のコード例を参照できますが、tool_messagesには特定の変換が必要です。

モデル呼び出しのコード例を参照してください。
    
    
    from collections.abc import Generator
    from typing import Any
    
    from pydantic import BaseModel
    
    from dify_plugin.entities.agent import AgentInvokeMessage
    from dify_plugin.entities.model.llm import LLMModelConfig
    from dify_plugin.entities.model.message import (
        PromptMessageTool,
        SystemPromptMessage,
        UserPromptMessage,
    )
    from dify_plugin.entities.tool import ToolParameter
    from dify_plugin.interfaces.agent import AgentModelConfig, AgentStrategy, ToolEntity
    
    class FunctionCallingParams(BaseModel):
        query: str
        instruction: str | None
        model: AgentModelConfig
        tools: list[ToolEntity] | None
        maximum_iterations: int = 3
    
    class FunctionCallingAgentStrategy(AgentStrategy):
        def _invoke(self, parameters: dict[str, Any]) -> Generator[AgentInvokeMessage]:
            """
            Run FunctionCall agent application
            """
            # init params
            fc_params = FunctionCallingParams(**parameters)
            query = fc_params.query
            model = fc_params.model
            stop = fc_params.model.completion_params.get("stop", []) if fc_params.model.completion_params else []
            prompt_messages = [
                SystemPromptMessage(content="your system prompt message"),
                UserPromptMessage(content=query),
            ]
            tools = fc_params.tools
            prompt_messages_tools = self._init_prompt_tools(tools)
    
            # invoke llm
            chunks = self.session.model.llm.invoke(
                model_config=LLMModelConfig(**model.model_dump(mode="json")),
                prompt_messages=prompt_messages,
                stream=True,
                stop=stop,
                tools=prompt_messages_tools,
            )
    
        def _init_prompt_tools(self, tools: list[ToolEntity] | None) -> list[PromptMessageTool]:
            """
            Init tools
            """
    
            prompt_messages_tools = []
            for tool in tools or []:
                try:
                    prompt_tool = self._convert_tool_to_prompt_message_tool(tool)
                except Exception:
                    # api tool may be deleted
                    continue
    
                # save prompt tool
                prompt_messages_tools.append(prompt_tool)
    
            return prompt_messages_tools
    
        def _convert_tool_to_prompt_message_tool(self, tool: ToolEntity) -> PromptMessageTool:
            """
            convert tool to prompt message tool
            """
            message_tool = PromptMessageTool(
                name=tool.identity.name,
                description=tool.description.llm if tool.description else "",
                parameters={
                    "type": "object",
                    "properties": {},
                    "required": [],
                },
            )
    
            parameters = tool.parameters
            for parameter in parameters:
                if parameter.form != ToolParameter.ToolParameterForm.LLM:
                    continue
    
                parameter_type = parameter.type
                if parameter.type in {
                    ToolParameter.ToolParameterType.FILE,
                    ToolParameter.ToolParameterType.FILES,
                }:
                    continue
                enum = []
                if parameter.type == ToolParameter.ToolParameterType.SELECT:
                    enum = [option.value for option in parameter.options] if parameter.options else []
    
                message_tool.parameters["properties"][parameter.name] = {
                    "type": parameter_type,
                    "description": parameter.llm_description or "",
                }
    
                if len(enum) > 0:
                    message_tool.parameters["properties"][parameter.name]["enum"] = enum
    
                if parameter.required:
                    message_tool.parameters["required"].append(parameter.name)
    
            return message_tool

**ツールの呼び出し**

ツールの呼び出しも、エージェントプラグインの重要な機能です。ツールを呼び出すには、self.session.tool.invoke()を使用します。

ツールを呼び出すメソッドの例：
    
    
    def invoke(
            self,
            provider_type: ToolProviderType,
            provider: str,
            tool_name: str,
            parameters: dict[str, Any],
        ) -> Generator[ToolInvokeMessage, None, None]

必要なパラメーターには、provider_type、provider、tool_name、parametersが含まれます。通常、tool_nameとparametersは関数呼び出し中にLLMによって生成されます。

ツールを呼び出すコード例：
    
    
    from dify_plugin.entities.tool import ToolProviderType
    
    class FunctionCallingAgentStrategy(AgentStrategy):
        def _invoke(self, parameters: dict[str, Any]) -> Generator[AgentInvokeMessage]:
            """
            Run FunctionCall agent application
            """
            fc_params = FunctionCallingParams(**parameters)
            
            # tool_call_name と tool_call_args パラメータはLLMの出力から取得されます。
            tool_instances = {tool.identity.name: tool for tool in fc_params.tools} if fc_params.tools else {}
            tool_instance = tool_instances[tool_call_name]
            tool_invoke_responses = self.session.tool.invoke(
                provider_type=ToolProviderType.BUILT_IN,
                provider=tool_instance.identity.provider,
                tool_name=tool_instance.identity.name,
                # デフォルト値を追加
                parameters={**tool_instance.runtime_parameters, **tool_call_args},
            )

self.session.tool.invoke()関数の出力はジェネレーターであり、ストリーム解析が必要です。

解析については、以下の関数を参照してください。
    
    
    import json
    from collections.abc import Generator
    from typing import cast
    
    from dify_plugin.entities.agent import AgentInvokeMessage
    from dify_plugin.entities.tool import ToolInvokeMessage
    
    def parse_invoke_response(tool_invoke_responses: Generator[AgentInvokeMessage]) -> str:
        result = ""
        for response in tool_invoke_responses:
            if response.type == ToolInvokeMessage.MessageType.TEXT:
                result += cast(ToolInvokeMessage.TextMessage, response.message).text
            elif response.type == ToolInvokeMessage.MessageType.LINK:
                result += (
                    f"result link: {cast(ToolInvokeMessage.TextMessage, response.message).text}."
                    + " please tell user to check it."
                )
            elif response.type in {
                ToolInvokeMessage.MessageType.IMAGE_LINK,
                ToolInvokeMessage.MessageType.IMAGE,
            }:
                result += (
                    "image has been created and sent to user already, "
                    + "you do not need to create it, just tell the user to check it now."
                )
            elif response.type == ToolInvokeMessage.MessageType.JSON:
                text = json.dumps(cast(ToolInvokeMessage.JsonMessage, response.message).json_object, ensure_ascii=False)
                result += f"tool response: {text}."
            else:
                result += f"tool response: {response.message!r}."
        return result

**ログ**

エージェントの思考プロセスを表示するために、通常のメッセージの戻り値に加えて、専用のインターフェースを使用して、エージェントの思考プロセス全体をツリー構造で表示できます。

**ログの作成**

  * このインターフェースは、ログツリー内のノードを表す`AgentLogMessage`を作成して返します。
  * 親が渡された場合、このノードに親ノードがあることを示します。
  * デフォルトのステータスは「Success」です。ただし、タスク実行プロセスをより適切に表示したい場合は、最初にステータスを「start」に設定して「進行中」のログを表示し、タスク完了後にログステータスを「Success」に更新できます。これにより、ユーザーは最初から最後までプロセス全体を明確に把握できます。
  * ラベルは、ユーザーに表示されるログタイトルとして使用されます。


    
    
    def create_log_message(
        self,
        label: str,
        data: Mapping[str, Any],
        status: AgentInvokeMessage.LogMessage.LogStatus = AgentInvokeMessage.LogMessage.LogStatus.SUCCESS,
        parent: AgentInvokeMessage | None = None,
    ) -> AgentInvokeMessage

**ログの完了**

以前に初期ステータスとして「start」を設定した場合、ログ完了エンドポイントを使用してステータスを変更できます。
    
    
    def finish_log_message(
        self,
        log: AgentInvokeMessage,
        status: AgentInvokeMessage.LogMessage.LogStatus = AgentInvokeMessage.LogMessage.LogStatus.SUCCESS,
        error: Optional[str] = None,
    ) -> AgentInvokeMessage

**実装例**

この例では、簡単な2段階の実行プロセスを示します。最初に「考え中」の状態のログを出力し、次に実際のタスク処理を完了します。
    
    
    class FunctionCallingAgentStrategy(AgentStrategy):
        def _invoke(self, parameters: dict[str, Any]) -> Generator[AgentInvokeMessage]:
            thinking_log = self.create_log_message(
                data={"Query": parameters.get("query")},
                label="Thinking",
                status=AgentInvokeMessage.LogMessage.LogStatus.START,
            )
    
            yield thinking_log
    
            llm_response = self.session.model.llm.invoke(
                model_config=LLMModelConfig(
                    provider="openai",
                    model="gpt-4o-mini",
                    mode="chat",
                    completion_params={},
                ),
                prompt_messages=[
                    SystemPromptMessage(content="you are a helpful assistant"),
                    UserPromptMessage(content=parameters.get("query")),
                ],
                stream=False,
                tools=[],
            )
    
            thinking_log = self.finish_log_message(log=thinking_log)
            yield thinking_log
            yield self.create_text_message(text=llm_response.message.content)

* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/plugins/schema-definition/agent.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/plugins/schema-definition%2Fagent.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[Tool(ツール)](/ja-jp/plugins/schema-definition/tool)[Model(モデル)](/ja-jp/plugins/schema-definition/model/README)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * マニフェストへのフィールド追加
  * エージェントプロバイダーの定義
  * エージェント戦略の定義と実装
  * 定義
  * 機能実装



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/plugins/schema-definition/endpoint

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

スキーマ仕様

Endpoint（エンドポイント）

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

    * [スキーマ仕様](/ja-jp/plugins/schema-definition/README)
    * [Manifest(マニフェスト)](/ja-jp/plugins/schema-definition/manifest)
    * [Endpoint（エンドポイント）](/ja-jp/plugins/schema-definition/endpoint)
    * [Tool(ツール)](/ja-jp/plugins/schema-definition/tool)
    * [Agent(エージェント)](/ja-jp/plugins/schema-definition/agent)
    * Model

    * [一般的な標準仕様](/ja-jp/plugins/schema-definition/general-specifications)
    * [永続化されたストレージ](/ja-jp/plugins/schema-definition/persistent-storage)
    * Difyサービスの逆呼び出し

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




スキーマ仕様

# Endpoint（エンドポイント）

Copy page

## [このドキュメントはまもなく非推奨になりますドキュメント再編の一環として、このページは段階的に廃止されます。 _**このカードをクリックして**_ 、最新情報が含まれる更新版にリダイレクトしてください。新しいドキュメントに不一致や改善が必要な箇所を見つけた場合は、ページ下部の「問題を報告」ボタンを使用してください。](/plugin-dev-ja/0432-endpoint)

この記事では、プラグイン内のエンドポイントの構造を説明するために、[クイックスタート：レインボーキャットプロジェクト](/ja-jp/plugins/quick-start/develop-plugins/extension-plugin)を例として取り上げます。完全なプラグインコードは、[GitHub](https://github.com/langgenius/dify-plugin-sdks/tree/main/python/examples/neko)で確認できます。

### 

​

**グループの定義**

`Endpoint`グループは、複数の`Endpoint`をまとめたものです。`Dify`プラグインで新しい`Endpoint`を作成する際には、以下の設定項目を入力する必要があります。

「Endpoint Name」の他に、グループ構成情報を記述することで、新しいフォーム項目を追加できます。保存すると、同じ構成情報を使用する複数のインターフェースが表示されるようになります。

#### 

​

**構造**

  * `settings` (map[string] [ProviderConfig](/ja-jp/plugins/schema-definition/general-specifications)): エンドポイントの設定定義
  * `endpoints` (list[string], required): 特定の`endpoint`インターフェース定義を指定します。


    
    
    settings:
      api_key:
        type: secret-input
        required: true
        label:
          en_US: API key
          zh_Hans: API key
          ja_Jp: API key
          pt_BR: API key
        placeholder:
          en_US: Please input your API key
          zh_Hans: 请输入你的 API key
          ja_Jp: あなたの API key を入れてください
          pt_BR: Por favor, insira sua chave API
    endpoints:
      - endpoints/duck.yaml
      - endpoints/neko.yaml

### 

​

**インターフェース定義**

  * `path` (string): werkzeugのインターフェース標準に従います。
  * `method` (string): インターフェースのメソッド。`HEAD` `GET` `POST` `PUT` `DELETE` `OPTIONS`のみをサポートします。
  * `extra` (object): 基本情報以外の設定情報
    * `python` (object)
      * `source` (string): このインターフェースを実装するソースコード


    
    
    path: "/duck/<app_id>"
    method: "GET"
    extra:
      python:
        source: "endpoints/duck.py"

### 

​

エンドポイントの実装

`dify_plugin.Endpoint`を継承したサブクラスを実装し、`_invoke`メソッドを実装する必要があります。

  * **入力パラメータ**
    * `r` (Request): werkzeugからのリクエストオブジェクト
    * `values` (Mapping): パスから解析されたパスパラメータ
    * `settings` (Mapping): このエンドポイントの設定情報
  * **戻り値**
    * werkzeugからのレスポンスオブジェクト。ストリーミングでの応答をサポートします。
    * 直接的な文字列の戻り値はサポートしません。



**コード例:**
    
    
    import json
    from typing import Mapping
    from werkzeug import Request, Response
    from dify_plugin import Endpoint
    
    class Duck(Endpoint):
        def _invoke(self, r: Request, values: Mapping, settings: Mapping) -> Response:
            """
            Invokes the endpoint with the given request.
            """
            app_id = values["app_id"]
            def generator():
                yield f"{app_id} <br>"
            return Response(generator(), status=200, content_type="text/html")

* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/plugins/schema-definition/endpoint.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/plugins/schema-definition%2Fendpoint.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[Manifest(マニフェスト)](/ja-jp/plugins/schema-definition/manifest)[Tool(ツール)](/ja-jp/plugins/schema-definition/tool)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * グループの定義
  * 構造
  * インターフェース定義
  * エンドポイントの実装



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/plugins/schema-definition/general-specifications

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

スキーマ仕様

一般的な標準仕様

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

    * [スキーマ仕様](/ja-jp/plugins/schema-definition/README)
    * [Manifest(マニフェスト)](/ja-jp/plugins/schema-definition/manifest)
    * [Endpoint（エンドポイント）](/ja-jp/plugins/schema-definition/endpoint)
    * [Tool(ツール)](/ja-jp/plugins/schema-definition/tool)
    * [Agent(エージェント)](/ja-jp/plugins/schema-definition/agent)
    * Model

    * [一般的な標準仕様](/ja-jp/plugins/schema-definition/general-specifications)
    * [永続化されたストレージ](/ja-jp/plugins/schema-definition/persistent-storage)
    * Difyサービスの逆呼び出し

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




スキーマ仕様

# 一般的な標準仕様

Copy page

## [このドキュメントはまもなく非推奨になりますドキュメント再編の一環として、このページは段階的に廃止されます。 _**このカードをクリックして**_ 、最新情報が含まれる更新版にリダイレクトしてください。新しいドキュメントに不一致や改善が必要な箇所を見つけた場合は、ページ下部の「問題を報告」ボタンを使用してください。](/plugin-dev-ja/0411-general-specifications)

本文では、プラグイン開発における共通構造について簡単に説明します。

### 

​

**パス仕様**

マニフェストまたは任意のyamlファイルでファイルパスを指定する場合、ファイルタイプに基づいて以下の2つのルールに従ってください：

  * 画像や動画などのマルチメディアファイル（例：プラグインの`icon`）の場合、プラグインのルートディレクトリの下の`_assets`フォルダに配置します。
  * `.py`や`.yaml`などの通常のテキストファイルの場合、プラグインプロジェクト内の絶対パスを使用します。



### 

​

**共通構造**

プラグインを定義する際、ツール、モデル、インターフェース間で共有できるデータ構造があります。以下がこれらの共有構造です。

#### 

​

**I18nObject**

`I18nObject`は、IETF BCP 47標準に準拠した国際化構造で、現在4つの言語をサポートしています：

  * en_US
  * zh_Hans
  * ja_Jp
  * pt_BR



#### 

​

**ProviderConfig**

`ProviderConfig`は、`Tool`と`Endpoint`の両方に適用可能な共通プロバイダーフォーム構造です。

  * `name` (string): フォーム項目名
  * `label` (I18nObject, 必須): IETF BCP 47に準拠
  * `type` (provider_config_type, 必須): フォームタイプ
  * `scope` (provider_config_scope): オプション範囲、`type`により異なる
  * `required` (bool): 空にできない
  * `default` (any): デフォルト値、基本タイプ`float` `int` `string`のみサポート
  * `options` (list[provider_config_option]): オプション、typeが`select`の場合のみ使用
  * `helper` (object): ヘルプドキュメントリンクラベル、IETF BCP 47に準拠
  * `url` (string): ヘルプドキュメントリンク
  * `placeholder` (object): IETF BCP 47に準拠



#### 

​

ProviderConfigOption(object)

  * `value`(string, 必須)：値
  * `label`(object, 必須)：[IETF BCP 47](https://tools.ietf.org/html/bcp47)に準拠



#### 

​

ProviderConfigType(string)

  * `secret-input` (string)：設定情報が暗号化される
  * `text-input`(string)：プレーンテキスト
  * `select`(string)：ドロップダウンボックス
  * `boolean`(bool)：スイッチ
  * `model-selector`(object)：プロバイダー名、モデル名、モデルパラメータなどを含むモデル設定情報
  * `app-selector`(object)：アプリID
  * `tool-selector`(object)：ツールプロバイダー、名前、パラメータなどを含むツール設定情報
  * `dataset-selector`(string)：TBD



#### 

​

ProviderConfigScope(string)

  * `type`が`model-selector`の場合
    * `all`
    * `llm`
    * `text-embedding`
    * `rerank`
    * `tts`
    * `speech2text`
    * `moderation`
    * `vision`
  * `type`が`app-selector`の場合
    * `all`
    * `chat`
    * `workflow`
    * `completion`
  * `type`が`tool-selector`の場合
    * `all`
    * `plugin`
    * `api`
    * `workflow`



#### 

​

ModelConfig

  * `provider` (string): プラグインIDを含むプロバイダー名、形式は`langgenius/openai/openai`
  * `model` (string): 具体的なモデル名
  * `model_type` (enum): モデルタイプの列挙、このドキュメントを参照



#### 

​

NodeResponse

  * `inputs` (dict): ノードに最終的に入力される変数
  * `outputs` (dict): ノード出力結果
  * `process_data` (dict): ノード実行中に生成されたデータ



#### 

​

ToolSelector

  * `provider_id` (string): ツールプロバイダー名
  * `tool_name` (string): ツール名
  * `tool_description` (string): ツールの説明
  * `tool_configuration` (dict[str, Any]): ツール設定情報
  * `tool_parameters` (dict[str, dict]): LLM推論が必要なパラメータ
    * `name` (string): パラメータ名
    * `type` (string): パラメータタイプ
    * `required` (bool): 必須かどうか
    * `description` (string): パラメータの説明
    * `default` (any): デフォルト値
    * `options` (list[string]): 利用可能なオプション



* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/plugins/schema-definition/general-specifications.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20al-specificati&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/plugins/schema-definition%2Fgeneral-specifications.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[モデルスキーマ](/ja-jp/plugins/schema-definition/model/model-schema)[永続化されたストレージ](/ja-jp/plugins/schema-definition/persistent-storage)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * パス仕様
  * 共通構造
  * I18nObject
  * ProviderConfig
  * ProviderConfigOption(object)
  * ProviderConfigType(string)
  * ProviderConfigScope(string)
  * ModelConfig
  * NodeResponse
  * ToolSelector



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/plugins/schema-definition/manifest

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

スキーマ仕様

Manifest(マニフェスト)

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

    * [スキーマ仕様](/ja-jp/plugins/schema-definition/README)
    * [Manifest(マニフェスト)](/ja-jp/plugins/schema-definition/manifest)
    * [Endpoint（エンドポイント）](/ja-jp/plugins/schema-definition/endpoint)
    * [Tool(ツール)](/ja-jp/plugins/schema-definition/tool)
    * [Agent(エージェント)](/ja-jp/plugins/schema-definition/agent)
    * Model

    * [一般的な標準仕様](/ja-jp/plugins/schema-definition/general-specifications)
    * [永続化されたストレージ](/ja-jp/plugins/schema-definition/persistent-storage)
    * Difyサービスの逆呼び出し

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




スキーマ仕様

# Manifest(マニフェスト)

Copy page

## [このドキュメントはまもなく非推奨になりますドキュメント再編の一環として、このページは段階的に廃止されます。 _**このカードをクリックして**_ 、最新情報が含まれる更新版にリダイレクトしてください。新しいドキュメントに不一致や改善が必要な箇所を見つけた場合は、ページ下部の「問題を報告」ボタンを使用してください。](/plugin-dev-ja/0411-plugin-info-by-manifest)

**マニフェストファイル** マニフェストファイルとは、**プラグイン** に関する最も基本的な情報を定義するYAML形式のファイルです。プラグイン名、作成者、含まれるツールやモデルなどの情報が含まれます。

このファイルの形式が正しくないと、プラグインの解析とパッケージング処理は失敗します。

### 

​

**コード例**

以下は、マニフェストファイルの簡単な例です。各データ要素の意味と機能については、以下で説明します。他のプラグインコードについては、[Githubリポジトリ](https://github.com/langgenius/dify-plugin-sdks/tree/main/python/examples) を参照してください。
    
    
    version: 0.0.1
    type: "plugin"
    author: "Yeuoly"
    name: "neko"
    label:
      en_US: "Neko"
    created_at: "2024-07-12T08:03:44.658609186Z"
    icon: "icon.svg"
    resource:
      memory: 1048576
      permission:
        tool:
          enabled: true
        model:
          enabled: true
          llm: true
        endpoint:
          enabled: true
        app:
          enabled: true
        storage: 
          enabled: true
          size: 1048576
    plugins:
      endpoints:
        - "provider/neko.yaml"
    meta:
      version: 0.0.1
      arch:
        - "amd64"
        - "arm64"
      runner:
        language: "python"
        version: "3.11"
        entrypoint: "main"

### 

​

**バージョン管理**

プラグインのバージョンは、マニフェストファイルの`version`フィールドで管理されます。バージョン番号は`major.minor.patch`の形式である必要があります。そうでない場合、自動更新が期待どおりに動作しない可能性があります。

### 

​

構造

  * `version` (version、required): プラグインのバージョン
  * `type` (type、required): プラグインの種類。現在は`plugin`のみをサポートしており、将来的には`bundle`をサポート予定
  * `author` (string、required): 作成者。マーケットプレイスでは組織名として扱われます
  * `label` (label、required): 多言語対応の名前
  * `created_at` (RFC3339、required): 作成時間。マーケットプレイスでは現在時刻より後の日時であってはなりません
  * `icon` (アセット、required): アイコンのパス
  * `resource` (object): 必要なリソース設定
    * `memory` (int64): 最大メモリ使用量。主にSaaS上のAWS Lambdaリソースリクエストに関連し、単位はバイト
    * `permission` (object): 権限設定
      * `tool` (object): ツール呼び出しの権限
        * `enabled` (bool)
      * `model` (object): モデル呼び出しの権限
        * `enabled` (bool)
        * `llm` (bool)
        * `text_embedding` (bool)
        * `rerank` (bool)
        * `tts` (bool)
        * `speech2text` (bool)
        * `moderation` (bool)
      * `node` (object): ノード呼び出しの権限
        * `enabled` (bool)
      * `endpoint` (object): エンドポイント登録の権限
        * `enabled` (bool)
      * `app` (object): アプリ呼び出しの権限
        * `enabled` (bool)
      * `storage` (object): 永続ストレージの権限
        * `enabled` (bool)
        * `size` (int64): 最大許容永続メモリサイズ（バイト単位）
  * `plugins` (object、required): プラグインの機能を定義するYAMLファイルのリスト。プラグインパッケージ内の絶対パスで指定
    * 形式：
      * `tools` (list[string]): 拡張された[ツール](/ja-jp/plugins/schema-definition/tool)プロバイダ
      * `models` (list[string]): 拡張された[モデル](/ja-jp/plugins/schema-definition/reverse-invocation-of-the-dify-service/model)プロバイダ
      * `endpoints` (list[string]): 拡張された[エンドポイント](/ja-jp/plugins/schema-definition/endpoint)プロバイダ
      * `agent_strategies` (list[string]): 拡張されたエージェント戦略プロバイダ
    * 制限：
      * ツールとモデルの両方を同時に拡張することはできません。
      * 少なくとも1つの拡張が必要です。
      * モデルとエンドポイントの両方を同時に拡張することはできません。
      * 現在、拡張タイプごとに1つのプロバイダのみをサポートしています。
  * `meta` (object): メタ情報
    * `version` (version、required): マニフェスト形式のバージョン。初期バージョンは`0.0.1`
    * `arch` (list[string]、required): サポートされるアーキテクチャ。現在は`amd64`と`arm64`のみ
    * `runner` (object、required): ランタイム設定
      * `language` (string): 現在はPythonのみをサポート
      * `version` (string): 言語バージョン。現在は`3.12`のみをサポート
      * `entrypoint` (string): プログラムのエントリポイント。Pythonの場合は`main`である必要があります。



* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/plugins/schema-definition/manifest.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/plugins/schema-definition%2Fmanifest.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[スキーマ仕様](/ja-jp/plugins/schema-definition/README)[Endpoint（エンドポイント）](/ja-jp/plugins/schema-definition/endpoint)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * コード例
  * バージョン管理
  * 構造



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/plugins/schema-definition/model/README

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

Model

Model(モデル)

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

    * [スキーマ仕様](/ja-jp/plugins/schema-definition/README)
    * [Manifest(マニフェスト)](/ja-jp/plugins/schema-definition/manifest)
    * [Endpoint（エンドポイント）](/ja-jp/plugins/schema-definition/endpoint)
    * [Tool(ツール)](/ja-jp/plugins/schema-definition/tool)
    * [Agent(エージェント)](/ja-jp/plugins/schema-definition/agent)
    * Model

      * [Model(モデル)](/ja-jp/plugins/schema-definition/model/README)
      * [モデル設計規則](/ja-jp/plugins/schema-definition/model/model-designing-rules)
      * [モデルスキーマ](/ja-jp/plugins/schema-definition/model/model-schema)
    * [一般的な標準仕様](/ja-jp/plugins/schema-definition/general-specifications)
    * [永続化されたストレージ](/ja-jp/plugins/schema-definition/persistent-storage)
    * Difyサービスの逆呼び出し

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




Model

# Model(モデル)

Copy page

モデルインターフェースには以下の内容が含まれます：

## [モデル設計ルール.mdモデル設計ルール.md](model-designing-rules.md) ## [モデルスキーマ.mdモデルスキーマ.md](model-schema.md)

* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/plugins/schema-definition/model/README.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/plugins/schema-definition/model%2FREADME.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[Agent(エージェント)](/ja-jp/plugins/schema-definition/agent)[モデル設計規則](/ja-jp/plugins/schema-definition/model/model-designing-rules)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/plugins/schema-definition/model/model-designing-rules

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

Model

モデル設計規則

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

    * [スキーマ仕様](/ja-jp/plugins/schema-definition/README)
    * [Manifest(マニフェスト)](/ja-jp/plugins/schema-definition/manifest)
    * [Endpoint（エンドポイント）](/ja-jp/plugins/schema-definition/endpoint)
    * [Tool(ツール)](/ja-jp/plugins/schema-definition/tool)
    * [Agent(エージェント)](/ja-jp/plugins/schema-definition/agent)
    * Model

      * [Model(モデル)](/ja-jp/plugins/schema-definition/model/README)
      * [モデル設計規則](/ja-jp/plugins/schema-definition/model/model-designing-rules)
      * [モデルスキーマ](/ja-jp/plugins/schema-definition/model/model-schema)
    * [一般的な標準仕様](/ja-jp/plugins/schema-definition/general-specifications)
    * [永続化されたストレージ](/ja-jp/plugins/schema-definition/persistent-storage)
    * Difyサービスの逆呼び出し

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




Model

# モデル設計規則

Copy page

## [このドキュメントはまもなく非推奨になりますドキュメント再編の一環として、このページは段階的に廃止されます。 _**このカードをクリックして**_ 、最新情報が含まれる更新版にリダイレクトしてください。新しいドキュメントに不一致や改善が必要な箇所を見つけた場合は、ページ下部の「問題を報告」ボタンを使用してください。](/plugin-dev-ja/0411-model-designing-rules)

  * モデルプロバイダーのルールは、[Provider](/ja-jp/plugins/schema-definition/model/model-designing-rules) エンティティに基づいています。
  * モデルルールは、[AIModelEntity](/ja-jp/plugins/schema-definition/model/model-designing-rules) エンティティに基づいています。



> 以下のすべてのエンティティは `Pydantic BaseModel` をベースにしており、`entities` モジュール内で対応するエンティティを見つけることができます。

### 

​

Provider（プロバイダ）

  * `provider` (string) プロバイダー識別子。例：`openai`
  * `label` (object) プロバイダーの表示名。多言語対応で、英語（`en_US`）と中国語（`zh_Hans`）の2言語を設定できます。
    * `zh_Hans` (string) [optional] 中国語のラベル名。`zh_Hans` が設定されていない場合は、デフォルトで `en_US` が使用されます。
    * `en_US` (string) 英語のラベル名
  * `description` (object) [optional] プロバイダーの説明。多言語対応。
    * `zh_Hans` (string) [optional] 中国語の説明
    * `en_US` (string) 英語の説明
  * `icon_small` (string) [optional] プロバイダーの小さなアイコン。対応するプロバイダーの実装ディレクトリ下の `_assets` ディレクトリに保存されます。英語と中国語の扱い方は `label` と同様です。
    * `zh_Hans` (string) [optional] 中国語のアイコン
    * `en_US` (string) 英語のアイコン
  * `icon_large` (string) [optional] プロバイダーの大きなアイコン。対応するプロバイダーの実装ディレクトリ下の `_assets` ディレクトリに保存されます。英語と中国語の扱い方は `label` と同様です。
    * `zh_Hans` (string) [optional] 中国語のアイコン
    * `en_US` (string) 英語のアイコン
  * `background` (string) [optional] 背景色のカラーコード。例：#FFFFFF。値が設定されていない場合は、フロントエンドのデフォルト色が使用されます。
  * `help` (object) [optional] ヘルプ情報
    * `title` (object) ヘルプタイトル。多言語対応。
      * `zh_Hans` (string) [optional] 中国語のタイトル
      * `en_US` (string) 英語のタイトル
    * `url` (object) ヘルプリンク。多言語対応。
      * `zh_Hans` (string) [optional] 中国語のリンク
      * `en_US` (string) 英語のリンク
  * `supported_model_types` (array[[ModelType](/ja-jp/plugins/schema-definition/model/model-designing-rules)]) サポートされているモデルタイプ
  * `configurate_methods` (array[[ConfigurateMethod](/ja-jp/plugins/schema-definition/model/model-designing-rules)]) 設定方法
  * `provider_credential_schema` ([[ProviderCredentialSchema](/ja-jp/plugins/schema-definition/model/model-designing-rules)]) プロバイダーの認証情報スキーマ（プロバイダーの資格情報仕様）
  * `model_credential_schema` ([[ModelCredentialSchema](/ja-jp/plugins/schema-definition/model/model-designing-rules)]) モデルの認証情報スキーマ（モデルの資格情報仕様）



### 

​

AIModelEntity（AIモデルエンティティ）

  * `model` (string) モデル識別子。例：`gpt-3.5-turbo`
  * `label` (object) [optional] モデルの表示名。多言語対応で、英語（`en_US`）と中国語（`zh_Hans`）の2言語を設定できます。
    * `zh_Hans` (string) [optional] 中国語のラベル名
    * `en_US` (string) 英語のラベル名
  * `model_type` ([ModelType](#ModelType)) モデルタイプ
  * `features` (array[[ModelFeature](#ModelFeature)]) [optional] サポートされている機能リスト
  * `model_properties` (object) モデルのプロパティ
    * `mode` ([LLMMode](#LLMMode)) モード（モデルタイプ `llm` で利用可能）
    * `context_size` (int) コンテキストサイズ（モデルタイプ `llm`、`text-embedding` で利用可能）
    * `max_chunks` (int) 最大チャンク数（モデルタイプ `text-embedding`、`moderation` で利用可能）
    * `file_upload_limit` (int) ファイルの最大アップロード制限（単位：MB）。（モデルタイプ `speech2text` で利用可能）
    * `supported_file_extensions` (string) サポートされているファイル拡張子形式。例：mp3、mp4（モデルタイプ `speech2text` の場合）
    * `default_voice` (string) デフォルトのボイス。必須：alloy,echo,fable,onyx,nova,shimmer（モデルタイプ `tts` で利用可能）
    * `voices` (list) 選択可能なボイスリスト。
      * `mode` (string) ボイスモデル。（モデルタイプ `tts` で利用可能）
      * `name` (string) ボイスモデルの表示名。（モデルタイプ `tts` で利用可能）
      * `language` (string) ボイスモデルがサポートする言語。（モデルタイプ `tts` で利用可能）
    * `word_limit` (int) 1回の変換における文字数制限。デフォルトでは段落ごとに区切られます。（モデルタイプ `tts` で利用可能）
    * `audio_type` (string) サポートされているオーディオファイルの拡張子形式。例：mp3、wav（モデルタイプ `tts` で利用可能）
    * `max_workers` (int) テキストからオーディオへの変換をサポートする同時実行タスク数。（モデルタイプ `tts` で利用可能）
    * `max_characters_per_chunk` (int) 1チャンクあたりの最大文字数（モデルタイプ `moderation` で利用可能）
  * `parameter_rules` (array[[ParameterRule](/ja-jp/plugins/schema-definition/model/model-designing-rules)]) [optional] モデル呼び出しパラメータのルール
  * `pricing` ([[PriceConfig](/ja-jp/plugins/schema-definition/model/model-designing-rules)]) [optional] 価格情報
  * `deprecated` (bool) 非推奨かどうか。非推奨の場合、モデルリストには表示されなくなりますが、すでに設定済みのものは引き続き使用できます。デフォルトは `False` です。



### 

​

ModelType（モデルタイプ）

  * `llm` テキスト生成モデル
  * `text-embedding` テキスト埋め込みモデル
  * `rerank` Rerank モデル
  * `speech2text` 音声テキスト変換
  * `tts` テキスト音声変換
  * `moderation` 審査



### 

​

ConfigurateMethod（構成方法）

  * `predefined-model` 既定モデル



ユーザーは、統一されたプロバイダーの認証情報を設定するだけで、プロバイダーの既定モデルを利用できます。

  * `customizable-model` カスタムモデル



ユーザーは、各モデルの認証情報設定を個別に追加する必要があります。

  * `fetch-from-remote` リモートから取得



`predefined-model` の設定方法と同様に、統一されたプロバイダーの認証情報を設定するだけで済みます。モデルは認証情報を通じてプロバイダーから取得されます。

### 

​

ModelFeature（モデル機能）

  * `agent-thought` エージェントの推論。通常、70B を超えるモデルには思考連鎖能力があります。
  * `vision` ビジョン、つまり画像理解。
  * `tool-call` ツール呼び出し
  * `multi-tool-call` 複数ツール呼び出し
  * `stream-tool-call` ストリームツール呼び出し



### 

​

FetchFrom（入手先）

  * `predefined-model` 既定モデル
  * `fetch-from-remote` リモートモデル



### 

​

LLMMode（LLMモード）

  * `completion` テキスト補完
  * `chat` 対話



### 

​

ParameterRule（パラメータールール）

  * `name` (string) モデルを呼び出す際の実際のパラメータ名
  * `use_template` (string) [optional] テンプレートを使用



デフォルトでは、5つの変数設定テンプレートが用意されています。

  * `temperature`
  * `top_p`
  * `frequency_penalty`
  * `presence_penalty`
  * `max_tokens`



`use_template` でテンプレート変数名を直接設定すると、`entities.defaults.PARAMETER_RULE_TEMPLATE` のデフォルト設定が使用され、`name` と `use_template` 以外のすべてのパラメータを設定する必要はありません。追加の設定パラメータを設定した場合、デフォルト設定が上書きされます。`openai/llm/gpt-3.5-turbo.yaml` を参照してください。

  * `label` (object) [optional] ラベル。多言語対応。
    * `zh_Hans` (string) [optional] 中国語のラベル名
    * `en_US` (string) 英語のラベル名
  * `type` (string) [optional] パラメータのタイプ
    * `int` 整数
    * `float` 浮動小数点数
    * `string` 文字列
    * `boolean` ブール型
  * `help` (string) [optional] ヘルプ情報
    * `zh_Hans` (string) [optional] 中国語のヘルプ情報
    * `en_US` (string) 英語のヘルプ情報
  * `required` (bool) 必須かどうか。デフォルトは `False` です。
  * `default` (int/float/string/bool) [optional] デフォルト値
  * `min` (int/float) [optional] 最小値。数値型のみ適用。
  * `max` (int/float) [optional] 最大値。数値型のみ適用。
  * `precision` (int) [optional] 精度。小数点以下の桁数。数値型のみ適用。
  * `options` (array[string]) [optional] ドロップダウンの選択肢。`type` が `string` の場合にのみ適用。設定しない、または null の場合は選択肢を制限しません。



### 

​

PriceConfig（価格設定）

  * `input` (float) 入力単価。つまり、Prompt の単価。
  * `output` (float) 出力単価。つまり、返される内容の単価。
  * `unit` (float) 価格単位。例：1M トークン単位で価格設定する場合、単価に対応するトークン数は `0.000001` になります。
  * `currency` (string) 通貨単位



### 

​

ProviderCredentialSchema（プロバイダー資格情報スキーマ）

  * `credential_form_schemas` (array[[CredentialFormSchema](/ja-jp/plugins/schema-definition/model/model-designing-rules)]) 資格情報フォームの仕様



### 

​

ModelCredentialSchema（モデル認証情報スキーマ）

  * `model` (object) モデル識別子。変数名はデフォルトで `model` です。
    * `label` (object) モデルフォーム項目の表示名
      * `en_US` (string) 英語
      * `zh_Hans` (string) [optional] 中国語
    * `placeholder` (object) モデルのプレースホルダー
      * `en_US` (string) 英語
      * `zh_Hans` (string) [optional] 中国語
  * `credential_form_schemas` (array[[CredentialFormSchema](/ja-jp/plugins/schema-definition/model/model-designing-rules)]) 資格情報フォームの仕様



### 

​

CredentialFormSchema（資格情報フォームスキーマ）

  * `variable` (string) フォーム項目の変数名
  * `label` (object) フォーム項目のラベル名
    * `en_US` (string) 英語
    * `zh_Hans` (string) [optional] 中国語
  * `type` ([FormType](#FormType)) フォーム項目のタイプ
  * `required` (bool) 必須かどうか
  * `default` (string) デフォルト値
  * `options` (array[[FormOption](/ja-jp/plugins/schema-definition/model/model-designing-rules)]) フォーム項目が `select` または `radio` の場合の専用属性。ドロップダウンの内容を定義します。
  * `placeholder` (object) フォーム項目が `text-input` の場合の専用属性。フォーム項目のプレースホルダー。
    * `en_US` (string) 英語
    * `zh_Hans` (string) [optional] 中国語
  * `max_length` (int) フォーム項目が `text-input` の場合の専用属性。入力の最大長を定義します。0 は制限なし。
  * `show_on` (array[[FormShowOnObject](/ja-jp/plugins/schema-definition/model/model-designing-rules)]) 他のフォーム項目の値が条件を満たす場合に表示します。空の場合は常に表示します。



#### 

​

FormType（フォームタイプ）

  * `text-input` テキスト入力コンポーネント
  * `secret-input` パスワード入力コンポーネント
  * `select` 単一選択ドロップダウン
  * `radio` ラジオコンポーネント
  * `switch` スイッチコンポーネント。`true` と `false` のみをサポート。



#### 

​

FormOption（フォームオプション）

  * `label` (object) ラベル
    * `en_US` (string) 英語
    * `zh_Hans` (string) [optional] 中国語
  * `value` (string) ドロップダウンの選択肢の値
  * `show_on` (array[[FormShowOnObject](/ja-jp/plugins/schema-definition/model/model-designing-rules)]) 他のフォーム項目の値が条件を満たす場合に表示します。空の場合は常に表示します。



#### 

​

FormShowOnObject（フォーム表示オブジェクト）

  * `variable` (string) 他のフォーム項目の変数名
  * `value` (string) 他のフォーム項目の値



* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/plugins/schema-definition/model/model-designing-rules.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20-designing-ru&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/plugins/schema-definition/model%2Fmodel-designing-rules.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[Model(モデル)](/ja-jp/plugins/schema-definition/model/README)[モデルスキーマ](/ja-jp/plugins/schema-definition/model/model-schema)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * Provider（プロバイダ）
  * AIModelEntity（AIモデルエンティティ）
  * ModelType（モデルタイプ）
  * ConfigurateMethod（構成方法）
  * ModelFeature（モデル機能）
  * FetchFrom（入手先）
  * LLMMode（LLMモード）
  * ParameterRule（パラメータールール）
  * PriceConfig（価格設定）
  * ProviderCredentialSchema（プロバイダー資格情報スキーマ）
  * ModelCredentialSchema（モデル認証情報スキーマ）
  * CredentialFormSchema（資格情報フォームスキーマ）
  * FormType（フォームタイプ）
  * FormOption（フォームオプション）
  * FormShowOnObject（フォーム表示オブジェクト）



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/plugins/schema-definition/model/model-schema

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

Model

モデルスキーマ

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

    * [スキーマ仕様](/ja-jp/plugins/schema-definition/README)
    * [Manifest(マニフェスト)](/ja-jp/plugins/schema-definition/manifest)
    * [Endpoint（エンドポイント）](/ja-jp/plugins/schema-definition/endpoint)
    * [Tool(ツール)](/ja-jp/plugins/schema-definition/tool)
    * [Agent(エージェント)](/ja-jp/plugins/schema-definition/agent)
    * Model

      * [Model(モデル)](/ja-jp/plugins/schema-definition/model/README)
      * [モデル設計規則](/ja-jp/plugins/schema-definition/model/model-designing-rules)
      * [モデルスキーマ](/ja-jp/plugins/schema-definition/model/model-schema)
    * [一般的な標準仕様](/ja-jp/plugins/schema-definition/general-specifications)
    * [永続化されたストレージ](/ja-jp/plugins/schema-definition/persistent-storage)
    * Difyサービスの逆呼び出し

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




Model

# モデルスキーマ

Copy page

## [このドキュメントはまもなく非推奨になりますドキュメント再編の一環として、このページは段階的に廃止されます。 _**このカードをクリックして**_ 、最新情報が含まれる更新版にリダイレクトしてください。新しいドキュメントに不一致や改善が必要な箇所を見つけた場合は、ページ下部の「問題を報告」ボタンを使用してください。](/plugin-dev-ja/0412-model-schema)

ここでは、プロバイダーと各モデルタイプが実装する必要があるインターフェースメソッドとパラメータについて説明します。

# 

​

モデルプロバイダー

`__base.model_provider.ModelProvider` 基底クラスを継承し、以下のインターフェースを実装します。
    
    
    def validate_provider_credentials(self, credentials: dict) -> None:
        """
        Validate provider credentials
        You can choose any validate_credentials method of model type or implement validate method by yourself,
        such as: get model list api
    
        if validate failed, raise exception
    
        :param credentials: provider credentials, credentials form defined in `provider_credential_schema`.
        """

  * `credentials` (object): 認証情報



認証情報のパラメータは、サプライヤーの YAML 設定ファイルの `provider_credential_schema`で定義され、`api_key`などが渡されます。検証に失敗した場合は、`errors.validate.CredentialsValidateFailedError`エラーを発生させてください。**注: プリ定義モデルはこのインターフェースを完全に実装する必要があります。カスタムモデルサプライヤーは、以下のような簡単な実装で十分です。**
    
    
    class XinferenceProvider(Provider):
        def validate_provider_credentials(self, credentials: dict) -> None:
            pass

### 

​

モデル

モデルは5つの異なるモデルタイプに分類され、異なるモデルタイプは異なる基底クラスを継承し、実装する必要があるメソッドも異なります。

#### 

​

共通インターフェース

すべてのモデルは、以下の2つのメソッドを共通して実装する必要があります。

  * モデル認証情報の検証



サプライヤーの認証情報検証と同様に、ここでは個々のモデルに対して検証を行います。
    
    
    def validate_credentials(self, model: str, credentials: dict) -> None:
        """
        Validate model credentials
    
        :param model: model name
        :param credentials: model credentials
        :return:
        """

パラメータ:

  * `model` (string): モデル名
  * `credentials` (object): 認証情報



認証情報のパラメータは、サプライヤーの YAML 設定ファイルの`provider_credential_schema`または`model_credential_schema`で定義され、`api_key`などが渡されます。検証に失敗した場合は、`errors.validate.CredentialsValidateFailedError`エラーを発生させてください。

  * 呼び出しエラーのマッピング



モデルの呼び出し中に例外が発生した場合、Dify が異なるエラーに対して適切な後続処理を実行できるように、Runtime で定義された`InvokeError`タイプにマッピングする必要があります。Runtime Errors:

  * `InvokeConnectionError`: 呼び出し接続エラー
  * `InvokeServerUnavailableError`: 呼び出しサービスが利用不可
  * `InvokeRateLimitError`: 呼び出しがレート制限に達した
  * `InvokeAuthorizationError`: 呼び出し認証失敗
  * `InvokeBadRequestError`: 呼び出しパラメータエラー


    
    
    @property
    def _invoke_error_mapping(self) -> dict[type[InvokeError], list[type[Exception]]]:
        """
        Map model invoke error to unified error
        The key is the error type thrown to the caller
        The value is the error type thrown by the model,
        which needs to be converted into a unified error type for the caller.
    
        :return: Invoke error mapping
        """

対応するエラーを直接発生させ、以下のように定義することもできます。これにより、後続の呼び出しで`InvokeConnectionError`などの例外を直接発生させることができます。

はい、以下に修正後の翻訳を示します。

#### 

​

LLM

`__base.large_language_model.LargeLanguageModel` 基底クラスを継承し、以下のインターフェースを実装します：

  * LLM呼び出し



LLMを呼び出すためのコアメソッドを実装します。ストリーミングと同期の両方の戻り値をサポートします。
    
    
    def _invoke(self, model: str, credentials: dict,
                prompt_messages: list[PromptMessage], model_parameters: dict,
                tools: Optional[list[PromptMessageTool]] = None, stop: Optional[list[str]] = None,
                stream: bool = True, user: Optional[str] = None) \
            -> Union[LLMResult, Generator]:
        """
        Invoke large language model
    
        :param model: model name
        :param credentials: model credentials
        :param prompt_messages: prompt messages
        :param model_parameters: model parameters
        :param tools: tools for tool calling
        :param stop: stop words
        :param stream: is stream response
        :param user: unique user id
        :return: full response or stream response chunk generator result
        """

  * パラメータ：
    * `model` (string) モデル名
    * `credentials` (object) クレデンシャル



クレデンシャルのパラメータは、ベンダーのYAML構成ファイルの `provider_credential_schema` または `model_credential_schema` で定義され、`api_key` などが渡されます。

  * `prompt_messages` (array[[PromptMessage](/ja-jp/plugins/schema-definition/model/model-schema)]) プロンプト一覧



モデルが `Completion` タイプの場合、リストには[UserPromptMessage](/ja-jp/plugins/schema-definition/model/model-schema) 要素を1つだけ渡します。モデルが `Chat` タイプの場合、メッセージに応じて[SystemPromptMessage](/ja-jp/plugins/schema-definition/model/model-schema)、[UserPromptMessage](/ja-jp/plugins/schema-definition/model/model-schema)、[AssistantPromptMessage](/ja-jp/plugins/schema-definition/model/model-schema)、[ToolPromptMessage](/ja-jp/plugins/schema-definition/model/model-schema) 要素のリストを渡す必要があります。

\- `model_parameters` (object) モデルパラメータ。モデルパラメータは、モデルのYAML構成の `parameter_rules` で定義されます。

\- `tools` (array[[PromptMessageTool](/ja-jp/plugins/schema-definition/model/model-schema)]) [optional] ツール一覧。`function calling` における `function` と同等です。つまり、ツール呼び出しのためのツール一覧を渡します。

\- `stop` (array[string]) [optional] 停止シーケンス。モデルの出力は、停止シーケンスで定義された文字列の手前で停止します。

\- `stream` (bool) ストリーミング出力かどうか。デフォルトは `True` です。ストリーミング出力は `Generator[LLMResultChunk]` を返し、非ストリーミング出力は `LLMResult` を返します。

\- `user` (string) [optional] ユーザーの一意の識別子。ベンダーが不正行為を監視および検出するのに役立ちます。

  * 戻り値



ストリーミング出力は `Generator[LLMResultChunk]` を返し、非ストリーミング出力は `LLMResult` を返します。

  * 入力トークンの事前計算



モデルがトークン数の事前計算インターフェースを提供していない場合は、直接0を返します。
    
    
    def get_num_tokens(self, model: str, credentials: dict, prompt_messages: list[PromptMessage],
                       tools: Optional[list[PromptMessageTool]] = None) -> int:
        """
        Get number of tokens for given prompt messages
    
        :param model: model name
        :param credentials: model credentials
        :param prompt_messages: prompt messages
        :param tools: tools for tool calling
        :return:
        """

パラメータの説明は上記の「LLM呼び出し」を参照してください。このインターフェースは、対応する `model` に応じて適切な `tokenizer` を選択して計算する必要があります。対応するモデルが `tokenizer` を提供していない場合は、`AIModel` 基底クラスの `_get_num_tokens_by_gpt2(text: str)` メソッドを使用して計算できます。

  * カスタマイズ可能なモデルスキーマの取得 [オプション]


    
    
    def get_customizable_model_schema(self, model: str, credentials: dict) -> Optional[AIModelEntity]:
        """
        Get customizable model schema
    
        :param model: model name
        :param credentials: model credentials
        :return: model schema
        """

ベンダーがカスタムLLMの追加をサポートしている場合、このメソッドを実装してカスタムモデルがモデルスキーマを取得できるようにできます。デフォルトでは `None` を返します。

`OpenAI` ベンダーのほとんどのファインチューニングモデルでは、ファインチューニングモデルの名前（例：`gpt-3.5-turbo-1106`）からその基底クラスモデルを取得し、基底クラスモデルの事前定義されたパラメータルールを返すことができます。具体的な実装については、[OpenAI](https://github.com/langgenius/dify-official-plugins/tree/main/models/openai) を参照してください。

#### 

​

TextEmbedding

`__base.text_embedding_model.TextEmbeddingModel` 基底クラスを継承し、以下のインターフェースを実装します。

  * Embedding呼び出し


    
    
    def _invoke(self, model: str, credentials: dict,
                texts: list[str], user: Optional[str] = None) \
            -> TextEmbeddingResult:
        """
        Invoke large language model
    
        :param model: model name
        :param credentials: model credentials
        :param texts: texts to embed
        :param user: unique user id
        :return: embeddings result
        """

  * パラメータ：



  
\- `model` (string) モデル名

  
\- `credentials` (object) クレデンシャル

クレデンシャルのパラメータは、ベンダーのYAML構成ファイルの `provider_credential_schema` または `model_credential_schema` で定義され、`api_key` などが渡されます。

  
\- `texts` (array[string]) テキスト一覧。バッチ処理が可能です。

  
\- `user` (string) [optional] ユーザーの一意の識別子。  
ベンダーが不正行為を監視および検出するのに役立ちます。

  * 戻り値：



[TextEmbeddingResult](/ja-jp/plugins/schema-definition/model/model-schema) エンティティ。

  * トークンの事前計算


    
    
    def get_num_tokens(self, model: str, credentials: dict, texts: list[str]) -> int:
        """
        Get number of tokens for given prompt messages
    
        :param model: model name
        :param credentials: model credentials
        :param texts: texts to embed
        :return:
        """

パラメータの説明は上記の「Embedding呼び出し」を参照してください。

上記の `LargeLanguageModel` と同様に、このインターフェースは対応する `model` に応じて適切な `tokenizer` を選択して計算する必要があります。対応するモデルが `tokenizer` を提供していない場合は、`AIModel` 基底クラスの `_get_num_tokens_by_gpt2(text: str)` メソッドを使用して計算できます。

#### 

​

Rerank

`__base.rerank_model.RerankModel` 基底クラスを継承し、以下のインターフェースを実装します。

  * rerank呼び出し


    
    
    def _invoke(self, model: str, credentials: dict,
                query: str, docs: list[str], score_threshold: Optional[float] = None, top_n: Optional[int] = None,
                user: Optional[str] = None) \
            -> RerankResult:
        """
        Invoke rerank model
    
        :param model: model name
        :param credentials: model credentials
        :param query: search query
        :param docs: docs for reranking
        :param score_threshold: score threshold
        :param top_n: top n
        :param user: unique user id
        :return: rerank result
        """

  * パラメータ：



  
\- `model` (string) モデル名  
\- `credentials` (object) クレデンシャル  
クレデンシャルのパラメータは、ベンダーのYAML構成ファイルの `provider_credential_schema` または `model_credential_schema` で定義され、`api_key` などが渡されます。  
\- `query` (string) 検索クエリ  
\- `docs` (array[string]) 並べ替え対象のテキストリスト  
\- `score_threshold` (float) [optional] スコア閾値  
\- `top_n` (int) [optional] 上位n件のテキストを取得  
\- `user` (string) [optional] ユーザーの一意の識別子  
ベンダーが不正行為を監視および検出するのに役立ちます。

  * 戻り値：



[RerankResult](/ja-jp/plugins/schema-definition/model/model-schema) エンティティ。

#### 

​

Speech2text(音声テキスト変換)

  
`__base.speech2text_model.Speech2TextModel` 基底クラスを継承

  * Invoke呼び出し


    
    
    def _invoke(self, model: str, credentials: dict,
                file: IO[bytes], user: Optional[str] = None) \
            -> str:
        """
        Invoke large language model
    
        :param model: model name
        :param credentials: model credentials
        :param file: audio file
        :param user: unique user id
        :return: text for given audio file
        """

  * パラメータ：



  
\- `model` (string) モデル名  
\- `credentials` (object) クレデンシャル  
クレデンシャルのパラメータは、ベンダーのYAML構成ファイルの `provider_credential_schema` または `model_credential_schema` で定義され、`api_key` などが渡されます。  
\- `file` (File) ファイルストリーム  
\- `user` (string) [optional] ユーザーの一意の識別子  
ベンダーが不正行為を監視および検出するのに役立ちます。

  * 戻り値：



音声変換された文字列。

はい、以下に修正後の翻訳を示します。直訳の問題点を踏まえ、より自然で分かりやすい日本語になるように調整しました。

#### 

​

Text2speech (テキスト音声変換)

`__base.text2speech_model.Text2SpeechModel` を継承し、以下のインターフェースを実装します。

  * Invoke (呼び出し)


    
    
    def _invoke(self, model: str, credentials: dict, content_text: str, streaming: bool, user: Optional[str] = None):
        """
        Invoke large language model
    
        :param model: model name
        :param credentials: model credentials
        :param content_text: text content to be translated
        :param streaming: output is streaming
        :param user: unique user id
        :return: translated audio file
        """

  * パラメータ：

    * `model` (string): モデル名
    * `credentials` (object): 認証情報
      * 認証情報のパラメータは、ベンダーの YAML 設定ファイルの `provider_credential_schema` または `model_credential_schema` で定義され、`api_key` などが渡されます。
    * `content_text` (string): 変換するテキストコンテンツ
    * `streaming` (bool): ストリーミング出力を行うかどうか
    * `user` (string) [オプション]: ユーザーの一意な識別子
      * ベンダーが不正利用を監視・検出するのに役立ちます。
  * 戻り値：

テキスト変換後の音声ストリーム。




#### 

​

Moderation (モデレーション)

`__base.moderation_model.ModerationModel` を継承し、以下のインターフェースを実装します。

  * Invoke (呼び出し)


    
    
    def _invoke(self, model: str, credentials: dict,
                text: str, user: Optional[str] = None) \
            -> bool:
        """
        Invoke large language model
    
        :param model: model name
        :param credentials: model credentials
        :param text: text to moderate
        :param user: unique user id
        :return: false if text is safe, true otherwise
        """

  * パラメータ：

    * `model` (string): モデル名
    * `credentials` (object): 認証情報
      * 認証情報のパラメータは、ベンダーの YAML 設定ファイルの `provider_credential_schema` または `model_credential_schema` で定義され、`api_key` などが渡されます。
    * `text` (string): テキストコンテンツ
    * `user` (string) [オプション]: ユーザーの一意な識別子
      * ベンダーが不正利用を監視・検出するのに役立ちます。
  * 戻り値：

入力テキストが安全な場合は `False`、そうでない場合は `True` を返します。




### 

​

Entity(エンティティ)

#### 

​

PromptMessageRole (プロンプトメッセージの役割)

メッセージの役割を定義する列挙型です。
    
    
    class PromptMessageRole(Enum):
        """
        Enum class for prompt message.
        """
        SYSTEM = "system"
        USER = "user"
        ASSISTANT = "assistant"
        TOOL = "tool"

#### 

​

PromptMessageContentType (プロンプトメッセージのコンテンツタイプ)

メッセージコンテンツのタイプを定義する列挙型です。テキストと画像の2種類があります。
    
    
    class PromptMessageContentType(Enum):
        """
        Enum class for prompt message content type.
        """
        TEXT = 'text'
        IMAGE = 'image'

#### 

​

PromptMessageContent (プロンプトメッセージのコンテンツ)

メッセージコンテンツの基底クラスです。パラメータ定義のみに用いられ、直接の初期化はできません。
    
    
    class PromptMessageContent(BaseModel):
        """
        Model class for prompt message content.
        """
        type: PromptMessageContentType
        data: str  # コンテンツデータ

現在、テキストと画像の2種類のタイプがサポートされており、テキストと複数の画像を同時に渡すことができます。それぞれ `TextPromptMessageContent` および `ImagePromptMessageContent` を初期化して渡す必要があります。

#### 

​

TextPromptMessageContent
    
    
    class TextPromptMessageContent(PromptMessageContent):
        """
        テキストプロンプトメッセージのコンテンツを定義するモデルクラスです。
        """
        type: PromptMessageContentType = PromptMessageContentType.TEXT

テキストと画像を同時に送信する場合、テキストはこのエンティティを `content` リストの一部として構成する必要があります。

#### 

​

ImagePromptMessageContent
    
    
    class ImagePromptMessageContent(PromptMessageContent):
        """
        Model class for image prompt message content.
        """
        class DETAIL(Enum):
            LOW = 'low'
            HIGH = 'high'
    
        type: PromptMessageContentType = PromptMessageContentType.IMAGE
        detail: DETAIL = DETAIL.LOW  # 解像度

画像とテキストを同時に送信する場合、画像はこのエンティティを `content` リストの一部として構成する必要があります。  
`data` には、画像の `url` または `base64` エンコードされた文字列を指定できます。

#### 

​

PromptMessage

すべての Role メッセージの基底クラスで、パラメータ定義のみに使用され、インスタンス化はできません。
    
    
    class PromptMessage(ABC, BaseModel):
        """
        Model class for prompt message.
        """
        role: PromptMessageRole  # メッセージの役割
        content: Optional[str | list[PromptMessageContent]] = None  # 文字列またはコンテンツリストのいずれかを指定できます。コンテンツリストはマルチモーダルに対応するためのもので、詳細は PromptMessageContent の説明を参照してください。
        name: Optional[str] = None  # 名前（オプション）

#### 

​

UserPromptMessage

ユーザーメッセージを表す UserMessage のメッセージボディです。
    
    
    class UserPromptMessage(PromptMessage):
        """
        Model class for user prompt message.
        """
        role: PromptMessageRole = PromptMessageRole.USER

#### 

​

AssistantPromptMessage

モデルからの応答メッセージを表し、通常は `few-shots` やチャット履歴の入力に使用されます。
    
    
    class AssistantPromptMessage(PromptMessage):
        """
        Model class for assistant prompt message.
        """
        class ToolCall(BaseModel):
            """
            Model class for assistant prompt message tool call.
            """
            class ToolCallFunction(BaseModel):
                """
                Model class for assistant prompt message tool call function.
                """
                name: str  # ツールの名前
                arguments: str  # ツールの引数
    
            id: str  # ツールID。OpenAI のツール呼び出しでのみ有効で、ツール呼び出しの一意なIDです。同じツールを複数回呼び出すことができます。
            type: str  # デフォルトは function
            function: ToolCallFunction  # ツール呼び出し情報
    
        role: PromptMessageRole = PromptMessageRole.ASSISTANT
        tool_calls: list[ToolCall] = []  # モデルが応答したツール呼び出しの結果です（tools が渡され、モデルがツールを呼び出す必要があると判断した場合のみ返されます）。

`tool_calls` は、モデルに `tools` が渡された後、モデルから返されるツール呼び出しのリストです。

#### 

​

SystemPromptMessage

システムメッセージを表し、通常はモデルにシステム命令を設定するために使用されます。
    
    
    class SystemPromptMessage(PromptMessage):
        """
        Model class for system prompt message.
        """
        role: PromptMessageRole = PromptMessageRole.SYSTEM

#### 

​

ToolPromptMessage

ツールメッセージを表し、ツールの実行結果をモデルに渡して、次の計画を立てるために使用されます。
    
    
    class ToolPromptMessage(PromptMessage):
        """
        Model class for tool prompt message.
        """
        role: PromptMessageRole = PromptMessageRole.TOOL
        tool_call_id: str  # ツール呼び出しID。OpenAI のツール呼び出しをサポートしない場合は、ツール名を渡すこともできます。

基底クラスの `content` にはツールの実行結果を渡します。

#### 

​

PromptMessageTool
    
    
    class PromptMessageTool(BaseModel):
        """
        Model class for prompt message tool.
        """
        name: str  # ツール名
        description: str  # ツールの説明
        parameters: dict  # ツールパラメータ（辞書形式）

* * *

#### 

​

LLMResult
    
    
    class LLMResult(BaseModel):
        """
        Model class for llm result.
        """
        model: str  # 使用モデル
        prompt_messages: list[PromptMessage]  # プロンプトメッセージリスト
        message: AssistantPromptMessage  # 返信メッセージ
        usage: LLMUsage  # トークン及び費用情報
        system_fingerprint: Optional[str] = None  # リクエスト指紋（OpenAIの定義に準拠）

#### 

​

LLMResultChunkDelta

ストリーミング結果の各イテレーションにおける差分エンティティ
    
    
    class LLMResultChunkDelta(BaseModel):
        """
        Model class for llm result chunk delta.
        """
        index: int  # 順番
        message: AssistantPromptMessage  # 返信メッセージ
        usage: Optional[LLMUsage] = None  # トークン及び費用情報（最後のチャンクのみ）
        finish_reason: Optional[str] = None  # 終了理由（最後のチャンクのみ）

#### 

​

LLMResultChunk

ストリーミング結果の各イテレーションエンティティ
    
    
    class LLMResultChunk(BaseModel):
        """
        Model class for llm result chunk.
        """
        model: str  # 使用モデル
        prompt_messages: list[PromptMessage]  # プロンプトメッセージリスト
        system_fingerprint: Optional[str] = None  # リクエスト指紋（OpenAIの定義に準拠）
        delta: LLMResultChunkDelta  # 各イテレーションで変化する内容

#### 

​

LLMUsage
    
    
    class LLMUsage(ModelUsage):
        """
        Model class for llm usage.
        """
        prompt_tokens: int  # プロンプト使用トークン数
        prompt_unit_price: Decimal  # プロンプト単価
        prompt_price_unit: Decimal  # プロンプト価格単位（単価が適用されるトークン数）
        prompt_price: Decimal  # プロンプト料金
        completion_tokens: int  # 回答使用トークン数
        completion_unit_price: Decimal  # 回答単価
        completion_price_unit: Decimal  # 回答価格単位（単価が適用されるトークン数）
        completion_price: Decimal  # 回答料金
        total_tokens: int  # 総使用トークン数
        total_price: Decimal  # 総料金
        currency: str  # 通貨単位
        latency: float  # リクエスト処理時間（秒）

* * *

#### 

​

TextEmbeddingResult
    
    
    class TextEmbeddingResult(BaseModel):
        """
        Model class for text embedding result.
        """
        model: str  # 使用モデル
        embeddings: list[list[float]]  # 埋め込みベクトルリスト（テキストに対応）
        usage: EmbeddingUsage  # 使用情報

#### 

​

EmbeddingUsage
    
    
    class EmbeddingUsage(ModelUsage):
        """
        Model class for embedding usage.
        """
        tokens: int  # 使用トークン数
        total_tokens: int  # 総使用トークン数
        unit_price: Decimal  # 単価
        price_unit: Decimal  # 価格単位（単価が適用されるトークン数）
        total_price: Decimal  # 総料金
        currency: str  # 通貨単位
        latency: float  # リクエスト処理時間（秒）

* * *

#### 

​

RerankResult
    
    
    class RerankResult(BaseModel):
        """
        Model class for rerank result.
        """
        model: str  # 使用モデル
        docs: list[RerankDocument]  # リランク後のドキュメントリスト

#### 

​

RerankDocument
    
    
    class RerankDocument(BaseModel):
        """
        Model class for rerank document.
        """
        index: int  # 元の順番
        text: str  # ドキュメントテキスト
        score: float  # スコア

* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/plugins/schema-definition/model/model-schema.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20-sch&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/plugins/schema-definition/model%2Fmodel-schema.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[モデル設計規則](/ja-jp/plugins/schema-definition/model/model-designing-rules)[一般的な標準仕様](/ja-jp/plugins/schema-definition/general-specifications)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * モデルプロバイダー
  * モデル
  * 共通インターフェース
  * LLM
  * TextEmbedding
  * Rerank
  * Speech2text(音声テキスト変換)
  * Text2speech (テキスト音声変換)
  * Moderation (モデレーション)
  * Entity(エンティティ)
  * PromptMessageRole (プロンプトメッセージの役割)
  * PromptMessageContentType (プロンプトメッセージのコンテンツタイプ)
  * PromptMessageContent (プロンプトメッセージのコンテンツ)
  * TextPromptMessageContent
  * ImagePromptMessageContent
  * PromptMessage
  * UserPromptMessage
  * AssistantPromptMessage
  * SystemPromptMessage
  * ToolPromptMessage
  * PromptMessageTool
  * LLMResult
  * LLMResultChunkDelta
  * LLMResultChunk
  * LLMUsage
  * TextEmbeddingResult
  * EmbeddingUsage
  * RerankResult
  * RerankDocument



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/plugins/schema-definition/persistent-storage

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

スキーマ仕様

永続化されたストレージ

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

    * [スキーマ仕様](/ja-jp/plugins/schema-definition/README)
    * [Manifest(マニフェスト)](/ja-jp/plugins/schema-definition/manifest)
    * [Endpoint（エンドポイント）](/ja-jp/plugins/schema-definition/endpoint)
    * [Tool(ツール)](/ja-jp/plugins/schema-definition/tool)
    * [Agent(エージェント)](/ja-jp/plugins/schema-definition/agent)
    * Model

    * [一般的な標準仕様](/ja-jp/plugins/schema-definition/general-specifications)
    * [永続化されたストレージ](/ja-jp/plugins/schema-definition/persistent-storage)
    * Difyサービスの逆呼び出し

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




スキーマ仕様

# 永続化されたストレージ

Copy page

## [このドキュメントはまもなく非推奨になりますドキュメント再編の一環として、このページは段階的に廃止されます。 _**このカードをクリックして**_ 、最新情報が含まれる更新版にリダイレクトしてください。新しいドキュメントに不一致や改善が必要な箇所を見つけた場合は、ページ下部の「問題を報告」ボタンを使用してください。](/plugin-dev-ja/0411-persistent-storage-kv)

プラグイン内のToolとEndpointを個別に見ると、ほとんどの場合、単一のラウンドの対話、つまりリクエストを送信してデータを返し、タスクが終了するだけであることがわかります。

長期的なデータの保存が必要な場合、例えば永続的なメモリを実装する場合、プラグインには永続的なストレージ機能が必要です。**永続ストレージメカニズムにより、プラグインは同じWorkspace内でデータを永続的に保存する機能を持つことができます** 。現在はKVデータベースを提供してストレージのニーズを満たしており、将来的には実際の使用状況に基づいて、より柔軟で強力なストレージインターフェースを導入する可能性があります。

### 

​

ストレージキー

#### 

​

**エントリーポイント**
    
    
    self.session.storage

#### 

​

エンドポイント
    
    
    def set(self, key: str, val: bytes) -> None:
            pass

bytesが渡されることに注意してください。これにより、実際にファイルを保存することができます。

### 

​

キーの取得

#### 

​

**エントリーポイント**
    
    
    self.session.storage

#### 

​

**エンドポイント**
    
    
    def get(self, key: str) -> bytes:
            pass

### 

​

キーの削除

#### 

​

**エントリーポイント**
    
    
    self.session.storage

#### 

​

**エンドポイント**
    
    
    def delete(self, key: str) -> None:
            pass

* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/plugins/schema-definition/persistent-storage.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20stent-stor&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/plugins/schema-definition%2Fpersistent-storage.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[一般的な標準仕様](/ja-jp/plugins/schema-definition/general-specifications)[Difyサービスへのバックコール](/ja-jp/plugins/schema-definition/reverse-invocation-of-the-dify-service/README)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * ストレージキー
  * エントリーポイント
  * エンドポイント
  * キーの取得
  * エントリーポイント
  * エンドポイント
  * キーの削除
  * エントリーポイント
  * エンドポイント



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/plugins/schema-definition/reverse-invocation-of-the-dify-service/README

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

Difyサービスの逆呼び出し

Difyサービスへのバックコール

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

    * [スキーマ仕様](/ja-jp/plugins/schema-definition/README)
    * [Manifest(マニフェスト)](/ja-jp/plugins/schema-definition/manifest)
    * [Endpoint（エンドポイント）](/ja-jp/plugins/schema-definition/endpoint)
    * [Tool(ツール)](/ja-jp/plugins/schema-definition/tool)
    * [Agent(エージェント)](/ja-jp/plugins/schema-definition/agent)
    * Model

    * [一般的な標準仕様](/ja-jp/plugins/schema-definition/general-specifications)
    * [永続化されたストレージ](/ja-jp/plugins/schema-definition/persistent-storage)
    * Difyサービスの逆呼び出し

      * [Difyサービスへのバックコール](/ja-jp/plugins/schema-definition/reverse-invocation-of-the-dify-service/README)
      * [アプリ](/ja-jp/plugins/schema-definition/reverse-invocation-of-the-dify-service/app)
      * [モデル](/ja-jp/plugins/schema-definition/reverse-invocation-of-the-dify-service/model)
      * [ツール](/ja-jp/plugins/schema-definition/reverse-invocation-of-the-dify-service/tool)
      * [ノード](/ja-jp/plugins/schema-definition/reverse-invocation-of-the-dify-service/node)
  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




Difyサービスの逆呼び出し

# Difyサービスへのバックコール

Copy page

## [このドキュメントはまもなく非推奨になりますドキュメント再編の一環として、このページは段階的に廃止されます。 _**このカードをクリックして**_ 、最新情報が含まれる更新版にリダイレクトしてください。新しいドキュメントに不一致や改善が必要な箇所を見つけた場合は、ページ下部の「問題を報告」ボタンを使用してください。](/plugin-dev-ja/9241-reverse-invocation)

プラグインは、Difyメインプラットフォーム内の特定のサービスを自由に呼び出し、プラグインの機能を拡張できます。

### 

​

呼び出し可能なDifyモジュール

  * [App](/ja-jp/plugins/schema-definition/reverse-invocation-of-the-dify-service/app)

プラグインは、Difyプラットフォーム内のAppデータにアクセスできます。

  * [Model](/ja-jp/plugins/schema-definition/reverse-invocation-of-the-dify-service/model)

プラグインは、Difyプラットフォーム内のLLM機能をバックコールできます。これには、プラットフォーム内のすべてのモデルタイプと機能（TTS、Rerankなど）が含まれます。

  * [Tool](/ja-jp/plugins/schema-definition/reverse-invocation-of-the-dify-service/tool)

プラグインは、Difyプラットフォーム内の他のツールタイプのプラグインを呼び出すことができます。

  * [Node](/ja-jp/plugins/schema-definition/reverse-invocation-of-the-dify-service/node)

プラグインは、Difyプラットフォーム内の特定のChatflow/Workflowアプリケーション内のノードを呼び出すことができます。




* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/plugins/schema-definition/reverse-invocation-of-the-dify-service/README.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/plugins/schema-definition/reverse-invocation-of-the-dify-service%2FREADME.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[永続化されたストレージ](/ja-jp/plugins/schema-definition/persistent-storage)[アプリ](/ja-jp/plugins/schema-definition/reverse-invocation-of-the-dify-service/app)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * 呼び出し可能なDifyモジュール



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/plugins/schema-definition/reverse-invocation-of-the-dify-service/app

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

Difyサービスの逆呼び出し

アプリ

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

    * [スキーマ仕様](/ja-jp/plugins/schema-definition/README)
    * [Manifest(マニフェスト)](/ja-jp/plugins/schema-definition/manifest)
    * [Endpoint（エンドポイント）](/ja-jp/plugins/schema-definition/endpoint)
    * [Tool(ツール)](/ja-jp/plugins/schema-definition/tool)
    * [Agent(エージェント)](/ja-jp/plugins/schema-definition/agent)
    * Model

    * [一般的な標準仕様](/ja-jp/plugins/schema-definition/general-specifications)
    * [永続化されたストレージ](/ja-jp/plugins/schema-definition/persistent-storage)
    * Difyサービスの逆呼び出し

      * [Difyサービスへのバックコール](/ja-jp/plugins/schema-definition/reverse-invocation-of-the-dify-service/README)
      * [アプリ](/ja-jp/plugins/schema-definition/reverse-invocation-of-the-dify-service/app)
      * [モデル](/ja-jp/plugins/schema-definition/reverse-invocation-of-the-dify-service/model)
      * [ツール](/ja-jp/plugins/schema-definition/reverse-invocation-of-the-dify-service/tool)
      * [ノード](/ja-jp/plugins/schema-definition/reverse-invocation-of-the-dify-service/node)
  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




Difyサービスの逆呼び出し

# アプリ

Copy page

## [このドキュメントはまもなく非推奨になりますドキュメント再編の一環として、このページは段階的に廃止されます。 _**このカードをクリックして**_ 、最新情報が含まれる更新版にリダイレクトしてください。新しいドキュメントに不一致や改善が必要な箇所を見つけた場合は、ページ下部の「問題を報告」ボタンを使用してください。](/plugin-dev-ja/9242-reverse-invocation-app)

リバース呼び出しとは、プラグインがDify内のAppデータにアクセスできることを意味します。このモジュールは、ストリーミングと非ストリーミングの両方のAppコールをサポートしています。

### 

​

**エンドポイントタイプ：**

  * `Chatbot/Agent/Chatflow`タイプのアプリケーションは、すべてチャットタイプのアプリケーションであり、同じ入力パラメータと出力パラメータを持つため、統一的に**チャットインターフェース** として扱うことができます。
  * Workflowアプリケーションは、独立した**ワークフローインターフェース** を占有します。
  * Completion（テキスト生成）アプリケーションは、独立した**Completionエンドポイント** を占有します。



注意：プラグインは、プラグインと同じWorkspace内のAppにのみアクセスできます。

### 

​

**チャットインターフェースのリクエスト** **エントリーポイント**

#### 

​

エントリーポイント
    
    
    self.session.app.chat

#### 

​

**エンドポイント仕様**
    
    
    def invoke(
        self,
        app_id: str,
        inputs: dict,
        response_mode: Literal["streaming", "blocking"],
        conversation_id: str,
        files: list,
    ) -> Generator[dict, None, None] | dict:
        pass

`response_mode`が`streaming`の場合、インターフェースは`Generator[dict]`を返し、それ以外の場合は`dict`を返します。具体的なインターフェースフィールドについては、`ServiceApi`の戻り値を参照してください。

#### 

​

**例**

`Endpoint`内でチャットタイプのAppをリクエストし、結果を直接返すことができます：
    
    
    import json
    from typing import Mapping
    from werkzeug import Request, Response
    from dify_plugin import Endpoint
    
    class Duck(Endpoint):
        def _invoke(self, r: Request, values: Mapping, settings: Mapping) -> Response:
            """
            与えられたリクエストでエンドポイントを呼び出します。
            """
            app_id = values["app_id"]
            def generator():
                response = self.session.app.workflow.invoke(
                    app_id=app_id, inputs={}, response_mode="streaming", files=[]
                )
                for data in response:
                    yield f"{json.dumps(data)} <br>"
            return Response(generator(), status=200, content_type="text/html")

**ワークフローエンドポイント** **エントリーポイント**

#### 

​

エントリー
    
    
    self.session.app.workflow

#### 

​

**エンドポイント仕様**
    
    
    def invoke(
        self,
        app_id: str,
        inputs: dict,
        response_mode: Literal["streaming", "blocking"],
        files: list,
    ) -> Generator[dict, None, None] | dict:
        pass

### 

​

**Completionエンドポイントのリクエスト**

#### 

​

エントリー
    
    
    self.session.app.completion

**エンドポイント仕様**
    
    
    def invoke(
        self,
        app_id: str,
        inputs: dict,
        response_mode: Literal["streaming", "blocking"],
        files: list,
    ) -> Generator[dict, None, None] | dict:
        pass

* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/plugins/schema-definition/reverse-invocation-of-the-dify-service/app.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/plugins/schema-definition/reverse-invocation-of-the-dify-service%2Fapp.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[Difyサービスへのバックコール](/ja-jp/plugins/schema-definition/reverse-invocation-of-the-dify-service/README)[モデル](/ja-jp/plugins/schema-definition/reverse-invocation-of-the-dify-service/model)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * エンドポイントタイプ：
  * チャットインターフェースのリクエスト エントリーポイント
  * エントリーポイント
  * エンドポイント仕様
  * 例
  * エントリー
  * エンドポイント仕様
  * Completionエンドポイントのリクエスト
  * エントリー



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/plugins/schema-definition/reverse-invocation-of-the-dify-service/model

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

Difyサービスの逆呼び出し

モデル

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

    * [スキーマ仕様](/ja-jp/plugins/schema-definition/README)
    * [Manifest(マニフェスト)](/ja-jp/plugins/schema-definition/manifest)
    * [Endpoint（エンドポイント）](/ja-jp/plugins/schema-definition/endpoint)
    * [Tool(ツール)](/ja-jp/plugins/schema-definition/tool)
    * [Agent(エージェント)](/ja-jp/plugins/schema-definition/agent)
    * Model

    * [一般的な標準仕様](/ja-jp/plugins/schema-definition/general-specifications)
    * [永続化されたストレージ](/ja-jp/plugins/schema-definition/persistent-storage)
    * Difyサービスの逆呼び出し

      * [Difyサービスへのバックコール](/ja-jp/plugins/schema-definition/reverse-invocation-of-the-dify-service/README)
      * [アプリ](/ja-jp/plugins/schema-definition/reverse-invocation-of-the-dify-service/app)
      * [モデル](/ja-jp/plugins/schema-definition/reverse-invocation-of-the-dify-service/model)
      * [ツール](/ja-jp/plugins/schema-definition/reverse-invocation-of-the-dify-service/tool)
      * [ノード](/ja-jp/plugins/schema-definition/reverse-invocation-of-the-dify-service/node)
  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




Difyサービスの逆呼び出し

# モデル

Copy page

## [このドキュメントはまもなく非推奨になりますドキュメント再編の一環として、このページは段階的に廃止されます。 _**このカードをクリックして**_ 、最新情報が含まれる更新版にリダイレクトしてください。新しいドキュメントに不一致や改善が必要な箇所を見つけた場合は、ページ下部の「問題を報告」ボタンを使用してください。](/plugin-dev-ja/9242-reverse-invocation-model)

リバースモデルリクエストとは、プラグインがDify内のLLM機能に対してリバースリクエストを行う能力を指し、TTS、Rerankなど、プラットフォーム上のすべてのモデルタイプと機能が含まれます。

モデルのリクエストには、ModelConfigタイプのパラメータを渡す必要があることに注意してください。その構造は共通仕様定義で参照でき、この構造は異なるタイプのモデルで若干の違いがあります。

例えば、LLMタイプのモデルの場合、`completion_params`と`mode`パラメータを含める必要があります。この構造は手動で構築するか、`model-selector`タイプのパラメータまたは設定を使用することができます。

### 

​

**LLMのリクエスト**

#### 

​

エントリー
    
    
    self.session.model.llm

#### 

​

エンドポイント：
    
    
    def invoke(
        self,
        model_config: LLMModelConfig,
        prompt_messages: list[PromptMessage],
        tools: list[PromptMessageTool] | None = None,
        stop: list[str] | None = None,
        stream: bool = True,
    ) -> Generator[LLMResultChunk, None, None] | LLMResult:
        pass

注意：リクエストするモデルにtool_call機能がない場合、ここで渡されるツールは効果を持ちません。

#### 

​

**例**

ツールでOpenAIのgpt-4o-miniモデルをリクエストする場合は、以下のサンプルコードを参照してください：
    
    
    from collections.abc import Generator
    from typing import Any
    
    from dify_plugin import Tool
    from dify_plugin.entities.model.llm import LLMModelConfig
    from dify_plugin.entities.tool import ToolInvokeMessage
    from dify_plugin.entities.model.message import SystemPromptMessage, UserPromptMessage
    
    class LLMTool(Tool):
        def _invoke(self, tool_parameters: dict[str, Any]) -> Generator[ToolInvokeMessage]:
            response = self.session.model.llm.invoke(
                model_config=LLMModelConfig(
                    provider='openai',
                    model='gpt-4o-mini',
                    mode='chat',
                    completion_params={}
                ),
                prompt_messages=[
                    SystemPromptMessage(
                        content='you are a helpful assistant'
                    ),
                    UserPromptMessage(
                        content=tool_parameters.get('query')
                    )
                ],
                stream=True
            )
    
            for chunk in response:
                if chunk.delta.message:
                    assert isinstance(chunk.delta.message.content, str)
                    yield self.create_text_message(text=chunk.delta.message.content)

コードでは`tool_parameters`から`query`パラメータが渡されていることに注意してください。

### 

​

**ベストプラクティス**

`LLMModelConfig`を手動で構築することは推奨されません。代わりに、UIでユーザーが希望のモデルを選択できるようにします。この場合、以下の設定に従って`model`パラメータを追加することでツールのパラメータリストを変更できます：
    
    
    identity:
      name: llm
      author: Dify
      label:
        en_US: LLM
        zh_Hans: LLM
        ja_JP: LLM
        pt_BR: LLM
    description:
      human:
        en_US: A tool for invoking a large language model
        zh_Hans: 用于调用大型语言模型的工具
        ja_JP: 大規模言語モデルを呼び出すためのツール
        pt_BR: Ferramentas para chamar modelos de idiomas grandes
      llm: A tool for invoking a large language model
    parameters:
      - name: prompt
        type: string
        required: true
        label:
          en_US: Prompt string
          zh_Hans: 提示字符串
          ja_JP: プロンプト文字列
          pt_BR: Cadeia de prompt
        human_description:
          en_US: used for searching
          zh_Hans: 用于搜索网页内容
          ja_JP: Webコンテンツ検索用
          pt_BR: Usado para pesquisar
        llm_description: key words for searching
        form: llm
      - name: model
        type: model-selector
        scope: llm
        required: true
        label:
          en_US: Model
          zh_Hans: 使用的模型
          ja_JP: モデル
          pt_BR: Modelo
        human_description:
          en_US: Model
          zh_Hans: 使用的模型
          ja_JP: モデル
          pt_BR: Modelo
        llm_description: which Model to invoke
        form: form
    extra:
      python:
        source: tools/llm.py

この例では、モデルのスコープがllmとして指定されているため、ユーザーは`llm`タイプのパラメータのみを選択できることに注意してください。これにより、上記の例のコードを以下のように変更できます：
    
    
    from collections.abc import Generator
    from typing import Any
    
    from dify_plugin import Tool
    from dify_plugin.entities.model.llm import LLMModelConfig
    from dify_plugin.entities.tool import ToolInvokeMessage
    from dify_plugin.entities.model.message import SystemPromptMessage, UserPromptMessage
    
    class LLMTool(Tool):
        def _invoke(self, tool_parameters: dict[str, Any]) -> Generator[ToolInvokeMessage]:
            response = self.session.model.llm.invoke(
                model_config=tool_parameters.get('model'),
                prompt_messages=[
                    SystemPromptMessage(
                        content='you are a helpful assistant'
                    ),
                    UserPromptMessage(
                        content=tool_parameters.get('query')
                    )
                ],
                stream=True
            )
    
            for chunk in response:
                if chunk.delta.message:
                    assert isinstance(chunk.delta.message.content, str)
                    yield self.create_text_message(text=chunk.delta.message.content)

### 

​

**要約のリクエスト**

このエンドポイントを使用してテキストを要約することができます。現在のワークスペースのシステムモデルを使用してテキストを要約します。

**エントリー** ：
    
    
    self.session.model.summary

**エンドポイント** ：

  * `text`: 要約するテキスト
  * `instruction`: 追加の指示。要約のスタイルをカスタマイズできます


    
    
    def invoke(
        self, text: str, instruction: str,
    ) -> str:

**テキスト埋め込みのリクエスト**

**エントリー**
    
    
    self.session.model.text_embedding

**エンドポイント**
    
    
    def invoke(
        self, model_config: TextEmbeddingResult, texts: list[str]
    ) -> TextEmbeddingResult:
        pass

### 

​

**Rerankのリクエスト**

#### 

​

エントリー
    
    
    self.session.model.rerank

#### 

​

エンドポイント
    
    
    def invoke(
        self, model_config: RerankModelConfig, docs: list[str], query: str
    ) -> RerankResult:
        pass

### 

​

**TTSのリクエスト**

#### 

​

エントリー
    
    
    self.session.model.tts

#### 

​

エンドポイント
    
    
    def invoke(
        self, model_config: TTSModelConfig, content_text: str
    ) -> Generator[bytes, None, None]:
        pass

注意：TTSエンドポイントが返すバイトストリームはmp3オーディオバイトストリームで、各イテレーションで完全なオーディオを返します。より高度な処理タスクを実行したい場合は、適切なライブラリを選択してください。

### 

​

**音声認識のリクエスト**

**エントリー** ：
    
    
    self.session.model.speech2text

**エンドポイント** ：
    
    
    def invoke(
        self, model_config: Speech2TextModelConfig, file: IO[bytes]
    ) -> str:
        pass

ここで、fileはmp3エンコードされたオーディオファイルです。

### 

​

**モデレーションのリクエスト**

**エントリー** ：
    
    
    self.session.model.moderation

**エンドポイント** ：
    
    
    def invoke(self, model_config: ModerationModelConfig, text: str) -> bool:
        pass

このエンドポイントが`true`を返す場合、`text`に機密コンテンツが含まれていることを示します。

* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/plugins/schema-definition/reverse-invocation-of-the-dify-service/model.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/plugins/schema-definition/reverse-invocation-of-the-dify-service%2Fmodel.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[アプリ](/ja-jp/plugins/schema-definition/reverse-invocation-of-the-dify-service/app)[ツール](/ja-jp/plugins/schema-definition/reverse-invocation-of-the-dify-service/tool)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * LLMのリクエスト
  * エントリー
  * エンドポイント：
  * 例
  * ベストプラクティス
  * 要約のリクエスト
  * Rerankのリクエスト
  * エントリー
  * エンドポイント
  * TTSのリクエスト
  * エントリー
  * エンドポイント
  * 音声認識のリクエスト
  * モデレーションのリクエスト



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/plugins/schema-definition/reverse-invocation-of-the-dify-service/node

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

Difyサービスの逆呼び出し

ノード

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

    * [スキーマ仕様](/ja-jp/plugins/schema-definition/README)
    * [Manifest(マニフェスト)](/ja-jp/plugins/schema-definition/manifest)
    * [Endpoint（エンドポイント）](/ja-jp/plugins/schema-definition/endpoint)
    * [Tool(ツール)](/ja-jp/plugins/schema-definition/tool)
    * [Agent(エージェント)](/ja-jp/plugins/schema-definition/agent)
    * Model

    * [一般的な標準仕様](/ja-jp/plugins/schema-definition/general-specifications)
    * [永続化されたストレージ](/ja-jp/plugins/schema-definition/persistent-storage)
    * Difyサービスの逆呼び出し

      * [Difyサービスへのバックコール](/ja-jp/plugins/schema-definition/reverse-invocation-of-the-dify-service/README)
      * [アプリ](/ja-jp/plugins/schema-definition/reverse-invocation-of-the-dify-service/app)
      * [モデル](/ja-jp/plugins/schema-definition/reverse-invocation-of-the-dify-service/model)
      * [ツール](/ja-jp/plugins/schema-definition/reverse-invocation-of-the-dify-service/tool)
      * [ノード](/ja-jp/plugins/schema-definition/reverse-invocation-of-the-dify-service/node)
  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




Difyサービスの逆呼び出し

# ノード

Copy page

## [このドキュメントはまもなく非推奨になりますドキュメント再編の一環として、このページは段階的に廃止されます。 _**このカードをクリックして**_ 、最新情報が含まれる更新版にリダイレクトしてください。新しいドキュメントに不一致や改善が必要な箇所を見つけた場合は、ページ下部の「問題を報告」ボタンを使用してください。](/plugin-dev-ja/9243-reverse-invocation-node)

リバースノードリクエストとは、プラグインがDifyのChatflow/Workflowアプリケーション内の特定のノードにアクセスする能力を指します。

`Workflow`の`ParameterExtractor`と`QuestionClassifier`ノードは、複雑なPromptとコードロジックをカプセル化しており、LLMを通じたハードコーディングでは解決が困難な多くのタスクを実行できます。プラグインはこれら2つのノードをリクエストすることができます。

### 

​

**パラメータ抽出ノードのリクエスト**

#### 

​

**エントリー**
    
    
    self.session.workflow_node.parameter_extractor

#### 

​

**エンドポイント**
    
    
    def invoke(
        self,
        parameters: list[ParameterConfig],
        model: ModelConfig,
        query: str,
        instruction: str = "",
    ) -> NodeResponse
        pass

ここで、`parameters`は抽出するパラメータのリスト、`model`は`LLMModelConfig`仕様に従い、`query`はパラメータ抽出のソーステキスト、`instruction`はLLMへの追加指示を含み、`NodeResponse`構造はドキュメントで参照できます。

#### 

​

**例**

会話から人の名前を抽出したい場合は、以下のコードを参照してください：
    
    
    from collections.abc import Generator
    from dify_plugin.entities.tool import ToolInvokeMessage
    from dify_plugin import Tool
    from dify_plugin.entities.workflow_node import ModelConfig, ParameterConfig
    
    class ParameterExtractorTool(Tool):
        def _invoke(
            self, tool_parameters: dict
        ) -> Generator[ToolInvokeMessage, None, None]:
            response = self.session.workflow_node.parameter_extractor.invoke(
                parameters=[
                    ParameterConfig(
                        name="name",
                        description="name of the person",
                        required=True,
                        type="string",
                    )
                ],
                model=ModelConfig(
                    provider="langgenius/openai/openai",
                    name="gpt-4o-mini",
                    completion_params={},
                ),
                query="My name is John Doe",
                instruction="Extract the name of the person",
            )
            yield self.create_text_message(response.outputs["name"])

### 

​

**質問分類ノードのリクエスト**

#### 

​

**エントリー**
    
    
    self.session.workflow_node.question_classifier

#### 

​

**エンドポイント**
    
    
    def invoke(
        self,
        classes: list[ClassConfig],
        model: ModelConfig,
        query: str,
        instruction: str = "",
    ) -> NodeResponse:
        pass

このエンドポイントのパラメータは`ParameterExtractor`と一致しており、最終結果は`NodeResponse.outputs['class_name']`に格納されます。

* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/plugins/schema-definition/reverse-invocation-of-the-dify-service/node.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/plugins/schema-definition/reverse-invocation-of-the-dify-service%2Fnode.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[ツール](/ja-jp/plugins/schema-definition/reverse-invocation-of-the-dify-service/tool)[ベストプラクティス](/ja-jp/plugins/best-practice/README)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * パラメータ抽出ノードのリクエスト
  * エントリー
  * エンドポイント
  * 例
  * 質問分類ノードのリクエスト
  * エントリー
  * エンドポイント



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/plugins/schema-definition/reverse-invocation-of-the-dify-service/tool

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

Difyサービスの逆呼び出し

ツール

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

    * [スキーマ仕様](/ja-jp/plugins/schema-definition/README)
    * [Manifest(マニフェスト)](/ja-jp/plugins/schema-definition/manifest)
    * [Endpoint（エンドポイント）](/ja-jp/plugins/schema-definition/endpoint)
    * [Tool(ツール)](/ja-jp/plugins/schema-definition/tool)
    * [Agent(エージェント)](/ja-jp/plugins/schema-definition/agent)
    * Model

    * [一般的な標準仕様](/ja-jp/plugins/schema-definition/general-specifications)
    * [永続化されたストレージ](/ja-jp/plugins/schema-definition/persistent-storage)
    * Difyサービスの逆呼び出し

      * [Difyサービスへのバックコール](/ja-jp/plugins/schema-definition/reverse-invocation-of-the-dify-service/README)
      * [アプリ](/ja-jp/plugins/schema-definition/reverse-invocation-of-the-dify-service/app)
      * [モデル](/ja-jp/plugins/schema-definition/reverse-invocation-of-the-dify-service/model)
      * [ツール](/ja-jp/plugins/schema-definition/reverse-invocation-of-the-dify-service/tool)
      * [ノード](/ja-jp/plugins/schema-definition/reverse-invocation-of-the-dify-service/node)
  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




Difyサービスの逆呼び出し

# ツール

Copy page

## [このドキュメントはまもなく非推奨になりますドキュメント再編の一環として、このページは段階的に廃止されます。 _**このカードをクリックして**_ 、最新情報が含まれる更新版にリダイレクトしてください。新しいドキュメントに不一致や改善が必要な箇所を見つけた場合は、ページ下部の「問題を報告」ボタンを使用してください。](/plugin-dev-ja/9242-reverse-invocation-tool)

以下のようなシナリオに遭遇した場合：

  * ツールタイププラグインが機能を実装したが、期待を満たしておらずデータの再処理が必要な場合
  * タスクがWebクローリングを必要とし、クローリングサービスの選択に柔軟性が必要な場合
  * 複数のツールの戻り値を組み合わせる必要があるが、Workflowアプリケーションでの処理が困難な場合



これらの場合、プラグイン内の他の実装済みツールをリクエストする必要があります。これらのツールは、マーケットプレイスのツールプラグイン、自作のWorkflow as Tool、またはカスタムツールである可能性があります。

上記の要件は、プラグインの`self.session.tool`フィールドを使用することで達成できます。

### 

​

**インストール済みツールのリクエスト**

プラグインが現在のWorkspaceにインストールされている様々なツール（他のツールタイププラグインを含む）をリクエストすることができます。

**エントリー** ：
    
    
    self.session.tool

**エンドポイント** ：
    
    
    def invoke_builtin_tool(
        self, provider: str, tool_name: str, parameters: dict[str, Any]
    ) -> Generator[ToolInvokeMessage, None, None]:
        pass

ここで、`provider`はプラグインIDとツールプロバイダー名を組み合わせたもので、`langgenius/google/google`のような形式です。`tool_name`は具体的なツール名、`parameters`はそのツールに渡すパラメータです。

### 

​

**Workflow as Toolのリクエスト**

Workflow as Toolの詳細については、このドキュメントを参照してください。

**エントリー** ：
    
    
    self.session.tool

**エンドポイント** ：
    
    
    def invoke_workflow_tool(
        self, provider: str, tool_name: str, parameters: dict[str, Any]
    ) -> Generator[ToolInvokeMessage, None, None]:
        pass

ここで、`provider`はツールのID、`tool_name`はツール作成時に必要となります。

### 

​

**カスタムツールのリクエスト**

**エントリー** ：
    
    
    self.session.tool

**エンドポイント** ：
    
    
    def invoke_api_tool(
        self, provider: str, tool_name: str, parameters: dict[str, Any]
    ) -> Generator[ToolInvokeMessage, None, None]:
        pass

ここで、`provider`はツールのID、`tool_name`はOpenAPIの`operation_id`です。存在しない場合は、Difyによって自動生成された`tool_name`で、ツール管理ページで確認できます。

* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/plugins/schema-definition/reverse-invocation-of-the-dify-service/tool.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/plugins/schema-definition/reverse-invocation-of-the-dify-service%2Ftool.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[モデル](/ja-jp/plugins/schema-definition/reverse-invocation-of-the-dify-service/model)[ノード](/ja-jp/plugins/schema-definition/reverse-invocation-of-the-dify-service/node)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * インストール済みツールのリクエスト
  * Workflow as Toolのリクエスト
  * カスタムツールのリクエスト



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/plugins/schema-definition/tool

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

スキーマ仕様

Tool(ツール)

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

    * [スキーマ仕様](/ja-jp/plugins/schema-definition/README)
    * [Manifest(マニフェスト)](/ja-jp/plugins/schema-definition/manifest)
    * [Endpoint（エンドポイント）](/ja-jp/plugins/schema-definition/endpoint)
    * [Tool(ツール)](/ja-jp/plugins/schema-definition/tool)
    * [Agent(エージェント)](/ja-jp/plugins/schema-definition/agent)
    * Model

    * [一般的な標準仕様](/ja-jp/plugins/schema-definition/general-specifications)
    * [永続化されたストレージ](/ja-jp/plugins/schema-definition/persistent-storage)
    * Difyサービスの逆呼び出し

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




スキーマ仕様

# Tool(ツール)

Copy page

## [このドキュメントはまもなく非推奨になりますドキュメント再編の一環として、このページは段階的に廃止されます。 _**このカードをクリックして**_ 、最新情報が含まれる更新版にリダイレクトしてください。新しいドキュメントに不一致や改善が必要な箇所を見つけた場合は、ページ下部の「問題を報告」ボタンを使用してください。](/plugin-dev-ja/0411-tool)

詳細なインターフェースドキュメントを読む前に、[クイックスタート：ツール](/ja-jp/plugins/quick-start/develop-plugins/tool-plugin) を参照し、Difyプラグインにおけるツールの利用プロセスについて、概要を把握しておいてください。

### 

​

**データ構造**

#### 

​

**メッセージの出力**

Difyは、`text`、`links`、`images`、`file BLOBs`、`JSON`といった複数のメッセージタイプをサポートしています。様々なインターフェースを通じて、これらの異なるタイプのメッセージを出力できます。

デフォルトでは、ワークフロー内でツールが出力する際には、`files`、`text`、`json`という3つの固定の変数が用意されています。これらの変数にデータを設定するには、以下のメソッドを使用します。

例えば、`create_image_message`を使用すると、画像を出力できます。また、ツールはワークフロー内で参照しやすいように、カスタムの出力変数もサポートしています。

#### 

​

**画像URL**

画像のURLを渡すだけで、Difyが自動的に画像をダウンロードし、ユーザーに送信します。
    
    
    def create_image_message(self, image: str) -> ToolInvokeMessage:
        pass

#### 

​

**リンク**

リンクを出力するには、このインターフェースを使用します。
    
    
    def create_link_message(self, link: str) -> ToolInvokeMessage:
        pass

#### 

​

**テキスト**

テキストメッセージを出力するには、このインターフェースを使用します。
    
    
    def create_text_message(self, text: str) -> ToolInvokeMessage:
        pass

#### 

​

**ファイル**

生のファイルデータ（画像、音声、動画、PPT、Word、Excelなど）を出力するには、このインターフェースを使用します。

  * `blob`: バイト形式の生ファイルデータ
  * `meta`: ファイルのメタデータです。`mime_type`を指定することで、ファイルの種類を明示できます。指定しない場合は、Difyがデフォルトで`octet/stream`を使用します。


    
    
    def create_blob_message(self, blob: bytes, meta: dict = None) -> ToolInvokeMessage:
        pass

#### 

​

**JSON**

フォーマットされたJSONを出力するには、このインターフェースを使用します。通常、ワークフロー内のノード間でデータをやり取りする際に使用されます。多くの大規模言語モデルは、エージェントモードでJSON形式のデータを読み取り、理解できます。
    
    
    def create_json_message(self, json: dict) -> ToolInvokeMessage:
        pass

#### 

​

**変数**

ストリーミングではない出力変数を設定するには、このインターフェースを使用します。後から設定された値は、以前の設定値を上書きします。
    
    
    def create_variable_message(self, variable_name: str, variable_value: Any) -> ToolInvokeMessage:
        pass

#### 

​

**ストリーミング変数**

テキストをタイプライターのように表示するには、ストリーミング変数を使用します。チャットフローアプリケーションの応答ノードでこの変数を参照すると、テキストがタイプライター効果で表示されます。現在、文字列データのみをサポートしています。
    
    
    def create_stream_variable_message(
        self, variable_name: str, variable_value: str
    ) -> ToolInvokeMessage:

#### 

​

**出力変数の定義**

ワークフロー内でツールの出力変数を参照するには、事前に出力される可能性のある変数を定義しておく必要があります。Difyプラグインは、`json_schema`形式での出力変数定義をサポートしています。以下に設定例を示します。
    
    
    identity:
      author: author
      name: tool
      label:
        en_US: label
        zh_Hans: 标签
        ja_JP: レベル
        pt_BR: etiqueta
    description:
      human:
        en_US: description
        zh_Hans: 描述
        ja_JP: 説明
        pt_BR: descrição
      llm: description
    output_schema:
      type: object
      properties:
        name:
          type: string

この例では、ワークフロー内で参照できる `name` フィールドを含む `output_schema` を持つシンプルなツールを定義しています。実際に使用するには、ツールの実装コード内で変数を設定する必要があることに注意してください。そうしないと、`None` が設定されます。

* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/plugins/schema-definition/tool.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/plugins/schema-definition%2Ftool.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[Endpoint（エンドポイント）](/ja-jp/plugins/schema-definition/endpoint)[Agent(エージェント)](/ja-jp/plugins/schema-definition/agent)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * データ構造
  * メッセージの出力
  * 画像URL
  * リンク
  * テキスト
  * ファイル
  * JSON
  * 変数
  * ストリーミング変数
  * 出力変数の定義



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/policies/agreement/README

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

ユーザ規約

ユーザ規約

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約

    * [ユーザ規約](/ja-jp/policies/agreement/README)
    * [利用規約](https://dify.ai/terms)
    * [プライバシーポリシー](https://dify.ai/privacy)
    * [合規性レポートの入手方法](/ja-jp/policies/agreement/get-compliance-report)



ユーザ規約

# ユーザ規約

Copy page

### 

​

**利用規約とプライバシーポリシー**

Dify.AIをご利用になる際は、以下の利用規約とプライバシーポリシーをご確認ください。

  * [利用規約](https://dify.ai/terms)
  * [プライバシーポリシー](https://dify.ai/privacy)



### 

​

**コンプライアンス認証**

Dify.AIは、以下の認証を取得していました：

  * **SOC 2 Type I**
  * **SOC 2 Type II**
  * **ISO 27001:2022 Certification**
  * **GDPR DPA**



上記のコンプライアンス証明書のダウンロード方法および詳細については、以下のドキュメントをご覧ください。

## [合規性レポートの入手方法合規性レポートの入手方法](get-compliance-report.md)

* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/policies/agreement/README.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/policies/agreement%2FREADME.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[ライセンス](/ja-jp/policies/open-source)[利用規約](/ja-jp/policies/agreement/tos)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * 利用規約とプライバシーポリシー
  * コンプライアンス認証



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/policies/agreement/get-compliance-report

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

ユーザ規約

合規性レポートの入手方法

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約

    * [ユーザ規約](/ja-jp/policies/agreement/README)
    * [利用規約](https://dify.ai/terms)
    * [プライバシーポリシー](https://dify.ai/privacy)
    * [合規性レポートの入手方法](/ja-jp/policies/agreement/get-compliance-report)



ユーザ規約

# 合規性レポートの入手方法

Copy page

著者: Yongle, Allen

Dify.AI は、製品リリース当初から、世界中の個人開発者や企業ユーザーより、**Dify.AI が情報セキュリティおよびデータプライバシーのコンプライアンス要件を満たしているか** というお問い合わせを受けておりました。そのため、チームは製品設計の段階から業界標準を厳格に遵守し、情報セキュリティとデータプライバシーに関する包括的なコンプライアンス管理システムを段階的に構築してまいりました。

Dify.AI は、**SOC 2 Type I、SOC 2 Type II、ISO 27001:2022、** および **GDPR 認証** を正式に取得しており、これは製品がデータセキュリティ、プライバシー保護、およびコンプライアンスにおいて国際的な最先端基準を満たしていることを示しています。このマイルストーンは、ユーザーデータの安全性に対する Dify.AI の確固たるコミットメントをより明確に示すものです。

Difyのクラウド版をサプライヤーの安全評価にご利用の場合、**ページ右上の「コンプライアンス」** から必要なレポートをダウンロードし、Difyのコンプライアンス状況をご確認いただけます。

エンタープライズ版をご利用のお客様で、コンプライアンスレポートの証明書が必要な場合は、弊社担当までご連絡ください。入手のための手続きをご案内いたします。

### 

​

利用可能なコンプライアンス認証

チームのプランによって、ダウンロードおよび閲覧可能なコンプライアンス認証が異なります。

コンプライアンスレポート| Free / Sandbox| Professional| Team  
---|---|---|---  
SOC 2 Type I レポート| -| ✅| ✅  
SOC 2 Type II レポート| -| -| ✅  
ISO 27001: 2022 認証| -| -| ✅  
GDPR データ処理契約（DPA）| ✅| ✅| ✅  
  
> 現在のプランで必要なコンプライアンス認証が利用できない場合は、[料金ページ](https://dify.ai/pricing)からプランをアップグレードしてください。

以下では、さまざまなコンプライアンス認証レポートの入手方法について説明します。

#### 

​

SOC 2 Type I レポート

**SOC 2 Type I** レポートとは、第三者機関が特定の時点における組織のセキュリティ管理体制の設計と運用状況を評価する監査報告書です。**SOC 2（System and Organization Controls 2）** は、**安全性、可用性、処理の完全性、機密性、プライバシー** という 5 つの信頼性原則に基づいた、データ管理と保護に関する基準です。Type I レポートは、監査時点において、組織が関連基準を満たす適切な管理策を備えているかを評価するために用いられます。

**チームオーナーのみ** 、**右上メニューの「コンプライアンス」** から Dify の SOC 2 Type I レポートをダウンロードできます。

#### 

​

SOC 2 Type II レポート

**SOC 2 Type II** レポートとは、第三者機関が特定の期間における組織のセキュリティ管理体制の設計、運用状況、および有効性を評価する監査報告書です。SOC 2（**System and Organization Controls 2** ）は、**安全性、可用性、処理の完全性、機密性、プライバシー** という 5 つの信頼性原則に基づいた、データ管理と保護に関する基準です。Type II レポートは、組織のセキュリティ管理策が一定期間にわたってどのように機能していたかを詳細に示すもので、関係者が組織の機密データ管理が業界標準に継続的に準拠していることを確認するために役立ちます。

**チームオーナーのみ** 、**右上メニューの「コンプライアンス」** から Dify の SOC 2 Type II レポートをダウンロードできます。

#### 

​

ISO 27001:2022 認証

**ISO 27001:2022** 認証は、国際的に認められた **情報セキュリティ管理システム（ISMS）** に関する規格です。**ISO/IEC 27000 ファミリー規格** の一部であり、包括的なセキュリティ対策によって機密情報を保護します。ISO 27001:2022 は、組織が情報セキュリティ管理システムを確立、導入、維持、そして継続的に改善するための枠組みを提供するように設計されています。**2022年版** は、情報セキュリティ分野における最新のアップデートやベストプラクティスを反映し、現代のセキュリティ課題や技術進歩に対応しています。リスク管理とセキュリティコントロールを実施することで、企業の機密情報を体系的に管理し、情報の機密性、完全性、可用性を確保します。

**チームオーナーのみ** 、**右上メニューの「コンプライアンス」** から Dify の ISO 27001:2022 レポートをダウンロードできます。

#### 

​

GDPR データ処理契約

**データ処理契約（DPA）とは、一般データ保護規則（GDPR）に基づき、データ管理者とデータ処理者の間で締結される法的拘束力のある契約です。** GDPRは2018年5月に施行され、欧州連合（EU）におけるデータ保護の法的枠組みを確立し、EU居住者の個人データを処理する組織に適用されます。データ管理者が第三者であるデータ処理者に個人データの処理を委託する場合、両当事者がGDPRの義務を遵守し、データ主体の権利を保護するために、DPAを締結する必要があります。

DifyのDPAは、Dify.AIの公式サイトから **どなたでも** ダウンロードいただけます。

* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/policies/agreement/get-compliance-report.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20ompliance-rep&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/policies/agreement%2Fget-compliance-report.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[プライバシーポリシー](/ja-jp/policies/agreement/privacy)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * 利用可能なコンプライアンス認証
  * SOC 2 Type I レポート
  * SOC 2 Type II レポート
  * ISO 27001:2022 認証
  * GDPR データ処理契約



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/policies/open-source

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

ポリシー

ライセンス

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




ポリシー

# ライセンス

Copy page

Difyのコミュニティエディションは、追加条件付きのApache 2.0ベースのライセンスの下でオープンソース化されています。詳細については[LICENSE](https://github.com/langgenius/dify/blob/main/LICENSE)ファイルをご参照ください。

ライセンスに関する質問や問題がございましたら、[business@dify.ai](mailto:business@dify.ai)までお問い合わせください。

* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/policies/open-source.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20sou&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/policies%2Fopen-source.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[プラグイン](/ja-jp/learn-more/faq/plugins)[ユーザ規約](/ja-jp/policies/agreement/README)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/resources/about-dify/dify-brand-guidelines

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

Dify ブランドガイドライン

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

  * [用語集](/ja-jp/resources/termbase)


  * [Dify ブランドガイドライン](/ja-jp/resources/about-dify/dify-brand-guidelines)


  * [Dify ブランド使用条件](/ja-jp/resources/about-dify/dify-brand-usage-terms)



# Dify ブランドガイドライン

Copy page

Dify のアイデンティティは単なるロゴではありません。それは、思慮深い構築、システムレベルの明確性、そしてオープンなコラボレーションの表明です。 あなたが Dify エコシステムの一部として承認または認識されている場合、私たちが掲げる価値観を代表することになります。 Dify ブランドアセットを公式または関連する立場で使用することで、私たちのデザインシステムと製品哲学を守る責任を共有します。 Dify ブランドアセットの使用は、私たちのブランドガイドラインに準拠し、Dify ブランド使用規約に概説された原則と一致している必要があります。 明示的な許可なく、承認、パートナーシップ、または認証を暗示する使用は許可されていません。 誤用が発生した場合、Dify はいつでも使用権を取り消すことができます。

参照：[Dify ブランド使用規約](/ja-jp/resources/about-dify/dify-brand-usage-terms)。

## 

​

私たちのロゴ

## 

​

ロゴの使用

Dify ロゴは製品以上のものを意味します。それは信頼、明確性、技術的な信頼性を示します。 ブランドの完全性を維持するために、ガイドラインに従って使用する必要があります。 誤用や無造作な配置は、存在しない承認や提携を暗示する可能性があります。 承認されたコンテキストでのみ、慎重に使用してください。

### 

​

適切なロゴ使用の例

  * 公式パートナーとの共同ブランドビジュアルで
  * Dify がスポンサーまたは参加者であるイベント資料やページで
  * 他のツールと共に表示されるロゴのグループで（「ロゴガーデン」）
  * Dify テクノロジーを参照するドキュメント、プレゼンテーション、または統合で



## 

​

正しい色を使用する

可能な限り、公式の2トーンの Dify ロゴを使用してください。

このバージョンは、私たちのブランドにおける明確性と構造のバランスを最もよく表しています。

以下の場合に代替カラーバリエーションを使用できます：

  * 背景色がコントラストを制限する場合
  * 特定の印刷またはデジタル制限が適用される場合
  * レイアウトがモノクロまたは反転オプションを要求する場合



## 

​

読みやすさを保つ

視認性と明確性を確保するために、Dify ロゴは常に最小限の空白スペースで囲まれている必要があります。これにより、近くのテキスト、画像、またはその他のグラフィック要素からの視覚的な干渉を防ぎます。

  * 可能な限り、より多くのスペースを推奨します。これにより可読性が向上します。
  * ロゴを詰め込まないでください。このスペーシングを尊重することは、すべてのアプリケーションでその影響力と認識性を維持するために不可欠です。



## 

​

共同ブランディングガイダンス

Dify ロゴを別のブランドとペアリングする場合は、明確性とバランスを維持するために、ここに示す共同ブランディングレイアウトに常に従ってください。

  * 細い垂直分割線を使用して、Dify ロゴをパートナーブランドから分離します。
  * Dify とパートナーロゴ間の相対的な配置と比率を常に維持します。
  * レイアウトを再配置したり、配置を変更したり、要素を独立してスケーリングしたりしないでください。



## 

​

複数ロゴのロックアップガイドライン

Dify が2つ以上のパートナーロゴと共に表示される場合、明確性と視覚的秩序を確保するために、これらのルールに従ってください：

  * ロゴ間に分割線を使用しないでください。
  * すべてのロゴ間で一貫した均等なスペーシングを維持します。
  * イニシアチブがパートナー主導の場合、パートナーのロゴが最初に表示されるべきです。Dify を含む他のすべてのロゴは、アルファベット順に続きます。
  * すべてのロゴは同じ高さに視覚的に揃えられている必要があります。個々のマークをスケーリングまたは歪めないでください。
  * 各ブランドの公式色、十分な空白、および一貫したスペーシングを保持します。



## 

​

Dify パートナーバッジ

Dify パートナーバッジは、Dify との公式な関係を示すために使用されます。 内容が Dify の製品、統合、またはサポートに言及している限り、パートナーが所有するマーケティング資料、プレゼンテーション、ドキュメント、およびイベント資産に含めることができます。

  * デザインが乱雑に見えないように、最小限の空白スペースを確保してください。
  * バッジの色を変更しないでください。
  * ロゴの比率を変更しないでください。
  * バッジ内のテキストを変更または置換しないでください。
  * バッジをパートナーロゴよりも大きくしないでください。



## 

​

Powered by Dify バッジ

「Powered by Dify」バッジは、あなたのプロジェクト、製品、またはコンテンツが Dify のオープンソース機能またはプラットフォームサービスを統合していることを示すためのものです。

これは、ツールの出自を示す軽量な表示であり、公式な承認やパートナーシップを意味するものではありません。

### 

​

使用できる場所

  * Dify 機能を含むウェブサイト、アプリケーション、システム
  * オープンソースプロジェクトのドキュメント、READMEファイル、デモ、フッター
  * Dify の技術スタックを紹介する教育資料、プレゼンテーション、ブログ投稿、講演



### 

​

バッジ使用規則

  * Dify が提供する公式の「Powered by Dify」バッジを使用すること
  * バッジの色、タイポグラフィ、比率、文言を変更しないこと
  * バッジは明確に視認でき、歪みや圧縮がなく、視覚的に妨げとなる背景の上に配置しないこと



### 

​

使用制限

  * Dify からの承認、認証、または公式なパートナーシップを暗示しないこと
  * 事前の書面による許可なしに、商業的なマーケティング、有料トレーニング、または収益化されたコースにバッジを使用しないこと



## 

​

リソースをダウンロード

[Dify デザインキットをダウンロード](https://assets-docs.dify.ai/2025/05/5f547d3718bf32067849d9a83d9c92cf.zip)

* * *

© LangGenius, Inc. 無断転載を禁じます。Dify ブランド資産の無断使用は嚴禁されています。

* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/resources/about-dify/dify-brand-guidelines.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20brand-guideli&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/resources/about-dify%2Fdify-brand-guidelines.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[用語集](/ja-jp/resources/termbase)[Dify ブランド使用条件](/ja-jp/resources/about-dify/dify-brand-usage-terms)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * 私たちのロゴ
  * ロゴの使用
  * 適切なロゴ使用の例
  * 正しい色を使用する
  * 読みやすさを保つ
  * 共同ブランディングガイダンス
  * 複数ロゴのロックアップガイドライン
  * Dify パートナーバッジ
  * Powered by Dify バッジ
  * 使用できる場所
  * バッジ使用規則
  * 使用制限
  * リソースをダウンロード



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/resources/about-dify/dify-brand-usage-terms

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

Dify ブランド使用条件

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

  * [用語集](/ja-jp/resources/termbase)


  * [Dify ブランドガイドライン](/ja-jp/resources/about-dify/dify-brand-guidelines)


  * [Dify ブランド使用条件](/ja-jp/resources/about-dify/dify-brand-usage-terms)



# Dify ブランド使用条件

Copy page

これらのブランド使用条件（「規約」）は、LangGenius, Inc.（「Dify」、「私たち」、または「弊社」）が所有する商標、ロゴ、名称、デザイン、およびその他のブランド要素（総称して「ブランドアセット」）の適切な使用を規定しています。Dify ブランドアセットを使用することにより、あなたはこれらの規約に従うことに同意します。

* * *

## 

​

1\. 許可された使用（事前承認不要）

以下の場合、Dify ブランドガイドラインに従うことを条件に、事前承認なしに Dify ブランドアセットを使用できます：

### 

​

コミュニティとコンテンツ作成

  * Dify を参照または議論するためのブログ投稿、記事、ドキュメント、ソーシャルメディア、フォーラム、プレゼンテーション。
  * Dify の統合またはサポートを示すオープンソースプロジェクト（例：GitHub リポジトリ、README ファイル、コード例）で、プロジェクトが Dify と公式に提携しているか、Dify によって承認されていないことが明確である限り。
  * 教育的または情報提供目的での YouTube ビデオ、ポッドキャスト、開発者向けトーク。



### 

​

オープンソースプロジェクト

  * 非商用オープンソースプロジェクトで「Powered by Dify」を表示して、Dify の使用を認識することができます。
  * 公式の Dify ウェブサイトまたは GitHub リポジトリへのリンクが推奨されます。



### 

​

メディアとニュース報道

  * ジャーナリスト、ブロガー、およびメディアは、内容が事実上正確であり、Dify による承認またはスポンサーシップを暗示しない限り、ニュース記事またはレポートで Dify ブランドアセットを使用できます。



* * *

## 

​

2\. 制限された使用（承認必要）

以下の使用には、Dify からの事前書面承認が必要です：

### 

​

商業利用とマーケティング

  * Dify を商業製品またはサービスに統合するリセラー、パートナー、および SaaS プラットフォーム。
  * 広告、宣伝資料、または販売資料での Dify ブランドアセットの使用。
  * 公式の承認を示唆する有料トレーニング、コンサルティング、またはコースでの Dify ブランドアセットの使用。



### 

​

公式パートナーシップと承認

  * 明示的に承認されない限り、Dify による承認、認証、スポンサーシップ、またはパートナーシップを暗示する方法で Dify ブランドアセットを使用することはできません。
  * 事前承認なしに、Dify の「公式パートナー」または「認定プロバイダー」であると主張することはできません。



### 

​

グッズと物理的商品

  * 書面による許可なしに、T シャツ、ステッカー、ポスター、またはグッズで Dify ブランドアセットを使用することはできません。



### 

​

修正とブランドの組み合わせ

  * 色、フォント、比率、またはエフェクトの変更を含む、Dify ロゴの変更はできません。
  * Dify ロゴを他のロゴやシンボルと組み合わせて、新しいまたは複合的なマークを作成することはできません。



* * *

## 

​

3\. ブランド使用ガイドライン

Dify ブランドアセットを使用する際は、以下を含むブランドガイドラインに従う必要があります：

  * ロゴの完全性を維持する：ロゴを歪めたり、伸ばしたり、回転させたりしないでください。
  * 公式ロゴバージョンを使用する：非公式または古いバージョンを使用しないでください。
  * 十分なスペーシングを提供する：ロゴ周囲に明確な視覚的分離を確保してください。
  * 色を変更しない：ロゴは公式の Dify カラースキームで使用する必要があります。



* * *

## 

​

4\. 商標と著作権表示

  * “Dify” および関連するすべてのロゴとブランド要素は、LangGenius, Inc. の商標または登録商標です。
  * これらの規約は、あなたに所有権またはライセンス権を付与しません。Dify はブランドアセットに対するすべての権利を保持します。



* * *

## 

​

5\. 誤用と執行

  * Dify はいつでも使用権を取り消す権利を留保し、不適切に使用された場合、ブランドアセットの使用を停止するよう要求することがあります。
  * 許可されていないまたは誤解を招くブランドアセットの使用は、法的措置につながる可能性があります。



* * *

## 

​

6\. 許可を申請する方法

あなたの使用事例が承認を必要とする場合（例：商業利用、パートナーシップ、グッズ販売）、以下に申請を提出してください：[Business@dify.ai](mailto:business@dify.ai)

申請には以下を含める必要があります：

  * あなたの名前/会社名
  * Dify ブランドアセットをどのように使用する予定かの詳細な説明
  * 関連資料（例：モックアップ、ウェブサイトリンク）



* * *

## 

​

7\. ブランドの誤用を報告する

これらの規約に違反して Dify ブランドアセットが誤用されていると思われる場合（許可されていない商業利用、誤解を招く承認、偽造品など）、私たちに報告することができます。

報告を提出するには、以下の詳細情報を添えて [brand@dify.ai](mailto:brand@dify.ai) に連絡してください：

  * 問題の説明（例：許可されていない商業利用、誤解を招くブランディング、偽造品）
  * 関連証拠（例：スクリーンショット、リンク、ドキュメント）
  * あなたの連絡先情報（オプション、さらなる詳細が必要な場合）



Dify はすべての報告を審査し、必要に応じて適切な措置を講じます。これには法的執行や違反者に対する許可されていない使用の停止要求が含まれる場合があります。Dify ブランドの保護へのご協力に感謝します。

* * *

## 

​

8\. これらの規約の更新

Dify は定期的にこれらのブランド使用規約を更新する場合があります。変更はこのページに公開され、ブランドアセットを継続して使用することにより、最新版に同意することになります。

最新バージョン：2025/03/04

* * *

© LangGenius, Inc. すべての権利を保有します。Dify ブランドアセットの無断使用は固く禁じられています。

* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/resources/about-dify/dify-brand-usage-terms.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20brand-usage-te&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/resources/about-dify%2Fdify-brand-usage-terms.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[Dify ブランドガイドライン](/ja-jp/resources/about-dify/dify-brand-guidelines)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * 1\. 許可された使用（事前承認不要）
  * コミュニティとコンテンツ作成
  * オープンソースプロジェクト
  * メディアとニュース報道
  * 2\. 制限された使用（承認必要）
  * 商業利用とマーケティング
  * 公式パートナーシップと承認
  * グッズと物理的商品
  * 修正とブランドの組み合わせ
  * 3\. ブランド使用ガイドライン
  * 4\. 商標と著作権表示
  * 5\. 誤用と執行
  * 6\. 許可を申請する方法
  * 7\. ブランドの誤用を報告する
  * 8\. これらの規約の更新



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/resources/termbase

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

用語集

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

  * [用語集](/ja-jp/resources/termbase)


  * [Dify ブランドガイドライン](/ja-jp/resources/about-dify/dify-brand-guidelines)


  * [Dify ブランド使用条件](/ja-jp/resources/about-dify/dify-brand-usage-terms)



# 用語集

Copy page

## 

​

A

### 

​

エージェント (Agent)

環境情報に基づいて意思決定やタスク実行ができる自律型AIシステムです。Difyプラットフォームでは、エージェントは大規模言語モデルの理解能力と外部ツールとの対話能力を組み合わせ、情報検索、API呼び出し、コンテンツ生成など、単純なものから複雑なものまでの一連の操作を自動的に完了します。

### 

​

エージェンティックワークフロー (Agentic Workflow)

AIシステムが複数のステップを通じて自律的に複雑な問題を解決できるタスク編成方法です。例えば、エージェンティックワークフローは、まずユーザーの質問を理解し、次に知識ベースを照会し、計算ツールを呼び出し、最後に情報を統合して完全な回答を生成します。これらはすべて人間の介入なしに行われます。

### 

​

自動音声認識 (ASR, Automatic Speech Recognition)

人間の音声をテキストに変換する技術で、音声対話アプリケーションの基盤となります。この技術により、ユーザーはタイピングではなく話すことでAIシステムと対話でき、音声アシスタント、会議の文字起こし、アクセシビリティサービスなどのシナリオで広く使用されています。

## 

​

B

### 

​

思考の骨格 (BoT, Backbone of Thought)

大規模言語モデルの推論に主要な構造を提供する構造化された思考フレームワークです。学術論文の概要や決定木の骨格のように、複雑な問題に対処する際にモデルが明確な思考経路を維持するのに役立ちます。

## 

​

C

### 

​

チャンキング (Chunking)

長いテキストを小さなコンテンツブロックに分割する処理技術で、検索システムがより正確に関連情報を見つけることを可能にします。優れたチャンキング戦略は、コンテンツの意味的整合性と言語モデルのコンテキストウィンドウの制限の両方を考慮し、検索と生成の品質を向上させます。

### 

​

引用と帰属 (Citation and Attribution)

AIシステムが情報源を明確に示すことができる機能で、レスポンスの信頼性と透明性を高めます。システムが知識ベースのコンテンツに基づいて回答を生成する場合、参照されたドキュメント名、ページ番号、URLを自動的に注釈し、ユーザーが情報の出所を理解できるようにします。

### 

​

思考の連鎖 (CoT, Chain of Thought)

大規模言語モデルがステップバイステップの思考プロセスを表示するように導くプロンプト技術です。例えば、数学の問題を解く場合、モデルははじめに既知の条件をリストアップし、次に推論ステップに従って一つずつ解き、最後に結論に到達します。このプロセス全体が人間の思考に似ています。

## 

​

D

### 

​

ドメイン固有言語 (DSL, Domain-Specific Language)

特定のアプリケーションドメイン用に設計されたプログラミング言語または構成形式です。Dify DSLは、YAML形式に基づくアプリケーションエンジニアリングファイル標準で、モデルパラメータ、プロンプト設計、ワークフロー編成など、AIアプリケーションのさまざまな構成を定義するために使用され、非専門的な開発者でも複雑なAIアプリケーションを構築できるようにします。

## 

​

E

### 

​

抽出・変換・読み込み (ETL, Extract, Transform, Load)

データ処理の古典的なワークフロー：生データを抽出し、分析に適した形式に変換し、ターゲットシステムに読み込みます。AIドキュメント処理では、ETLはPDFからのテキスト抽出、フォーマットのクリーニング、コンテンツの分割、埋め込みベクトルの計算、最終的にベクトルデータベースへの読み込みを含む場合があり、RAGシステムの準備を整えます。

## 

​

F

### 

​

頻度ペナルティ (Frequency Penalty)

頻繁に出現する語彙の生成確率を下げることで出力の多様性を高めるテキスト生成制御パラメータです。値が高いほど、モデルは多様な語彙と表現を使用する傾向があります。値が0の場合、モデルは同じ語彙を再利用することを特に避けません。

### 

​

関数呼び出し (Function Calling)

大規模言語モデルが特定の関数をいつ呼び出す必要があるかを認識し、必要なパラメータを提供する能力です。例えば、ユーザーが天気について尋ねると、モデルは自動的に天気APIを呼び出し、正しいパラメータ形式（都市、日付）を構築し、APIの返す結果に基づいて応答を生成することができます。

## 

​

G

### 

​

一般的なチャンキングパターン (General Chunking Pattern)

文書を相互に独立したコンテンツブロックに分割するシンプルなテキスト分割戦略です。このパターンは、製品マニュアルや百科事典のエントリなど、構造が明確で段落が比較的独立している文書に適しており、各チャンクはコンテキストに大きく依存することなく独立して理解できます。

### 

​

思考のグラフ (GoT, Graph of Thought)

思考プロセスをネットワーク構造として表現し、概念間の複雑な関係を捉える方法です。線形の思考の連鎖とは異なり、思考のグラフは分岐、循環、複数経路の思考パターンを表現でき、複数の相互関連する要因を持つ複雑な問題の処理に適しています。

## 

​

H

### 

​

ハイブリッド検索 (Hybrid Search)

キーワードマッチングと意味検索の利点を組み合わせ、より包括的な検索結果を提供する検索方法です。例えば、「リンゴの栄養成分」を検索する場合、ハイブリッド検索は「リンゴ」と「栄養」のキーワードを含む文書だけでなく、「果物の健康価値」などの関連する意味概念を議論するコンテンツも見つけることができ、重み付け調整または再ランク付けを通じて最適な結果を選択します。

## 

​

I

### 

​

転置インデックス (Inverted Index)

各単語がどの文書に出現するかを記録する検索エンジンのコアデータ構造です。文書からコンテンツを見つける従来のインデックスとは異なり、転置インデックスは語彙から文書を見つけ、全文検索速度を大幅に向上させます。例えば、「人工知能」という用語のインデックスエントリは、この用語を含むすべての文書IDと位置をリストアップします。

## 

​

K

### 

​

キーワード検索 (Keyword Search)

特定の語彙を含む文書を見つける正確なマッチングに基づく検索方法です。この方法は計算効率が高く、製品モデル、固有名詞、特定のコマンドなど、ユーザーが見つけたい用語を明確に知っているシナリオに適していますが、同義語や関連する概念を使用して表現されたコンテンツを見逃す可能性があります。

### 

​

知識ベース (Knowledge Base)

AIアプリケーションで構造化された情報を保存し、モデルに専門知識の源を提供するデータベースです。Difyプラットフォームでは、知識ベースはさまざまな文書（PDF、Word、ウェブページなど）を含むことができ、処理されてAI検索に使用され、正確で根拠のある回答を生成するために使用されます。特にドメインエキスパートアプリケーションの構築に適しています。

### 

​

知識検索 (Knowledge Retrieval)

ユーザーの質問に最も関連する情報を知識ベースから見つけるプロセスであり、RAGシステムの重要な構成要素です。効果的な知識検索は、関連するコンテンツを見つけるだけでなく、返される情報量を制御し、モデルを妨げる可能性のある無関係なコンテンツを避けながら、正確で完全な回答を確保するのに十分な背景を提供します。

## 

​

L

### 

​

大規模言語モデル (LLM, Large Language Model)

大量のテキストで訓練され、人間の言語を理解し生成できるAIモデルです。現代のLLM（GPTシリーズ、Claudeなど）は、記事の作成、質問への回答、コードの作成、さらには推論も行うことができます。これらは様々なAIアプリケーションのコアエンジンであり、特に言語理解と生成を必要とするシナリオに適しています。

### 

​

ローカルモデル推論 (Local Model Inference)

クラウドサービスに依存せずに、ユーザー自身のデバイス上でAIモデルを実行するプロセスです。このアプローチは、より良いプライバシー保護（データがローカル環境を離れない）と低いレイテンシー（ネットワーク転送不要）を提供し、機密データの処理やオフライン作業を必要とするシナリオに適していますが、通常はローカルデバイスの計算能力によって制限されます。

## 

​

M

### 

​

サービスとしてのモデル (MaaS, Model-as-a-Service)

プロバイダーがAPIを通じて事前トレーニング済みモデルへのアクセスを提供するクラウドサービスモデルです。ユーザーはモデルのトレーニング、デプロイ、または保守について心配する必要はなく、単にAPIを呼び出して使用料を支払うだけで、AIアプリケーションの開発閾値とインフラコストを大幅に下げます。アイデアの迅速な検証やプロトタイプの構築に適しています。

### 

​

最大トークン数 (Max_tokens)

モデルが単一の応答で生成する最大文字数を制御するパラメータです。1つのトークンは約4文字または英単語の3/4に相当します。適切な最大トークン数を設定することで、回答の長さを制御し、過度に冗長な出力を避け、必要な情報の完全な表現を確保できます。例えば、簡単な要約は200トークンに設定される場合がありますが、詳細なレポートでは2000トークンが必要になる場合があります。

### 

​

メモリ (Memory)

AIシステムが過去のインタラクション情報を保存して使用し、複数ターンの会話を一貫して保つ能力です。効果的なメモリメカニズムにより、AIはコンテキスト参照を理解し、ユーザーの好みを記憶し、長期的な目標を追跡できるようになり、これによりパーソナライズされた継続的なユーザーエクスペリエンスを提供し、すでに提供された情報を繰り返し尋ねることを避けます。

### 

​

メタデータフィルタリング (Metadata Filtering)

ドキュメント属性情報（タイトル、作者、日付、分類タグなど）を利用してコンテンツをフィルタリングする技術です。例えば、ユーザーは特定の日付範囲内の技術文書に検索を制限したり、特定の部署のレポートのみを照会したりして、検索前に範囲を絞り込み、検索効率と結果の関連性を向上させることができます。

### 

​

マルチモーダルモデル (Multimodal Model)

テキスト、画像、音声などの複数種類の入力データを処理できるモデルです。これらのモデルは従来のAIの単一知覚限界を打破し、画像内容の理解、ビデオシーンの分析、音声感情の認識が可能で、より包括的な情報理解の可能性を創出し、クロスメディア理解を必要とする複雑なアプリケーションシナリオに適しています。

### 

​

マルチツール呼び出し (Multi-tool-call)

モデルが単一のレスポンスで複数の異なるツールを呼び出す能力です。例えば、「北京と上海の明日の天気を比較し、適切な服装を推奨する」というリクエストを処理する場合、モデルは両都市の天気APIを同時に呼び出し、返された結果に基づいて合理的な提案を提供し、複雑なタスクを処理する効率を向上させます。

### 

​

マルチパス検索 (Multi-path Retrieval)

複数の検索方法を通じて並行して情報を取得する戦略です。例えば、システムはキーワード検索、セマンティックマッチング、知識グラフクエリを同時に使用し、結果をマージしてフィルタリングすることで、情報検索のカバレッジと精度を向上させ、特に複雑または曖昧なユーザークエリの処理に適しています。

## 

​

P

### 

​

親子チャンキング (Parent-Child Chunking)

2レベルのコンテンツブロックを作成する高度なテキスト分割戦略：親ブロックは完全なコンテキストを保持し、子ブロックは正確なマッチングポイントを提供します。システムはまず子ブロックを使用して関連コンテンツの位置を特定し、次に対応する親ブロックを取得して完全な背景を提供し、検索精度とコンテキストの完全性のバランスを取り、研究論文や技術マニュアルなどの複雑な文書の処理に適しています。

### 

​

存在ペナルティ (Presence Penalty)

言語モデルがコンテンツを繰り返すことを防ぐパラメータ設定です。すでに出現した語彙の生成確率を下げることにより、モデルが新しい表現を探索することを奨励します。パラメータ値が高いほど、モデルが以前に生成したコンテンツを繰り返す可能性が低くなり、AI応答でよく見られる循環的な議論や問題の繰り返し説明を避けるのに役立ちます。

### 

​

事前定義モデル (Predefined Model)

AIベンダーによってトレーニングされ提供される既製モデルで、ユーザーは自分でトレーニングすることなく直接呼び出すことができます。これらのクローズドソースモデル（GPT-4、Claudeなど）は通常、大規模にトレーニングおよび最適化され、強力で使いやすく、迅速なアプリケーション開発や独立したトレーニングリソースを欠くチームに適しています。

### 

​

プロンプト (Prompt)

AIモデルに特定の応答を生成するよう導く入力テキストです。よく設計されたプロンプトは出力品質を大幅に向上させ、明確な指示、例の提供、フォーマット要件の設定などの要素を含みます。例えば、異なるプロンプトは同じモデルに学術記事、創造的なストーリー、または技術分析を生成するよう導くことができ、AI出力に影響を与える最も重要な要因の一つとなっています。

## 

​

Q

### 

​

Q&Aモード (Q&A Mode)

ドキュメントコンテンツに対して質問-回答のペアを自動生成する特殊なインデックス作成戦略で、「質問から質問」へのマッチングを実現します。ユーザーが質問すると、システムは意味的に類似した事前生成された質問を探し、対応する回答を返します。このモードは特にFAQコンテンツや構造化された知識ポイントに適しており、より正確な質問応答体験を提供します。

## 

​

R

### 

​

検索拡張生成 (RAG, Retrieval-Augmented Generation)

外部知識検索と言語生成を組み合わせた技術アーキテクチャです。システムはまず知識ベースからユーザーの質問に関連する情報を検索し、次にこの情報をコンテキストとして言語モデルに提供し、根拠のある正確な回答を生成します。RAGは言語モデルの限られた知識と幻覚問題を克服し、特に最新または専門的な知識を必要とするアプリケーションシナリオに適しています。

### 

​

推論と行動 (ReAct, Reasoning and Acting)

モデルが思考と操作の実行を交互に行うことができるAIエージェントフレームワークです。問題解決のプロセスでは、モデルはまず現在の状態を分析し、計画を立て、次に適切なツール（検索エンジン、計算機など）を呼び出し、ツールの返す結果に基づいて次のステップを考え、問題が解決されるまで思考-行動-思考のサイクルを形成します。これは複数のステップと外部ツールを必要とする複雑なタスクに適しています。

### 

​

再ランキング (ReRank)

予備検索結果に対して二次ソートを行い、最終結果の関連性を向上させる技術です。例えば、システムはまず効率的なアルゴリズムを通じて大量の候補コンテンツを迅速に検索し、次により複雑だが精密なモデルを使用してこれらの結果を再評価し並べ替え、最も関連性の高いコンテンツを前に配置することで、検索効率と結果品質のバランスを取ります。

### 

​

再ランキングモデル (Rerank Model)

検索結果とクエリの関連性を評価し再順序付けするために特別に設計されたモデルです。予備検索とは異なり、これらのモデルは通常より複雑なアルゴリズムを使用し、より多くの意味要素を考慮し、コンテンツがユーザーの意図にどれだけよく一致するかをより正確に判断できます。例えば、Cohere RerankやBGE Rerankerなどのモデルは検索や推薦システムの結果品質を大幅に向上させることができます。

### 

​

レスポンス形式 (Response_format)

プレーンテキスト、JSON、HTMLなど、モデル出力の構造タイプの指定です。特定のレスポンス形式を設定することで、AI出力がプログラムで処理しやすくなったり、他のシステムに統合しやすくなったりします。例えば、モデルにJSON形式で回答するよう要求すると、出力が一貫した構造を持つことが保証され、フロントエンドアプリケーションが直接解析して表示しやすくなります。

### 

​

リバースコーリング (Reverse Calling)

プラグインがプラットフォームと対話するための双方向メカニズムで、プラグインがプラットフォーム機能を積極的に呼び出すことを可能にします。Difyでは、これはサードパーティプラグインがAIから呼び出されるだけでなく、ワークフローのトリガーや他のプラグインの呼び出しなど、Difyのコア機能を返りに使用することもできることを意味し、システムの拡張性と柔軟性を大きく向上させます。

### 

​

検索テスト (Retrieval Test)

知識ベースの検索効果を検証する機能で、開発者がユーザークエリをシミュレートしシステムの返す結果を評価することを可能にします。このテストは開発者がシステムの検索能力の境界を理解し、見逃し検出、誤検出、関連性の低さなどの潜在的な問題を発見して修正するのに役立ち、RAGシステムを最適化するために不可欠なツールです。

## 

​

S

### 

​

スコア閾値 (Score Threshold)

検索結果をフィルタリングするための類似度閾値で、設定値を超えるスコアのコンテンツのみが返されます。適切な閾値を設定することで、無関係な情報がモデル生成を妨げることを避け、回答の正確性を向上させることができます。例えば、閾値が0.8（1.0満点中）に設定されている場合、高度に関連性の高いコンテンツのみが採用されますが、情報が不完全になる可能性があります。閾値を下げるとより多くのコンテンツが含まれますがノイズが入る可能性があります。

### 

​

セマンティック検索 (Semantic Search)

単純なキーワードマッチングではなく、テキストの意味の理解とマッチングに基づく検索方法です。ベクトル埋め込み技術を使用してテキストを数学的表現に変換し、クエリとドキュメント間の意味的類似性を計算します。この方法は、表現方法は異なるが意味が似ているコンテンツを見つけ、同義語やコンテキスト関係を理解し、さらには言語横断検索をサポートし、特に複雑または自然言語形式のクエリに適しています。

### 

​

セッション変数 (Session Variables)

複数ターンの対話コンテキスト情報を保存するメカニズムで、AIがコヒーレントな対話を維持することを可能にします。例えば、システムはユーザーの好み（「簡潔な回答」など）、アイデンティティ情報、または対話履歴状態を記憶し、繰り返しの問い合わせを避け、パーソナライズされた体験を提供します。Difyでは、開発者はこれらの変数を定義および管理し、ユーザーを本当に記憶するアプリケーションを構築することができます。

### 

​

音声からテキスト変換 (STT, Speech-to-Text)

ユーザーの音声入力をテキストデータに変換する技術です。この技術により、ユーザーはタイピングではなく話すことでAIシステムと対話でき、対話の自然さと利便性が向上し、特にモバイルデバイス、運転シナリオ、またはアクセシビリティアプリケーションに適しており、音声アシスタントやリアルタイム文字起こしアプリケーションの基盤となります。

### 

​

ストリームツール呼び出し (Stream-tool-call)

AIシステムが完全な回答が生成されるのを待たずに、応答を生成しながら外部ツールを呼び出すことができるリアルタイム処理モードです。このアプローチは複雑なタスクの応答速度を大幅に向上させ、ユーザー体験をよりスムーズにし、複数のツール呼び出しを必要とする対話シナリオに適しています。

### 

​

ストリーミングレスポンス (Streaming Response)

AIシステムがコンテンツをすべて生成し終わるのを待ってから一度に表示するのではなく、生成されたコンテンツをユーザーにリアルタイムで返す応答メカニズムです。このアプローチは特に長い回答に対するユーザーの待機体験を大幅に改善し、ユーザーは部分的なコンテンツをすぐに見て読み始めることができ、人間の会話における即時フィードバックに似たより自然な対話体験を提供します。

## 

​

T

### 

​

温度 (Temperature)

通常0-1の間で、言語モデル出力のランダム性を制御するパラメータです。温度が低い（0に近い）ほど、モデル出力はより確定的で保守的になり、高確率の語彙を好み、事実に基づく回答に適しています。温度が高い（1に近い）ほど、出力はより多様で創造的になり、創造的な執筆に適しています。例えば、天気予報では0.1の低温度を使用し、物語創作では0.8の高温度を使用する場合があります。

### 

​

テキスト埋め込み (Text Embedding)

テキストを数値ベクトルに変換するプロセスで、AIシステムが言語を理解し処理することを可能にします。これらのベクトルは語彙と文の意味特徴を捉え、コンピュータがテキスト間の類似性を測定し、関連コンテンツをクラスタリングし、マッチング情報を検索することを可能にします。異なる埋め込みモデル（OpenAIのtext-embedding-ada-002やCohereのembed-multilingualなど）は異なる言語やアプリケーションシナリオ向けに最適化されています。

### 

​

ツール呼び出し (Tool Calling)

AIシステムが外部機能を識別し使用する能力で、モデルの能力境界を大幅に拡張します。例えば、言語モデル自体はリアルタイムデータにアクセスできませんが、天気APIを呼び出すことで現在の天気情報を提供できます。データベース照会ツールを呼び出すことで最新の製品在庫を取得でき、計算機を呼び出すことで複雑な計算を実行でき、AIがトレーニングデータ範囲を超える問題を解決できるようになります。

### 

​

TopK

検索で返される結果の数を制御するパラメータで、類似度が最も高い上位K個のテキストフラグメントを保持するよう指定します。適切なTopK値の設定はRAGシステムのパフォーマンスに不可欠です：値が小さすぎると重要な情報を失う可能性があり、値が大きすぎるとノイズを招き言語モデルの処理負担を増やす可能性があります。例えば、簡単な質問ではTopK=3で十分かもしれませんが、複雑な質問では十分な背景を得るためにTopK=10が必要かもしれません。

### 

​

核サンプリング (TopP, Nucleus Sampling)

累積確率が閾値Pに達する最も可能性の高い語彙からのみ次の単語を選択するテキスト生成制御方法です。最高確率の単語を固定選択することや完全にランダムな選択とは異なり、TopPは確定性と創造性のバランスを取ります。例えば、TopP=0.9は、モデルが確率の合計が90%を占める語彙のみを考慮し、低確率のオプションを無視することを意味し、完全に予測可能な出力と過度にランダムなコンテンツの両方を避けます。

### 

​

思考の木 (ToT, Tree of Thought)

複数の推論経路を探索する思考方法で、モデルが異なる視点から問題を分析することを可能にします。人間の「もし…ならば…」という思考パターンに似ており、思考の木はモデルに複数の可能な思考分岐を生成させ、各分岐の実現可能性を評価し、最適な経路を選択して継続することを可能にします。これは試行錯誤や複数の可能性を考慮する必要がある複雑な問題を解決するのに特に適しています。

### 

​

テキスト音声変換 (TTS, Text-to-Speech)

書かれたテキストを自然な音声に変換する技術で、AIシステムが音声でユーザーとコミュニケーションすることを可能にします。現代のTTSシステムは人間の品質に近い自然な音声を生成でき、複数の言語、音調、感情表現をサポートし、オーディオブック、ナビゲーションシステム、音声アシスタント、アクセシビリティサービスで広く使用され、異なるシナリオやユーザーにより自然な対話体験を提供します。

## 

​

V

### 

​

ベクトルデータベース (Vector Database)

ベクトル埋め込みの保存と検索に特化したデータベースシステムで、効率的な意味検索のインフラストラクチャとして機能します。従来のデータベースとは異なり、ベクトルデータベースは高次元ベクトル類似度検索に最適化され、数百万のドキュメントから意味的に類似したコンテンツを迅速に見つけることができます。Pinecone、Milvus、Qdrantなどの一般的なベクトルデータベースは、RAGシステム、推薦エンジン、コンテンツ分析で重要な役割を果たしています。

### 

​

ベクトル検索 (Vector Retrieval)

テキストベクトル埋め込みの類似性に基づく検索方法で、セマンティック検索の技術的中核を形成します。システムはまずユーザークエリをベクトルに変換し、次に事前計算されたドキュメントベクトルで最も類似したコンテンツを見つけます。この方法は深い意味的関係を捉え、表現方法は異なるが意味が似ているコンテンツを見つけ、キーワード検索の限界を克服し、自然言語クエリや概念的な問題の処理に特に適しています。

### 

​

ビジョン機能 (Vision)

マルチモーダルLLMが画像を理解し処理する機能で、モデルがユーザーがアップロードした画像を分析し、テキストと組み合わせた応答を生成できるようにします。例えば、ユーザーは製品写真をアップロードして使用方法を問い合わせたり、メニュー写真をアップロードして翻訳を要求したり、グラフをアップロードしてデータトレンドの分析を依頼したりできます。この機能はAIアプリケーションシナリオを大幅に拡張し、対話をより直感的で多様化します。

## 

​

W

### 

​

ワークフロー (Workflow)

複雑なAIアプリケーションを複数の独立したノードに分解し、特定の順序で実行するタスク編成方法です。Difyプラットフォームでは、開発者は視覚的にワークフローを設計し、複数の処理ステップ（ユーザー入力処理、知識検索、マルチモデル連携、条件分岐など）を組み合わせて、複雑なビジネスロジックを処理できるAIアプリケーションを構築し、アプリケーション開発を柔軟かつ直感的にします。

* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/resources/termbase.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/resources%2Ftermbase.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[Dify ブランドガイドライン](/ja-jp/resources/about-dify/dify-brand-guidelines)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * A
  * エージェント (Agent)
  * エージェンティックワークフロー (Agentic Workflow)
  * 自動音声認識 (ASR, Automatic Speech Recognition)
  * B
  * 思考の骨格 (BoT, Backbone of Thought)
  * C
  * チャンキング (Chunking)
  * 引用と帰属 (Citation and Attribution)
  * 思考の連鎖 (CoT, Chain of Thought)
  * D
  * ドメイン固有言語 (DSL, Domain-Specific Language)
  * E
  * 抽出・変換・読み込み (ETL, Extract, Transform, Load)
  * F
  * 頻度ペナルティ (Frequency Penalty)
  * 関数呼び出し (Function Calling)
  * G
  * 一般的なチャンキングパターン (General Chunking Pattern)
  * 思考のグラフ (GoT, Graph of Thought)
  * H
  * ハイブリッド検索 (Hybrid Search)
  * I
  * 転置インデックス (Inverted Index)
  * K
  * キーワード検索 (Keyword Search)
  * 知識ベース (Knowledge Base)
  * 知識検索 (Knowledge Retrieval)
  * L
  * 大規模言語モデル (LLM, Large Language Model)
  * ローカルモデル推論 (Local Model Inference)
  * M
  * サービスとしてのモデル (MaaS, Model-as-a-Service)
  * 最大トークン数 (Max_tokens)
  * メモリ (Memory)
  * メタデータフィルタリング (Metadata Filtering)
  * マルチモーダルモデル (Multimodal Model)
  * マルチツール呼び出し (Multi-tool-call)
  * マルチパス検索 (Multi-path Retrieval)
  * P
  * 親子チャンキング (Parent-Child Chunking)
  * 存在ペナルティ (Presence Penalty)
  * 事前定義モデル (Predefined Model)
  * プロンプト (Prompt)
  * Q
  * Q&Aモード (Q&A Mode)
  * R
  * 検索拡張生成 (RAG, Retrieval-Augmented Generation)
  * 推論と行動 (ReAct, Reasoning and Acting)
  * 再ランキング (ReRank)
  * 再ランキングモデル (Rerank Model)
  * レスポンス形式 (Response_format)
  * リバースコーリング (Reverse Calling)
  * 検索テスト (Retrieval Test)
  * S
  * スコア閾値 (Score Threshold)
  * セマンティック検索 (Semantic Search)
  * セッション変数 (Session Variables)
  * 音声からテキスト変換 (STT, Speech-to-Text)
  * ストリームツール呼び出し (Stream-tool-call)
  * ストリーミングレスポンス (Streaming Response)
  * T
  * 温度 (Temperature)
  * テキスト埋め込み (Text Embedding)
  * ツール呼び出し (Tool Calling)
  * TopK
  * 核サンプリング (TopP, Nucleus Sampling)
  * 思考の木 (ToT, Tree of Thought)
  * テキスト音声変換 (TTS, Text-to-Speech)
  * V
  * ベクトルデータベース (Vector Database)
  * ベクトル検索 (Vector Retrieval)
  * ビジョン機能 (Vision)
  * W
  * ワークフロー (Workflow)



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/workshop/basic/README

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

初級編

初級編

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

    * [初級編](/ja-jp/workshop/basic/README)
    * [ゼロからAI画像生成アプリの構築方法](/ja-jp/workshop/basic/build-ai-image-generation-app)
    * [AIエージェントの実践：個人のオンライン旅行アシスタントの構築方法](/ja-jp/workshop/basic/travel-assistant)
  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




初級編

# 初級編

Copy page

Difyのハンドオン工房へようこそ！このチュートリアルは、Difyをゼロから学び始めたい初心者のために設計されています。プログラミングやAIに関する知識の有無にかかわらず、私たちはDifyの核心概念とその使い方を、詳細を省略することなく段階的に学べるよう、丁寧にガイドします。

私たちは、一連の実験を通じてDifyの理解を深めるお手伝いをします。各実験には、詳細な手順と説明が含まれており、簡単に追うことができ、内容をしっかりと把握することができます。実験を通じて知識を学び、実践を重ねることで、Difyに関する包括的な理解を徐々に築いていきましょう。

事前の知識は一切必要ありません！最も基本的な概念から始めて、徐々により高度なトピックへと進んでいきます。完全な初心者の方でも、ある程度のプログラミング経験がある方でも、Difyを学ぶために必要なすべてをこのチュートリアルで提供します。

一緒に探索の旅を始め、新しいDifyの可能性を探求していきましょう！

* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/workshop/basic/README.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/workshop/basic%2FREADME.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[バージョン管理](/ja-jp/guides/management/version-control)[ゼロからAI画像生成アプリの構築方法](/ja-jp/workshop/basic/build-ai-image-generation-app)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/workshop/basic/build-ai-image-generation-app

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

初級編

ゼロからAI画像生成アプリの構築方法

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

    * [初級編](/ja-jp/workshop/basic/README)
    * [ゼロからAI画像生成アプリの構築方法](/ja-jp/workshop/basic/build-ai-image-generation-app)
    * [AIエージェントの実践：個人のオンライン旅行アシスタントの構築方法](/ja-jp/workshop/basic/travel-assistant)
  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




初級編

# ゼロからAI画像生成アプリの構築方法

Copy page

> 著者：Steven Lynn. Difyのテクニカルライター

画像生成技術の発展に伴い、Dall-e、Flux、Stable Diffusionなどの優れた画像生成ツールが多数登場しています。

本記事では、Difyを使用してAI画像生成アプリを開発する方法について学びます。

### 

​

プロンプトの書き方

プロンプトはエージェントの核心であり、出力結果に直接的な影響を与えます。一般的に、プロンプトが具体的であればあるほど、出力も向上しますが、過度に長いプロンプトは逆効果になることもあります。

プロンプトを調整する技術は「プロンプトエンジニアリング」と呼ばれています。

この実験では、プロンプトエンジニアリングを完全に習得していなくても心配する必要はありません。後で段階的に学ぶことができます。

まずは、最もシンプルなプロンプトから始めましょう：
    
    
    ユーザーのプロンプトに従って、指定された内容を stability_text2image を使用して描画してください。

ユーザーがコマンドを入力するたびに、エージェントはこのシステムレベルの指示を理解し、ユーザーの描画タスクを実行する際には、stabilityというツールを呼び出すことを認識します。

例：女の子が開いた本を持っているのを描く。

### 

​

プロンプトを書くのかしなくても可能ですか？もちろん可能です！

プロンプトの上部にある**自動** をクリックしてください。

**指示** に要件を入力し、**自動** をクリックします。右側に生成されたプロンプトがAIによって作成されます。

ただし、プロンプトについての理解を深めるためには、初期段階ではこの機能に頼るべきではありません。

## 

​

発表

右上の公開ボタンをクリックし、公開後に**Run** を選択して、オンラインで実行されるエージェント用のWebページを取得します。

このWebページのURLをコピーして、友人と共有することができます。

## 

​

質問1：生成された画像のスタイルを指定する方法は？

ユーザーの入力コマンドにスタイル指示を追加することができます。例えば：「アニメスタイルで、女の子が開いた本を描いてください。」

ただし、デフォルトのスタイルをアニメスタイルに設定したい場合は、システムプロンプトにその旨を追加することができます。なぜなら、システムプロンプトはユーザーコマンドが実行されるたびに認識され、優先されるからです。
    
    
    ユーザーのプロンプトに従って、指定された内容をstability_text2imageを使用して描画してください。画像はアニメスタイルです。

## 

​

質問2：特定のユーザーからのリクエストを拒否する方法は？

多くのビジネスシナリオでは、いくつかの不適切なコンテンツの出力を避ける必要がありますが、LLMはしばしば「無知」であり、出力コンテンツが間違っていてもユーザーの指示に従います。このように、モデルが間違ったコンテンツを作り出してユーザーに答えようとする現象を「モデルの幻覚」と呼びます。したがって、必要に応じてモデルがユーザーのリクエストを拒否できることが重要です。

さらに、ユーザーがビジネスに関係のないコンテンツを要求することもあり、エージェントがそのようなリクエストを拒否する必要があります。

異なるプロンプトをカテゴリ別に整理するために、マークダウン形式を使用して、エージェントに不適切なコンテンツを拒否する方法を教えるプロンプトを「制約」のセクションに記述します。もちろん、このフォーマットは標準化のためのものであり、独自のフォーマットを持つこともできます。
    
    
    ## タスク
    ユーザーのプロンプトに従って、指定された内容をstability_text2imageを使用して描画してください。画像はアニメスタイルです。
    
    ## 制約
    もしユーザーが描画に関係のないコンテンツを要求した場合、「申し訳ありませんが、その内容は理解できません。」と返答してください。

例えば、今夜の夕食は何ですか？と聞いてみましょう。 

よりフォーマルなビジネスシナリオでは、感情的な単語ライブラリを使用してユーザーのリクエストを拒否することができます。

**Add Feature - Content Moderation** にキーワード「dinner」を追加します。ユーザーがそのキーワードを入力すると、エージェントアプリは「申し訳ありませんが、その内容は理解できません。」と出力します。

* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/workshop/basic/build-ai-image-generation-app.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20-ai-image-generation-&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/workshop/basic%2Fbuild-ai-image-generation-app.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[初級編](/ja-jp/workshop/basic/README)[AIエージェントの実践：個人のオンライン旅行アシスタントの構築方法](/ja-jp/workshop/basic/travel-assistant)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * プロンプトの書き方
  * プロンプトを書くのかしなくても可能ですか？もちろん可能です！
  * 発表
  * 質問1：生成された画像のスタイルを指定する方法は？
  * 質問2：特定のユーザーからのリクエストを拒否する方法は？



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/workshop/basic/travel-assistant

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

初級編

AIエージェントの実践：個人のオンライン旅行アシスタントの構築方法

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

    * [初級編](/ja-jp/workshop/basic/README)
    * [ゼロからAI画像生成アプリの構築方法](/ja-jp/workshop/basic/build-ai-image-generation-app)
    * [AIエージェントの実践：個人のオンライン旅行アシスタントの構築方法](/ja-jp/workshop/basic/travel-assistant)
  * 中級編




##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




初級編

# AIエージェントの実践：個人のオンライン旅行アシスタントの構築方法

Copy page

> 著者: Steven Lynn。Difyのテクニカルライター。

前回の実験[AI画像生成アプリの構築方法](/ja-jp/workshop/basic/build-ai-image-generation-app)では、エージェントの概念を初めて理解し、システムのプロンプトワードを試してみました。

今回は、エージェントのプロンプトワードをさらに深く探求し、より体系的なプロンプトワードの書き方を学んでいきます。

### 

​

今回の学ぶポイント

  * Difyを使用したエージェントの構築方法
  * 構造化されたプロンプトワードの書き方
  * 変数の使用方法



### 

​

1\. 準備

エージェントを新しく作成する前に、以下の手順を完了させてください：

  * [Dify](https://dify.ai)に登録とログインします。ローカルに展開したい場合は、[コミュニティ版 - Docker Composeデプロイ](/ja-jp/getting-started/install-self-hosted/docker-compose)を参照してください。
  * 少なくとも1つのモデルプロバイダを設定します（Difyは200回のOpenAIメッセージクレジットを提供していますが、実験を円滑に進行させるためには、独自にLLMのAPIキーを設定することをお勧めします）。



### 

​

2\. ツールの設定

#### 

​

Google

オンライン旅行アシスタントを構築するには、ネットワークに接続された検索エンジンを参考資料として使用する必要があります。この記事では、Googleを例に説明します。

もちろん、他の検索エンジン、例えば[Bing](/ja-jp/guides/model-configuration/load-balancing)や、AI駆動の[Perplexity](/ja-jp/guides/model-configuration/schema)を使用することも可能です。

Difyが提供するGoogleツールはSerpAPIに基づいており、事前にSerpAPIのAPIキー管理ページにアクセスしてAPIキーを申請し、`Dify - ツール`の該当箇所に貼り付ける必要があります。

具体的な手順は以下の通りです：

  1. SerpAPIのAPIキーを追加：



[SerpAPI - API Key](https://serpapi.com/manage-api-key)にアクセスし、まだ登録していない場合は登録ページにリダイレクトされます。

SerpAPIは1か月に100回の無料呼び出しを提供しており、この実験を完了するのに十分です。追加クレジットが必要な場合は、残高を追加するか、他のオープンソースのソリューションを使用できます。

  2. **Dify - ツール - Google** に移動：



`認可`に進むをクリックし、APIキーを入力して保存します。

#### 

​

webscraper

この実験では、特定のウェブページからコンテンツを抽出するためのスクレイピングツールが必要ですが、Difyは組み込みのツールを提供しているため、追加の設定は不要です。

#### 

​

Wikipedia

目的地の知識を正確に紹介するために、Wikipediaは非常に良い情報源です。Difyにもこのツールが組み込まれており、追加の設定は不要です。

### 

​

3\. エージェントの構築

まず、空の`アプリ - エージェント`を作成を選択します。

ツールとして`Google`、`webscraper`、`Wikipedia`を追加して有効にします。

### 

​

4\. **サンプル出力**

サンプル出力は必須ではありませんが、エージェントに期待する出力の形式を示す参考になります。

以下は旅行アシスタントのサンプル出力です：
    
    
    ## サンプル
    
    ### 詳細な旅行計画
    
    **ホテルのおすすめ**
    1. ケンジントンホテル（詳細はこちら：www.doylecollection.com/hotels/the-kensington-hotel）
       - 評価：4.6⭐
       - 価格：1泊約350ドル
       - 紹介：摂政時代の連棟住宅に位置し、南ケンジントン駅まで徒歩5分、ヴィクトリア＆アルバート博物館まで徒歩10分の優雅なホテルです。
    
    2. レンブラントホテル（詳細はこちら：www.sarova-rembrandthotel.com）
       - 評価：4.3⭐
       - 価格：1泊約130ドル
       - 紹介：1911年に建てられた元ハロッズ百貨店のアパートで、現代的なホテルはヴィクトリア＆アルバート博物館の向かいにあり、南ケンジントン駅（ヒースロー空港行き直通）まで徒歩5分です。
    
    **1日目 - 到着と落ち着き**
    - **午前**：空港に到着。冒険の旅の始まりです！弊社の代表が空港でお迎えし、スムーズなチェックインをサポートいたします。
    - **午後**：ホテルにチェックインし、少し休んでエネルギーを回復します。
    - **夜**：周辺の宿泊施設を散策し、地元の雰囲気に浸ってください。近くの飲食店を見つけて、初めての楽しい夕食をお楽しみください。
    
    **2日目 - 文化と自然の旅**
    - **午前**：世界でもトップクラスの学府である帝国カレッジから1日をスタートしましょう。キャンパスツアーをお楽しみください。
    - **午後**：自然史博物館（その魅力的な展示で知られています）またはヴィクトリア＆アルバート博物館（芸術とデザインを称える）を訪れる選択肢があります。その後、静かなハイドパークでリラックスし、蛇形湖でボートに乗ることもできます。
    - **夜**：地元の料理を探索しましょう。伝統的なイギリスのパブで夕食をお召し上がりいただくことをお勧めします。
    
    **追加サービス：**
    - **コンシェルジュサービス**：滞在中に、レストランの予約、チケット購入、交通手配、特別なリクエストへの対応を行うコンシェルジュサービスをご利用いただけます。
    - **24時間サポート**：旅行中に発生する可能性のある問題や要望に対応するため、24時間対応のサポートを提供しています。
    
    楽しい旅を！豊かな経験と素晴らしい思い出でいっぱいになりますように！

### 

​

問題1：ユーザー入力の規範化方法

通常、私たちがエージェントに入力する内容は自然言語ですが、自然言語の欠点の一つはその規範化が難しいことです。時には、エージェントにとって不要な情報や価値のない情報が含まれている可能性があります。この場合、変数を導入することで入力を規範化することができます。

Difyは現在、`短文`、`段落`、`ドロップダウンオプション`、`数値`、`APIベースの変数`といった種類の変数をサポートしています。

本実験では、`短文`タイプの変数を選択するだけで十分です。

**変数** の中から適切な変数タイプを選ぶことで、ユーザーに目的地、旅行日数、予算を尋ねることができます。

変数キー| 変数タイプ| フィールド名| 必須  
---|---|---|---  
destination| 短文| 目的地| はい  
day| 短文| 旅行日数| はい  
budget| 短文| 旅行予算| はい  
  
注意が必要なのは、`変数キー`、つまり変数の名前は、大文字小文字の英字、数字、アンダースコアのみをサポートしている点です。`フィールド名`は、ユーザーが見ることのできるヒントの内容です。

変数を追加した後、ユーザーはアプリ開発者の意図に従って必要な背景情報をアプリに提供できるようになります。その結果は以下のようになります：

* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/workshop/basic/travel-assistant.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20l-assist&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/workshop/basic%2Ftravel-assistant.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[ゼロからAI画像生成アプリの構築方法](/ja-jp/workshop/basic/build-ai-image-generation-app)[ファイルアップロードを使用した記事理解アシスタントの構築方法](/ja-jp/workshop/intermediate/article-reader)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * 今回の学ぶポイント
  * 1\. 準備
  * 2\. ツールの設定
  * Google
  * webscraper
  * Wikipedia
  * 3\. エージェントの構築
  * 4\. サンプル出力
  * 問題1：ユーザー入力の規範化方法



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/workshop/intermediate/article-reader

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

中級編

ファイルアップロードを使用した記事理解アシスタントの構築方法

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編

    * [ファイルアップロードを使用した記事理解アシスタントの構築方法](/ja-jp/workshop/intermediate/article-reader)
    * [チャットストリームエージェントを使用した Twitter アカウントの分析方法](/ja-jp/workshop/intermediate/twitter-chatflow)



##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




中級編

# ファイルアップロードを使用した記事理解アシスタントの構築方法

Copy page

> 著者: Steven Lynn。Difyのテクニカルライター。

Difyでは、ナレッジベースツールを利用して、エージェントが大量のテキストコンテンツから正確な情報を取得することが可能です。しかし、多くの場合、理解する必要があるローカルファイルはそれほど大きくないため、ナレッジベースを使用する必要はありません。このような場合には、ファイルアップロード機能を活用して、LLMがローカルファイルをコンテキストとして理解できるようにします。

本実験では、資料理解アシスタントを例に取り上げます。このアシスタントは、アップロードされたドキュメントに基づいてユーザーに質問を行い、論文などの資料を読みながらの理解をサポートします。

### 

​

今回の学ぶポイント

  * ファイルアップロード機能
  * Chatflowの基本操作
  * プロンプトの作成
  * イテレーションの使用
  * 文書抽出器とリスト操作ノード



### 

​

**前提条件**

DifyでChatflowを作成し、モデルプロバイダーを追加して、十分な残高があることを確認してください。

### 

​

**ノードの追加**

この実験では、以下の4つのノードが必要です：開始ノード、文書抽出器ノード、LLMノード、返信ノード。

### 

​

**開始ノード**

開始ノードでは、ファイル変数を追加する必要があります。Difyの0.10.0バージョンでは、ファイルのアップロード機能をサポートしており、ファイルを変数として追加できます。

ファイルのアップロードに関する詳細なドキュメントは、こちらを参照してください：[ファイルアップロード](/ja-jp/guides/workflow/file-upload)

開始ノードにファイル変数を追加し、サポートされているファイルタイプの中でドキュメントにチェックを入れる必要があります。

一部の読者は、システム変数に`sys.files`が存在することに気づくかもしれません。この変数は、ユーザーがダイアログボックスでアップロードしたファイルやファイルリストを示します。

自分でファイル変数を作成することとの違いは、この機能がファイルのアップロードを行い、アップロードされたファイルのタイプを設定し、対話中に新しいファイルをアップロードするたびにこの変数が上書きされる点です。

ビジネスシーンに応じて、適切なファイルアップロード方法を選択してください。

### 

​

**テキスト抽出ツール**

LLMはファイルを直接読み取ることができません。これは、多くのユーザーがファイルアップロード機能を初めて使用する際に抱く誤解であり、ファイルを変数としてLLMノードに適用すればよいと考えがちですが、実際にはLLMが読み取る内容は何もありません。

そのため、Difyではテキスト抽出ツールを導入しており、このノードはファイル変数からテキストを抽出し、テキスト形式の変数を出力します。

開始ノードのファイル変数を入力として、テキスト抽出ツールはドキュメント形式のファイルをテキスト形式の変数に変換します。

### 

​

**LLM**

この実験では、構造抽出ノードと問題提起ノードの2つのLLMノードを設計する必要があります。

#### 

​

構造抽出

構造抽出ノードは、元文書から文章の構造を抽出し、重要な内容を要約することができます。

ヒントの内容は以下の通りです：
    
    
    以下の記事を読み、タスクを実行してください
    {{文書抽出器の結果の変数}}
    
    #### タスク
    
    - **主要目標**：記事の構造を包括的に解析すること。
    - **目標**：各部分の内容を詳細に説明すること。
    - **要求**：可能な限り詳細に分析すること。
    - **制限**：特定の形式の制限はないが、解析の整理と論理性を維持する必要があります。
    - **期待される出力**：各部分の主要な内容と役割を含む、記事の構造の詳細な解析。
    
    # 推論の手順
    
    - **推論部分**：記事を注意深く読み、その構造を識別し解析します。
    - **結論部分**：各部分の具体的な内容と役割を提供します。
    
    # 出力形式
    
    - **解析形式**：各部分は見出し形式でリストアップされ、その後に詳細な説明が続きます。
    - **構造形式**：Markdownを使用し、可読性を向上させます。
    - **具体的な説明**：導入、本文、結論、引用など、各部分の内容と役割について。
    
    # サンプル出力
    
    ## サンプル記事の解析
    
    ### 導入
    - **内容**：研究の背景、目的、重要性を紹介します。
    - **役割**：読者の注意を引き、記事のコンテキストを提供します。
    
    ### 方法
    - **内容**：研究の具体的な方法や手順、実験設計、データ収集、分析技術を説明します。
    - **役割**：読者に研究の科学性と再現性を理解させます。
    
    ### 結果
    - **内容**：研究の主な発見とデータを示します。
    - **役割**：研究結論の根拠を提供します。
    
    ### 議論
    - **内容**：結果の意義を説明し、他の研究と比較し、改善の可能性を提案します。
    - **役割**：読者に結果の広範な影響と将来の研究の可能性を理解させます。
    
    ### 結論
    - **内容**：研究の主な発見と貢献を要約します。
    - **役割**：記事の中核情報を強調し、明確な結論を提供します。
    
    ### 引用
    - **内容**：記事で引用されているすべての文献をリストアップします。
    - **役割**：さらなる読書のリソースを提供し、学術的誠実性を確保します。
    
    # 備考
    
    - **境界条件**：記事の構造が典型的でない場合（たとえば、特定の部分が欠落している場合や余分な部分がある場合など）、解析でこれらの特殊な状況を明示する必要があります。
    - **重要な考慮事項**：解析時には記事の論理性と整合性に注意し、各部分の内容が記事全体の目標と一致していることを確認してください。

#### 

​

問題提起

問題提起ノードは、構造抽出ノードが要約した内容から記事の問題を抽出し、読者が読む中で問いかけるのを支援します。

ヒントは以下の通りです：
    
    
    以下の記事を読み、タスクを実行してください
    {{構造抽出の出力}}
    
    # タスク
    
    - **主要目標**：上記の内容を包括的に読み、各部分に可能な限り多くの問題を提起すること。
    - **要求**：意義深く、価値のある問題を提起すること。
    - **制限**：特定の制限はありません。
    - **期待される出力**：各部分に関連する一連の問題、それぞれが深い考察と価値を持つ必要があります。
    
    # 推論手順
    
    - **推論部分**：記事全体を網羅的に読み、各部分の内容を分析し、各部分が引き起こす潜在的な問題を考えます。
    - **結論部分**：意義深く、価値のある問題を提起し、深い考察を促します。
    
    # 出力形式
    
    - **形式**：それぞれの問題を個別の行にし、番号でリストアップします。
    - **内容**：導入、背景、方法、結果、議論、結論など、記事の各部分に関連する問題を提起します。
    - **数量**：可能な限り多く、ただし各問題は意義深く、価値のあるものである必要があります。
    
    # 備考
    
    - **境界条件**：記事の特定の部分の内容が少ない場合、問題の数量や深さを適宜調整することができますが、各問題は考察に値するものである必要があります。
    - **重要な考慮事項**：問題が読者を記事の内容を深く理解し、表面的な疑問にとどまらず、深い考察を促すことを確実にしてください。

## 

​

**問題1：複数のアップロードファイルの処理**

複数のアップロードファイルを処理するためには、イテレーションノードを使用する必要があります。

イテレーションノードは、一般的なプログラミング言語のwhileループに似ていますが、Difyでは条件制限がなく、**入力変数は`array`型（リスト）のみ使用できます**。これは、Difyがリスト内のすべての項目を実行するからです。

そのため、開始ノードのファイル変数を`array`型に調整する必要があります。つまり、ファイルリストに変更します。

開始ノードの後にイテレーションノードを追加し、入力変数と出力変数を設定します。イテレーションノード内では、各ループで実行する内容を設定します。この部分は前述の内容と完全に一致します。

## 

​

**問題2：特定のファイルのみを処理する**

問題1において、Difyはすべてのファイルを処理してからループを終了するため、一部のファイルだけを操作したい場合があります。この問題に対処するために、ファイルリストをフィルタリングする必要があります。Difyでは、リストに対して操作を行うノードを **「リスト操作」** と呼びます。リスト操作は、ファイルリストだけでなく、すべての`array`型変数に対して適用できます。

例えば、ドキュメントタイプのファイルのみを分析し、処理するファイルをファイル名でソートすることができます。

イテレーションノードの前にリスト操作を追加し、**フィルタ条件** や**ソート** を調整し、その後、イテレーションノードの入力をリスト操作ノードの出力に変更します。

* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/workshop/intermediate/article-reader.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20le-rea&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/workshop/intermediate%2Farticle-reader.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[AIエージェントの実践：個人のオンライン旅行アシスタントの構築方法](/ja-jp/workshop/basic/travel-assistant)[チャットストリームエージェントを使用した Twitter アカウントの分析方法](/ja-jp/workshop/intermediate/twitter-chatflow)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * 今回の学ぶポイント
  * 前提条件
  * ノードの追加
  * 開始ノード
  * テキスト抽出ツール
  * LLM
  * 構造抽出
  * 問題提起
  * 問題1：複数のアップロードファイルの処理
  * 問題2：特定のファイルのみを処理する



Assistant

Responses are generated using AI and may contain mistakes.


---

# URL: https://docs.dify.ai/ja-jp/workshop/intermediate/twitter-chatflow

[Dify Docs home page](/)

日本語

Search...

Ask AI

  * [Blog](https://dify.ai/blog)
  * [Dify](https://cloud.dify.ai)
  * [Dify](https://cloud.dify.ai)



Search...

Navigation

中級編

チャットストリームエージェントを使用した Twitter アカウントの分析方法

[ドキュメント](/ja-jp/introduction)[プラグイン開発](/plugin-dev-ja/0111-getting-started-dify-plugin)[APIアクセス](/api-reference/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8/%E3%83%81%E3%83%A3%E3%83%83%E3%83%88%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%80%81%E4%BF%A1)[リソース](/ja-jp/resources/termbase)

##### 入門

  * Difyへようこそ

  * [クラウドサービス](/ja-jp/getting-started/cloud)
  * Dify コミュニティ版

  * [Dify Premium](/ja-jp/getting-started/dify-premium)
  * [Dify 教育版](/ja-jp/getting-started/dify-for-education)
  * [APIアクセス](/ja-jp/openapi-api-access-readme)



##### マニュアル

  * モデルの設定

  * アプリ・オーケストレーション

  * ワークフロー

  * ナレッジベース

  * アプリ公開

  * アノテーション

  * モニタリング

  * 拡張

  * コラボレーション

  * 管理




##### ハンドオン工房

  * 初級編

  * 中級編

    * [ファイルアップロードを使用した記事理解アシスタントの構築方法](/ja-jp/workshop/intermediate/article-reader)
    * [チャットストリームエージェントを使用した Twitter アカウントの分析方法](/ja-jp/workshop/intermediate/twitter-chatflow)



##### コミュニティ

  * [支援を求める](/ja-jp/community/support)
  * [貢献者になる](/ja-jp/community/contribution)
  * [ドキュメントへの貢献](/ja-jp/community/docs-contribution)



##### プラグイン

  * [はじめに](/ja-jp/plugins/introduction)
  * クイックスタート

  * [プラグイン管理方法](/ja-jp/plugins/manage-plugins)
  * スキーマ仕様

  * ベストプラクティス

  * プラグインの公開

  * [よくある質問](/ja-jp/plugins/faq)



##### 開発

  * バックエンド

  * モデルの統合

  * 移行




##### もっと読む

  * 活用事例

  * さらに読む

  * よくある質問




##### ポリシー

  * [ライセンス](/ja-jp/policies/open-source)
  * ユーザ規約




中級編

# チャットストリームエージェントを使用した Twitter アカウントの分析方法

Copy page

> 著者：Steven Lynn. Difyのテクニカルライター

## 

​

はじめに

Difyでは、WebページをLLM（大規模言語モデル）が読み取れるMarkdown形式に変換するためのクローラーツール、例えばJinaを利用できます。

最近、[wordware.ai](https://www.wordware.ai/)が、クローラーを使ってソーシャルメディアをデータ収集し、LLM分析用の面白いアプリケーションを開発できることを教えてくれました。このアプリケーションは、特にデータ分析や洞察を提供するために設計されています。

しかし、かつてTwitterとして知られていた「X」は、2023年2月2日以降、無料のAPIアクセスを提供しなくなり、それに続いてクローリング対策を強化しました。そのため、JinaのようなツールはXのコンテンツに直接アクセスすることができなくなっています。

> 2023年2月9日から、Twitter APIの無料アクセスは終了し、v2およびv1.1のサポートも行われなくなります。代わりに、有料の基本プランが提供されます。 🧵
> 
> — Developers (@XDevelopers) [February 2, 2023](https://twitter.com/XDevelopers/status/1621026986784337922?ref_src=twsrc%5Etfw)

幸いなことに、DifyにはHTTPツールがあり、これを使用して外部のクローリングツールにHTTPリクエストを送信できます。それでは、始めていきましょう！

## 

​

**前提条件**

### 

​

Crawlbaseの登録

Crawlbaseは、ビジネスや開発者向けに設計されたデータクローリングとスクレイピングのプラットフォームです。このツールを使うことで、X、Facebook、Instagramなどのソーシャルメディアプラットフォームからデータを収集できます。

登録は以下のリンクから行えます：[crawlbase.com](https://crawlbase.com)

### 

​

Difyのローカル展開

DifyはオープンソースのLLMアプリケーション開発プラットフォームで、クラウドサービスを利用するか、docker composeを使用してローカルに展開できます。

この記事では、ローカル展開を希望しない方のために、無料のDify Cloudサンドボックスアカウントをこちらから登録する方法を紹介します：<https://cloud.dify.ai/signin>。

Dify Cloud Sandboxのユーザーは、200の無料クレジットを取得できます。これは、200のGPT-3.5メッセージまたは20のGPT-4メッセージに相当します。

以下は、Difyを展開するための簡単な手順です：

#### 

​

Difyをクローン
    
    
    git clone https://github.com/langgenius/dify.git

#### 

​

**Difyを起動**
    
    
    cd dify/docker
    cp .env.example .env
    docker compose up -d

### 

​

LLMプロバイダーの設定

アカウント設定にて、モデルプロバイダーを設定してください：

## 

​

チャットフローの作成

それでは、チャットフローの作成を始めましょう。

`最初から作成`をクリックして、新しいフローの作成を開始します：

初期化されたチャットフローは以下のようになります：

## 

​

チャットフローにノードを追加

### 

​

開始ノード

開始ノードでは、チャットの最初にシステム変数を追加できます。このプロセスでは、TwitterユーザーのIDを文字列型の変数として使用します。変数名を`id`としましょう。

開始ノードをクリックして、新しい変数を追加します：

### 

​

コードノード

[Crawlbaseのドキュメント](https://crawlbase.com/docs/crawling-api/scrapers/#twitter-profile)によれば、次のノードで使用する変数`url`は`https://twitter.com/`に`ユーザーID`を加えた形にする必要があります。例えば、Elon MuskのユーザーIDの場合は`https://twitter.com/elonmusk`となります。

ユーザーIDを完全なURLに変換するためには、以下のPythonコードを使用して、プレフィックス`https://twitter.com/`とユーザーIDを結合します：
    
    
    def main(id: str) -> dict:
        return {
            "url": f"https://twitter.com/{id}"
        }

セキュリティ上の観点から、トークン値を平文で直接入力することは避けるべきです。これは推奨されるベストプラクティスではありません。実際、Difyの最新バージョンでは、トークン値を**環境変数** に設定できるようになっています。`env`をクリックして`Add Variable`を選択し、トークン値を設定すると、ノードに平文が表示されなくなります。

あなたのCrawlbase APIキーについては、[こちら](https://crawlbase.com/dashboard/account/docs)で確認できます。

`/`を入力することで、APIキーを簡単に変数として挿入できます。

このノードが正しく動作するか確認するために、ノードの開始ボタンをタップしてください：

### 

​

LLMノード

さて、Crawlbaseによってスクレイピングされた結果を分析し、コマンドを実行するためにLLMを使用できます。

値`context`はHTTPリクエストノードからの`body`でなければなりません。

以下はサンプルのシステムプロンプトです。

## 

​

テスト実行

`プレビュー`をクリックしてテスト実行を開始し、`id`にTwitterユーザーIDを入力してください。

例えば、Elon Muskのツイートを分析し、彼の口調で地球温暖化についてのツイートを書きたいと思います。

これはElonらしいですか？笑

右上隅にある`公開`をクリックして、あなたのWebサイトに追加してください。

楽しんでください！

## 

​

最後に…

### 

​

他のX(Twitter)クローラー

この記事では、Crawlbaseを紹介しました。これはおそらく利用可能な最も安価なTwitterクローラーサービスですが、時々ユーザーのツイートの内容を正しくスクレイピングできないことがあります。

以前に紹介した[wordware.ai](http://wordware.ai)が使用しているTwitterクローラーサービスは**Tweet Scraper V2** ですが、ホストされているプラットフォーム**apify** のサブスクリプションは月額49ドルです。

## 

​

リンク

  * [X@dify_ai](https://x.com/dify_ai)
  * DifyのGitHubリポジトリ：<https://github.com/langgenius/dify>



* * *

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/workshop/intermediate/twitter-chatflow.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%95%8F%E9%A1%8C%3A%20er-chatf&body=%23%23%20%E5%95%8F%E9%A1%8C%E3%81%AE%E8%AA%AC%E6%98%8E%0A%3C%21--%20%E7%99%BA%E8%A6%8B%E3%81%97%E3%81%9F%E5%95%8F%E9%A1%8C%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AB%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%23%23%20%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%AA%E3%83%B3%E3%82%AF%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/workshop/intermediate%2Ftwitter-chatflow.mdx%0A%0A%23%23%20%E6%8F%90%E6%A1%88%E3%81%95%E3%82%8C%E3%82%8B%E5%A4%89%E6%9B%B4%0A%3C%21--%20%E7%89%B9%E5%AE%9A%E3%81%AE%E5%A4%89%E6%9B%B4%E6%A1%88%E3%81%8C%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AF%E3%80%81%E3%81%93%E3%81%93%E3%81%A7%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84%20--%3E%0A%0A%3C%21--%20%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%AE%E5%93%81%E8%B3%AA%E5%90%91%E4%B8%8A%E3%81%AB%E3%81%94%E5%8D%94%E5%8A%9B%E3%81%84%E3%81%9F%E3%81%A0%E3%81%8D%E3%81%82%E3%82%8A%E3%81%8C%E3%81%A8%E3%81%86%E3%81%94%E3%81%96%E3%81%84%E3%81%BE%E3%81%99%EF%BC%81%20--%3E)

Was this page helpful?

YesNo

[ファイルアップロードを使用した記事理解アシスタントの構築方法](/ja-jp/workshop/intermediate/article-reader)[支援を求める](/ja-jp/community/support)

[x](https://x.com/dify_ai)[github](https://github.com/langgenius/dify-docs)[linkedin](https://www.linkedin.com/company/langgenius)

[Powered by Mintlify](https://mintlify.com/preview-request?utm_campaign=poweredBy&utm_medium=referral&utm_source=docs.dify.ai)

On this page

  * はじめに
  * 前提条件
  * Crawlbaseの登録
  * Difyのローカル展開
  * Difyをクローン
  * Difyを起動
  * LLMプロバイダーの設定
  * チャットフローの作成
  * チャットフローにノードを追加
  * 開始ノード
  * コードノード
  * LLMノード
  * テスト実行
  * 最後に…
  * 他のX(Twitter)クローラー
  * リンク



Assistant

Responses are generated using AI and may contain mistakes.


---

